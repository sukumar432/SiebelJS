void 0===SiebelAppFacade.SCOrderEntryAttachmentAppletPR&&(SiebelJS.Namespace("SiebelAppFacade.SCOrderEntryAttachmentAppletPR"),define("siebel/custom/SelectComfort/SCOrderEntryAttachmentAppletPR",["siebel/jqgridrenderer","siebel/custom/SelectComfort/SCSalesOrder360Markup"],function(){function e(e){SiebelAppFacade.SCOrderEntryAttachmentAppletPR.superclass.constructor.apply(this,arguments)}function r(e){var t="",r=e.length;for(i=0;i<r;i++)t+='                                <tr id="attach'+(i+1)+'">',t+='                                    <td><a href="javascript:void(0)" id="attfilenamedrilldown">'+e[i].OrderFileName+"</td>",t+="                                    <td>"+e[i].OrderFileSize+"</td>",t+="                                    <td>"+e[i].OrderFileExt+"</td>",t+="                                    <td>"+e[i].OrderFileDate+"</td>",t+='                                    <td class="comments-col" id="attachments'+(i+1)+'"><textarea name="detdes" class="SC-input no-padding" id="attcomment'+(i+1)+'">'+e[i].OrderComments+"</textarea></td>",t+='                                    <td><img src="images/custom/delete-red.png" class="so-add-cart attachment_del_360" id="attachmentdel'+(i+1)+'"></td>',t+="                                </tr>";$("#sc-attachments-Rcd").html(t)}function a(e){var t="",i=e.length;t+='<ul class="menu">';for(var r=0;r<i;r++)t+='<li class="items overflow" title="'+e[r].OrderFileName+'"><img src="images/custom/delete.png" class="attachmentitem" id="attachments'+(r+1)+'">'+e[r].OrderFileName+"</li>";t+='<li class="attachment_list" id="SC-add-new-Attach"> ADD ATTACHMENT   </li>',t+="</ul>",$("#SC-Attachment-list").html(t)}var n,l,d;return SiebelAppFacade.SCOrderEntryAttachmentAppletPR=(SiebelJS.Extend(e,SiebelAppFacade.JQGridRenderer),e.prototype.Init=function(){SiebelAppFacade.SCOrderEntryAttachmentAppletPR.superclass.Init.apply(this,arguments)},e.prototype.ShowUI=function(){SiebelAppFacade.SCOrderEntryAttachmentAppletPR.superclass.ShowUI.apply(this,arguments);var e=this.GetPM();l=SiebelApp.S_App.GetActiveView().GetAppletMap()["Order Entry - Attachment Applet"].GetPModel().Get("GetFullId"),d=l[l.length-1];e=e.Get("GetRecordSet");"SC Sales Order 360 Degree View OUI"==(n=SiebelApp.S_App.GetActiveView().GetName())?r(e):"SC Create Sales Order View OUI"!=n&&"SC Order Entry - Payment View Sales OUI"!=n||a(e),$(document).on("click",".attachmentitem,.attachment_del_360",function(){$("#SC-SO-Delete-att").modal({backdrop:"static"}),$("#SC-SO-Delete-att").css({display:"flex","justify-content":"center","align-items":"center"}),$(".modal-backdrop").css("background","#ffffff"),clickedid=this.id,"SC Sales Order 360 Degree View OUI"==n?clickedid=clickedid.split("l"):"SC Create Sales Order View OUI"!=n&&"SC Order Entry - Payment View Sales OUI"!=n||(clickedid=clickedid.split("s")),clickedid=clickedid[1]}),$(document).on("click","#SC-delete-yes-att",function(){$("#SC-SO-Delete-att").modal("hide"),$("#SC-SO-Delete-att").css({display:"","justify-content":"","align-items":""}),$("body").trigger("Custom.Start"),setTimeout(function(){var e;e=window.confirm,window.confirm=function(){return!!arguments[0].includes("Are you sure you want to delete the")||e.apply(this,arguments)},$("#s_"+d+"_l tr#"+clickedid).trigger("click"),SiebelApp.S_App.GetActiveView().GetAppletMap()["Order Entry - Attachment Applet"].InvokeMethod("DeleteRecord"),$("#list_item").trigger("click"),$("body").trigger("Custom.End")},500)}),$(document).on("click","#SC-delete-no-att",function(){$("body").trigger("Custom.Start"),setTimeout(function(){var e;$("#SC-SO-Delete-att").modal("hide"),$(".SC-SO-add-popup").css({display:"","justify-content":"","align-items":""}),e=window.confirm,window.confirm=function(){return!arguments[0].includes("Are you sure you want to delete the")&&e.apply(this,arguments)},$("body").trigger("Custom.End")},1e3)}),$(document).on("click","#SC-add-new-Attach,#sc-new-attachment",function(){var e=this.id,t=$("#"+l).find(".siebui-applet-buttons").find("input").attr("id");SiebelJS.Log(t),$("#"+t).trigger("click"),"SC-add-new-Attach"==e&&$("#list_item").trigger("click")}),$(document).on("click","#list_item",function(){$("#SC-Attachment-list").toggle()})},e.prototype.BindData=function(e){SiebelJS.Log("in Bind data"),SiebelAppFacade.SCOrderEntryAttachmentAppletPR.superclass.BindData.apply(this,arguments),SiebelJS.Log("Bind Data");var t=this.GetPM().Get("GetRecordSet");"SC Sales Order 360 Degree View OUI"==(n=SiebelApp.S_App.GetActiveView().GetName())?r(t):"SC Create Sales Order View OUI"!=n&&"SC Order Entry - Payment View Sales OUI"!=n||a(t),$(document).on("focusout","#SC-Order-att-table tr",function(){var e=$(this).attr("id");e=(e=e.split("h"))[1],$("#s_"+d+"_l tr#"+e).trigger("click");e=document.getElementById("attcomment"+e).value;SiebelApp.S_App.GetActiveView().GetAppletMap()["Order Entry - Attachment Applet"].GetBusComp().SetFieldValue("OrderComments",e),SiebelApp.S_App.GetActiveView().GetAppletMap()["Order Entry - Attachment Applet"].InvokeMethod("WriteRecord")})},e.prototype.BindEvents=function(){SiebelAppFacade.SCOrderEntryAttachmentAppletPR.superclass.BindEvents.apply(this,arguments);var i=this.GetPM();$(document).on("click","#attfilenamedrilldown",function(){var e=(e=$(this).closest("tr").prop("id").split("h"))[1];SiebelJS.Log(e);var t=$("#"+l).find(".ui-jqgrid-bdiv table").attr("id");SiebelJS.Log(t),$("#"+t+" #"+e).trigger("click"),i.ExecuteMethod("OnDrillDown","OrderFileName",e)}),$(document).click(function(e){$(e.target).closest("#list_item, #SC-Attachment-list, .attachment_div").length||$("#SC-Attachment-list").hide()})},e.prototype.EndLife=function(){SiebelAppFacade.SCOrderEntryAttachmentAppletPR.superclass.EndLife.apply(this,arguments),recordset=null},e),"SiebelAppFacade.SCOrderEntryAttachmentAppletPR"}));