/****************************************************
	Created By: SCHERKU
	Purpose:  SC SALES EFFICIENCY OPEN UI
	Created Date:
	Modified Date: 

****************************************************/
if (typeof(SiebelAppFacade.SCiPadSalesOrder360DegreeViewPR) === "undefined") {

    SiebelJS.Namespace("SiebelAppFacade.SCiPadSalesOrder360DegreeViewPR");
    define("siebel/custom/SelectComfort/SCiPadSalesOrder360DegreeViewPR", ["siebel/viewpr", "siebel/phyrenderer", "siebel/custom/SelectComfort/SC_OUI_Methods", "siebel/custom/SelectComfort/SCSalesOrder360Markup", "siebel/custom/SelectComfort/SC_OUI_Definitions", "siebel/custom/SelectComfort/SC_OUI_Markups", "siebel/custom/SelectComfort/bootstrap.min", "siebel/custom/SelectComfort/jquery.validate.min", "siebel/custom/SelectComfort/SCErrorCodes"],

        function() {
            SiebelAppFacade.SCiPadSalesOrder360DegreeViewPR = (function() {
                var pm = "",
                    Appletid = "",
                    Appletidlineitems = "",
                    scUpdatedPin = "Y",
                    LoginId = "",
                    Responsibility = "",
                    paymentStatusArray, payementMethodArray, DriverLicenceStateArray, ExpirationYearArray, ExpirationMonthArray, ProductTypeCode = "",
                    paymentlineitems = "",
                    PaymentdetailsPM = "",
                    AttdetailsPM = "",
                    HDSRPM = "",
                    appletSeqHDSR = "",
                    AppletidHDSR = "",
                    appletSeq = "",
                    appletSeqlineitems = "",
                    recordset = "",
                    userposition = "",
                    controlset = "",
                    headermarkup = "",
                    mainmarkup = "",
                    popupmarkup = "",
                    Salesordermarkup = "",
                    i = 0,
                    Lineitemrecords = "",
                    LineitemrecordsPM = "",
                    paymenthistory = "",
                    linedetailssmarkup = "",
                    delpayrowid = "",
                    deletepopupmarkup = "",
                    paymenthistorydmarkup = "",
                    sctablemarkup = "",
                    k = 0,
                    OrderDetailPMinstance = "",
                    OrderDetailrecords = "",
                    Paymentdetails_BC = "",
                    pinids = [],
                    User_pinnedIds_Loc = [];
                var pm = "",
                    Appletid = "",
                    Appletidlineitems = "",
                    LoginId = "",
                    Responsibility = "",
                    PaymentdetailsPM = "",
                    appletSeq = "",
                    appletSeqlineitems = "",
                    recordset = "",
                    controlset = "",
                    headermarkup = "",
                    mainmarkup = "",
                    popupmarkup = "",
                    Salesordermarkup = "",
                    i = 0,
                    Lineitemrecords = "",
                    LineitemrecordsPM = "",
                    paymenthistory = "",
                    linedetailssmarkup = "",
                    delpayrowid = "",
                    deletepopupmarkup = "",
                    paymenthistorydmarkup = "",
                    sctablemarkup = "",
                    k = 0,
                    OrderDetailPMinstance = "",
                    Order_BC = "",
                    HoldReasonArray = "",
                    statusArray = "",
                    SCStoreNumber = "",
                    storenumber = "",
                    LineItems_RS = "";
                var LineNumber = true,
                    PartNumber = true,
                    QuantityRequested = true,
                    Fulfillment_Status_Code = true,
                    ShipMethod = true,
					sATPDATE=true,
                    PaymentMethod = true,
                    PaymentDate = true,
                    SCPaymentStatus = true,
                    TransactionAmount = true,
                    SCDate = true,
                    RecordId = true,
                    EmployeeLogin = true,
                    EmployeeId = true;
                var dateopened = true,
                    ordernumber = true,
                    srnumber = true,
                    HDstatus = true,
                    HDPlannedstartDate = true,
                    HDStartDate = true,
                    HDrescheduled = true,
                    Hdrescheduledreason = true,
                    attachmentname = true,
                    sizeatt = true,
                    typeatt = true,
                    modifiedatt = true,
                    commentsatt = true;
                var SCOUIMethods = SiebelJS.Dependency("SiebelApp.SC_OUI_Methods");
                var SCOUIMarkups = SiebelJS.Dependency("SiebelApp.SC_OUI_Markups");
                var SCOUIDefinitions = SiebelJS.Dependency("SiebelApp.SC_OUI_Definitions");
                var ErrorCodesfn = SiebelJS.Dependency("SiebelApp.SCErrorCodes");
                var SCSalesOrder = SiebelJS.Dependency("SiebelApp.SCSalesOrder360Markup");
                var SiebelConstant = SiebelJS.Dependency("SiebelApp.Constants");
                var sP2PEFlag = SiebelApp.S_App.GetProfileAttr('P2PEFlag');
                var divisions = {
                    "pay-pin": "Payment-Details-Applet",
                    "hr-pin": "HomeDelivery-SR-Applet",
                    "att-pin": "Attachment-Details-Applet",
                    "md-pin": "Manual-Discounts-Applet"
                };
                var appletNames = {
                        "pay-pin": "payementdetails",
                        "hr-pin": "HDSR",
                        "att-pin": "attachmentdetails",
                        "md-pin": "manualdiscounts"
                    },
                    POSorderRegArray = new Array;
                /*var bootstrapTooltip = $.fn.tooltip.noConflict();
                $.fn.bstooltip = bootstrapTooltip;*/
                var hideRevison = "Y",
                    orderId, sLogUserNamePinids, sLogUserNamePos, scprimaryDT;
                //cache - control : public , max-age =31356000
                //header('Cache-Control:public max-age=31356000, must-revalidate');
                var VRcptemailchngflg = "N";
                var VPrimaryEmail = "";
                var VPrimarEmailID = "";

                function SCiPadSalesOrder360DegreeViewPR(pm) {
                    SiebelAppFacade.SCiPadSalesOrder360DegreeViewPR.superclass.constructor.apply(this, arguments);
                    //header('Cache-Control:public max-age=31356000, must-revalidate');
                }

                SiebelJS.Extend(SCiPadSalesOrder360DegreeViewPR, SiebelAppFacade.ViewPR);

                SCiPadSalesOrder360DegreeViewPR.prototype.Init = function() {
                    SiebelAppFacade.SCiPadSalesOrder360DegreeViewPR.superclass.Init.apply(this, arguments);
                    localStorage.setItem('whitescreen', 0);
                    $('#CommunicationPanelContainer').css("padding-top", "77px");
                    $("#_sweview").hide();
                }

                SCiPadSalesOrder360DegreeViewPR.prototype.ShowUI = function() {
                    $(".whitescreentimer").remove();
                    $("#custommaskoverlay").hide();
                    $("#_sweview").show();
                    SiebelAppFacade.SCiPadSalesOrder360DegreeViewPR.superclass.ShowUI.apply(this, arguments);
                    //hiding tool tip.
                    $('div[title="Line Items"]').attr("title", "");
                    pinids = [];
                    User_pinnedIds_Loc = [];
                    Lineitemrecords = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Line Item List Applet (Sales) OUI"].GetPModel().GetRenderer().GetPM().Get("GetRecordSet");
                    LineitemrecordsPM = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Line Item List Applet (Sales) OUI"].GetPModel().GetRenderer().GetPM();
                    OrderDetailPMinstance = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetPModel().GetRenderer().GetPM();
                    OrderDetailrecords = OrderDetailPMinstance.Get("GetRecordSet");
                    HDSRPM = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Field Service List Applet OUI"].GetPModel().GetRenderer().GetPM();
                    PaymenthistoryPM = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Payment History List Applet OUI"].GetPModel().GetRenderer().GetPM();

                    PaymentdetailsPM = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Payments List Applet OUI"].GetPModel().GetRenderer().GetPM();
                    AttdetailsPM = SiebelApp.S_App.GetActiveView().GetAppletMap()["Order Entry - Attachment Applet"].GetPModel().GetRenderer().GetPM();
                    ManualDiscountsPM = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Line Item Manual Discount List Applet OUI"].GetPModel().GetRenderer().GetPM();
                    Paymentdetails_BC = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Payments List Applet OUI"].GetBusComp();
                    Appletid = PaymentdetailsPM.Get("GetFullId");
                    SiebelJS.Log("Appletid" + Appletid);
                    appletSeq = Appletid[Appletid.length - 1];
                    SiebelJS.Log("appletSeq" + appletSeq);
                    Appletidlineitems = LineitemrecordsPM.Get("GetFullId");
                    appletSeqlineitems = Appletidlineitems[Appletidlineitems.length - 1];
                    Appletid = PaymentdetailsPM.Get("GetFullId");
                    SiebelJS.Log("Appletid" + Appletid);
                    appletSeq = Appletid[Appletid.length - 1];
                    SiebelJS.Log("appletSeq" + appletSeq);
                    Appletidlineitems = LineitemrecordsPM.Get("GetFullId");
                    appletSeqlineitems = Appletidlineitems[Appletidlineitems.length - 1];
                    AppletidHDSR = HDSRPM.Get("GetFullId");
                    appletSeqHDSR = AppletidHDSR[AppletidHDSR.length - 1];
                    /*var scorderSrchSpec = [],
                        scorderSortSpec = [];
                    scorderSrchSpec[0] = "[Type]= 'SAP_SO_HEADER_DELIV_BLOCK' and [Active] = 'Y'";
                    scorderSortSpec[0] = "Order By";
                    scorderSrchSpec[1] = "[Type]= 'FS_ORDER_STATUS' and [Active] = 'Y'";
                    scorderSortSpec[1] = "Order By";
                    scorderSrchSpec[2] = "[Type]= 'FS_ORDER_STATUS' and [Active] = 'Y' and [Name]='In Progress'";
                    scorderSortSpec[2] = "";
                    scorderSrchSpec[3] = "[Type]= 'FS_ORDER_STATUS' and [Active] = 'Y' and [Name]='Submitted'";
                    scorderSortSpec[3] = "";
                    scorderSrchSpec[4] = "[Type]= 'FS_ORDER_STATUS' and [Active] = 'Y' and [Name]='Closed'";
                    scorderSortSpec[4] = "";
                    scorderSrchSpec[5] = "[Type]= 'FS_ORDER_STATUS' and [Active] = 'Y' and [Name]='Cancelled'";
                    scorderSortSpec[5] = "";
                    scorderSrchSpec[6] = "[Type]= 'FS_ORDER_STATUS' and [Active] = 'Y' and [Name]='Complete'";
                    scorderSortSpec[6] = "";
                    scorderSrchSpec[7] = "[Type]= 'FS_ORDER_STATUS' and [Active] = 'Y' and [Name]='Booked'";
                    scorderSortSpec[7] = "";
                    scorderSrchSpec[8] = "[Type]= 'FS_ORDER_STATUS' and [Active] = 'Y' and [Name]='Payment In Progress'";
                    scorderSortSpec[8] = "";
                    scorderSrchSpec[9] = "[Type]= 'FS_ORDER_STATUS' and [Active] = 'Y' and [Name]='Oracle Error'";
                    scorderSortSpec[9] = "";
                    scorderSrchSpec[10] = "[Type]= 'FS_ORDER_STATUS' and [Active] = 'Y' and [Name]='Hold'";
                    scorderSortSpec[10] = "";
                    scorderSrchSpec[11] = "[Type]= 'FS_ORDER_STATUS' and [Active] = 'Y' and [Name]='Siebel Error'";
                    scorderSortSpec[11] = "";
                    scorderSrchSpec[12] = "[Type]= 'PROD_CD' and [Active] = 'Y' and [Name]='Promotion'";
                    scorderSortSpec[12] = "";
					scorderSrchSpec[13] = "[Type]= 'FUNDRQ_STATUS' and [Active] = 'Y'";
                    scorderSortSpec[13] = "";
					scorderSrchSpec[14] = "[Order By] >= 1 and [Order By] <= 52 and [Type]= 'SC_DRIVER_LICENCE_STATE' and [Active] = 'Y'";
                    scorderSortSpec[14] = "";
					scorderSrchSpec[15] = "[Type]= 'PAYMENT_METHOD_CODE' and [Active] = 'Y'";
                    scorderSortSpec[15] = "Order By";
					scorderSrchSpec[16] = "[Type]= 'SC_PAYMENT_MONTH_NUMBER' and [Active] = 'Y'";
                    scorderSortSpec[16] = "";
					scorderSrchSpec[17] = "[Type]= 'SC_PAYMENT_YEAR' and [Active] = 'Y'";
                    scorderSortSpec[17] = "";
					
					SCOUIMethods.SCSetLoVs(scorderSrchSpec, scorderSortSpec);*/
                    //SCOUIMethods.SCGetProfileAttr("Login Name,SC Primary Division Sub Type,SC Store Number,MachineInfo,SC Primary Division Name,SC Store User");

                    HoldReasonArray = SCOUIMethods.SCGetOrderLoVs("[Type]= 'SAP_SO_HEADER_DELIV_BLOCK' and [Active] = 'Y'");
                    statusArray = SCOUIMethods.SCGetOrderLoVs("[Type]= 'FS_ORDER_STATUS' and [Active] = 'Y'");

                    $("#_swescrnbar").hide();
                    $("#_swethreadbar").hide();
                    $(".siebui-button-toolbar").hide();
                    $("#_sweappmenu").hide();
                    $("#s_vctrl_div").hide(); //hides vertical pane
                    var changedShowNumber = "N";
                    scUpdatedPin = "Y";
                    LoginId = SCOUIMethods.SCGetProfileAttrValue("Login Name");
                    SiebelJS.Log("LoginId" + LoginId);
                    Responsibility = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Payment Detail Applet - Admin OUI"].GetBusComp().GetFieldValue("SC Payment Admin User Flag");
                    SiebelJS.Log("Responsibility" + Responsibility);
                    //var userresponsbility=theApplication().GetProfileAttrAsList("User Responsibilities");
                    //SiebelJS.Log("responsbility"+userresponsbility);	
                    //function for mainmarkup
                    mainmarkup = SCSalesOrder.SalesOrder360Markup();

                    //hiding view
                    var a = "";
                    a = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Field Service List Applet OUI"].GetPModel().Get("GetFullId");
                    $("#" + a).hide();
                    a = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Line Item List Applet (Sales) OUI"].GetPModel().Get("GetFullId");
                    $("#" + a).hide();
                    a = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Payment Detail Applet - Admin OUI"].GetPModel().Get("GetFullId");
                    $("#" + a).hide();
                    a = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Payment History List Applet OUI"].GetPModel().Get("GetFullId");
                    $("#" + a).hide();
                    a = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Payments List Applet OUI"].GetPModel().Get("GetFullId");
                    $("#" + a).hide();
                    a = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Report Output List Applet"].GetPModel().Get("GetFullId");
                    $("#" + a).hide();
                    a = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC SWI Ship Detail List Custom Applet OUI"].GetPModel().Get("GetFullId");
                    $("#" + a).hide();
                    a = SiebelApp.S_App.GetActiveView().GetAppletMap()["Order Entry - Attachment Applet"].GetPModel().Get("GetFullId");
                    $("#" + a).hide();
                    a = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Report Output List Applet"].GetPModel().Get("GetFullId");
                    $("#" + a).hide();
                    a = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) - Admin"].GetPModel().Get("GetFullId");
                    $("#" + a).hide();
                    a = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Line Item Manual Discount List Applet OUI"].GetPModel().Get("GetFullId");
                    $("#" + a).hide();
                    a = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetPModel().Get("GetFullId");
                    //$("#"+a).hide();
                    $('#s_' + a + '_div').hide();
                    $('#' + a).html(mainmarkup);
                    //NGOLLA Added code for defect 815
                    if (OrderDetailrecords[0]["SC Admin Responsibility"] == "Y" || OrderDetailrecords[0]["SC Payment Admin Responsbility"] == "Y") {
                        $("#sc-payments-new").show();
                    }

                    // loading waiting time
                    $(document).ready(function() {
                        $("body").bind('Custom.Start', function(ev) {
                            $('#maskoverlay').show();
                        });

                        $("body").bind('Custom.End', function(ev) {
                            $('#maskoverlay').hide();
                        });
                    });
                    //added code for defect 648 and 704
                    var FieldQueryPair = "";
                    var SiebelConstant = SiebelJS.Dependency("SiebelApp.Constants");
                    FieldQueryPair = {
                        "Id": "IS NOT NULL"
                    };
                    SCOUIMethods.ExecuteListAppletFramesync(SiebelConstant, FieldQueryPair, "SC Order Entry - Line Item List Applet (Sales) OUI");
                    SCOUIMethods.ExecuteListAppletFramesync(SiebelConstant, FieldQueryPair, "SC Payments List Applet OUI");
                    if (localStorage.getItem("refreshHDSR") == "Y") {
                        localStorage.setItem("refreshHDSR", "N");
                        SCOUIMethods.ExecuteListAppletFramesync(SiebelConstant, FieldQueryPair, "SC Field Service List Applet OUI");
                    }
                    paymentlineitems = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Payments List Applet OUI"].GetPModel().GetRenderer().GetPM().Get("GetRecordSet");
                    //function for orderDetails
                    order_Detail_Markup = SCSalesOrder.SalesOrder360orderdetailstMarkup(OrderDetailrecords);
                    $("#sc-salesorder360-orderdetails").html(order_Detail_Markup);
                    //function for line details markup
                    linedetailssmarkup = SCSalesOrder.SalesOrder360linedetailsAppletMarkup();
                    $('#Line_details_Applet').html(linedetailssmarkup);
                    SCOUIMethods.PrimaryButton(LineitemrecordsPM, 'SC-Linedetails-pagination');
                    //function for payment details markup
                    paymentdetailssmarkup = SCSalesOrder.SalesOrder360paymentdetailsAppletMarkup();
                    $('#Payment-Details-Applet').html(paymentdetailssmarkup);
                    SCOUIMethods.PrimaryButton(PaymentdetailsPM, 'Payment-Details-pagination');

                    //function for payment history markup
                    paymenthistorymarkup = SCSalesOrder.SalesOrder360paymenthistoryAppletMarkup();
                    $('#Payment-History-Applet').html(paymenthistorymarkup);
                    SCOUIMethods.PrimaryButton(PaymenthistoryPM, 'Payment-History-pagination');
                    //function for attachments markup
                    attachmentsmarkup = SCSalesOrder.SalesOrder360attachmentsmarkup();
                    $('#Attachment-Details-Applet').html(attachmentsmarkup);
                    SCOUIMethods.PrimaryButton(AttdetailsPM, 'SC-Attachments-pagination');
                    //SNARRA added function for manual Discounts markup
                    manualdiscountmarkup = SCSalesOrder.SalesOrder360Manualdiscountmarkup();
                    $('#Manual-Discounts-Applet').html(manualdiscountmarkup);
                    SCOUIMethods.PrimaryButton(ManualDiscountsPM, 'SC-manualdiscount-pagination');
                    //function for delete popup
                    deletepopupmarkup = SCSalesOrder.SalesOrder360DeletePopup();
                    $('#SC-SO-Delete-payment-line').html(deletepopupmarkup);
                    //function for HomeDeliverySR
                    HD_SR_markup = SCSalesOrder.SalesOrderHomeDeliverySRMarkup();
                    $("#HomeDelivery-SR-Applet").html(HD_SR_markup);
                    SCOUIMethods.PrimaryButton(HDSRPM, 'HD-SR-pagination');
                    GetHDSRRecords();

                    //function for payment line records
                    getLineDetailsRcds();




                    //function for payment history details records
                    getPaymentHistoryRcds();
                    //function for attachments
                    getAttachments();
                    getmdrecrds();
                    $(".SC-360-item-value").prop('readonly', true);
                    //Adding CustomerMarkup 
                    customtimermarkup = SCOUIMarkups.CustomTimer();
                    $('#applet1').append(customtimermarkup);
                    //SNARRA:Added CTI Toolbar Issue 
                    if ($("#CommunicationPanelContainer").is(":visible") && (localStorage.getItem('CTIToolbar') == "Y")) {
                        $(".SC-data-container").css("position", "inherit");
                        $("#sc-blue").show();
                        $("#sc-white").hide();
                    }
                    if ($("#CommunicationPanelContainer").is(":visible")) {
                        $("#sc-blue").show();
                        $("#sc-white").hide();
                    }
                    //invoking Business Service to get Line OrderSummary Details
                    var inPS = SiebelApp.S_App.NewPropertySet();
                    var outPS = SiebelApp.S_App.NewPropertySet();
                    var Bservice = "";
                    orderId = OrderDetailrecords[0]["Id"]
                    inPS.SetProperty("OrderId", orderId)
                    SiebelJS.Log("Invoking Business Service");
                    Bservice = SiebelApp.S_App.GetService("SC Get Line Items"); //get service
                    outPS = Bservice.InvokeMethod("Query", inPS); //invoke the method
                    SiebelJS.Log("childcount" + JSON.stringify(outPS.GetChild(0).GetChildCount()));
                    var shippingcost = outPS.GetChild(0).GetProperty("Shipping cost");
                    var shippinglinediscounts = outPS.GetChild(0).GetProperty("Shipping Line Discounts");
                    SiebelJS.Log("Shipping cost" + outPS.GetChild(0).GetProperty("Shipping cost"));
                    SiebelJS.Log("Shipping Line Discounts" + outPS.GetChild(0).GetProperty("Shipping Line Discounts"));
                    order360_summary_markup = SCOUIMethods.OrderSummary(OrderDetailPMinstance, shippingcost, shippinglinediscounts);
                    $("#SC_order360_summary").html(order360_summary_markup);
                    //Added code for Ipad 
                    $("#SC_order360_summary").addClass("addflex");
                    var ordertotal = OrderDetailrecords[0]["Order Total"];
                    $("#oder360total").html("$" + Number(ordertotal).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,'));

                    var inprogress_value = SCOUIMethods.SCGetOrderLoVs("[Type]= 'FS_ORDER_STATUS' and [Active] = 'Y' and [Name]='In Progress'");
                    var submitted_value = SCOUIMethods.SCGetOrderLoVs("[Type]= 'FS_ORDER_STATUS' and [Active] = 'Y' and [Name]='Submitted'");
                    var closed_value = SCOUIMethods.SCGetOrderLoVs("[Type]= 'FS_ORDER_STATUS' and [Active] = 'Y' and [Name]='Closed'");
                    var cancelled_value = SCOUIMethods.SCGetOrderLoVs("[Type]= 'FS_ORDER_STATUS' and [Active] = 'Y' and [Name]='Cancelled'");
                    var complete_value = SCOUIMethods.SCGetOrderLoVs("[Type]= 'FS_ORDER_STATUS' and [Active] = 'Y' and [Name]='Complete'");
                    var booked_value = SCOUIMethods.SCGetOrderLoVs("[Type]= 'FS_ORDER_STATUS' and [Active] = 'Y' and [Name]='Booked'");
                    var payment_in_progress = SCOUIMethods.SCGetOrderLoVs("[Type]= 'FS_ORDER_STATUS' and [Active] = 'Y' and [Name]='Payment In Progress'");
                    var oracle_error = SCOUIMethods.SCGetOrderLoVs("[Type]= 'FS_ORDER_STATUS' and [Active] = 'Y' and [Name]='Oracle Error'");
                    var hold_ = SCOUIMethods.SCGetOrderLoVs("[Type]= 'FS_ORDER_STATUS' and [Active] = 'Y' and [Name]='Hold'");
                    var siebel_error = SCOUIMethods.SCGetOrderLoVs("[Type]= 'FS_ORDER_STATUS' and [Active] = 'Y' and [Name]='Siebel Error'");

                    ProductTypeCode = SCOUIMethods.SCGetOrderLoVs("[Type]= 'PROD_CD' and [Active] = 'Y' and [Name]='Promotion'");
                    var status_val = OrderDetailrecords[0]["Status"];
                    userposition = SCOUIMethods.SCGetProfileAttrValue("SC Primary Division Sub Type");
                    SCStoreNumber = SCOUIMethods.SCGetProfileAttrValue("SC Store Number");
                    storenumber = SCOUIMethods.SCGetProfileAttrValue("MachineInfo");
                    scprimaryDT = SCOUIMethods.SCGetProfileAttrValue("SC Primary Division Name");
                    var scAccountOrder = false;
                    if (OrderDetailrecords[0]["SC Sub-Type"] == "Wholesale" || OrderDetailrecords[0]["SC Sub-Type"] == "QVC" || OrderDetailrecords[0]["SC Sub-Type"] == "Commercial" || OrderDetailrecords[0]["SC Sub-Type"] == "Internal" || OrderDetailrecords[0]["SC Sub-Type"] == "HSN") {
                        scAccountOrder = true;
                    } else
                        scAccountOrder = false;
                    //SPATIBAN:#CHG0034381:Added code Revision Reason Dropdown
                    var ReviseReasonArrary = SCOUIMethods.SCGetOrderLoVs("[Type]= 'SC_EVENT_TYPE_REASON1' and [Active] = 'Y' AND [Parent]='Revision'");
                    var revisemarkup = "";
                    revisemarkup += '<option></option>';
                    for (var i = 0; i < ReviseReasonArrary.length; i++) {
                        revisemarkup += '<option>' + ReviseReasonArrary[i] + '</option>';
                    }
                    $("#SC-Revise-reason-SelectBox").html(revisemarkup);
                    var d = new Date();
                    var datestring = d.getFullYear() + '/' + (d.getMonth() + 1) + '/' + d.getDate();
                    var scorderdate = new Date(OrderDetailrecords[0]["Order Date"]);
                    var orderDatestring = scorderdate.getFullYear() + '/' + (scorderdate.getMonth() + 1) + '/' + scorderdate.getDate();
                    var isStoreUser = SCOUIMethods.SCGetProfileAttrValue("SC Store User");
                    if (userposition == "CSC" || isStoreUser == "Y") {
                        $("#sc-goto-activities").addClass("SC-disabled");
                    }
                    if (status_val == inprogress_value || status_val == payment_in_progress || status_val == siebel_error) {
                        //RCHATHAR: For defect nubmer 860
                        //$("#quote_order360").show();
                        if ("Y" == "Y") {	//P2PE Condition
                            $("#customerreciept").hide();
                            $("#storereciept").hide();
                        } else {
                            $("#reciept_order360").hide();
                        }

                    } else {
                        //RCHATHAR: For defect nubmer 860
                        //$("#quote_order360").hide();
                        if ("Y" == "Y") {	//P2PE Condition
                            $("#customerreciept").show();
                            $("#storereciept").show();
                        } else {
                            $("#reciept_order360").show();
                        }
                    }
                    var revisionNumber = parseInt(OrderDetailrecords[0]["Revision"]);
                    if (status_val == inprogress_value && paymentlineitems.length == 0 && revisionNumber < 2) {
                        $("#delete_Order360").show();
						//NTHARRE:29-JUN-2021:Added code for STRY0122298
						var loginName = SCOUIMethods.SCGetProfileAttrValue("Login Name");
						if(OrderDetailrecords[0]["Created By Name"] == loginName)
							$("#delete_Order360").removeClass("SC-disabled");
						else{
							if(!($("#delete_Order360").hasClass("SC-disabled")))
								$("#delete_Order360").addClass("SC-disabled");
						}
                    }
                    //getPOSRegistry(OrderDetailrecords[0]["SC Sale Show#"]);
                    //SBOORLA:Changed if condition for 719
                    /*if(revisionNumber>1){
                    	if(OrderDetailrecords["SC Revise Order Calc"]=="Y"||OrderDetailrecords["SC SE Revise Order Calc"]=="Y")
                    	$("#resume_order360").show();	
                    }
                    else if(status_val!=submitted_value && status_val!=closed_value && status_val!=cancelled_value && status_val!=complete_value && status_val!=booked_value)
                    {
                    	$("#resume_order360").show();
                    }*/
                    //SADDALA:Changed conditions based on the sheet for 719
                    if (status_val != submitted_value && status_val != complete_value && status_val != booked_value && status_val != cancelled_value && status_val != closed_value) {
                        if (revisionNumber < 2 && status_val != hold_ && status_val != oracle_error) {
                            $("#resume_order360").show();
                        } else if ((status_val == hold_ || status_val == oracle_error) && OrderDetailrecords[0]["SC Admin Responsibility"] == 'Y') {
                            $("#resume_order360").show();
                        } else if ((revisionNumber > 1 && (status_val == siebel_error || status_val == inprogress_value)) && ((userposition == "STORE" && (datestring == orderDatestring) && OrderDetailrecords[0]["SC Location Store Number"] == SCStoreNumber) || (userposition == "SHOW" && (datestring == orderDatestring) && OrderDetailrecords[0]["SC Location Store Number"] == SCStoreNumber) || (userposition == "CSC" && (datestring == orderDatestring) && (scprimaryDT == OrderDetailrecords[0]["SC Sale Location"])) || (userposition == "CS" || userposition == "WHOLESALE" || OrderDetailrecords[0]["SC Admin Responsibility"] == 'Y'))) {
                            $("#resume_order360").show();
                        }
                    }


                    //SBOORLA:Changed Condition  for defect 711
                    //SADDALA:Added condition for defect 711
                    //if(revisionNumber>1&&status_val!=closed_value){
                    if (revisionNumber > 1 && (status_val == inprogress_value || status_val == siebel_error)) {
                        //RCHATHAR: For defect nubmer 860
                        //$("#quote_order360").show();
                        if ("Y" == "Y") {	//P2PE Condition
                            $("#customerreciept").show();
                            $("#storereciept").show();
                        } else {
                            $("#reciept_order360").show();
                        }
                        //NGOLLA:Defect756 Added Code 
                        if (OrderDetailrecords[0]["SC Admin Responsibility"] == 'Y') {
                            $("#sc-add-lastname").show();
                            $("#sales-order-360-Address").show();
                        }
                    }

                    //Start:code for edit button
                    //saddala changed condition 
                    if ((revisionNumber < 2 && (status_val == inprogress_value || status_val == siebel_error)) || (OrderDetailrecords[0]["SC Admin Responsibility"] == 'Y')) {
                        $("#SC-360-order-details-edit").show();
                        if (OrderDetailrecords[0]["Tax Exempt"] == "Y") {
                            $("#sc-360-Tax").addClass("SC-360-od");
                        }
                        //RCHATHAR: For defect number 710
                        /*$("#SC-source-order").addClass("SC-360-od");
                        $("#SC-po-order").addClass("SC-360-od");
                        $("#SC-sales-location-icon-id").show();	
                        $("#SC-show-icon-id").show();	*/

                    } else {
                        $("#SC-360-order-details-edit").hide();
                    }
                    //End:code for edit button

                    SiebelJS.Log("position" + userposition);


                    //SBOORLA: Changed comdition for 736 and 733
                    //SADDALA: Changed conditions based on the sheet for 719
                    /*if((OrderDetailrecords[0]["SC SE Revise Order Calc"]=="Y")&&hideRevison=="N"){
                    	$("#Revise_order360").show();
                    } */
                    if (OrderDetailrecords[0]["SC SE Revise Order Calc"] == "Y" && hideRevison == "N") {
                        $("#Revise_order360").show();
                    }

                    //VALLA: 24-SEPT-19: Disabled iPad Finance due to data security purpose
                    var searchExpr = "[Type] = 'IPAD_FINANCE' AND [Name] = 'ENABLED' AND [Active] = 'Y'";
                    var sortSpec = "Order By";
                    var isFinanceDisabled = SCOUIMethods.SCGetOrderLoVs(searchExpr);
                    if (isFinanceDisabled == "N") {
                        $("#SC-SO-360-Apply-Finance").addClass("SC-disabled");
                    }


                    //Start:code for Resubmit Slee IQ Profile
                    var caninvoke = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetPModel().GetRenderer().GetPM().ExecuteMethod("CanInvokeMethod", "SCResubmitSIQProfile");
                    if (caninvoke) {
                        $("#sc-resubmit-sleep").removeClass("SC-disabled");
                    }
                    //start: code for Pagination
                    $(document).on('click', "#SC-Linedetails-pagination", function() {
                        $('#maskoverlay').show();
                        setTimeout(function() {
                            getLineDetailsRcds();
                            $('#maskoverlay').hide();
                        }, 50);
                    });
                    $(document).on('click', "#SC-manualdiscount-pagination", function() {
                        $('#maskoverlay').show();
                        setTimeout(function() {
                            getmdrecrds();
                            $('#maskoverlay').hide();
                        }, 50);
                    });
                    $(document).on('click', "#HD-SR-pagination", function() {
                        $('#maskoverlay').show();
                        setTimeout(function() {
                            GetHDSRRecords();
                            $('#maskoverlay').hide();
                        }, 50);
                    });
                    $(document).on('click', "#SC-Attachments-pagination", function() {
                        $('#maskoverlay').show();
                        setTimeout(function() {
                            getAttachments();
                            $('#maskoverlay').hide();
                        }, 50);
                    });
                    $(document).on('click', "#Payment-History-pagination", function() {
                        $('#maskoverlay').show();
                        setTimeout(function() {
                            getPaymentHistoryRcds();
                            $('#maskoverlay').hide();
                        }, 50);
                    });
                    $(document).on('click', "#Payment-Details-pagination", function() {
                        $('#maskoverlay').show();
                        setTimeout(function() {
                            getPaymentDetailsRcds();
                            $('#maskoverlay').hide();
                        }, 50);
                    });
                    //End :Pagination
                    $(document).on("click", "#sc-resubmit-sleep", function() {
                        $("body").trigger('Custom.Start');
                        setTimeout(function() {
                            SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].InvokeMethod("SCResubmitSIQProfile");
                            $("body").trigger('Custom.End');
                        }, 1000);
                    });
                    //End:code for Resubmit Slee IQ Profile
                    //SPATIBAN:#CHG0034381:start code Revision Reasons
                    $(document).on("click", "#SC-revise-no-button", function() {
                        $("#SC-SO-revise-order").modal('hide');
                        $("#SC-SO-revise-order").css({
                            "display": "",
                            "justify-content": "",
                            "align-items": ""
                        });
                    });

                    //Start code for on change of Revise Reason 
                    var subrevisemarkup = "";
                    $(document).on('change', "#SC-Revise-reason-SelectBox", function() {
                        subrevisemarkup = "";
                        subrevisemarkup += '<option></option>';
                        var SubReviseReasonArrary = SCOUIMethods.GetLOVs("[Type]= 'SC_EVENT_TYPE_REASON2' and [Active] = 'Y' and [Parent]='" + this.value + "'", "Order By");
                        for (var i = 0; i < SubReviseReasonArrary.length; i++) {
                            subrevisemarkup += '<option>' + SubReviseReasonArrary[i] + '</option>';
                        }
                        $("#SC-Revise-subreason-SelectBox").html(subrevisemarkup);
                        if ($("#SC-Revise-reason-SelectBox").val() != "")
                            $("#SC-Revise-subreason-SelectBox").removeClass("SC-disabled");
                        else
                            $("#SC-Revise-subreason-SelectBox").addClass("SC-disabled");
                    });
                    //End code for on change of Revise Reason 
                    //Start code for on change of Revise Sub Reason 
                    $(document).on('change', "#SC-Revise-subreason-SelectBox", function() {

                        if ($("#SC-Revise-subreason-SelectBox").val() != "")
                            $("#SC-revise-yes-button").removeClass("SC-disabled");
                        else
                            $("#SC-revise-yes-button").addClass("SC-disabled");
                    });
                    //End :code for on change of Revise Sub Reason 
                    //Start:Code for on click of yes button in Revision popup
                    $(document).on('click', "#SC-revise-yes-button", function() {
                        var SC_Rev_Reason = "",
                            SC_Rev_ReasonType = "";
                        SC_Rev_Reason = $("#SC-Revise-reason-SelectBox").val();
                        SC_Rev_ReasonType = $("#SC-Revise-subreason-SelectBox").val();
                        $("#SC-SO-revise-order").modal('hide');
                        $("#SC-SO-revise-order").css({
                            "display": "",
                            "justify-content": "",
                            "align-items": ""
                        });
                        $('#maskoverlay').show();
                        setTimeout(function() {
                            //SPATIBAN:Added code for OHQ and PHQ 

                            var inpPS = "",
                                outPS = "",
                                oBS = "";
                            inpPS = SiebelApp.S_App.NewPropertySet();
                            outPS = SiebelApp.S_App.NewPropertySet();
                            var ai = {};
                            ai.async = true;
                            ai.selfbusy = true;
                            ai.scope = this;
                            ai.mask = true;
                            ai.opdecode = true;
                            oBS = SiebelApp.S_App.GetService("SC Update OHQ PHQ BS");
                            inpPS.SetProperty("OrderId", orderId);
                            outPS = oBS.InvokeMethod("Update", inpPS, ai);
                            if (SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetPModel().GetRenderer().GetPM().ExecuteMethod("CanInvokeMethod", "SCReviseOrder") == true) {
                                var Bservice = "",
                                    inPS = "",
                                    outPS = "";
                                inPS = SiebelApp.S_App.NewPropertySet();
                                outPS = SiebelApp.S_App.NewPropertySet();
                                inPS.SetProperty("Name", "SCRevisionReason");
                                inPS.SetProperty("Value", SC_Rev_Reason);
                                Bservice = SiebelApp.S_App.GetService("SessionAccessService");
                                outPS = Bservice.InvokeMethod("SetProfileAttr", inPS);
                                inPS = "", outPS = "";
                                inPS = SiebelApp.S_App.NewPropertySet();
                                outPS = SiebelApp.S_App.NewPropertySet();
                                inPS.SetProperty("Name", "SCRevisionReasonType");
                                inPS.SetProperty("Value", SC_Rev_ReasonType);
                                Bservice = SiebelApp.S_App.GetService("SessionAccessService");
                                outPS = Bservice.InvokeMethod("SetProfileAttr", inPS);
                                SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].InvokeMethod("SCReviseOrder");
                                SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].InvokeMethod("RefreshBusComp");
                                var sOrdRevisable = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().GetFieldValue("SC Revisable");
                                if (sOrdRevisable == "Revisable" || sOrdRevisable == "Cancelable" || sOrdRevisable == "Non Cancelable") {
                                    SiebelApp.S_App.GotoView("SC Create Sales Order View OUI", "", "", "");
                                }
                            }
                            $('#maskoverlay').hide();
                        }, 500);
                    });
                    //End:Code for on click of yes button in Revision popup
                    //Start:on click of revise button
                    $(document).on("click", "#Revise_order360", function() {
                        $(".SC-Rev-Reason-box").val('');
                        $("#SC-Revise-subreason-SelectBox").addClass("SC-disabled");
                        $("#SC-revise-yes-button").addClass("SC-disabled");
                        $("#SC-SO-revise-order").modal({
                            backdrop: 'static'
                        })
                        $("#SC-SO-revise-order").css({
                            "display": "flex",
                            "justify-content": "center",
                            "align-items": "center"
                        })
                        $(".modal-backdrop").css('background', '#ffffff');

                        //SPATIBAN:Added code for OHQ and PHQ 

                        /*var inpPS = "",outPS = "",oBS = "";
								inpPS = SiebelApp.S_App.NewPropertySet();
								outPS = SiebelApp.S_App.NewPropertySet();
								var ai = {};
								ai.async = true;
								ai.selfbusy = true;
								ai.scope = this;
								ai.mask = true;
								ai.opdecode = true;
								oBS = SiebelApp.S_App.GetService("SC Update OHQ PHQ BS");
								inpPS.SetProperty("OrderId",orderId);
								outPS = oBS.InvokeMethod("Update", inpPS,ai);
							
                        if (SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetPModel().GetRenderer().GetPM().ExecuteMethod("CanInvokeMethod", "SCReviseOrder") == true) {
                            SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].InvokeMethod("SCReviseOrder");
							SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].InvokeMethod("RefreshBusComp");
							var sOrdRevisable=SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().GetFieldValue("SC Revisable");
							if(sOrdRevisable=="Revisable" || sOrdRevisable=="Cancelable" || sOrdRevisable=="Non Cancelable"){
								*/

                        //}
                    });
                    //End:on click of revise button
                    //SPATIBAN:#CHG0034381:End code Revision Reasons						   
                    //Start:on click of delete order button	
                    $(document).on("click", "#delete_Order360", function() {
                        $("#SC-SO-Delete-order").modal({
                            backdrop: 'static'
                        })
                        $("#SC-SO-Delete-order").css({
                            "display": "flex",
                            "justify-content": "center",
                            "align-items": "center"
                        })
                        $(".modal-backdrop").css('background', '#ffffff');
                    });
                    //End:on click of delete order button	
                    //start:on click of yes button in delete order
                    $(document).on("click", "#SC-delete-yes", function() {
                        $("#SC-SO-Delete-order").modal('hide');
                        $("#SC-SO-Delete-order").css({
                            "display": "",
                            "justify-content": "",
                            "align-items": ""
                        });
                        //Start loader 
                        $("body").trigger('Custom.Start');
                        setTimeout(function() {
                            (function(proxied) {
                                window.confirm = function() {
                                    if (arguments[0].includes("Are you sure you want to delete the")) {
                                        return true;
                                        SiebelJS.Log("supressed");
                                    } else
                                        return proxied.apply(this, arguments);
                                };
                            })(window.confirm);
                            SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].InvokeMethod("DeleteRecord");
                            //SiebelApp.S_App.GotoView("SC Sales Order Search View OUI", "", "", "");
                            //SiebelApp.S_App.GotoView("SC Sales Order Search View OUI", "", "SWEKeepContext=false", "");
							var InPut = "";
							var OutPut = "";
							InPut = SiebelApp.S_App.NewPropertySet();
							OutPut = SiebelApp.S_App.NewPropertySet();
							InPut.SetProperty("View", "SC Contact 360 Degree View OUI");
							InPut.SetProperty("Business Component", "Contact");
							InPut.SetProperty("Row Id", OrderDetailrecords[0]["Bill To Contact Id"]);
							BService = SiebelApp.S_App.GetService("CUT eSales Order Entry Toolkit Service");
							OutPut = BService.InvokeMethod("GotoView",  InPut);
                            //hiding the Loader
                            $("body").trigger('Custom.End');
                        }, 1000);
                    });
                    //end:on click of yes button in delete order

                    //saddala for sales order team
                    $("#sales-order-360-team-mvg").click(function() {
                        if (SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().GetFieldValue("SC Admin Responsibility") == 'Y')
                            SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetPModel().OnControlEvent(SiebelApp.Constants.get("PHYEVENT_INVOKE_PICK"), SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetControls()["SC Sales Team Login Admin"]);
                        else
                            SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetPModel().OnControlEvent(SiebelApp.Constants.get("PHYEVENT_INVOKE_PICK"), SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetControls()["SC Sales Team Login"]);
                        SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetPModel().AttachNotificationHandler("g", function(o) {
                            var Field_Name = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetPModel().ExecuteMethod("GetFieldValue", SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetControls()["SC Sales Team Login"]);
                            $('#salesorderteamtext').val(Field_Name);
                            SiebelJS.Log(Field_Name);
                        });
                    });

                    //saddala for sales order team
                    $(document).unbind('.siebui-icon-closeapplet').on("click", ".siebui-icon-closeapplet", function() {
                        setTimeout(function() {
                            $('#salesorderteamtext').value = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().GetFieldValue("SC Sales Team Login");
                        }, 2000);
                    });

                    //start:click on Resume Order
                    $(document).on("click", "#resume_order360", function() {
                        //Added code for Defect 671
                        //var x=SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetPModel().GetRenderer().GetPM().Get('GetRecordSet');
                        /*if(x[0]["Status"]=="Hold"){
                        	$("#SC-SO-hold-revise").modal({
                        	backdrop: 'static'
                        	});
                        	$("#SC-SO-hold-revise").css({
                        		"display": "flex",
                        		"justify-content": "center",
                        		"align-items": "center"
                        	});
                        	$(".modal-backdrop").css('background', '#ffffff');
                        }  */
                        /*var status_val = OrderDetailrecords[0]["Status"];
                        //SBOORLA:Added conditon for defect 865
                        var saleShow = OrderDetailrecords[0]["SC Sale Show#"];
                        var storeShow=OrderDetailrecords[0]["SC Location Store Number"];
                        if(saleShow==""){
                        	if(Lineitemrecords.length!=0 && (status_val=="Siebel Error" || status_val=="In Progress")){
                        		$("#SC-SO-resume-order").modal({
                        			backdrop: 'static'
                        		});
                        		$("#SC-SO-resume-order").css({
                        			"display": "flex",
                        			"justify-content": "center",
                        			"align-items": "center"
                        		});
                        		$(".modal-backdrop").css('background', '#ffffff');
                        		
                        	}
                        	else{
                        		SiebelApp.S_App.GotoView("SC Create Sales Order View OUI","","","");	
                        	}
                        }	
                        else{
                        		if(changedShowNumber=="Y"){
                        			changedShowNumber="N";
                        			getPOSRegistry(SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().GetFieldValue("SC Sale Show#"))
                        		}
                        		if(storenumber!=""&&storenumber!=undefined){
                        		storenumber=storenumber.split('_');
                        		storenumber=storenumber[0];
                        		}
                        		if(POSorderRegArray.indexOf(storenumber)!=-1 && Lineitemrecords.length!=0){*/
                        var caninvoke = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Line Item List Applet (Sales) OUI"].GetPModel().GetRenderer().GetPM().ExecuteMethod("CanInvokeMethod", "CalculatePriceAll");
                        if (!caninvoke) {
                            SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].InvokeMethod("RefreshBusComp");
                        }
                        caninvoke = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Line Item List Applet (Sales) OUI"].GetPModel().GetRenderer().GetPM().ExecuteMethod("CanInvokeMethod", "CalculatePriceAll");
                        //SPATIBAN:Added code for OHQ and PHQ 
                        if (Lineitemrecords.length != 0) {
                            var inpPS = "",outPS = "",oBS = "";
                            var isStoreUser = SCOUIMethods.SCGetProfileAttrValue("SC Store User");
							if(isStoreUser == "Y"){
								inpPS = SiebelApp.S_App.NewPropertySet();
								outPS = SiebelApp.S_App.NewPropertySet();
								var ai = {};
								ai.async = false;
								ai.selfbusy = true;
								ai.scope = this;
								ai.mask = true;
								ai.opdecode = true;
								oBS = SiebelApp.S_App.GetService("SC Update OHQ PHQ BS");
								inpPS.SetProperty("OrderId", orderId);
								outPS = oBS.InvokeMethod("Update", inpPS, ai);
								//VALLA: Added below code to get the OHQ values of line item.
								inpPS = SiebelApp.S_App.NewPropertySet();
								outPS = SiebelApp.S_App.NewPropertySet();
								var ai = {};
								ai.async = false;
								ai.selfbusy = true;
								ai.scope = this;
								ai.mask = true;
								ai.opdecode = true;
								oBS = SiebelApp.S_App.GetService("SC Update Order Lines OHQ Details");
								inpPS.SetProperty("OrderId", orderId);
								inpPS.SetProperty("Type", "RESUME");
								outPS = oBS.InvokeMethod("UpdateOHQDetails", inpPS, ai);
								
							}
							
							inPS = SiebelApp.S_App.NewPropertySet();
							outPS = SiebelApp.S_App.NewPropertySet();
							inPS.SetProperty("OrderId", orderId);
							oBS = SiebelApp.S_App.GetService("SC Order Management Service"); //get service
							outPS = oBS.InvokeMethod("UpdateShipFromDetails", inPS);
							
							inpPS = SiebelApp.S_App.NewPropertySet();
                            outPS = SiebelApp.S_App.NewPropertySet();
                            var ai = {};
                            ai.async = false;
                            ai.selfbusy = true;
                            ai.scope = this;
                            ai.mask = true;
                            ai.opdecode = true;
                            oBS = SiebelApp.S_App.GetService("Workflow Process Manager");
							inpPS.SetProperty("ProcessName", "SC Order Get ATP Scheduled Date From GOP");
							inpPS.SetProperty("Object Id", orderId);
							outPS = oBS.InvokeMethod("RunProcess", inpPS, ai);
                        }
                        if (Lineitemrecords.length != 0 && caninvoke) {
                            $("#SC-SO-resume-order").modal({
                                backdrop: 'static'
                            });
                            $("#SC-SO-resume-order").css({
                                "display": "flex",
                                "justify-content": "center",
                                "align-items": "center"
                            });
                            $(".modal-backdrop").css('background', '#ffffff');
                        } else {
                            //added code for skip to payments
                            var scstorenumber = "",
                                scstoreuser = "",
                                gotopayments = "",
                                userStoreLoc = "";
                            var saleLocation = OrderDetailrecords[0]["SC Location Store Number"];
                            scstorenumber = SCOUIMethods.SCGetProfileAttrValue("MachineInfo");
                            scstoreuser = SCOUIMethods.SCGetProfileAttrValue("SC Store User");
                            userStoreLoc = SCOUIMethods.SCGetProfileAttrValue("SC Store Number");
							var OrderSaleLocation = OrderDetailrecords[0]["SC Sale Location"];
							var PrimaryDivisn = SCOUIMethods.SCGetProfileAttrValue("SC Primary Division Name");

                            if (scstorenumber != "" && scstorenumber != undefined) {
                                scstorenumber = scstorenumber.split('_');
                                scstorenumber = scstorenumber[0];
                            }
                            if (scstoreuser == "Y" && scstorenumber != "") {
                                if (saleLocation == scstorenumber){
                                     //NTHARRE:Added below condition for - STRY0124385 
									if(OrderSaleLocation == PrimaryDivisn)
										gotopayments = true;
									else
										gotopayments = false;
								}
                                else
                                    gotopayments = false;
                            } else if ((scstoreuser == "Y" && saleLocation == userStoreLoc) || (scstoreuser == "N" && saleLocation == "")) {
                                 //NTHARRE:Added below condition for - STRY0124385 
									if(OrderSaleLocation == PrimaryDivisn)
										gotopayments = true;
									else
										gotopayments = false;
                            } else
                                gotopayments = false;
                            if (gotopayments && (OrderDetailrecords[0]["SC Freight Calculated Flag"] == "Y" || scAccountOrder) && OrderDetailrecords[0]["SC Verified Flag"] == "Y" && ((OrderDetailrecords[0]["SC Tax Calculated Flag"] == "Y") || (OrderDetailrecords[0]["SC Tax Calculated Flag"] == "N" && OrderDetailrecords[0]["SC Tax Verification Pending"] == "Y"))) {
                                //SiebelApp.S_App.GotoView("SC Order Entry - Payment View Sales OUI", "", "", "");
                                localStorage.setItem("ComingFromOrder360", "Y");
                                SiebelApp.S_App.GotoView("SC Create Sales Order View OUI", "", "", "");
                            } else {
                                if (Lineitemrecords.length == 0)
                                    SiebelApp.S_App.GotoView("SC Create Sales Order View OUI", "", "", "");
                                else {
                                    localStorage.setItem("ComingFromPayments", "Y");
                                    SiebelApp.S_App.GotoView("SC Create Sales Order View OUI", "", "", "");
                                }
                                /*else{
                                	localStorage.setItem("ComingFromOrder360", "Y");
                                	SiebelApp.S_App.GotoView("SC Create Sales Order View OUI", "", "", "");
                                }*/
                            }
                        }
                        /*}
						else
							SiebelApp.S_App.GotoView("SC Create Sales Order View OUI","","","");
					}*/
                    });

                    //SBOORLA:defect 651
                    //Start:code for on click of Refresh Button
                    $(document).on("click", "#sc360-refresh", function() {
                        $("body").trigger('Custom.Start');
                        setTimeout(function() {
                            var inpPS = "",
                                outPS = "",
                                oBS = "";
                            inpPS = SiebelApp.S_App.NewPropertySet();
                            outPS = SiebelApp.S_App.NewPropertySet();
                            oBS = SiebelApp.S_App.GetService("FINS Teller UI Navigation");
                            inpPS.SetProperty("Refresh All", "Y");
                            outPS = oBS.InvokeMethod("RefreshCurrentApplet", inpPS);
                            OrderDetailPMinstance = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetPModel().GetRenderer().GetPM();
                            OrderDetailrecords = OrderDetailPMinstance.Get("GetRecordSet");
                            order_Detail_Markup = SCSalesOrder.SalesOrder360orderdetailstMarkup(OrderDetailrecords);
                            $("#sc-salesorder360-orderdetails").html(order_Detail_Markup);
                            order360_summary_markup = SCOUIMethods.OrderSummary(OrderDetailPMinstance, shippingcost, shippinglinediscounts);
                            $("#SC_order360_summary").html(order360_summary_markup);
                            //Added code for Ipad 
                            $("#SC_order360_summary").addClass("addflex");
                            var ordertotal = OrderDetailrecords[0]["Order Total"];
                            $("#oder360total").html("$" + Number(ordertotal).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,'));
                            $(".SC-360-item-value").prop('readonly', true);
                            var status_val = OrderDetailrecords[0]["Status"];
                            if (status_val == inprogress_value || status_val == payment_in_progress || status_val == siebel_error) {
                                //RCHATHAR: For defect nubmer 860
                                //$("#quote_order360").show();
                                if ("Y" == "Y") {	//P2PE Condition
                                    $("#customerreciept").hide();
                                    $("#storereciept").hide();
                                } else {
                                    $("#reciept_order360").hide();
                                }
                            } else {
                                //RCHATHAR: For defect nubmer 860
                                //$("#quote_order360").hide();
                                if ("Y" == "Y") {	//P2PE Condition
                                    $("#customerreciept").show();
                                    $("#storereciept").show();
                                } else {
                                    $("#reciept_order360").show();
                                }
                            }
                            var revisionNumber = parseInt(OrderDetailrecords[0]["Revision"]);
                            if (status_val == inprogress_value && paymentlineitems.length == 0 && revisionNumber < 2) {
                                $("#delete_Order360").show();
								//NTHARRE:29-JUN-2021:Added code for STRY0122298
								var loginName = SCOUIMethods.SCGetProfileAttrValue("Login Name");
								if(OrderDetailrecords[0]["Created By Name"] == loginName)
									$("#delete_Order360").removeClass("SC-disabled");
								else{
									if(!($("#delete_Order360").hasClass("SC-disabled")))
										$("#delete_Order360").addClass("SC-disabled");
								}
                            }
                            /* if(status_val!=submitted_value && status_val!=closed_value && status_val!=cancelled_value && status_val!=complete_value && status_val!=booked_value)
                            {
                            	$("#resume_order360").show();
                            } */

                            //SADDALA:Changed conditions based on the sheet for 719
                            if (status_val != submitted_value && status_val != complete_value && status_val != booked_value && status_val != cancelled_value && status_val != closed_value) {
                                if (revisionNumber < 2 && status_val != hold_ && status_val != oracle_error) {
                                    $("#resume_order360").show();
                                } else if ((status_val == hold_ || status_val == oracle_error) && OrderDetailrecords[0]["SC Admin Responsibility"] == 'Y') {
                                    $("#resume_order360").show();
                                } else if ((revisionNumber > 1 && (status_val == siebel_error || status_val == inprogress_value)) && ((userposition == "STORE" && (datestring == orderDatestring) && OrderDetailrecords[0]["SC Location Store Number"] == SCStoreNumber) || (userposition == "CSC" && (datestring == orderDatestring) && (scprimaryDT == OrderDetailrecords[0]["SC Sale Location"])) || (userposition == "CS" || userposition == "WHOLESALE" || OrderDetailrecords[0]["SC Admin Responsibility"] == 'Y'))) {
                                    $("#resume_order360").show();
                                }
                            }

                            /* if(OrderDetailrecords["SC Revise Order Calc"]=="Y"||(userposition=="CS" &&status_val==booked_value ))
                            {
                            	$("#Revise_order360").show();
                            } */
                            if (revisionNumber > 1 && (status_val == inprogress_value || status_val == siebel_error)) {
                                //RCHATHAR: For defect nubmer 860
                                //$("#quote_order360").show();
                                if ("Y" == "Y") {	//P2PE Condition
                                    $("#customerreciept").show();
                                    $("#storereciept").show();
                                } else {
                                    $("#reciept_order360").show();
                                }
                                //NGOLLA:Defect756 Added Code 
                                if (OrderDetailrecords[0]["SC Admin Responsibility"] == 'Y') {
                                    $("#sc-add-lastname").show();
                                    $("#sales-order-360-Address").show();
                                }
                            }
                            if (OrderDetailrecords[0]["SC SE Revise Order Calc"] == "Y" && hideRevison == "N") {
                                $("#Revise_order360").show();
                            }
                            //saddala changed condition 
                            if ((revisionNumber < 2 && (status_val == inprogress_value || status_val == siebel_error)) || (OrderDetailrecords[0]["SC Admin Responsibility"] == 'Y')) {
                                $("#SC-360-order-details-edit").show();
                                if (OrderDetailrecords[0]["Tax Exempt"] == "Y") {
                                    $("#sc-360-Tax").addClass("SC-360-od");
                                }

                            } else {
                                $("#SC-360-order-details-edit").hide();
                            }
                            //End:code for edit button
                            var caninvoke = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetPModel().GetRenderer().GetPM().ExecuteMethod("CanInvokeMethod", "SCResubmitSIQProfile");
                            if (caninvoke) {
                                $("#sc-resubmit-sleep").removeClass("SC-disabled");
                            }
                            $("body").trigger('Custom.End');
                        }, 1000);
                    });
                    //End:code for on click of Refresh Button

                    //NGOLLA:Start:open PickApplet on Click of Payment Type
                    $("#SC-select-payment").click(function(event) {
                        $("body").trigger('Custom.Start');
                        setTimeout(function() {
                            SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Payments List Applet OUI"].GetPModel().OnControlEvent(SiebelApp.Constants.get("PHYEVENT_INVOKE_PICK"), SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Payments List Applet OUI"].GetControls()["Payment Type"]);
                            SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Payments List Applet OUI"].GetPModel().AttachNotificationHandler("g", function(o) {
                                var Field_Name = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Payments List Applet OUI"].GetPModel().ExecuteMethod("GetFieldValue", SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Payments List Applet OUI"].GetControls()["Payment Type"]);
                                SiebelJS.Log("field name value is:" + Field_Name);
                                $("#SC-select-payment").val(Field_Name);
                                //document.getElementById("SC-select-payment").innerText = Field_Name;
                            });
                            //hiding the Loader
                            $("body").trigger('Custom.End');
                        }, 1000);
                    });
                    //End:open PickApplet on Click of Payment Type
                    //NGOLLA:create Payment Line
                    $(document).on('click', "#SCPaymentLine", function(e) {
                        //var errorCodes = errorcodes();
                        var errorCodes = '';
                        errorCodes = ErrorCodesfn.errorcodes();
                        $("#sc-create-payment-line").validate({
                            rules: {
                                paymentmethod: {
                                    required: true
                                },
                                paymenttype: {
                                    required: true
                                },
                                accountnumber: {
                                    required: true
                                }
                            },
                            messages: {
                                paymentmethod: errorCodes.SC_REQUIRED_PAYMENT_METHOD,
                                paymenttype: errorCodes.SC_REQUIRED_PAYMENT_TYPE,
                                accountnumber: errorCodes.SC_REQUIRED_ACCOUNT_NUMBER
                            },
                            tooltip_options: {
                                paymentmethod: {
                                    trigger: 'focus',
                                    placement: 'bottom',
                                    html: true
                                },
                                paymenttype: {
                                    trigger: 'focus',
                                    placement: 'bottom',
                                    html: true
                                },
                                accountnumber: {
                                    trigger: 'focus',
                                    placement: 'bottom',
                                    html: true
                                }
                            },

                            submitHandler: function(form) {
                                event.preventDefault();
                                $("#SC-Payment-Creation").modal('hide');
                                $("body").trigger('Custom.Start');
                                setTimeout(function() {
                                    var paymentmethodvalue = $("#SC-Payment-method").val();
                                    var paymenttypevalue = $("#SC-select-payment").val();
                                    var accountnumber = $("#scaccountnumber").val();
                                    SiebelJS.Log("paymentmethodvalue" + paymentmethodvalue);
                                    SiebelJS.Log("paymenttypevalue:" + paymenttypevalue);
                                    Paymentdetails_BC.SetFieldValue("SC Payment Type Code", paymenttypevalue);
                                    if ($("#SC-Payment-method").val() == "Financing") {
                                        Paymentdetails_BC.SetFieldValue("Account Number", accountnumber);
                                    }
                                    Paymentdetails_BC.SetFieldValue("Transaction Amount", "$0.0");
                                    SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Payments List Applet OUI"].InvokeMethod("WriteRecord");
                                    paymenydetailsrcdmarkup = getPaymentDetailsRcds();
                                    $('#sc-PaymenyDetails-rcd').html(paymenydetailsrcdmarkup);
                                    $("#SC-Payment-method").val("");
                                    $("#SC-select-payment").val("Select");
                                    //hiding the Loader
                                    $("body").trigger('Custom.End');
                                }, 1000);
                            } //closing submit handler
                        });
                    }); //closing document ready
                    //End: Asset Field Validation
                    $(document).on("click", "#SCPayments-cancel", function() {
                        $("#SC-Payment-Creation").modal('hide');
                        $("#SC-Payment-method").val("");
                        $("#SC-Payment-method").parent().removeClass("is-completed");
                        var canUndo = PaymentdetailsPM.ExecuteMethod("CanInvokeMethod", "UndoRecord");
                        if (canUndo) {
                            var undoRecord = PaymentdetailsPM.ExecuteMethod("InvokeMethod", "UndoRecord", null, false);
                        }
                        $("#SC-select-payment").val("Select");
                    });
                    //on click of OK
                    $(document).on("click", "#SC-resume-hold-ok", function() {
                        $("#SC-SO-hold-revise").modal('hide');
                    });


                    $(document).on("click", "#SC-Reprice-order-button", function() {
                        $("#SC-SO-resume-order").modal('hide');
                        //Start loader 
                        $("body").trigger('Custom.Start');
                        setTimeout(function() {
							//25-Nov-2020:Valla Added code Strat invoking Business Service for Order Promo Validation
							(function(proxied) {
								window.alert = function() {
									if (arguments[0].includes("SyncRowSetData")) {
										// Suppressing error message
										// SiebelJS.Log("Error Message..:"+ arguments[0]);
										$('.modal-backdrop').remove();
									} else
										return proxied.apply(this, arguments);
								};
                            })(window.alert);
							OrderDetailrecords = OrderDetailPMinstance.Get("GetRecordSet");
							if(OrderDetailrecords[0]["Revision"] <= 1){
								var aiPromo = {};
								aiPromo.async = true;
								aiPromo.selfbusy = true;
								aiPromo.scope = this;
								aiPromo.mask = true;
								aiPromo.opdecode = true;
								var inPS = CCFMiscUtil_CreatePropSet();
								var outPS = CCFMiscUtil_CreatePropSet();
								var orderId = OrderDetailrecords[0]["Id"];
								inPS.SetProperty("OrderId", orderId)
								var Bservice =  SiebelApp.S_App.GetService("SC Order Promo Validation"); //get service
								aiPromo.errcb = function() {
									SiebelJS.log("New order invokation got timed out")
									$('#custommaskoverlay').hide();
								};
								aiPromo.cb = function() {
									var inPropSet = CCFMiscUtil_CreatePropSet();
									var ai = {};
									ai.async = true;
									ai.selfbusy = true;
									ai.scope = this;
									ai.mask = true;
									ai.opdecode = true;
									ai.errcb = function() {
										//Code occurs here for the method that Siebel Open UI runs if the AJAX call fails
										SiebelJS.log("New order invokation got timed out")
										$('#custommaskoverlay').hide();
									};
									ai.cb = function() {
										//Code occurs here for the method that Siebel Open UI runs if the AJAX call is successful
										OrderDetailrecords = OrderDetailPMinstance.Get("GetRecordSet");
										//added code for skip to payments
										var scstorenumber = "",
											scstoreuser = "",
											gotopayments = "",
											userStoreLoc = "";
										var saleLocation = OrderDetailrecords[0]["SC Location Store Number"];
										scstorenumber = SCOUIMethods.SCGetProfileAttrValue("MachineInfo");
										scstoreuser = SCOUIMethods.SCGetProfileAttrValue("SC Store User");
										userStoreLoc = SCOUIMethods.SCGetProfileAttrValue("SC Store Number");
										var OrderSaleLocation = OrderDetailrecords[0]["SC Sale Location"];
										var PrimaryDivisn = SCOUIMethods.SCGetProfileAttrValue("SC Primary Division Name");
	
										if (scstorenumber != "" && scstorenumber != undefined) {
											scstorenumber = scstorenumber.split('_');
											scstorenumber = scstorenumber[0];
										}
										if (scstoreuser == "Y" && scstorenumber != "") {
											if (saleLocation == scstorenumber){
												//NTHARRE:Added below condition for - STRY0124385 
												if(OrderSaleLocation == PrimaryDivisn)
													gotopayments = true;
												else
													gotopayments = false;
											}
											else
												gotopayments = false;
										} else if ((scstoreuser == "Y" && saleLocation == userStoreLoc) || (scstoreuser == "N" && saleLocation == "")) {
											 //NTHARRE:Added below condition for - STRY0124385 
											if(OrderSaleLocation == PrimaryDivisn)
												gotopayments = true;
											else
												gotopayments = false;
										} else
											gotopayments = false;
										if (gotopayments && (OrderDetailrecords[0]["SC Freight Calculated Flag"] == "Y" || scAccountOrder) && OrderDetailrecords[0]["SC Verified Flag"] == "Y" && ((OrderDetailrecords[0]["SC Tax Calculated Flag"] == "Y") || (OrderDetailrecords[0]["SC Tax Calculated Flag"] == "N" && OrderDetailrecords[0]["SC Tax Verification Pending"] == "Y"))) {
											//SiebelApp.S_App.GotoView("SC Order Entry - Payment View Sales OUI", "", "", "");
											localStorage.setItem("ComingFromOrder360", "Y");
											SiebelApp.S_App.GotoView("SC Create Sales Order View OUI", "", "", "");
										} else {
											if (Lineitemrecords.length == 0)
												SiebelApp.S_App.GotoView("SC Create Sales Order View OUI", "", "", "");
											else {
												localStorage.setItem("ComingFromPayments", "Y");
												SiebelApp.S_App.GotoView("SC Create Sales Order View OUI", "", "", "");
											}
										}
										$("body").trigger('Custom.End');
									};
									LineitemrecordsPM.ExecuteMethod("InvokeMethod", "CalculatePriceAll", inPropSet, ai);
								}
								Bservice.InvokeMethod("CheckOrderPromo", inPS, aiPromo); //invoke the method
							}else{
								var inPropSet = CCFMiscUtil_CreatePropSet();
								var ai = {};
								ai.async = true;
								ai.selfbusy = true;
								ai.scope = this;
								ai.mask = true;
								ai.opdecode = true;
								ai.errcb = function() {
									//Code occurs here for the method that Siebel Open UI runs if the AJAX call fails
									SiebelJS.log("New order invokation got timed out")
									$('#custommaskoverlay').hide();
								};
								ai.cb = function() {
									//Code occurs here for the method that Siebel Open UI runs if the AJAX call is successful
									OrderDetailrecords = OrderDetailPMinstance.Get("GetRecordSet");
									//added code for skip to payments
									var scstorenumber = "",
										scstoreuser = "",
										gotopayments = "",
										userStoreLoc = "";
									var saleLocation = OrderDetailrecords[0]["SC Location Store Number"];
									scstorenumber = SCOUIMethods.SCGetProfileAttrValue("MachineInfo");
									scstoreuser = SCOUIMethods.SCGetProfileAttrValue("SC Store User");
									userStoreLoc = SCOUIMethods.SCGetProfileAttrValue("SC Store Number");

									if (scstorenumber != "" && scstorenumber != undefined) {
										scstorenumber = scstorenumber.split('_');
										scstorenumber = scstorenumber[0];
									}
									if (scstoreuser == "Y" && scstorenumber != "") {
										if (saleLocation == scstorenumber)
											gotopayments = true;
										else
											gotopayments = false;
									} else if ((scstoreuser == "Y" && saleLocation == userStoreLoc) || (scstoreuser == "N" && saleLocation == "")) {
										gotopayments = true;
									} else
										gotopayments = false;
									if (gotopayments && (OrderDetailrecords[0]["SC Freight Calculated Flag"] == "Y" || scAccountOrder) && OrderDetailrecords[0]["SC Verified Flag"] == "Y" && ((OrderDetailrecords[0]["SC Tax Calculated Flag"] == "Y") || (OrderDetailrecords[0]["SC Tax Calculated Flag"] == "N" && OrderDetailrecords[0]["SC Tax Verification Pending"] == "Y"))) {
										//SiebelApp.S_App.GotoView("SC Order Entry - Payment View Sales OUI", "", "", "");
										localStorage.setItem("ComingFromOrder360", "Y");
										SiebelApp.S_App.GotoView("SC Create Sales Order View OUI", "", "", "");
									} else {
										if (Lineitemrecords.length == 0)
											SiebelApp.S_App.GotoView("SC Create Sales Order View OUI", "", "", "");
										else {
											localStorage.setItem("ComingFromPayments", "Y");
											SiebelApp.S_App.GotoView("SC Create Sales Order View OUI", "", "", "");
										}
									}
									$("body").trigger('Custom.End');
								};
								LineitemrecordsPM.ExecuteMethod("InvokeMethod", "CalculatePriceAll", inPropSet, ai);
							}
							//25-Nov-2020:Valla Added code End
						}, 50);
                    });
                    //end:click on Resume Order

                    //start:click on no button in delete order
                    $(document).on("click", "#SC-delete-no", function() {
                        //Start loader 
                        $("body").trigger('Custom.Start');
                        setTimeout(function() {
                            $("#SC-SO-Delete-order").modal('hide');
                            $(".SC-SO-add-popup").css({
                                "display": "",
                                "justify-content": "",
                                "align-items": ""
                            });
                            (function(proxied) {
                                window.confirm = function() {
                                    if (arguments[0].includes("Are you sure you want to delete the")) {
                                        return false;
                                        SiebelJS.Log("supressed");
                                    } else
                                        return proxied.apply(this, arguments);
                                };
                            })(window.confirm);
                            //hiding the Loader
                            $("body").trigger('Custom.End');
                        }, 1000);
                    });
                    //end:click on no button in delete order
                    //RCHATHAR: For defect number 710
                    //on click of sale location
                    //$("#SC-sales-location-icon-id").click(function() {
                    $(document).on("click", "#SC-sales-location-icon-id", function() {
                        SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) - Admin"].GetPModel().OnControlEvent(SiebelApp.Constants.get("PHYEVENT_INVOKE_PICK"), SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) - Admin"].GetControls()["SC Sale Location"]);
                        SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) - Admin"].GetPModel().AttachNotificationHandler("g", function(o) {
                            var Field_Name = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) - Admin"].GetPModel().ExecuteMethod("GetFieldValue", SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) - Admin"].GetControls()["SC Sale Location"]);
                            SiebelJS.Log("Field_Name" + Field_Name);
                            $("#SC_Salelocationid").val(Field_Name);
                            //SBOORLA:Added code for defect 710
                            $("#order360-channel").val(SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().GetFieldValue("SC Location Type"));
                            $("#order360-sub-channel").val(SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().GetFieldValue("SC Location Sub-Channel"));
                            $("#order360-store-show").val(SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().GetFieldValue("SC Location Store Number"));
                            //$("#clocation").text(Field_Name);
                            //$("#SC-store-number").text(SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Sales Order Entry Form Applet OUI"].GetBusComp().GetFieldValue("SC Location Store Number"));
                        });
                    });
                    $(document).on("click", "#SC-show-icon-id", function() {
                        SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) - Admin"].GetPModel().OnControlEvent(SiebelApp.Constants.get("PHYEVENT_INVOKE_PICK"), SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) - Admin"].GetControls()["Show#"]);
                        SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) - Admin"].GetPModel().AttachNotificationHandler("g", function(o) {
                            var Field_Name = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) - Admin"].GetPModel().ExecuteMethod("GetFieldValue", SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) - Admin"].GetControls()["Show#"]);
                            SiebelJS.Log("Field_Name" + Field_Name);
                            $("#SC_Showid").val(Field_Name);
                            changedShowNumber = "Y";
                            //$("#clocation").text(Field_Name);
                            //$("#SC-store-number").text(SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Sales Order Entry Form Applet OUI"].GetBusComp().GetFieldValue("SC Location Store Number"));
                        });
                    });
                    //Start:on click of edit button
                    $(document).on("click", "#SC-360-order-details-edit", function() {
                        SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].InvokeMethod("RefreshBusComp");
                        OrderDetailrecords = OrderDetailPMinstance.Get("GetRecordSet");
                        //RCHATHAR: For defect number 710
                        $("#SC-source-order").addClass("SC-360-od");
                        $("#SC-po-order").addClass("SC-360-od");
                        //SBOORLA:Added code for 710 defect
                        if (OrderDetailrecords[0]["SC Admin Responsibility"] == 'Y') {
                            $("#SC-sales-location-icon-id").show();
                            $("#SC-show-icon-id").show();
                        } else {
                            $("#SC_OMUseOnly_360").removeClass("SC-360-od");
                            $("#SC_SleepIQStatus_360").removeClass("SC-360-od");
                        }

                        var order_HR_markup = ' ',
                            order_stauts_markup = "";
                        order_HR_markup += '                                                    <label class="SC-360-item-label no-margin">hold reason:</label>';
                        order_HR_markup += ' 											<select class="SC-360-item-value select-dropdown"  id="On-hold-reason">';
                        order_HR_markup += '                                            	<option class="SC-SO-Option" title="' + OrderDetailrecords[0]["Delivery Block"] + '" >' + OrderDetailrecords[0]["Delivery Block"] + '</option>';
                        for (var hr = 0; hr < HoldReasonArray.length; hr++) {
                            if (HoldReasonArray[hr] != OrderDetailrecords[0]["Delivery Block"])
                                order_HR_markup += ' <option value="' + HoldReasonArray[hr] + '">' + HoldReasonArray[hr] + '</option>';
                        }
                        order_HR_markup += '                                           	</select>';
                        $('#SC-360-HoldReason').html(order_HR_markup);
                        //RCHATHAR: For defect number 710
                        if (OrderDetailrecords[0]["SC PayType Change"] == "N" || OrderDetailrecords[0]["SC PayType ChangeSE"] == "N") {
                            $("#SC_Statusid").addClass("SC-360-od");
                            order_stauts_markup += '                                                    <label class="SC-360-item-label no-margin">Status:</label>';
                            order_stauts_markup += ' 											<select class="SC-360-item-value select-dropdown" id="SC-Status-id">';
                            order_stauts_markup += '                                            	<option class="SC-SO-Option" title="' + OrderDetailrecords[0]["Status"] + '" >' + OrderDetailrecords[0]["Status"] + '</option>';
                            for (var hr = 0; hr < statusArray.length; hr++) {
                                if (statusArray[hr] != OrderDetailrecords[0]["Status"])
                                    order_stauts_markup += ' <option value="' + statusArray[hr] + '">' + statusArray[hr] + '</option>';
                            }
                            order_stauts_markup += '                                           	</select>';
                            $('#SC_360_Status').html(order_stauts_markup);
                        }
                        $(this).hide();
                        $(".SC-360-od").prop('readonly', false);
                        $(".SC-360-od").addClass('add-pointer-events');
                        $(".SC-360-od").css({
                            "border-bottom": '1px solid #b2b2b2',
                            //"pointer-events": "all"
                        });
                        $("#SC-360-od-save").show();
                    });
                    //End:on click of edit button
                    //Start:on click of cancel button
                    $(document).on("click", "#SC-od-close", function() {
                        //RCHATHAR: For defect number 710
                        $("#SC-sales-location-icon-id").hide();
                        $("#SC-show-icon-id").hide();
                        $("#SC-360-order-details-edit").show();
                        $(".SC-360-od").prop('readonly', true);
                        $(".SC-360-od").removeClass('add-pointer-events');
                        $(".SC-360-od").css({
                            "border-bottom": '1px solid transparent',
                            // "pointer-events": "none"
                        });
                        $("#SC-360-od-save").hide();
                        var order_HR_markup = ' ',
                            order_stauts_markup = "";
                        order_HR_markup += '                                                    <label class="SC-360-item-label no-margin">hold reason:</label>';
                        order_HR_markup += '                                           <input type="text" name="" class="SC-360-item-value" id="SC_HoldReason_360" value="' + SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().GetFieldValue("Delivery Block") + '">';
                        $('#SC-360-HoldReason').html(order_HR_markup);
                        //RCHATHAR:For defect number 710
                        order_stauts_markup += '                                                    <label class="SC-360-item-label no-margin">Status:</label>';
                        order_stauts_markup += '                                           <input type="text" name="" class="SC-360-item-value" id="SC_Statusid" value="' + SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().GetFieldValue("Status") + '">';
                        $('#SC_360_Status').html(order_stauts_markup);
                        $("#SC-source-order").val(SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().GetFieldValue("SC Ext Order Number"));
                        //SCHERKU: defect no:710
                        $("#SC-po-order").val(SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().GetFieldValue("SC Purchase Order Number"));
                        $("#SC_OMUseOnly_360").val(SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().GetFieldValue("Comments"));
                        $("#SC_SleepIQStatus_360").val(SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().GetFieldValue("SC SleepIQ Status"));
                        //SBOORLA:Added code for defect 710
                        $("#order360-channel").val(SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().GetFieldValue("SC Location Type"));
                        $("#order360-sub-channel").val(SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().GetFieldValue("SC Location Sub-Channel"));
                        $("#SC_Salelocationid").val(SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().GetFieldValue("SC Sale Location"));
                        $("#order360-store-show").val(SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().GetFieldValue("SC Location Store Number"));
                        if (SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().GetFieldValue("SC Tax Verification Pending") == 'Y') {
                            $("#SC_TVP_360").prop('checked', true);
                        } else {
                            $("#SC_TVP_360").prop('checked', false);
                        }
                        if (SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().GetFieldValue("Hold Flag") == 'Y') {
                            $("#sc-hold-flg-360").prop('checked', true);
                        } else {
                            $("#sc-hold-flg-360").prop('checked', false);
                        }
                    });
                    //Start:on click of cancel button
                    //SBOORLA:Added code for defect 671
                    $(document).on("click", "#SC-od-save", function() {
                        //Start loader 
                        $('#maskoverlay').show();
                        setTimeout(function() {
                            $("#SC-sales-location-icon-id").hide();
                            $("#SC-show-icon-id").hide();
                            var holdReason = "",
                                scSaleLocation = "",
                                statusval = "",
                                scTaxVerfPending = "",
                                scholdflag360 = "",
                                omUseOnly = "",
                                sleepIQval = "";
                            holdReason = $("#On-hold-reason").val();
                            //RCHATHAR: For defect number 710
                            scSaleLocation = $("#SC_Salelocationid").val();
                            statusval = $("#SC-Status-id").val();
                            scTaxVerfPending = $("#SC_TVP_360").prop('checked') ? 'Y' : 'N';
                            scholdflag360 = $("#sc-hold-flg-360").prop('checked') ? 'Y' : 'N';
                            omUseOnly = $("#SC_OMUseOnly_360").val();
                            sleepIQval = $("#SC_SleepIQStatus_360").val();
                            SiebelJS.Log("scTaxVerfPendingbox" + scTaxVerfPending);
                            //RCHATHAR: For defect number 710
                            if (statusval != "" && statusval != "undefined" && statusval != undefined)
                                SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) - Admin"].GetBusComp().SetFieldValue("Status", statusval);
                            if ($("#SC-source-order").val() != null && $("#SC-source-order").val() != undefined)
                                SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) - Admin"].GetBusComp().SetFieldValue("SC Ext Order Number", $("#SC-source-order").val());
                            if ($("#SC-po-order").val() !== "" && $("#SC-po-order").val() != null && $("#SC-po-order").val() != undefined)
                                SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) - Admin"].GetBusComp().SetFieldValue("SC Purchase Order Number", $("#SC-po-order").val());
                            SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) - Admin"].InvokeMethod("WriteRecord");
                            SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().SetFieldValue("Delivery Block", holdReason);
                            //if($("#SC_TVP_360").hasClass("SC-360-od"))
                            SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().SetFieldValue("Hold Flag", scholdflag360);
                            SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().SetFieldValue("Comments", omUseOnly);
                            SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().SetFieldValue("SC SleepIQ Status", sleepIQval);
                            SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().SetFieldValue("SC Sale Location", scSaleLocation);
                            SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].InvokeMethod("WriteRecord");

                            if (SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().GetFieldValue("SC Tax Verification Pending") != scTaxVerfPending) {
                                var inPS = SiebelApp.S_App.NewPropertySet();
                                var outPS = SiebelApp.S_App.NewPropertySet();
                                inPS.SetProperty("BO", "Order Entry (Sales)");
                                inPS.SetProperty("BC", "Order Entry - Orders");
                                inPS.SetProperty("FieldsArray", "SC Tax Verification Pending");
                                inPS.SetProperty("ValuesArray", scTaxVerfPending);
                                inPS.SetProperty("SearchSpecification", "[Id] = '" + orderId + "'");
                                Bservice = SiebelApp.S_App.GetService("SC Custom Query Simplified");
                                outPS = Bservice.InvokeMethod("Insert", inPS);
                            }

                            SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].InvokeMethod("RefreshBusComp");
                            //SBOORLA:Added code for defect 710
                            $("#order360-channel").val(SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().GetFieldValue("SC Location Type"));
                            $("#order360-sub-channel").val(SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().GetFieldValue("SC Location Sub-Channel"));
                            $("#SC_Salelocationid").val(SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().GetFieldValue("SC Sale Location"));
                            $("#order360-store-show").val(SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().GetFieldValue("SC Location Store Number"));
                            //SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().GetFieldValue("Delivery Block");
                            $("#SC_OMUseOnly_360").val(SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().GetFieldValue("Comments"));
                            $("#SC_OnHoldFor_360").val(SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().GetFieldValue("SC Days On Hold"));
                            $("#SC_SleepIQStatus_360").val(SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().GetFieldValue("SC SleepIQ Status"));
                            //SCHERKU: defect no:710
                            $("#SC-source-order").val(SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().GetFieldValue("SC Ext Order Number"));
                            $("#SC-po-order").val(SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().GetFieldValue("SC Purchase Order Number"));
                            $("#SC_Showid").val(SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) - Admin"].GetBusComp().GetFieldValue("SC Sale Show#"));
                            var order_HR_markup = ' ',
                                order_stauts_markup = "";
                            order_HR_markup += '                                                    <label class="SC-360-item-label no-margin">hold reason:</label>';
                            order_HR_markup += '                                           <input type="text" name="" class="SC-360-item-value" id="SC_HoldReason_360" value="' + holdReason + '">';
                            $('#SC-360-HoldReason').html(order_HR_markup);
                            //RCHATHAR: For defect number 710
                            order_stauts_markup += '                                                    <label class="SC-360-item-label no-margin">Status:</label>';
                            order_stauts_markup += '                                           <input type="text" name="" class="SC-360-item-value" id="SC_Statusid" value="' + SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().GetFieldValue("Status") + '">';
                            $('#SC_360_Status').html(order_stauts_markup);
                            $("#SC-360-order-details-edit").show();
                            $(".SC-360-od").prop('readonly', true);
                            $(".SC-360-od").removeClass('add-pointer-events');
                            $(".SC-360-od").css({
                                "border-bottom": '1px solid transparent',
                                //"pointer-events": "none"
                            });
                            $("#SC-360-od-save").hide();
                            //hiding the Loader
                            OrderDetailrecords = OrderDetailPMinstance.Get("GetRecordSet");
                            $('#maskoverlay').hide();
                        }, 50);
                        $(".SC-360-item-value").prop('readonly', true);
                    });
                    //SBOORLA:Added code for defect 618
                    //on click of quote button
                    //RCHATHAR: For Defect number 860
                    /*$(document).on("click","#Quote_image",function(e){
                    	var clickedid=this.id;
                    	$("body").trigger('Custom.Start');
                    	e.preventDefault();
                    	var orderBC = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp();
                    	var orderSubType = orderBC.GetFieldValue("SC Sub-Type");
                    	setTimeout(function() {
                    	
                    		// VALLA : 10ARP2018 : #712 Coded for Whole Sale and Commercial
                    		if(orderSubType ==  "Wholesale" || orderSubType == "Commercial"){
                    			SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].InvokeMethod("SCWholeCommCreateQuote");
                    		}else{
                    			SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].InvokeMethod("SCCreateQuote");
                    		}
                    	
                    	SiebelJS.Log("in bind datareports button click");
                    	SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Report Output List Applet"].InvokeMethod("RefreshAppletUI");
                    	SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Report Output List Applet"].GetPModel().ExecuteMethod("OnDrillDown", 'Report Name', 1);
                    	
                    	setTimeout(function() {
                    		$(".ui-dialog-buttonset button:nth-child(2)").trigger('click');
                    		setTimeout(function() {
                    			$(".ui-dialog-buttonset button:nth-child(3)").trigger('click');
                    		},1000);	
                    		},1000);	
                    		$("body").trigger('Custom.End');
                    	},1000);
                    	
                    });*/
                    //SBOORLA:get Registry POS Numbers
                    function getPOSRegistry(orderShowNumber) {
                        if (orderShowNumber != "") {
                            var eventid = "";
                            //var SCStoreNumber=SiebelApp.S_App.GetProfileAttr("SC Store Number");
                            var Custom_Service = "",
                                Input_BS = "",
                                Out_BS = "";
                            Custom_Service = SiebelApp.S_App.GetService("SC Custom Query");
                            Input_BS = SiebelApp.S_App.NewPropertySet();
                            Out_BS = SiebelApp.S_App.NewPropertySet();
                            searchfields = "Id";
                            Input_BS.SetProperty("BO", "Internal Division");
                            Input_BS.SetProperty("BC", "Internal Division");
                            Input_BS.SetProperty("SearchSpecification", "[SC Store Number] = '" + orderShowNumber + "'");
                            Input_BS.SetProperty("SortSpecification", "");
                            Input_BS.SetProperty("ReqNoOfRecords", "");
                            Input_BS.SetProperty("FieldsArray", searchfields);
                            Out_BS = Custom_Service.InvokeMethod("Query", Input_BS);
                            var Child_BS = Out_BS.GetChild(0);
                            var BS_Data = Child_BS.GetProperty("OutputRecordSet");
                            if (BS_Data != "}") {
                                var ResArray = new Array;
                                ResArray = BS_Data.split(";");

                                jsonRes = JSON.parse(ResArray[0]);
                                eventid = jsonRes["Id"];
                                SiebelJS.Log("jsonSK" + jsonRes["Id"]);
                            }
                            if (eventid != "") {
                                var Custom_Service = "",
                                    Input_BS = "",
                                    Out_BS = "";
                                Custom_Service = SiebelApp.S_App.GetService("SC Custom Query");
                                Input_BS = SiebelApp.S_App.NewPropertySet();
                                Out_BS = SiebelApp.S_App.NewPropertySet();
                                searchfields = "Mobile POS Registers";
                                Input_BS.SetProperty("BO", "Internal Division");
                                Input_BS.SetProperty("BC", "SC Mobile POS Registers");
                                Input_BS.SetProperty("SearchSpecification", "[Account ID] = '" + eventid + "'");
                                Input_BS.SetProperty("SortSpecification", "");
                                Input_BS.SetProperty("ReqNoOfRecords", "");
                                Input_BS.SetProperty("FieldsArray", searchfields);
                                Out_BS = Custom_Service.InvokeMethod("Query", Input_BS);
                                var Child_BS = Out_BS.GetChild(0);
                                var BS_Data = Child_BS.GetProperty("OutputRecordSet");
                                if (BS_Data != "}") {
                                    var ResArray = new Array;
                                    ResArray = BS_Data.split(";");
                                    for (var i = 0; i < ResArray.length; i++) {
                                        jsonRes = JSON.parse(ResArray[i]);
                                        SiebelJS.Log(jsonRes["Mobile POS Registers"]);
                                        POSorderRegArray[i] = jsonRes["Mobile POS Registers"];
                                    }

                                }
                            }
                        }
                    }
                }

                SCiPadSalesOrder360DegreeViewPR.prototype.BindData = function(bRefresh) {
                    SiebelAppFacade.SCiPadSalesOrder360DegreeViewPR.superclass.BindData.apply(this, arguments);

                    var reportsdata = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Report Output List Applet"].GetPModel().GetRenderer().GetPM().Get("GetRecordSet");
                    //On click of create quote button
                    /* $(document).on("click","#Quote_image",function(){
			/*SiebelJS.Log("On click of quote image");
			//$("#s_1_1_0_0_Ctrl").trigger('click');
			SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].InvokeMethod("SCCreateQuote");
			SiebelJS.Log("On click of existing quote image");
			var FieldQueryPair  =  {"Time Generated":"IS NOT NULL"};
			SCOUIMethods.ExecuteListAppletFrame(SiebelConstant,FieldQueryPair,"SC Report Output List Applet");
			var reportsdataPM = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Report Output List Applet"].GetPModel().GetRenderer().GetPM();
			SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Report Output List Applet"].GetBusComp().SetSortSpec('Time Generated','DESC');
			SiebelJS.Log("reportsss:"+JSON.stringify(reportsdata));
			//var appletId = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Report Output List Applet"].GetPModel().Get("GetFullId");
			//var appletSeq = appletId[appletId.length -1];
			reportsdataPM.ExecuteMethod("OnDrillDown", 'Report Name', 1);
			setTimeout(function() {
			$(".ui-dialog-buttonset button:nth-child(2)").trigger('click');
			setTimeout(function() {
			$(".ui-dialog-buttonset button:nth-child(3)").trigger('click');
			},1000);
			},1000);
			setTimeout(function() {
			SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].InvokeMethod("SCCreateQuote");
			},30000);
			SiebelApp.S_App.GetActiveView().SetActiveApplet(SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Report Output List Applet"]);
			//var FieldQueryPair  =  {"Owner":"1-AQ7QFJC"};
			var FieldQueryPair  =  {"Owner":"SCHERKU"};
			SCOUIMethods.ExecuteListAppletFrame(SiebelConstant,FieldQueryPair,"SC Report Output List Applet");
			var CurrentDate = new Date();
			var time1 = CurrentDate.toLocaleTimeString('en-GB');
			SiebelJS.Log("Currenttime:"+time1);
			//var reportsdata = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Report Output List Applet"].GetPModel().GetRenderer().GetPM().Get("GetRecordSet");
			//SiebelJS.Log("reportsss:"+JSON.stringify(reportsdata));
			var reportsdataPM = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Report Output List Applet"].GetPModel().GetRenderer().GetPM();
			reportsdataPM.ExecuteMethod("OnDrillDown", 'Report Name', 1);
			setTimeout(function() {
			$(".ui-dialog-buttonset button:nth-child(2)").trigger('click');
			setTimeout(function() {
			$(".ui-dialog-buttonset button:nth-child(3)").trigger('click');
			},1000);
			},1000);
		
		});*/
                    /* $(document).on("click", "#reciept-generation", function() {
					   //function printReceipt(){
                        SiebelJS.Log("on click of reciept generation");
                        var bip_id = OrderDetailrecords[0]["Id"];
                        var bip_ordernumber = OrderDetailrecords[0]["Order Number"];
                        SiebelJS.Log("bip id:" + bip_id);
                        SiebelJS.Log("bip ordernumber:" + bip_ordernumber);
                        $("body").trigger('Custom.Start');
                        setTimeout(function() {
                            if (bip_id != null) {
                                var InPS3 = SiebelApp.S_App.NewPropertySet();
                                var OutPS3 = SiebelApp.S_App.NewPropertySet();
                                InPS3.SetProperty("bipordernumber", bip_ordernumber);
                                InPS3.SetProperty("biporderrowid", bip_id);
								InPS3.SetProperty("receiptmode", "Original");
                                var Service3 = SiebelApp.S_App.GetService("SC Store Data BS");
                                // VALLA:10APR18: #712 Coded for Whole Sale and Commercial Receipt Report
                                var orderBC = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp();
                                var orderSubType = orderBC.GetFieldValue("SC Sub-Type");
                                if (orderSubType == "Wholesale" || orderSubType == "Commercial" || orderSubType == "QVC" || orderSubType == "Internal" || orderSubType == "HSN") {
                                    OutPS3 = Service3.InvokeMethod("SC WC Reciept Generation", InPS3);
                                } else {
                                    OutPS3 = Service3.InvokeMethod("SC Reciept Generation", InPS3);
                                }
                                SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Report Output List Applet"].InvokeMethod("RefreshAppletUI");
                                SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Report Output List Applet"].GetPModel().ExecuteMethod("OnDrillDown", 'Report Name', 1);
                                setTimeout(function() {
                                    $(".ui-dialog-buttonset button:nth-child(2)").trigger('click');
                                    setTimeout(function() {
                                        $(".ui-dialog-buttonset button:nth-child(3)").trigger('click');
                                    }, 1000);
                                }, 1000);
                            }
                            $("body").trigger('Custom.End');
                        }, 1000);
                    });*/
                    // }


                    $(document).on("click", "#customer-recp-gen", function() {
                        SiebelJS.Log("on click of reciept generation");
                        var bip_id = OrderDetailrecords[0]["Id"];
                        var bip_ordernumber = OrderDetailrecords[0]["Order Number"];
                        SiebelJS.Log("bip id:" + bip_id);
                        SiebelJS.Log("bip ordernumber:" + bip_ordernumber);
                        $("body").trigger('Custom.Start');
                        setTimeout(function() {
                            if (bip_id != null) {
                                var InPS3 = SiebelApp.S_App.NewPropertySet();
                                var OutPS3 = SiebelApp.S_App.NewPropertySet();
                                InPS3.SetProperty("bipordernumber", bip_ordernumber);
                                InPS3.SetProperty("biporderrowid", bip_id);
                                InPS3.SetProperty("receiptmode", "Customer");
                                var Service3 = SiebelApp.S_App.GetService("SC Store Data BS");
                                // VALLA:10APR18: #712 Coded for Whole Sale and Commercial Receipt Report
                                var orderBC = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp();
                                var orderSubType = orderBC.GetFieldValue("SC Sub-Type");
                                if (orderSubType == "Wholesale" || orderSubType == "Commercial") {
                                    OutPS3 = Service3.InvokeMethod("SC WC Reciept Generation", InPS3);
                                } else {
                                    OutPS3 = Service3.InvokeMethod("SC Reciept Generation", InPS3);
                                }
                                SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Report Output List Applet"].InvokeMethod("RefreshAppletUI");
                                SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Report Output List Applet"].GetPModel().ExecuteMethod("OnDrillDown", 'Report Name', 1);
                                setTimeout(function() {
                                    $(".ui-dialog-buttonset button:nth-child(2)").trigger('click');
                                    setTimeout(function() {
                                        $(".ui-dialog-buttonset button:nth-child(3)").trigger('click');
                                    }, 1000);
                                }, 1000);
                            }
                            $("body").trigger('Custom.End');
                        }, 1000);
                    });

                    $(document).on("click", "#store-recp-gen", function() {
                        SiebelJS.Log("on click of reciept generation");
                        var bip_id = OrderDetailrecords[0]["Id"];
                        var bip_ordernumber = OrderDetailrecords[0]["Order Number"];
                        SiebelJS.Log("bip id:" + bip_id);
                        SiebelJS.Log("bip ordernumber:" + bip_ordernumber);
                        $("body").trigger('Custom.Start');
                        setTimeout(function() {
                            if (bip_id != null) {
                                var InPS3 = SiebelApp.S_App.NewPropertySet();
                                var OutPS3 = SiebelApp.S_App.NewPropertySet();
                                InPS3.SetProperty("bipordernumber", bip_ordernumber);
                                InPS3.SetProperty("biporderrowid", bip_id);
                                InPS3.SetProperty("receiptmode", "Merchant");
                                var Service3 = SiebelApp.S_App.GetService("SC Store Data BS");
                                // VALLA:10APR18: #712 Coded for Whole Sale and Commercial Receipt Report
                                var orderBC = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp();
                                var orderSubType = orderBC.GetFieldValue("SC Sub-Type");
                                if (orderSubType == "Wholesale" || orderSubType == "Commercial") {
                                    OutPS3 = Service3.InvokeMethod("SC WC Reciept Generation", InPS3);
                                } else {
                                    OutPS3 = Service3.InvokeMethod("SC Reciept Generation", InPS3);
                                }
                                SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Report Output List Applet"].InvokeMethod("RefreshAppletUI");
                                SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Report Output List Applet"].GetPModel().ExecuteMethod("OnDrillDown", 'Report Name', 1);
                                setTimeout(function() {
                                    $(".ui-dialog-buttonset button:nth-child(2)").trigger('click');
                                    setTimeout(function() {
                                        $(".ui-dialog-buttonset button:nth-child(3)").trigger('click');
                                    }, 1000);
                                }, 1000);
                            }
                            $("body").trigger('Custom.End');
                        }, 1000);
                    });


                    //Paymeny type pick applet
                    $(document).on("click", "#paymenttypeimg", function() {
                        //Start loader 
                        var id = $(this).prev().attr('id');
                        $("body").trigger('Custom.Start');
                        setTimeout(function() {
                            SiebelJS.Log("id   " + id);
                            SiebelJS.Log("before click");
                            SiebelJS.Log("using new dynamic code to invoke pick applet");
                            SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Payment Detail Applet - Admin OUI"].GetPModel().OnControlEvent(SiebelApp.Constants.get("PHYEVENT_INVOKE_PICK"), SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Payment Detail Applet - Admin OUI"].GetControls()["PaymentType"]);
                            SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Payment Detail Applet - Admin OUI"].GetPModel().AttachNotificationHandler("g", function(o) {
                                var Field_Name = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Payment Detail Applet - Admin OUI"].GetPModel().ExecuteMethod("GetFieldValue", SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Payment Detail Applet - Admin OUI"].GetControls()["PaymentType"]);
                                SiebelJS.Log("field name value is:" + Field_Name);
                                $("#" + id).val(Field_Name);
                            });
                            //hiding the Loader
                            $("body").trigger('Custom.End');
                        }, 1000);
                    });

                    //Pay reference pick applet
                    $(document).on("click", "#payreferenceimg", function() {
                        //Start loader 
                        var id = $(this).prev().attr('id');
                        $("body").trigger('Custom.Start');
                        setTimeout(function() {

                            SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Payment Detail Applet - Admin OUI"].GetPModel().OnControlEvent(SiebelApp.Constants.get("PHYEVENT_INVOKE_PICK"), SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Payment Detail Applet - Admin OUI"].GetControls()["SC Pay Ref#"]);
                            SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Payment Detail Applet - Admin OUI"].GetPModel().AttachNotificationHandler("g", function(o) {
                                var Field_Name = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Payment Detail Applet - Admin OUI"].GetPModel().ExecuteMethod("GetFieldValue", SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Payment Detail Applet - Admin OUI"].GetControls()["SC Pay Ref#"]);
                                $("#" + id).val(Field_Name);
                                SiebelJS.Log("Field_Name" + Field_Name);
                            });
                            //hiding the Loader
                            $("body").trigger('Custom.End');
                        }, 1000);
                    });


                    // inner circle pick applet
                    $(document).on("click", "#innercircleimg", function() { //Start loader 
                        var id = $(this).prev().attr('id');
                        $("body").trigger('Custom.Start');
                        setTimeout(function() {



                            SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Payment Detail Applet - Admin OUI"].GetPModel().OnControlEvent(SiebelApp.Constants.get("PHYEVENT_INVOKE_PICK"), SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Payment Detail Applet - Admin OUI"].GetControls()["SCVoucherNumber"]);
                            SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Payment Detail Applet - Admin OUI"].GetPModel().AttachNotificationHandler("g", function(o) {
                                var Field_Name = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Payment Detail Applet - Admin OUI"].GetPModel().ExecuteMethod("GetFieldValue", SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Payment Detail Applet - Admin OUI"].GetControls()["SCVoucherNumber"]);
                                $("#" + id).val(Field_Name);
                                SiebelJS.Log("Field_Name" + Field_Name);
                            });
                            //hiding the Loader
                            $("body").trigger('Custom.End');
                        }, 1000);
                    });


                }

                SCiPadSalesOrder360DegreeViewPR.prototype.BindEvents = function() {
                    SiebelAppFacade.SCiPadSalesOrder360DegreeViewPR.superclass.BindEvents.apply(this, arguments);
                    //SNARRA 11-12-2018 Added code for Custom backdrop
                    $(".modal").on('show.bs.modal', function() {
                        $(".modal-backdrop").css("z-index", "-1");
                        $("#custom-backdrop").show();
                    });

                    $(".modal").on('hide.bs.modal', function() {
                        $("#custom-backdrop").hide();
                    });
                    //About Record
                    SCOUIMethods.AboutRecord("SC Order Entry - Order Form Applet (Sales) OUI");
                    //sushma 19-07-2018:Added for Resizing CTI Toolbar
                    $(document).on('click', '#commPanelDockToShowUnpin', function() {
                        $("#CommunicationPanelContainer").css("cssText", "padding-top: 0px !important;");
                    })
                    $(document).on('click', '#commPanelDockToShowPin', function() {
                        $("#CommunicationPanelContainer").css("cssText", "padding-top: 80px !important;");
                    })
                    //SNARRA:29-10-2018 Start: show CTI Toolbar
                    $(document).on('click', '#SC-ANI-CTItool', function() {
                        $(this).find('img').toggle();
                        $('#tb_1')[0].click();
                        setTimeout(function() {
                            $('#commPanelDockToShowpin').click();
                        }, 500);
                    });
                    $(document).on('click', '#commPanelCloseToggle', function() {
                        $("#SC-ANI-CTItool").find('img').toggle();
                    });
                    //Start:Sorting Logic
                    $(document).on("click", ".sort-by", function() {
                        if ($(this).attr('id') == "dateopened") {
                            if (dateopened == true) {
                                SCOUIMethods.SortRecords(HDSRPM, "Created", 'SortAscending');
                                GetHDSRRecords();
                                dateopened = false;
                            } else {
                                SCOUIMethods.SortRecords(HDSRPM, "Created", 'SortDescending');
                                GetHDSRRecords();
                                dateopened = true;
                            }
                        } else if ($(this).attr('id') == "ordernumber") {
                            if (ordernumber == true) {
                                SCOUIMethods.SortRecords(HDSRPM, "SC HD Order Number", 'SortAscending');
                                GetHDSRRecords();
                                ordernumber = false;
                            } else {
                                SCOUIMethods.SortRecords(HDSRPM, "SC HD Order Number", 'SortDescending');
                                GetHDSRRecords();
                                ordernumber = true;
                            }
                        } else if ($(this).attr('id') == "srnumber") {
                            if (srnumber == true) {
                                SCOUIMethods.SortRecords(HDSRPM, "SR Number", 'SortAscending');
                                GetHDSRRecords();
                                srnumber = false;
                            } else {
                                SCOUIMethods.SortRecords(HDSRPM, "SR Number", 'SortDescending');
                                GetHDSRRecords();
                                srnumber = true;
                            }
                        } else if ($(this).attr('id') == "HDstatus") {
                            if (HDstatus == true) {
                                SCOUIMethods.SortRecords(HDSRPM, "Status", 'SortAscending');
                                GetHDSRRecords();
                                HDstatus = false;
                            } else {
                                SCOUIMethods.SortRecords(HDSRPM, "Status", 'SortDescending');
                                GetHDSRRecords();
                                HDstatus = true;
                            }
                        } else if ($(this).attr('id') == "HDPlannedstartDate") {
                            if (HDPlannedstartDate == true) {
                                SCOUIMethods.SortRecords(HDSRPM, "SC HD Activity Planned", 'SortAscending');
                                GetHDSRRecords();
                                HDPlannedstartDate = false;
                            } else {
                                SCOUIMethods.SortRecords(HDSRPM, "SC HD Activity Planned", 'SortDescending');
                                GetHDSRRecords();
                                HDPlannedstartDate = true;
                            }
                        } else if ($(this).attr('id') == "HDStartDate") {
                            if (HDStartDate == true) {
                                SCOUIMethods.SortRecords(HDSRPM, "SC HD Activity Sched Start Dt", 'SortAscending');
                                GetHDSRRecords();
                                HDStartDate = false;
                            } else {
                                SCOUIMethods.SortRecords(HDSRPM, "SC HD Activity Sched Start Dt", 'SortDescending');
                                GetHDSRRecords();
                                HDStartDate = true;
                            }
                        } else if ($(this).attr('id') == "HDrescheduled") {
                            if (HDrescheduled == true) {
                                SCOUIMethods.SortRecords(HDSRPM, "SC Rescheduled", 'SortAscending');
                                GetHDSRRecords();
                                HDrescheduled = false;

                            } else {
                                SCOUIMethods.SortRecords(HDSRPM, "SC Rescheduled", 'SortDescending');
                                GetHDSRRecords();
                                HDrescheduled = true;
                            }
                        } else if ($(this).attr('id') == "Hdrescheduledreason") {
                            if (Hdrescheduledreason == true) {
                                SCOUIMethods.SortRecords(HDSRPM, "SC Rescheduled Reason", 'SortAscending');
                                GetHDSRRecords();
                                Hdrescheduledreason = false;
                            } else {
                                SCOUIMethods.SortRecords(HDSRPM, "SC Rescheduled Reason", 'SortDescending');
                                GetHDSRRecords();
                                Hdrescheduledreason = true;
                            }
                        }
                        //SCDate getLineDetailsRcds  LineitemrecordsPM
                        //PaymentdetailsPM getPaymentDetailsRcds
                        //getPaymentHistoryRcds PaymenthistoryPM
                        else if ($(this).attr('id') == "SCDate") {
                            if (SCDate == true) {
                                SCOUIMethods.SortRecords(PaymenthistoryPM, "Date", 'SortAscending');
                                getPaymentHistoryRcds();
                                SCDate = false;
                            } else {
                                SCOUIMethods.SortRecords(PaymenthistoryPM, "Date", 'SortDescending');
                                getPaymentHistoryRcds();
                                SCDate = true;
                            }
                        } else if ($(this).attr('id') == "RecordId") {
                            if (RecordId == true) {
                                SCOUIMethods.SortRecords(PaymenthistoryPM, "Record Id", 'SortAscending');
                                getPaymentHistoryRcds();
                                RecordId = false;
                            } else {
                                SCOUIMethods.SortRecords(PaymenthistoryPM, "Record Id", 'SortDescending');
                                getPaymentHistoryRcds();
                                RecordId = true;
                            }
                        } else if ($(this).attr('id') == "EmployeeLogin") {
                            if (EmployeeLogin == true) {
                                SCOUIMethods.SortRecords(PaymenthistoryPM, "Employee Login", 'SortAscending');
                                getPaymentHistoryRcds();
                                EmployeeLogin = false;
                            } else {
                                SCOUIMethods.SortRecords(PaymenthistoryPM, "Employee Login", 'SortDescending');
                                getPaymentHistoryRcds();
                                EmployeeLogin = true;
                            }
                        } else if ($(this).attr('id') == "EmployeeId") {
                            if (EmployeeId == true) {
                                SCOUIMethods.SortRecords(PaymenthistoryPM, "Employee Id", 'SortAscending');
                                getPaymentHistoryRcds();
                                EmployeeId = false;
                            } else {
                                SCOUIMethods.SortRecords(PaymenthistoryPM, "Employee Id", 'SortDescending');
                                getPaymentHistoryRcds();
                                EmployeeId = true;
                            }
                        }
                        //
                        else if ($(this).attr('id') == "PaymentMethod") {
                            if (PaymentMethod == true) {
                                SCOUIMethods.SortRecords(PaymentdetailsPM, "Payment Method", 'SortAscending');
                                getPaymentDetailsRcds();
                                PaymentMethod = false;
                            } else {
                                SCOUIMethods.SortRecords(PaymentdetailsPM, "Payment Method", 'SortDescending');
                                getPaymentDetailsRcds();
                                PaymentMethod = true;
                            }
                        } else if ($(this).attr('id') == "PaymentDate") {
                            if (PaymentDate == true) {
                                SCOUIMethods.SortRecords(PaymentdetailsPM, "Payment Date", 'SortAscending');
                                getPaymentDetailsRcds();
                                PaymentDate = false;
                            } else {
                                SCOUIMethods.SortRecords(PaymentdetailsPM, "Payment Date", 'SortDescending');
                                getPaymentDetailsRcds();
                                PaymentDate = true;
                            }
                        } else if ($(this).attr('id') == "SCPaymentStatus") {
                            if (SCPaymentStatus == true) {
                                SCOUIMethods.SortRecords(PaymentdetailsPM, "SC Payment Status", 'SortAscending');
                                getPaymentDetailsRcds();
                                SCPaymentStatus = false;

                            } else {
                                SCOUIMethods.SortRecords(PaymentdetailsPM, "SC Payment Status", 'SortDescending');
                                getPaymentDetailsRcds();
                                SCPaymentStatus = true;
                            }
                        } else if ($(this).attr('id') == "SCPaymentType") {
                            if (SCPaymentType == true) {
                                SCOUIMethods.SortRecords(PaymentdetailsPM, "Payment Type", 'SortAscending');
                                getPaymentDetailsRcds();
                                SCPaymentType = false;

                            } else {
                                SCOUIMethods.SortRecords(PaymentdetailsPM, "Payment Type", 'SortDescending');
                                getPaymentDetailsRcds();
                                SCPaymentType = true;
                            }
                        } else if ($(this).attr('id') == "TransactionAmount") {
                            if (TransactionAmount == true) {
                                SCOUIMethods.SortRecords(PaymentdetailsPM, "Transaction Amount", 'SortAscending');
                                getPaymentDetailsRcds();
                                TransactionAmount = false;
                            } else {
                                SCOUIMethods.SortRecords(PaymentdetailsPM, "Transaction Amount", 'SortDescending');
                                getPaymentDetailsRcds();
                                TransactionAmount = true;
                            }
                        }

                        //
                        else if ($(this).attr('id') == "SCDate") {
                            if (SCDate == true) {
                                SCOUIMethods.SortRecords(PaymenthistoryPM, "Date", 'SortAscending');
                                getPaymentHistoryRcds();
                                SCDate = false;
                            } else {
                                SCOUIMethods.SortRecords(PaymenthistoryPM, "Date", 'SortDescending');
                                getPaymentHistoryRcds();
                                SCDate = true;
                            }
                        } else if ($(this).attr('id') == "RecordId") {
                            if (RecordId == true) {
                                SCOUIMethods.SortRecords(PaymenthistoryPM, "Record Id", 'SortAscending');
                                getPaymentHistoryRcds();
                                RecordId = false;
                            } else {
                                SCOUIMethods.SortRecords(PaymenthistoryPM, "Record Id", 'SortDescending');
                                getPaymentHistoryRcds();
                                RecordId = true;
                            }
                        } else if ($(this).attr('id') == "EmployeeLogin") {
                            if (EmployeeLogin == true) {
                                SCOUIMethods.SortRecords(PaymenthistoryPM, "Employee Login", 'SortAscending');
                                getPaymentHistoryRcds();
                                EmployeeLogin = false;
                            } else {
                                SCOUIMethods.SortRecords(PaymenthistoryPM, "Employee Login", 'SortDescending');
                                getPaymentHistoryRcds();
                                EmployeeLogin = true;
                            }
                        } else if ($(this).attr('id') == "EmployeeId") {
                            if (EmployeeId == true) {
                                SCOUIMethods.SortRecords(PaymenthistoryPM, "Employee Id", 'SortAscending');
                                getPaymentHistoryRcds();
                                EmployeeId = false;
                            } else {
                                SCOUIMethods.SortRecords(PaymenthistoryPM, "Employee Id", 'SortDescending');
                                getPaymentHistoryRcds();
                                EmployeeId = true;
                            }
                        }
                        // getLineDetailsRcds  LineitemrecordsPM
                        else if ($(this).attr('id') == "LineNumber") {
                            if (LineNumber == true) {
                                SCOUIMethods.SortRecords(LineitemrecordsPM, "Line Number", 'SortAscending');
                                getLineDetailsRcds();
                                LineNumber = false;
                            } else {
                                SCOUIMethods.SortRecords(LineitemrecordsPM, "Line Number", 'SortDescending');
                                getLineDetailsRcds();
                                LineNumber = true;
                            }
                        } else if ($(this).attr('id') == "PartNumber") {
                            if (PartNumber == true) {
                                SCOUIMethods.SortRecords(LineitemrecordsPM, "Part Number", 'SortAscending');
                                getLineDetailsRcds();
                                PartNumber = false;
                            } else {
                                SCOUIMethods.SortRecords(LineitemrecordsPM, "Part Number", 'SortDescending');
                                getLineDetailsRcds();
                                PartNumber = true;
                            }
                        } else if ($(this).attr('id') == "QuantityRequested") {
                            if (QuantityRequested == true) {
                                SCOUIMethods.SortRecords(LineitemrecordsPM, "Quantity Requested", 'SortAscending');
                                getLineDetailsRcds();
                                QuantityRequested = false;

                            } else {
                                SCOUIMethods.SortRecords(LineitemrecordsPM, "Quantity Requested", 'SortDescending');
                                getLineDetailsRcds();
                                QuantityRequested = true;
                            }
                        } else if ($(this).attr('id') == "SCFulfillmentStatusCode") {
                            if (Fulfillment_Status_Code == true) {
                                SCOUIMethods.SortRecords(LineitemrecordsPM, "Status", 'SortAscending');
                                getLineDetailsRcds();
                                Fulfillment_Status_Code = false;
                            } else {
                                SCOUIMethods.SortRecords(LineitemrecordsPM, "Status", 'SortDescending');
                                getLineDetailsRcds();
                                Fulfillment_Status_Code = true;
                            }
                        } else if ($(this).attr('id') == "ShipMethod") {
                            if (ShipMethod == true) {
                                SCOUIMethods.SortRecords(LineitemrecordsPM, "Ship Method", 'SortAscending');
                                getLineDetailsRcds();
                                ShipMethod = false;
                            } else {
                                SCOUIMethods.SortRecords(LineitemrecordsPM, "Ship Method", 'SortDescending');
                                getLineDetailsRcds();
                                ShipMethod = true;
                            }
                        }
						else if ($(this).attr('id') == "SN-ATP-DATE") {
                            if ( sATPDATE== true) {
                                SCOUIMethods.SortRecords(LineitemrecordsPM, "ATP Status As Of Date", 'SortAscending');
                                getLineDetailsRcds();
                                sATPDATE = false;
                            } else {
                                SCOUIMethods.SortRecords(LineitemrecordsPM, "ATP Status As Of Date", 'SortDescending');
                                getLineDetailsRcds();
                                sATPDATE = true;
                            }
                        }
                        //attachments
                        else if ($(this).attr('id') == "attachmentname") {
                            if (attachmentname == true) {
                                SCOUIMethods.SortRecords(AttdetailsPM, "OrderFileName", 'SortAscending');
                                getAttachments();
                                attachmentname = false;
                            } else {
                                SCOUIMethods.SortRecords(AttdetailsPM, "OrderFileName", 'SortDescending');
                                getAttachments();
                                attachmentname = true;
                            }
                        } else if ($(this).attr('id') == "sizeatt") {
                            if (sizeatt == true) {
                                SCOUIMethods.SortRecords(AttdetailsPM, "OrderFileSize", 'SortAscending');
                                getAttachments();
                                sizeatt = false;
                            } else {
                                SCOUIMethods.SortRecords(AttdetailsPM, "OrderFileSize", 'SortDescending');
                                getAttachments();
                                sizeatt = true;
                            }
                        } else if ($(this).attr('id') == "typeatt") {
                            if (typeatt == true) {
                                SCOUIMethods.SortRecords(AttdetailsPM, "OrderFileExt", 'SortAscending');
                                getAttachments();
                                typeatt = false;
                            } else {
                                SCOUIMethods.SortRecords(AttdetailsPM, "OrderFileExt", 'SortDescending');
                                getAttachments();
                                typeatt = true;
                            }
                        } else if ($(this).attr('id') == "modifiedatt") {
                            if (modifiedatt == true) {
                                SCOUIMethods.SortRecords(AttdetailsPM, "OrderFileDate", 'SortAscending');
                                getAttachments();
                                modifiedatt = false;
                            } else {
                                SCOUIMethods.SortRecords(AttdetailsPM, "OrderFileDate", 'SortDescending');
                                getAttachments();
                                modifiedatt = true;
                            }
                        } else if ($(this).attr('id') == "commentsatt") {
                            if (commentsatt == true) {
                                SCOUIMethods.SortRecords(AttdetailsPM, "OrderComments", 'SortAscending');
                                getAttachments();
                                commentsatt = false;
                            } else {
                                SCOUIMethods.SortRecords(AttdetailsPM, "OrderComments", 'SortDescending');
                                getAttachments();
                                commentsatt = true;
                            }
                        }
                        //SNARRA:Added logic for Sort the Records in ManualDiscount List Applet
                        else if ($(this).attr('id') == "mdordernumber") {
                            if (mdordernumber == true) {
                                SCOUIMethods.SortRecords(ManualDiscountsPM, "Order Number", 'SortAscending');
                                getmdrecrds();
                                mdordernumber = false;
                            } else {
                                SCOUIMethods.SortRecords(ManualDiscountsPM, "Order Number", 'SortDescending');
                                getmdrecrds();
                                mdordernumber = true;
                            }
                        } else if ($(this).attr('id') == "mdline") {
                            if (mdline == true) {
                                SCOUIMethods.SortRecords(ManualDiscountsPM, "Line Number", 'SortAscending');
                                getmdrecrds();
                                mdline = false;
                            } else {
                                SCOUIMethods.SortRecords(ManualDiscountsPM, "Line Number", 'SortDescending');
                                getmdrecrds();
                                mdline = true;
                            }
                        } else if ($(this).attr('id') == "mdsku") {
                            if (mdsku == true) {
                                SCOUIMethods.SortRecords(ManualDiscountsPM, "Part Number", 'SortAscending');
                                getmdrecrds();
                                mdsku = false;
                            } else {
                                SCOUIMethods.SortRecords(ManualDiscountsPM, "Part Number", 'SortDescending');
                                getmdrecrds();
                                mdsku = true;
                            }
                        } else if ($(this).attr('id') == "mddiscount") {
                            if (mddiscount == true) {
                                SCOUIMethods.SortRecords(ManualDiscountsPM, "Discount Reason", 'SortAscending');
                                getmdrecrds();
                                mddiscount = false;
                            } else {
                                SCOUIMethods.SortRecords(ManualDiscountsPM, "Discount Reason", 'SortDescending');
                                getmdrecrds();
                                mddiscount = true;
                            }
                        } else if ($(this).attr('id') == "mdqty") {
                            if (mdqty == true) {
                                SCOUIMethods.SortRecords(ManualDiscountsPM, "Quantity Requested", 'SortAscending');
                                getmdrecrds();
                                mdqty = false;
                            } else {
                                SCOUIMethods.SortRecords(ManualDiscountsPM, "Quantity Requested", 'SortDescending');
                                getmdrecrds();
                                mdqty = true;
                            }
                        } else if ($(this).attr('id') == "mddiscountamount") {
                            if (mddiscountamount == true) {
                                SCOUIMethods.SortRecords(ManualDiscountsPM, "SC Manual Discount", 'SortAscending');
                                getmdrecrds();
                                mddiscountamount = false;
                            } else {
                                SCOUIMethods.SortRecords(ManualDiscountsPM, "SC Manual Discount", 'SortDescending');
                                getmdrecrds();
                                mddiscountamount = true;
                            }
                        } else if ($(this).attr('id') == "mdtda") {
                            if (mdtda == true) {
                                SCOUIMethods.SortRecords(ManualDiscountsPM, "Total Discount Amount", 'SortAscending');
                                getmdrecrds();
                                mdtda = false;
                            } else {
                                SCOUIMethods.SortRecords(ManualDiscountsPM, "Total Discount Amount", 'SortDescending');
                                getmdrecrds();
                                mdtda = true;
                            }
                        } else if ($(this).attr('id') == "mduser") {
                            if (mduser == true) {
                                SCOUIMethods.SortRecords(ManualDiscountsPM, "Login Name", 'SortAscending');
                                getmdrecrds();
                                mduser = false;
                            } else {
                                SCOUIMethods.SortRecords(ManualDiscountsPM, "Login Name", 'SortDescending');
                                getmdrecrds();
                                mduser = true;
                            }
                        } else if ($(this).attr('id') == "mddate") {
                            if (mddate == true) {
                                SCOUIMethods.SortRecords(ManualDiscountsPM, "Created Date", 'SortAscending');
                                getmdrecrds();
                                mddate = false;
                            } else {
                                SCOUIMethods.SortRecords(ManualDiscountsPM, "Created Date", 'SortDescending');
                                getmdrecrds();
                                mddate = true;
                            }
                        }
                        //Added SNARRA:End Sort Logic for Manual Discounts
                    });
                    //End:Sorting logic
                    //NGOLLA Added code for Payment Line Creation
                    $(document).on("click", "#SC-Payment-method", function() {
                        $(this).parent().addClass("is-completed");
                    });
                    $(document).on("click", "#scaccountnumber", function() {
                        $(this).parent().addClass("is-completed");
                    });
                    $(document).on("focusout", "#SC-Payment-method", function() {
                        if ($("#SC-Payment-method").val() != "") {
                            $("#custommaskoverlay").show();
                            setTimeout(function() {
                                var paymentmethodvalue = $("#SC-Payment-method").val();
                                SiebelApp.S_App.GetActiveView().SetActiveApplet(SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Payments List Applet OUI"]);
                                Paymentdetails_BC.SetFieldValue("SC Payment Type Code", "");
                                var Bservice = '',
                                    inPS = '';
                                outPS = '';
                                inPS = SiebelApp.S_App.NewPropertySet();
                                outPS = SiebelApp.S_App.NewPropertySet();
                                inPS.SetProperty("Name", "SCPayMethod");
                                inPS.SetProperty("Value", paymentmethodvalue);
                                Bservice = SiebelApp.S_App.GetService("SessionAccessService");
                                outPS = Bservice.InvokeMethod("SetProfileAttr", inPS);
                                PaymentdetailsPM.ExecuteMethod("InvokeMethod", "PickPaymentMethod", null, false);
                                var paymenttype = Paymentdetails_BC.GetFieldValue("SC Payment Type Code");
                                $("#SC-select-payment").val(paymenttype);
                                $("#custommaskoverlay").hide();
                            }, 1000);
                        }
                    });
                    $(document).on("change", "#SC-Payment-method", function() {
                        if ($(this).val() == "Financing") {
                            $("#SC-Account-Number").show();
                            $("#scaccountnumber").attr('name', 'accountnumber');
                        } else {
                            $("#SC-Account-Number").hide();
                            $("#scaccountnumber").attr('name', '');
                        }

                    });

                    //Start:on drilldown of Sr Number
                    $(document).on("click", "#SCsrnumdrilldown", function(e) {
                        //Start loader 
                        var trid = $(this).closest('tr').prop('id');
                        $("body").trigger('Custom.Start');
                        localStorage.setItem('whitescreen', 1);
                        setTimeout(function() {
                            e.stopPropagation();
                            var rowvalue = parseInt(trid.substring(3, 4));
                            var tableid = $("#" + AppletidHDSR).find(".ui-jqgrid-bdiv table").attr("id"); //new
                            SiebelJS.Log("table" + tableid);
                            $("#" + tableid + " #" + rowvalue + "").trigger("click");
                            HDSRPM.ExecuteMethod("OnDrillDown", 'SR Number', rowvalue);
                            //hiding the Loader
                            $("body").trigger('Custom.End');
                        }, 100);
                    });
                    //End:on drilldown of SR Number
                    //Start:Code for on click of save button on Admin View
                    $(document).on('click', ".sc-pay-save-360", function() {
                        $(this).parent().removeClass("main-bg");
                        $(this).parent().parent().parent().parent().hide();
                        $(this).parent().parent().parent().parent().prev().removeClass("main-bg");
                        $(this).parent().parent().parent().parent().prev().find("img").attr("src", "images/custom/delete-red.png");
                        var saveid = this.id;
                        saveid = saveid.split("e");
                        saveid = saveid[1];
                        SiebelJS.Log("save clicked" + saveid);
                        $("#custommaskoverlay").show();
                        var linerow = parseInt(saveid) + 1;
                        $("#s_" + appletSeq + "_l tr#" + linerow + "").trigger("click");
                        //Start loader	
                        setTimeout(function() {
                            //$("body").trigger('Custom.Start');



                            //sandeep
                            SiebelJS.Log("after write record  clicked" + saveid);
                            var PaymentMethod = $("#PaymentMethod" + saveid).val();
                            var settlementamount = $("#settlementamount" + saveid).val();
                            var depositatstore = $("#das" + saveid).is(':checked') ? 'Y' : 'N';
                            var PaymentStatus = $("#PaymentStatus" + saveid).val();
                            var paymenttype = $("#paymenttype" + saveid).val();
                            var accountno = $("#accountno" + saveid).val();
                            var addresscheckverify = $("#acv" + saveid).is(':checked') ? 'Y' : 'N';
                            var autcode = $("#autcode" + saveid).val();
                            var transferpayment = $("#tp" + saveid).is(':checked') ? 'Y' : 'N';
                            var invalidpayment = $("#ip" + saveid).is(':checked') ? 'Y' : 'N';
                            var manualauth = $("#ma" + saveid).is(':checked') ? 'Y' : 'N';
                            //var cvvfailedflag=$("#cvf"+saveid).is(':checked') ? 'Y' : 'N';	
                            var autdate = $("#autdate" + saveid).val();
                            var paymentamount = $("#paymentamount" + saveid).val();
                            var invoice = $("#invoice" + saveid).val();
                            var checkrefundverified = $("#crv" + saveid).is(':checked') ? 'Y' : 'N';
                            var payreference = $("#payreference" + saveid).val();
                            var declinereason = $("#declinereason" + saveid).val();
                            var paymentcomments = $("#paymentcomments" + saveid).val();
                            var paymentrecipt = $("#paymentrecipt" + saveid).val();
                            var creditgift = $("#creditgift" + saveid).val();
                            var cvvpin = $("#cvvpin" + saveid).val();
                            var ExpirationMonth = $("#ExpirationMonth" + saveid).val();
                            var ExpirationYear = $("#ExpirationYear" + saveid).val();
                            var innercirclereward = $("#innercirclereward" + saveid).val();
                            var check = $("#check" + saveid).val();
                            var bankaccno = $("#bankaccno" + saveid).val();
                            var routing = $("#routing" + saveid).val();
                            var driverslicence = $("#driverslicence" + saveid).val();
                            var DriversLicenseState = $("#DriversLicenseState" + saveid).val();
                            var dateofbirth = $("#dateofbirth" + saveid).val();
                            var disclaimer = $("#disclaimer" + saveid).val();
                            //SiebelJS.Log("PaymentMethod"+PaymentMethod);
                            //SiebelJS.Log("settlementamount"+settlementamount);
                            //SiebelJS.Log("das"+depositatstore);
                            //SiebelJS.Log("PaymentStatus"+PaymentStatus);
                            //SiebelJS.Log("paymenttype"+paymenttype);


                            var paymentAdminBC = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Payment Detail Applet - Admin OUI"].GetBusComp();
                            paymentAdminBC.SetFieldValue("Payment Method", PaymentMethod);
                            paymentAdminBC.SetFieldValue("SC Settled Amount", settlementamount);
                            paymentAdminBC.SetFieldValue("SC Deposited at Store", depositatstore);
                            paymentAdminBC.SetFieldValue("SC Payment Status", PaymentStatus);
                            paymentAdminBC.SetFieldValue("Account Number", accountno);
                            paymentAdminBC.SetFieldValue("SC Add Check Verified", addresscheckverify);
                            paymentAdminBC.SetFieldValue("Authorization Code", autcode);
                            paymentAdminBC.SetFieldValue("SC Transfer Payment Flag", transferpayment);
                            paymentAdminBC.SetFieldValue("SC Invalid Payment", invalidpayment);
                            paymentAdminBC.SetFieldValue("Manual Authorization Flag", manualauth);
                            // paymentAdminBC.SetFieldValue("SC CVV Failed Flag",cvvfailedflag);
                            paymentAdminBC.SetFieldValue("SC Auth Date", autdate);
                            paymentAdminBC.SetFieldValue("Transaction Amount", paymentamount);
                            paymentAdminBC.SetFieldValue("SC Invoice Ref#", invoice);
                            paymentAdminBC.SetFieldValue("SC Refund Verified Flg", checkrefundverified);
                            paymentAdminBC.SetFieldValue("SC Response", declinereason);
                            paymentAdminBC.SetFieldValue("Payment Comments", paymentcomments);
                            paymentAdminBC.SetFieldValue("SC Pmt Receipt Text", paymentrecipt);
                            paymentAdminBC.SetFieldValue("SC Credit Card Number", creditgift);
                            paymentAdminBC.SetFieldValue("SC CVV Number", cvvpin);
                            paymentAdminBC.SetFieldValue("SC Expiration Month", ExpirationMonth);
                            paymentAdminBC.SetFieldValue("SC Expiration Year", ExpirationYear);
                            paymentAdminBC.SetFieldValue("SC Check Number", check);
                            paymentAdminBC.SetFieldValue("SC Bank Account Number", bankaccno);
                            paymentAdminBC.SetFieldValue("SC Bank Routing Num", routing);
                            paymentAdminBC.SetFieldValue("SC Drivers License Number", driverslicence);
                            paymentAdminBC.SetFieldValue("SC Drivers License State", DriversLicenseState);
                            paymentAdminBC.SetFieldValue("SC Date Of Birth", dateofbirth);
                            paymentAdminBC.SetFieldValue("SC Financing Disclaimer", disclaimer);
                            SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Payment Detail Applet - Admin OUI"].InvokeMethod("WriteRecord");

                            getPaymentDetailsRcds();
                            //hiding the Loader
                            //$("body").trigger('Custom.End');
                            $("#custommaskoverlay").hide();
                        }, 50);

                    });
                    //End:Code for on click of save button on Admin View
                    //Start:on click of Go To Activites
                    $(document).on("click", "#sc-goto-activities", function() {
                        localStorage.setItem('whitescreen', 1);
                        SiebelApp.S_App.GotoView("Sales Order Activities View");
                    });
                    //End:on click of Go To Activites


                    // For SalesReceipt PopUp 
                    $(document).on("click", "#reciept-generation", function() {
                        var sStoreNum = '',
                            sDivSubType = '',
                            bIsStorePresent = '',
                            sDivSubTyp = '',
                            sAllStoreNum = '';
                        sStoreNum = SiebelApp.S_App.GetProfileAttr("SC Store Number");
                        sDivSubType = SiebelApp.S_App.GetProfileAttr("SC Primary Division Sub Type");
                        var strDivType = SiebelApp.S_App.GetProfileAttr("SC Primary Division Type");

                        var InPS = '',
                            OutPS = '',
                            sOrderId = '',
                            BService = '';
                        InPS = SiebelApp.S_App.NewPropertySet();
                        OutPS = SiebelApp.S_App.NewPropertySet();
                        Bservice = SiebelApp.S_App.GetService("SC Check LOV Values"); //get service
                        var sSearchSpec = "[Name] = '" + sStoreNum + "' AND [Type] = 'SC_EMAIL_QUOTE'";
                        InPS.SetProperty("searchExpr", sSearchSpec);
                        OutPS = Bservice.InvokeMethod("CheckLovValues", InPS);
                        var child = OutPS.GetChild(0);
                        bIsStorePresent = child.GetProperty("ISRecordFlag");

                        InPS = SiebelApp.S_App.NewPropertySet();
                        OutPS = SiebelApp.S_App.NewPropertySet();
                        Bservice = SiebelApp.S_App.GetService("SC Check LOV Values"); //get service
                        var sSearchSpec = "[Name] = '" + strDivType + "-" + sDivSubType + "' AND [Type] = 'SC_EMAIL_RECEIPT'";
                        InPS.SetProperty("searchExpr", sSearchSpec);
                        OutPS = Bservice.InvokeMethod("CheckLovValues", InPS);
                        var child = OutPS.GetChild(0);
                        sDivSubTyp = child.GetProperty("ISRecordFlag");

                        if (bIsStorePresent == "Y" || sDivSubTyp == "Y") {
                            // $("#reciept_order360").modal("hide");	
                            var RecptOrderId = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().GetFieldValue("Id");

                            var Custom_Service = "",
                                Input_BS = "",
                                Out_BS = "";
                            Custom_Service = SiebelApp.S_App.GetService("SC Custom Query");
                            Input_BS = SiebelApp.S_App.NewPropertySet();
                            Out_BS = SiebelApp.S_App.NewPropertySet();
                            searchfields = "Id,Primary Bill To Email Address,Bill To Contact Id";
                            Input_BS.SetProperty("BO", "Order Entry (Sales)");
                            Input_BS.SetProperty("BC", "Order Entry - Orders");
                            Input_BS.SetProperty("SearchSpecification", "[Id] = '" + RecptOrderId + "'");
                            Input_BS.SetProperty("SortSpecification", "");
                            Input_BS.SetProperty("ReqNoOfRecords", "");
                            Input_BS.SetProperty("FieldsArray", searchfields);
                            Out_BS = Custom_Service.InvokeMethod("Query", Input_BS);
                            var Child_BS = Out_BS.GetChild(0);
                            var BS_Data = Child_BS.GetProperty("OutputRecordSet");
                            if (BS_Data != "}") {
                                var ResArray = new Array;
                                ResArray = BS_Data.split(";");
                                jsonRes = JSON.parse(ResArray[0]);
                                VPrimaryEmail = jsonRes["Primary Bill To Email Address"];
                                VPrimarEmailID = jsonRes["Bill To Contact Id"];
                                // SiebelJS.Log("jsonSK" + jsonRes["Id"]);
                            }

                            $("#SC-Remailaddr").val(VPrimaryEmail);

                            VRcptemailchngflg = "N";
                            $(".email-error").css('display', 'none');
                            $(".emial-id-valid").css('display', 'none');
                            $(".email-id-contact").css('display', 'none');
                            $(".emial-id-validate").css('display', 'none');
                            $("#SC-Send-emailrcpt").removeClass("SC-disabled");
                            $("#SC-salesorder-Receipt").modal({
                                backdrop: 'static'
                            });
                        } else {
                            var bip_id = OrderDetailrecords[0]["Id"];
                            var bip_ordernumber = OrderDetailrecords[0]["Order Number"];
                            SCOUIMethods.PrintReceipt(bip_id, bip_ordernumber) //Printreceipt();
                            $("#SC-salesorder-Receipt").modal("hide");
                        }
                    });

                    $(document).on("click", "#SC-salesOrderreceipt-close", function() {
                        $("#SC-salesorder-Receipt").modal("hide");

                    });

                    $(document).on("click", "#sc-Cancelrcpt-button", function() {
                        VRcptemailchngflg = "N";
                        $(".email-error").css('display', 'none');
                        $(".emial-id-valid").css('display', 'none');
                        $(".email-id-contact").css('display', 'none');
                        $(".emial-id-validate").css('display', 'none');

                        $("#SC-sendrcpt-message-popup").modal("hide");

                    });

                    $(document).on("click", "#SC-sales-sendemailrcpt-close", function() {
                        VRcptemailchngflg = "N";
                        $(".email-error").css('display', 'none');
                        $(".emial-id-valid").css('display', 'none');
                        $(".email-id-contact").css('display', 'none');
                        $(".emial-id-validate").css('display', 'none');

                        $("#SC-sendrcpt-message-popup").modal("hide");

                    });


                    // 06042020 - For SalesReceipt SendEmail PopUp	
                    $(document).on("click", "#sc-emailrcpt", function() {

                        /*var contactAddr = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().GetFieldValue("Primary Bill To Email Address");*/

                        var RecptOrderId = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().GetFieldValue("Id");

                        var Custom_Service = "",
                            Input_BS = "",
                            Out_BS = "";
                        Custom_Service = SiebelApp.S_App.GetService("SC Custom Query");
                        Input_BS = SiebelApp.S_App.NewPropertySet();
                        Out_BS = SiebelApp.S_App.NewPropertySet();
                        searchfields = "Id,Primary Bill To Email Address,Bill To Contact Id";
                        Input_BS.SetProperty("BO", "Order Entry (Sales)");
                        Input_BS.SetProperty("BC", "Order Entry - Orders");
                        Input_BS.SetProperty("SearchSpecification", "[Id] = '" + RecptOrderId + "'");
                        Input_BS.SetProperty("SortSpecification", "");
                        Input_BS.SetProperty("ReqNoOfRecords", "");
                        Input_BS.SetProperty("FieldsArray", searchfields);
                        Out_BS = Custom_Service.InvokeMethod("Query", Input_BS);
                        var Child_BS = Out_BS.GetChild(0);
                        var BS_Data = Child_BS.GetProperty("OutputRecordSet");
                        if (BS_Data != "}") {
                            var ResArray = new Array;
                            ResArray = BS_Data.split(";");

                            jsonRes = JSON.parse(ResArray[0]);
                            VPrimaryEmail = jsonRes["Primary Bill To Email Address"];
                            VPrimarEmailID = jsonRes["Bill To Contact Id"];
                            // SiebelJS.Log("jsonSK" + jsonRes["Id"]);
                        }

                        $("#SC-Remailaddr").val(VPrimaryEmail);
                        $("#SC-salesorder-Receipt").modal("hide");
                        $("#SC-sendrcpt-message-popup").modal({
                            backdrop: 'static'
                        });
                    });


                    $(document).on("click", "#SC-Send-emailrcpt", function(e) {
                        e.preventDefault();


                        /*var contactId =  SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().GetFieldValue("Bill To Contact Id");*/
                        var contactId = VPrimarEmailID;

                        var VRecptEmailaddr = $("#SC-Remailaddr").val();
                        var emailnull = "N";

                        var reg = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;

                        /*if (VRecptEmailaddr == null || VRecptEmailaddr =="" || !(reg.test(VRecptEmailaddr))){
                        	$(".email-id-contact").css('display','none');
                        	$(".error").css('display','inline-block');
                        	$(".emial-id-valid").css('display','block');						
                        	//$("#SC-qemailaddr").select();
                        }	*/

                        if (VRecptEmailaddr == null || VRecptEmailaddr == "") {
                            $(".email-id-contact").css('display', 'none');
                            $(".emial-id-validate").css('display', 'none');
                            $(".email-error").css('display', 'inline-block');
                            $(".emial-id-valid").css('display', 'block');
                            //$("#SC-qemailaddr").select();
                        } else if (!(reg.test(VRecptEmailaddr))) {
                            $(".email-id-contact").css('display', 'none');
                            $(".emial-id-valid").css('display', 'none');
                            $(".email-error").css('display', 'inline-block');
                            $(".emial-id-validate").css('display', 'block');
                        } else {
							$("#custommaskoverlay").show();
							setTimeout(function() {
								if (VRcptemailchngflg == "Y") {
									emailaddrupdate(contactId, VRecptEmailaddr);
								}
								var RecptOrderId = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].GetBusComp().GetFieldValue("Id");
								$("#SC-Send-emailrcpt").addClass("SC-disabled");
								emailReceipt(RecptOrderId);
								$("#custommaskoverlay").hide();
							},50);
						}
                    });

                    $(document).on("click", "#SC-qeditemailadress", function(e) {
                        VRcptemailchngflg = "Y";
                        $("#SC-Remailaddr").select();
                        $(".emial-id-valid").css('display', 'none');
                        $(".emial-id-validate").css('display', 'none');
                        $(".email-error").css('display', 'inline-block');
                        $(".email-id-contact").css('display', 'block');
                    });

                    $(document).on("click", "#SC-Remailaddr", function(e) {
                        VRcptemailchngflg = "Y";
                        $(".emial-id-valid").css('display', 'none');
                        $(".emial-id-validate").css('display', 'none');
                        $(".email-error").css('display', 'inline-block');
                        $(".email-id-contact").css('display', 'block');
                    });

                    $(document).on("change", "#SC-qemailaddr", function(event) {
                        VRcptemailchngflg = "Y";
                    });

                    function emailaddrupdate(contactId, VRecptEmailaddr) {
							var fieldnames = "Email Address";
                            var fieldvalues = VRecptEmailaddr;
                            var Bservice = '',
                                inPS = '',
                                outPS = '';
                            inPS = SiebelApp.S_App.NewPropertySet();
                            outPS = SiebelApp.S_App.NewPropertySet();
                            inPS.SetProperty("BO", "Contact");
                            inPS.SetProperty("BC", "Contact");
                            inPS.SetProperty("FieldsArray", fieldnames);
                            inPS.SetProperty("ValuesArray", fieldvalues);
                            inPS.SetProperty("SearchSpecification", "[Id] = '" + contactId + "'");
                            Bservice = SiebelApp.S_App.GetService("SC Custom Query Simplified"); //get service
                            outPS = Bservice.InvokeMethod("Insert", inPS);
                            SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Order Form Applet (Sales) OUI"].InvokeMethod("RefreshBusComp");
					}

                    function emailReceipt(RecptOrderId) {
                        var emailInPS = '',
                            emailOutPS = '',
                            sOrderId = '',
                            BService = '';
                        VRcptemailchngflg = "N";
                        emailInPS = SiebelApp.S_App.NewPropertySet();
                        emailOutPS = SiebelApp.S_App.NewPropertySet();
                        Bservice = SiebelApp.S_App.GetService("Workflow Process Manager"); //get service
                        emailInPS.SetProperty("ProcessName", "CX Email Quote Workflow");
                        emailInPS.SetProperty("Object Id", RecptOrderId);
                        emailInPS.SetProperty("ReportType", "Sales Order Receipt");
                        emailOutPS = Bservice.InvokeMethod("RunProcess", emailInPS);
                        $("#SC-salesorder-Receipt").modal("hide");
                        $("#SC-sendrcpt-message-popup").modal("hide");
                    }

                    $(document).on("click", "#sc-printrcpt", function(e) {
                        e.preventDefault();
                        var bip_id = OrderDetailrecords[0]["Id"];
                        var bip_ordernumber = OrderDetailrecords[0]["Order Number"];
                        SCOUIMethods.PrintReceipt(bip_id, bip_ordernumber) //Printreceipt();
                        $("#SC-salesorder-Receipt").modal("hide");
                    });


                    $(document).on("click", "#sc-bothrcpt", function(e) {
                        e.preventDefault();
                        // 23032020 - For SalesQuote PopUp
                        var bip_id = OrderDetailrecords[0]["Id"];
                        var bip_ordernumber = OrderDetailrecords[0]["Order Number"];
                        SCOUIMethods.PrintReceipt(bip_id, bip_ordernumber) //Printreceipt();	
                        $("#SC-salesorder-Receipt").modal("hide");
                        $("#SC-sendrcpt-message-popup").modal({
                            backdrop: 'static'
                        });

                    });


                    // Start: Create Payments Pop-up Open
                    $("#sc-payments-new").click(function(event) {
                        //NGOLLA:Start:Get the values of Payment Method
                        var PaymentValues = '';
                        PaymentValues += '<option></option>';
                        for (var sr = 0; sr < payementMethodArray.length; sr++) {
                            PaymentValues += ' <option value="' + payementMethodArray[sr] + '">' + payementMethodArray[sr] + '</option>';
                        }
                        $('#SC-Payment-method').html(PaymentValues);
                        //End:Get the values of Payment Method
                        $("#SC-Account-Number").hide();
                        $("#SC-Payment-Creation").modal({
                            backdrop: 'static'
                        });
                        //SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Payments List Applet OUI"].GetBusComp().SetFieldValue("SC Payment Type Code", "");
                        $("#SC-Payment-method").parent().removeClass("is-completed");
                        var canNewRecord = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Payments List Applet OUI"].GetPModel().GetRenderer().GetPM().ExecuteMethod("CanInvokeMethod", "NewRecord");
                        if (canNewRecord) {
                            SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Payments List Applet OUI"].GetPModel().GetRenderer().GetPM().ExecuteMethod("InvokeMethod", "NewRecord", null, false);
                        }
                        $("#SC-select-payment").val("Select");
                    });
                    // End: Create Payments Pop-up Open

                    //Start:on click of New File in Attachments
                    /*$(document).on("click","#sc-new-attachment",function(){
                    	//SiebelApp.S_App.GetActiveView().GetAppletMap()["Order Entry - Attachment Applet"].InvokeMethod("NewFileAttachment");
                    	var Appletid_Att=SiebelApp.S_App.GetActiveView().GetAppletMap()["Order Entry - Attachment Applet"].GetPModel().Get("GetFullId");
                        var tableid = $("#"+Appletid_Att).find(".siebui-applet-buttons").find("input").attr("id");
                        $("#"+tableid).trigger("click");
                    	var FieldQueryPair  =  {"OrderFileName":"IS NOT NULL"};
                    	SCOUIMethods.ExecuteListAppletFrame(SiebelConstant,FieldQueryPair,"Order Entry - Attachment Applet");
                    	 getAttachments();
                    });*/
                    //End:on click of New File Attachments

                    //on click of file name
                    /*$(document).on("click","#attfilenamedrilldown",function(){
					   var trid = $(this).closest('tr').prop('id');
					   //var rowvalue = parseInt(trid.substring(3, 8));
					   var rowvalue = trid.split("h");
					   rowvalue= rowvalue[1];
					   var Appletid_Att=SiebelApp.S_App.GetActiveView().GetAppletMap()["Order Entry - Attachment Applet"].GetPModel().Get("GetFullId");
					   SiebelJS.Log(Appletid_Att);
					   var tableid = $("#"+Appletid_Att).find(".ui-jqgrid-bdiv table").attr("id");//new
						 SiebelJS.Log(tableid);
						 $("#"+tableid+" #"+rowvalue+"").trigger("click");
					   var Att_PMinstance=SiebelApp.S_App.GetActiveView().GetAppletMap()["Order Entry - Attachment Applet"].GetPModel().GetRenderer().GetPM();   
					   Att_PMinstance.ExecuteMethod("OnDrillDown", 'OrderFileName', rowvalue);
					});*/

                    //Start:on drillDown of Bill to Contact
                    $(document).on("click", "#sc-360-goto-contact", function() {
                        //Start loader 
                        $('#maskoverlay').show();
                        setTimeout(function() {
                            SiebelJS.Log("on click of go to contact");
                            var InPut = "";
                            var OutPut = "";
                            InPut = SiebelApp.S_App.NewPropertySet();
                            OutPut = SiebelApp.S_App.NewPropertySet();
                            if (OrderDetailrecords[0]["Bill To Account"] === "") {
                                InPut.SetProperty("View", "SC Contact 360 Degree View OUI");
                                InPut.SetProperty("Business Component", "Contact");
                                InPut.SetProperty("Row Id", OrderDetailrecords[0]["Bill To Contact Id"]);
                            } else {
                                InPut.SetProperty("View", "SC Account 360 View OUI");
                                InPut.SetProperty("Business Component", "Account");
                                InPut.SetProperty("Row Id", OrderDetailrecords[0]["Bill To Account Id"]);
                            }
                            BService = SiebelApp.S_App.GetService("CUT eSales Order Entry Toolkit Service");
                            OutPut = BService.InvokeMethod("GotoView", InPut);
                            //hiding the Loader
                            $('#maskoverlay').hide();
                        }, 50);
                    });
                    //End:on drillDown of Bill to Contact

                    //Line details popup
                    //$("#SC-Order-line-table tbody tr").on('click', 'td:nth-child(8)', function() 
                    $(document).on('click', '#SC-Order-line-table tbody tr td:nth-child(9)', function() {
                        var cuttentid = $(this).parent().attr('id');
                        cuttentid = cuttentid.split("w");
                        cuttentid = cuttentid[1];
                        Salesordermarkup = LineItemPopup(cuttentid - 1, Lineitemrecords);
                        $("#SC-SO-order-line-details").html(Salesordermarkup);
                        $("#SC-SO-order-line-details").modal({
                            backdrop: 'static'
                        });
                    });

                    //on click of last-name Ngolla defect #756
                    $("#sc-add-lastname").click(function() {
                        SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Sales Order Entry Form Applet OUI"].GetPModel().OnControlEvent(SiebelApp.Constants.get("PHYEVENT_INVOKE_PICK"), SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Sales Order Entry Form Applet OUI"].GetControls()["SC Pay To Last Name"]);
                        SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Sales Order Entry Form Applet OUI"].GetPModel().AttachNotificationHandler("g", function(o) {
                            var Field_Name = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Sales Order Entry Form Applet OUI"].GetPModel().ExecuteMethod("GetFieldValue", SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Sales Order Entry Form Applet OUI"].GetControls()["SC Pay To Last Name"]);
                            document.getElementById("SC_SlodToLastname").value = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Sales Order Entry Form Applet OUI"].GetBusComp().GetFieldValue("SC Pay To Last Name");
                            document.getElementById("SC_SlodToFirstname").value = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Sales Order Entry Form Applet OUI"].GetBusComp().GetFieldValue("SC Pay To First Name");
                        });
                    });

                    //click on Payment details column
                    $(document).on('click', '#SC-payment-details-table tbody tr td:nth-child(7)', function() {
                        delpayrowid = $(this).parent().attr("id");
                        delpayrowid = delpayrowid.split("t");
                        delpayrowid = delpayrowid[1];

                        $("#SC-SO-Delete-payment-line").modal({
                            backdrop: 'static'
                        });
                        $("#SC-SO-Delete-payment-line").css({
                            "display": "flex",
                            "justify-content": "center",
                            "align-items": "center"
                        });
                        $(".modal-backdrop").css('background', '#ffffff');
                    });

                    //button click on Yes
                    $("#SC-yes-button").click(function() {
                        $("#SC-SO-Delete-payment-line").modal('hide');
                        $("#SC-SO-Delete-payment-line").css({
                            "display": "",
                            "justify-content": "",
                            "align-items": ""
                        });
                        //Start loader 
                        $("body").trigger('Custom.Start');
                        setTimeout(function() {
                            (function(proxied) {
                                window.confirm = function() {
                                    if (arguments[0].includes("Are you sure you want to delete the")) {
                                        return true;
                                        SiebelJS.Log("supressed");
                                    } else
                                        return proxied.apply(this, arguments);
                                };
                            })(window.confirm);
                            $("#s_" + appletSeq + "_l tr#" + delpayrowid + "").trigger("click");
                            SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Payments List Applet OUI"].InvokeMethod("DeleteRecord");
                            paymenydetailsrcdmarkup = getPaymentDetailsRcds();
                            $('#sc-PaymenyDetails-rcd').html(paymenydetailsrcdmarkup);
                            //hiding the Loader
                            $("body").trigger('Custom.End');
                        }, 1000);
                    });

                    //button click on No
                    $("#SC-no-button").click(function() {
                        $("#SC-SO-Delete-payment-line").modal('hide');
                        $("#SC-SO-Delete-payment-line").css({
                            "display": "",
                            "justify-content": "",
                            "align-items": ""
                        });
                        (function(proxied) {
                            window.confirm = function() {
                                if (arguments[0].includes("Are you sure you want to delete the")) {
                                    return false;
                                    SiebelJS.Log("supressed");
                                } else
                                    return proxied.apply(this, arguments);
                            };
                        })(window.confirm);

                    });

                    //on click on payment line row for admin Responsibility
                    $(document).on('click', '#SC-payment-details-table tbody tr td:not(:nth-child(7))', function() {
                        if ($(this).parent().next('tr').hasClass("showhide")) {
                            delpayrowid = $(this).parent().attr("id");
                            delpayrowid = delpayrowid.split("t");
                            delpayrowid = delpayrowid[1];
                            SiebelJS.Log("delpayrowid" + delpayrowid);
                            $("#s_" + appletSeq + "_l tr#" + delpayrowid + "").trigger("click");
                            SiebelJS.Log("History applet is refreshing" + appletSeq);
                            paymenthistory = getPaymentHistoryRcds();
                            $('#sc-Paymenthistory-rcd').html(paymenthistory);
                            SiebelJS.Log("History applet is refreshing completed");
                            var hidden = $(this).parent().next('tr.showhide').is(":visible");
                            if (hidden) {
                                $(this).parent().removeClass("main-bg");
                                $(this).parent().next('tr.showhide').hide('slow');
                                $('#paydet' + delpayrowid + " td:nth-child(7)").find("img").attr("src", "images/custom/delete-red.png");
                            } else {
                                $("#SC-payment-details-table tbody tr").not(this).siblings().next('tr.showhide').hide('slow');
                                //for the shipment track icon when we selected the row
                                if ($("#SC-payment-details-table tr").not(this).siblings().next('tr.showhide').is(":visible")) {
                                    var rowId = $(".expanded-payments").attr("id");
                                    $('#' + rowId + " td:nth-child(7)").find("img").attr("src", "images/custom/delete-red.png");
                                    $('#' + rowId).removeClass("expanded-payments");
                                }
                                $('#paydet' + delpayrowid + " td:nth-child(7)").find("img").attr("src", "images/custom/delete.png");
                                $(this).parent().next('tr.showhide').show('slow');
                                $(this).parent().addClass("expanded-payments");
                                var selected = $(this).parent().hasClass("main-bg");
                                $("#SC-payment-details-table tbody tr").removeClass("main-bg");
                                $(this).parent().addClass("main-bg");
                            }
                        }
                    });



                    //To expand line details 
                    //$("#SC-Order-line-table tbody tr").on('click', 'td:nth-child(9)', function() 
                    $(document).on('click', '#SC-Order-line-table tbody tr td:nth-child(10)', function() {
                        var currentId = $(this).parent().attr('id');
                        if (!$(this).parent().hasClass("showhide")) {
                            /*var linedetrowid= $(this).parent().attr("id");
                            linedetrowid=linedetrowid.split("t");
                            linedetrowid=linedetrowid[1];
                            SiebelJS.Log("linedetrowid"+linedetrowid);
                            $("#s_"+appletSeqlineitems+"_l tr#"+linedetrowid+"").trigger("click");
                            SiebelJS.Log("in line detailss"+appletSeqlineitems);
                            linedetailsrcdmarkup=getLineDetailsRcds();
                            $('#sc-LineDetails-Rcd').html(linedetailsrcdmarkup);*/
                            var hidden = $(this).parent().next('tr.showhide').is(":visible");
                            if (hidden) {
                                $(this).parent().removeClass("main-bg");
                                $(this).parent().next('tr.showhide').hide('slow');
                                $(this).siblings().find("img").attr("src", "images/custom/fileboard.png");
                                $(this).find("img").attr("src", "images/custom/truck_round_blue.png");
                                $(this).next().find("img").attr("src", "images/custom/BOM Icon.png");
                                $(this).next().next().find("img").attr("src", "images/custom/about_record.png");

                            } else {
                                $("#SC-Order-line-table tbody tr").not(this).siblings().next('tr.showhide').hide('slow');
                                if ($("#SC-Order-line-table tbody tr").not(this).siblings().next('tr.showhide').is(":visible")) {
                                    var rowId = $(".expanded").attr("id");
                                    $('#' + rowId + " td:nth-child(9)").find("img").attr("src", "images/custom/fileboard.png");
                                    $('#' + rowId + " td:nth-child(12)").find("img").attr("src", "images/custom/about_record.png");
                                    $('#' + rowId + " td:nth-child(11)").find("img").attr("src", "images/custom/BOM Icon.png");
                                    $('#' + rowId + " td:nth-child(10)").find("img").attr("src", "images/custom/truck_round_blue.png");
                                    $('#' + rowId).removeClass("expanded");
                                }
                                $(this).parent().next('tr.showhide').show('slow');
                                $(this).parent().addClass("expanded");
                                $('#' + currentId + " td:nth-child(9)").find("img").attr("src", "images/custom/fileboard-white.png");
                                $('#' + currentId + " td:nth-child(10)").find("img").attr("src", "images/custom/truck_round.png");
                                $('#' + currentId + " td:nth-child(12)").find("img").attr("src", "images/custom/about_record.png");
                                $('#' + currentId + " td:nth-child(11)").find("img").attr("src", "images/custom/BOM Icon.png");
                                var selected = $(this).parent().hasClass("main-bg");
                                $("#SC-Order-line-table tbody tr").removeClass("main-bg");
                                $(this).parent().addClass("main-bg");

                            }
                        }
                    });


                    //Code for divisions drag and drop starts
                    var $sortable = $('#Order-360-right-container');
                    SiebelJS.Log("In sortable");
                    //var pos = JSON.parse(localStorage.getItem(sLogUserNamePos));
                    /*if (pos) {
		   SiebelJS.Log("In sortable");
           $.each(pos, function(i, position) {
              var $target = $sortable.find('#' + position);
              $target.appendTo($sortable); // or prependTo
            });
        }*/
                    //SBOORLA: Added code for Sequence based on User Preferences
                    var Custom_Service = "",
                        Input_BS = "",
                        Out_BS = "",
                        pinnedIds_Loc = "";
                    Custom_Service = SiebelApp.S_App.GetService("SC Custom Query");
                    Input_BS = SiebelApp.S_App.NewPropertySet();
                    Out_BS = SiebelApp.S_App.NewPropertySet();
                    searchfields = "Cosmetics/OrderSequence,Cosmetics/OrderPinUnpin";
                    Input_BS.SetProperty("BO", "User Preferences");
                    Input_BS.SetProperty("BC", "User Preferences");
                    Input_BS.SetProperty("SearchSpecification", "");
                    Input_BS.SetProperty("SortSpecification", "");
                    Input_BS.SetProperty("ReqNoOfRecords", "");
                    Input_BS.SetProperty("FieldsArray", searchfields);
                    Out_BS = Custom_Service.InvokeMethod("Query", Input_BS);
                    var Child_BS = Out_BS.GetChild(0);
                    var BS_Data = Child_BS.GetProperty("OutputRecordSet");
                    if (BS_Data != "}") {
                        var ResArray = new Array;
                        ResArray = BS_Data.split(";");

                        jsonRes = JSON.parse(ResArray[0]);
                        pinnedIds_Loc = jsonRes["Cosmetics/OrderSequence"];
                        SiebelJS.Log("jsonSK" + jsonRes["Cosmetics/OrderSequence"]);
                        pinnedIds_Loc = pinnedIds_Loc.split("_");
                        User_pinnedIds_Loc = jsonRes["Cosmetics/OrderPinUnpin"];
                        SiebelJS.Log("jsonSK" + jsonRes["Cosmetics/OrderPinUnpin"]);
                        User_pinnedIds_Loc = User_pinnedIds_Loc.split("_");
                    }
                    SiebelJS.Log("userPositions" + pinnedIds_Loc);
                    if (pinnedIds_Loc != "") {
                        //SiebelJS.Log("In sortable");
                        $.each(pinnedIds_Loc, function(i, position) {
                            //SiebelJS.Log("pos::"+pos);
                            //SiebelJS.Log("position::"+position);			
                            var $target = $sortable.find('#' + position);
                            $target.appendTo($sortable);
                        });
                    }
                    $sortable.sortable({
                        update: saveNewOrder,
                        items: '.Order-360-card:not(.fixed)'
                    });

                    function saveNewOrder() {
                        SiebelJS.Log("in save new order function");
                        // var pos = JSON.stringify($sortable.sortable("toArray"));
                        // localStorage.setItem(sLogUserNamePos, pos);
                        //SBOORLA:Added code for storing the applet sequence based on User Preference
                        var fieldvalues = "",
                            inPS = "",
                            outPS = "",
                            Bservice = "";
                        var pos = $sortable.sortable("toArray");
                        for (var i = 0; i < pos.length; i++) {

                            if (pos.length != (i + 1))
                                fieldvalues += pos[i] + "_";
                            else
                                fieldvalues += pos[i];

                        }
                        var fieldnames = "Cosmetics/OrderSequence";
                        inPS = SiebelApp.S_App.NewPropertySet();
                        outPS = SiebelApp.S_App.NewPropertySet();
                        inPS.SetProperty("BO", "User Preferences");
                        inPS.SetProperty("BC", "User Preferences");
                        inPS.SetProperty("FieldsArray", fieldnames);
                        inPS.SetProperty("ValuesArray", fieldvalues);
                        inPS.SetProperty("SearchSpecification", "");
                        Bservice = SiebelApp.S_App.GetService("SC Custom Query Simplified"); //get service
                        outPS = Bservice.InvokeMethod("Insert", inPS);
                    }
                    //division drag and drop ends 

                    // click on Back button
                    /* $(document).ready(function() {
                        $("#salesorder-back-button").click(function() {
							//SNARRA Added for removing Order total popup
							SiebelApp.S_App.GetActiveView().SetActiveApplet(SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Line Item List Applet (Sales) OUI"]);
							 //SiebelApp.S_App.GotoView("SC Sales Order Search View OUI");
							 SiebelApp.S_App.GotoView("SC Sales Order Search View OUI","","SWEKeepContext=false","");
                        });
                    });*/

                    //Start: Navigating to other screens
                    //To Contacts Home Screen
                    $("#SC_HOME").click(function() {
                        localStorage.setItem('whitescreen', 1);
                        var storeUser = SCOUIMethods.SCGetProfileAttrValue("SC Store User");
                        if (storeUser == "Y")
                            SiebelApp.S_App.GotoView("User Profile Default View");
                        else
                            SiebelApp.S_App.GotoView("Home Page View (WCC)");
                    });

                    //To Contacts List View
                    $("#SC_CONTACTS").click(function() {
                        //SiebelApp.S_App.GotoView("SC Contact List View OUI");
                        //RCHATHAR: STRY0089627 Added to remove the payments error
						//Start loader 
                         $("body").trigger('Custom.Start');
                        setTimeout(function() {
                    	(function(proxied) {
                                window.alert = function() {
                                    if (arguments[0].includes("exceed")) {
                                       return true;
                                        SiebelJS.Log("supressed");
                                    } else
                                        return proxied.apply(this, arguments);
                                };
                            })(window.alert);
						(function(proxied) {
                                window.alert = function() {
                                    if (arguments[0].includes("(SBL-EXL-00151)")) {
                                       return true;
                                        SiebelJS.Log("supressed");
                                    } else
                                        return proxied.apply(this, arguments);
                                };
                            })(window.alert);
                            SiebelApp.S_App.GotoView("SC Contact List View OUI", "", "SWEKeepContext=false", "");
                            //hiding the Loader
                            $("body").trigger('Custom.End');
                        }, 1000);
                    });

                    //To Accounts List View
                    $("#SC_ACCOUNTS").click(function() {
                       //RCHATHAR: STRY0089627 Added to remove the payments error
						//Start loader 
                         $("body").trigger('Custom.Start');
                        setTimeout(function() {
                    	(function(proxied) {
                                window.alert = function() {
                                    if (arguments[0].includes("exceed")) {
                                       return true;
                                        SiebelJS.Log("supressed");
                                    } else
                                        return proxied.apply(this, arguments);
                                };
                            })(window.alert);
						(function(proxied) {
                                window.alert = function() {
                                    if (arguments[0].includes("(SBL-EXL-00151)")) {
                                       return true;
                                        SiebelJS.Log("supressed");
                                    } else
                                        return proxied.apply(this, arguments);
                                };
                            })(window.alert);
                            SiebelApp.S_App.GotoView("SC All Accounts List View OUI");
                            //hiding the Loader
                            $("body").trigger('Custom.End');
                        }, 1000);

                    });

                    //To Sales Order View
                    $("#SC_SALESORDERS").click(function() {
                        //RCHATHAR: STRY0089627 Added to remove the payments error
						//Start loader 
                         $("body").trigger('Custom.Start');
                        setTimeout(function() {
                    	(function(proxied) {
                                window.alert = function() {
                                    if (arguments[0].includes("exceed")) {
                                       return true;
                                        SiebelJS.Log("supressed");
                                    } else
                                        return proxied.apply(this, arguments);
                                };
                            })(window.alert);
						(function(proxied) {
                                window.alert = function() {
                                    if (arguments[0].includes("(SBL-EXL-00151)")) {
                                       return true;
                                        SiebelJS.Log("supressed");
                                    } else
                                        return proxied.apply(this, arguments);
                                };
                            })(window.alert);
                            SiebelApp.S_App.GotoView("SC Sales Order Search View OUI", "", "SWEKeepContext=false", "");
                            //hiding the Loader
                            $("body").trigger('Custom.End');
                        }, 1000);
                    });

                    // click on Apply for finance button
                    $(document).ready(function() {
                        $("#SC-SO-360-Apply-Finance").click(function() {
                            //NGOLLA 09-05-2018
                            //Start loader 
                            $('#maskoverlay').show();
                            setTimeout(function() {
                                var InPut = "";
                                var OutPut = "";
                                InPut = SiebelApp.S_App.NewPropertySet();
                                OutPut = SiebelApp.S_App.NewPropertySet();
                                InPut.SetProperty("View", "SC Contact Finance List View OUI");
                                InPut.SetProperty("Business Component", "Contact");
                                InPut.SetProperty("Row Id", OrderDetailrecords[0]["Bill To Contact Id"]);
                                BService = SiebelApp.S_App.GetService("CUT eSales Order Entry Toolkit Service");
                                OutPut = BService.InvokeMethod("GotoView", InPut);

                                //SiebelApp.S_App.GotoView("SC Contact Finance List View OUI");
                                //hiding the Loader
                                $('#maskoverlay').hide();
                            }, 100);
                        });
                    });




                    //pin -unpin functionality
                    $(document).on("click", ".SC-order360-pin-image", function() {
                        SiebelJS.Log("clicked");
                        var id_clicked = '';
                        id_clicked = this.id;
                        SiebelJS.Log("clicked" + id_clicked);
                        var respectiveDivId = '';
                        respectiveDivId = divisions[id_clicked];
                        var appletName = '';
                        appletName = appletNames[id_clicked];
                        SiebelJS.Log("clicked" + respectiveDivId);
                        if (id_clicked != "order-pin"); {
                            var divElement = '';
                            divElement = document.getElementById(respectiveDivId);
                            if (divElement.style.display == "block") {
                                SiebelJS.Log("Applet hidden");
                                divElement.style.display = "none";
                                $("#" + appletName).removeClass("order-active");
                                $("#" + id_clicked).attr("src", "images/custom/pin-order.png");
                                if (id_clicked == 'pay-pin') {
                                    $("#payimg").attr("src", "images/custom/dollar.png");
                                    //Added code for defect 692
                                    if (OrderDetailrecords[0]["SC Payment Admin Responsbility"] == "Y") {
                                        var paymentdivElement = document.getElementById("Payment-History-Applet");
                                        paymentdivElement.style.display = "none";
                                        //NGOLLA Added code for defect 815
                                        $("#sc-payments-new").attr("src", "images/custom/plus_circle_white.png");
                                        $("#sc-payments-new").css({
                                            "pointer-events": "none"
                                        });
                                    }
                                } else if (id_clicked == 'hr-pin') {
                                    $("#HRImg").attr("src", "images/custom/truck_round.png");
                                } else if (id_clicked == 'att-pin') {
                                    $("#attimg").attr("src", "images/custom/attachment-clips.png");
                                } else if (id_clicked == 'md-pin') {
                                    $("#mdimg").attr("src", "images/custom/financing-icon-white.png");
                                }
                                pinids.splice(pinids.indexOf(id_clicked), 1);

                                $(this).addClass("inactive");
                            } else {
                                SiebelJS.Log("Applet showed");
                                divElement.style.display = 'block';
                                $("#" + appletName).addClass("order-active");
                                $("#" + id_clicked).attr("src", "images/custom/pinned-order.png");
                                if (id_clicked == 'pay-pin') {
                                    $("#payimg").attr("src", "images/custom/dollar-blue active.png");
                                    //function for payment admin details records

                                    //Added code for defect 692
                                    if (OrderDetailrecords[0]["SC Payment Admin Responsbility"] == "Y") {
                                        var paymentdivElement = document.getElementById("Payment-History-Applet");
                                        paymentdivElement.style.display = "block";
                                        paymentStatusArray = SCOUIMethods.SCGetOrderLoVs("[Type]= 'FUNDRQ_STATUS' and [Active] = 'Y'");
                                        payementMethodArray = SCOUIMethods.SCGetOrderLoVs("[Type]= 'PAYMENT_METHOD_CODE' and [Active] = 'Y'");
                                        DriverLicenceStateArray = SCOUIMethods.SCGetOrderLoVs("[Order By] >= 1 and [Order By] <= 52 and [Type]= 'SC_DRIVER_LICENCE_STATE' and [Active] = 'Y'");
                                        ExpirationMonthArray = SCOUIMethods.SCGetOrderLoVs("[Type]= 'SC_PAYMENT_MONTH_NUMBER' and [Active] = 'Y'");
                                        ExpirationYearArray = SCOUIMethods.SCGetOrderLoVs("[Type]= 'SC_PAYMENT_YEAR' and [Active] = 'Y'");

                                        //NGOLLA Added code for defect 815
                                        $("#sc-payments-new").attr("src", "images/custom/plus_circle_360.png");
                                        $("#sc-payments-new").css({
                                            "pointer-events": "all"
                                        });
                                    }
                                    getPaymentDetailsRcds();
                                } else if (id_clicked == 'hr-pin') {
                                    $("#HRImg").attr("src", "images/custom/truck_round-blue active.png");
                                } else if (id_clicked == 'att-pin') {
                                    $("#attimg").attr("src", "images/custom/attachment-order-selected.png");
                                } else if (id_clicked == 'md-pin') {
                                    $("#mdimg").attr("src", "images/custom/financing-icon-blue.png");
                                }
                                pinids.push(id_clicked);
                                $(this).removeClass("inactive");
                            }

                        }
                        //localStorage.setItem(sLogUserNamePinids,pinids);
                        //SBOORLA:Added code for Pin/Unpin UserPreferences
                        if (scUpdatedPin == "N") {
                            var Bservice = '',
                                inPS = '',
                                outPS = '';
                            var fieldvalues = "";
                            for (var i = 0; i < pinids.length; i++)
                                if (pinids.length != (i + 1))
                                    fieldvalues += pinids[i] + "_";
                                else
                                    fieldvalues += pinids[i]
                            var fieldnames = "Cosmetics/OrderPinUnpin";
                            inPS = SiebelApp.S_App.NewPropertySet();
                            outPS = SiebelApp.S_App.NewPropertySet();
                            inPS.SetProperty("BO", "User Preferences");
                            inPS.SetProperty("BC", "User Preferences");
                            inPS.SetProperty("FieldsArray", fieldnames);
                            inPS.SetProperty("ValuesArray", fieldvalues);
                            inPS.SetProperty("SearchSpecification", "");
                            Bservice = SiebelApp.S_App.GetService("SC Custom Query Simplified"); //get service
                            outPS = Bservice.InvokeMethod("Insert", inPS);
                        }
                    });

                    //Start:: To restore pinned tabs on refresh
                    /*var pinnedIds_Loc=localStorage.getItem(sLogUserNamePinids);
						localStorage.setItem(sLogUserNamePinids,"");
						SiebelJS.Log(pinnedIds_Loc);
						if(pinnedIds_Loc!=null){
						var pinnedIds = pinnedIds_Loc.split(',');
						for (var key in appletNames) {
							SiebelJS.Log("Key is :::"+key);
							for(var i=0; i<pinnedIds.length; i++)
							{ 
								if(pinnedIds[i] == key){
								document.getElementById(key).click();
								}
							}
						}
					}*/

                    //SBOORLA:added code for Pin/unpin UserPrefernces
                    /*var Custom_Service = "",
                        Input_BS = "",
                        Out_BS = "",
                        pinnedIds_Loc;
                    Custom_Service = SiebelApp.S_App.GetService("SC Custom Query");
                    Input_BS = SiebelApp.S_App.NewPropertySet();
                    Out_BS = SiebelApp.S_App.NewPropertySet();
                    searchfields = "Cosmetics/OrderPinUnpin";
                    Input_BS.SetProperty("BO", "User Preferences");
                    Input_BS.SetProperty("BC", "User Preferences");
                    Input_BS.SetProperty("SearchSpecification", "");
                    Input_BS.SetProperty("SortSpecification", "");
                    Input_BS.SetProperty("ReqNoOfRecords", "");
                    Input_BS.SetProperty("FieldsArray", searchfields);
                    Out_BS = Custom_Service.InvokeMethod("Query", Input_BS);
                    var Child_BS = Out_BS.GetChild(0);
                    var BS_Data = Child_BS.GetProperty("OutputRecordSet");
                    if (BS_Data != "}") {
                        var ResArray = new Array;
                        ResArray = BS_Data.split(";");

                        jsonRes = JSON.parse(ResArray[0]);
                        pinnedIds_Loc = jsonRes["Cosmetics/OrderPinUnpin"];
                        SiebelJS.Log("jsonSK" + jsonRes["Cosmetics/OrderPinUnpin"]);
                        pinnedIds_Loc = pinnedIds_Loc.split("_");
                    }*/
                    SiebelJS.Log("userPinIds" + User_pinnedIds_Loc);
                    for (var key in appletNames) {
                        SiebelJS.Log("Key is :::" + key);
                        for (var i = 0; i < User_pinnedIds_Loc.length; i++) {
                            if (User_pinnedIds_Loc[i] == key) {
                                document.getElementById(key).click();
                            }
                        }
                    }
                    if (scUpdatedPin == "Y") {
                        scUpdatedPin = "N";
                        /*var Bservice = '',
                            inPS = '',
                            outPS = '';
                        var fieldvalues = "";
                        for (var i = 0; i < pinids.length; i++)
                            if (pinids.length != (i + 1))
                                fieldvalues += pinids[i] + "_";
                            else
                                fieldvalues += pinids[i]
                        var fieldnames = "Cosmetics/OrderPinUnpin";
                        inPS = SiebelApp.S_App.NewPropertySet();
                        outPS = SiebelApp.S_App.NewPropertySet();
                        inPS.SetProperty("BO", "User Preferences");
                        inPS.SetProperty("BC", "User Preferences");
                        inPS.SetProperty("FieldsArray", fieldnames);
                        inPS.SetProperty("ValuesArray", fieldvalues);
                        inPS.SetProperty("SearchSpecification", "");
                        Bservice = SiebelApp.S_App.GetService("SC Custom Query Simplified"); //get service
                        outPS = Bservice.InvokeMethod("Insert", inPS);*/

                    }

                    //End:: To restore pinned tabs on refresh
                    $("div#Order-360-right-container").scrollTop(0);
                    //for about record in line details section
                    //RCHATHAR: Modified for defect number=653
                    $(document).on('click', '#about_record_linedetail_item', function() {
                        var id = $(this).parent().attr("id");
                        id = id.split("w");
                        id = id[1];
                        $("#s_" + appletSeqlineitems + "_l tr#" + id + "").trigger("click");
                        setTimeout(function() {
                            SiebelJS.Log("value of id is:" + id);
                            SCOUIMethods.AboutRecord("SC Order Entry - Line Item List Applet (Sales) OUI");
                        }, 1000);
                    });

                    //NGOLLA Added code for components
                    /* $(document).on('click', '#add-on-linedetails', function() {
						   var id= $(this).parent().attr("id");
						   id = id.split("w");
						   id = id[1];
						  Addonsmarkup=AddonDetailsPopup(id,Lineitemrecords);
						   $("#SC-order-addon-line-details").html(Addonsmarkup);
						   $("#SC-order-addon-line-details").modal({
							  backdrop: 'static'
							});
						   
					   }); */

                    //NGOLLA Added code for compon 
                    $(document).on('click', '.add-on', function() {
                        var Lineitemid = $(this).attr("id");
                        /* var id= $(this).parent().parent().attr("id");
                         id = id.split("w");
                         id = id[1];*/
                        $("body").trigger('Custom.Start');
                        setTimeout(function() {
                            // Addonsmarkup=AddonDetailsPopup(id,Lineitemid);
                            Addonsmarkup = AddonDetailsPopup(Lineitemid);
                            $("#SC-order-addon-line-details").html(Addonsmarkup);
                            $("#SC-order-addon-line-details").modal({
                                backdrop: 'static'
                            });
                            $("body").trigger('Custom.End');
                        }, 1000);

                    });
                    $(document).on("click", ".glyphicon-plus-sign", function(e) {
                        var rowId = $(this).attr('id');
                        var currentId = rowId.substring(3, rowId.length);
                        var Sequence = $(this).parent().attr('Class');
                        SiebelJS.Log("Sequence" + Sequence);
                        var SequenceId = Sequence.substring(5, Sequence.length);
                        SiebelJS.Log("SequenceId" + SequenceId);
                        $("body").trigger('Custom.Start');
                        setTimeout(function() {
                            if (orderId != null && orderId != "") {
                                var inPS = "";
                                var OutPS = "";
                                inPS = SiebelApp.S_App.NewPropertySet();
                                OutPS = SiebelApp.S_App.NewPropertySet();
                                var fieldnames = "Id,Root Order Item Id,Part Number,Line Number,Parent Order Item Id,Start Price,SC Total Line Discounts,Item Price - Display,Quantity Requested,SC Line Total NRC,Tax Amount,Outline Number,Fulfillment Status Code,Asset Integration Id,SC Long Description";
                                var fieldvalues = "";
                                inPS.SetProperty("BO", "Order Entry (Sales)");
                                inPS.SetProperty("BC", "Order Entry - Line Items (Simple)");
                                inPS.SetProperty("FieldsArray", fieldnames);
                                inPS.SetProperty("SearchSpecification", "[Order Header Id] = '" + orderId + "' AND [Parent Order Item Id]='" + currentId + "'");
                                Bservice = SiebelApp.S_App.GetService("SC Custom Query"); //get service
                                OutPS = Bservice.InvokeMethod("Query", inPS);
                                var outputRecordSet = "";
                                outputRecordSet = OutPS.GetChild(0).GetProperty("OutputRecordSet");
                                if (outputRecordSet != "}") {
                                    var childsdataArray = new Array;
                                    childsdataArray = outputRecordSet.split(";");
                                    var Componentsmarkup = "";
                                    //Componentsmarkup+='<div class="parent-block">';     
                                    for (var childpr = 0; childpr < childsdataArray.length; childpr++) {
                                        var childData = '';
                                        var str = childsdataArray[childpr];
                                        var found = false;
                                        str = str.replace(/(".*?")(?!\})/g, function(match) {
                                            if (found && match.endsWith('"')) return match.substring(0, match.length - 1) + '\\"';
                                            found = found || match === '"SC Long Description"';

                                            return match;
                                        });

                                        //var obj = JSON.parse(str);
                                        str = str.replace(/\n/g, "");
                                        //str=str.replace(/\"/g,"");
                                        childData = JSON.parse(str);
                                        //if(childData["Parent Order Item Id"]==AddonRecords[h-1]["Id"]){
                                        if (childsdataArray.length >= 1) {
                                            //for(var childpr=0;childpr<OutPS.GetChild(0).GetChild(pr).GetChildCount();childpr++){
                                            var InPSa = SiebelApp.S_App.NewPropertySet();
                                            var OutPSa = SiebelApp.S_App.NewPropertySet();
                                            InPSa.SetProperty("BO", "Order Entry (Sales)");
                                            InPSa.SetProperty("BC", "SWI Ship Tracking Details");
                                            var FieldsArray = ["SC UPS Tracking URL", "SC Box Number"];
                                            var SearchSpecification = "[Order Item Id]='" + childData["Id"] + "'";
                                            InPSa.SetProperty("FieldsArray", FieldsArray);
                                            InPSa.SetProperty("SearchSpecification", SearchSpecification);
                                            var Service = SiebelApp.S_App.GetService("SC Custom Query");
                                            OutPSa = Service.InvokeMethod("Query", InPSa);
                                            var ChildCount = OutPSa.GetChildCount();
                                            var Child = OutPSa.GetChild(0);
                                            var BSData = Child.GetProperty("OutputRecordSet");
                                            var RecordSeta = "";
                                            var boxnumber = "";
                                            if (BSData != "}") {
                                                var RecordSet = new Array;
                                                RecordSet = BSData.split(";");
                                                for (var i = 0; i < RecordSet.length; i++) {
                                                    var RecordSetb = JSON.parse(RecordSet[i]);
                                                    if (RecordSeta != "")
                                                        RecordSeta += ", ";
                                                    RecordSeta += RecordSetb["SC UPS Tracking URL"];
                                                    boxnumber += RecordSetb["SC Box Number"];
                                                    boxnumber += ", ";
                                                }
                                            }
                                            addonstartprice = childData["Start Price"] != "" ? parseFloat(childData["Start Price"]) : 0.00;
                                            //startprice=outPS.GetChild(0).GetChild(pr).GetProperty("Start Price")!=""?parseFloat(outPS.GetChild(0).GetChild(pr).GetProperty("Start Price")):0.00;
                                            discounts = childData["SC Total Line Discounts"] != "" ? parseFloat(childData["SC Total Line Discounts"]) : 0.00;
                                            netprice = childData["Item Price - Display"] != "" ? parseFloat(childData["Item Price - Display"]) : 0.00;
                                            taxamount = childData["Tax Amount"] != "" ? parseFloat(childData["Tax Amount"]) : 0.00;
                                            qua = childData["Quantity Requested"];
                                            addonstartprice = (addonstartprice * qua);
                                            discounts = (discounts * qua);
                                            netprice = (netprice * qua);
                                            nrcsubtotal = childData["SC Line Total NRC"] != "" ? parseFloat(childData["SC Line Total NRC"]) : 0.00;
                                            //nrcsubtotal
                                            //SNARRA 02-08-2018 Adding color for first Childs
                                            if (SequenceId == 1) {
                                                Componentsmarkup += '             <tr style="background:#f63" id="BOM' + childData["Parent Order Item Id"] + '">';
                                                Componentsmarkup += '            <td style="color:#fff" class="child' + SequenceId + '.' + (childpr + 1) + '"><span class="glyphicon glyphicon-plus-sign icon-img add-item child' + childpr + '" style="color:#ffffff" id="BOM' + childData["Id"] + '"></span></td>';
                                                Componentsmarkup += '            <td style="color:#fff" title="' + SequenceId + '.' + (childpr + 1) + '">' + SequenceId + '.' + (childpr + 1) + '</td>';
                                                Componentsmarkup += '            <td style="color:#fff">' + childData["Line Number"] + '</td>';
                                                Componentsmarkup += '            <td style="color:#fff">' + childData["Part Number"] + '</td>';
                                                Componentsmarkup += '            <td style="color:#fff">' + childData["SC Long Description"] + '</td>';
                                                Componentsmarkup += '            <td style="color:#fff">' + qua + '</td>';
                                                Componentsmarkup += '              <td style="color:#fff">$' + addonstartprice.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,') + '</td>';
                                                if (childData["Start Price"] == "")
                                                    Componentsmarkup += '              <td></td>';
                                                else
                                                    Componentsmarkup += '              <td style="color:#fff">$' + discounts.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,') + '</td>';
                                                if (childData["Item Price - Display"] == "")
                                                    Componentsmarkup += '              <td></td>';
                                                else
                                                    Componentsmarkup += '              <td style="color:#fff">$' + netprice.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,') + '</td>';
                                                if (childData["Tax Amount"] == "") {
                                                    Componentsmarkup += '              <td></td>';
                                                } else {
                                                    Componentsmarkup += '              <td style="color:#fff">$' + taxamount.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,') + '</td>';
                                                }
                                                Componentsmarkup += '              <td style="color:#fff">$' + nrcsubtotal.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,') + '</td>';
                                                Componentsmarkup += '              <td style="color:#fff">' + childData["Fulfillment Status Code"] + '</td>';
                                                Componentsmarkup += '              <td style="color:#fff">' + childData["Asset Integration Id"] + '</td>'; //SPATIBAN:MAY2019:Added code for displaying Integration Id
                                                Componentsmarkup += '              <td style="color:#fff">' + boxnumber + '</td>';
                                                Componentsmarkup += '              <td style="color:#fff">' + RecordSeta + '</td>';
                                                Componentsmarkup += '             </tr>';
                                            } else {
                                                Componentsmarkup += '             <tr class="main-bg" id="BOM' + childData["Parent Order Item Id"] + '">';
                                                Componentsmarkup += '            <td class="child' + SequenceId + '.' + (childpr + 1) + '"><span class="glyphicon glyphicon-plus-sign icon-img add-item child' + childpr + '" id="BOM' + childData["Id"] + '"></span></td>';
                                                Componentsmarkup += '            <td title="' + SequenceId + '.' + (childpr + 1) + '">' + SequenceId + '.' + (childpr + 1) + '</td>';
                                                Componentsmarkup += '            <td>' + childData["Line Number"] + '</td>';
                                                Componentsmarkup += '            <td>' + childData["Part Number"] + '</td>';
                                                Componentsmarkup += '            <td>' + childData["SC Long Description"] + '</td>';
                                                Componentsmarkup += '            <td>' + qua + '</td>';
                                                Componentsmarkup += '              <td>$' + addonstartprice.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,') + '</td>';
                                                if (childData["Start Price"] == "")
                                                    Componentsmarkup += '              <td></td>';
                                                else
                                                    Componentsmarkup += '              <td>$' + discounts.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,') + '</td>';
                                                if (childData["Item Price - Display"] == "")
                                                    Componentsmarkup += '              <td></td>';
                                                else
                                                    Componentsmarkup += '              <td>$' + netprice.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,') + '</td>';
                                                if (childData["Tax Amount"] == "") {
                                                    Componentsmarkup += '              <td></td>';
                                                } else {
                                                    Componentsmarkup += '              <td>$' + taxamount.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,') + '</td>';
                                                }
                                                Componentsmarkup += '              <td>$' + nrcsubtotal.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,') + '</td>';
                                                Componentsmarkup += '              <td>' + childData["Fulfillment Status Code"] + '</td>';
                                                Componentsmarkup += '              <td>' + childData["Asset Integration Id"] + '</td>'; //SPATIBAN:MAY2019:Added code for displaying Integration Id
                                                Componentsmarkup += '              <td>' + boxnumber + '</td>';
                                                Componentsmarkup += '              <td>' + RecordSeta + '</td>';
                                                Componentsmarkup += '             </tr>';
                                            }
                                            //}
                                        }
                                        //}
                                        $('#' + rowId).addClass("glyphicon-minus-sign");
                                    }
                                    //Componentsmarkup+='</div>'; 
                                    $('#' + rowId).parent().parent().after(Componentsmarkup);
                                }
                                $('#' + rowId).removeClass("glyphicon-plus-sign");
                            }

                            $("body").trigger('Custom.End');
                        }, 1000);
                    })

                    $(document).on("click", ".glyphicon-minus-sign", function(e) {
                        var rowClass = $(this).parent().attr('class');
                        $("#Addon-table tbody tr").each(function() {
                            var currentClass = $(this).children(1).attr('class');
                            if ((currentClass.startsWith(rowClass)) && (currentClass != rowClass)) {
                                $(this).remove();
                            }
                        });
                        $(this).addClass("glyphicon-plus-sign")
                        $(this).removeClass("glyphicon-minus-sign");
                    })
                    SiebelApp.S_App.GetActiveView().SetActiveApplet(SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Line Item List Applet (Sales) OUI"]);
                }




                SCiPadSalesOrder360DegreeViewPR.prototype.EndLife = function() {
                    SiebelAppFacade.SCiPadSalesOrder360DegreeViewPR.superclass.EndLife.apply(this, arguments);
                    //unbind Events
                    $(document).unbind("click");
                    $("body").unbind('Custom.Start');
                    $("body").unbind('Custom.End');
                    pinids = [];
                    if (localStorage.getItem('whitescreen') == 0) {
                        $("#_swescrnbar").hide();
                        $("#_swethreadbar").hide();
                        $("#_sweappmenu").hide();
                        $("#s_vctrl_div").hide();
                        $(".siebui-button-toolbar").hide();
                        $("#_sweview").hide();
                        $('#_swecontent').prepend(SCOUIMarkups.CustomWhiteScreenTimer());
                        $("#custommaskoverlay").show();
                    } else if (localStorage.getItem('whitescreen') == 1) {
                        $("#_swescrnbar").show();
                        $("#_swethreadbar").show();
                        $("#_sweappmenu").show();
                        $("#s_vctrl_div").show();
                        $(".siebui-button-toolbar").show();
                        $("#_sweview").show();
                        $('#CommunicationPanelContainer').css("padding-top", "0px");
                    }
                }


                function getLineDetailsRcds() {
                    Lineitemrecords = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Line Item List Applet (Sales) OUI"].GetPModel().GetRenderer().GetPM().Get("GetRecordSet");
                    // SiebelJS.Log("Lineitemrecords"+JSON.stringify(Lineitemrecords));
                    var Linerecordslength = "";
                    Linerecordslength = Lineitemrecords.length;
                    if (Linerecordslength >= 1) {
                        var LineDetailsmarkup = "";
                        for (i = 0; i < Linerecordslength; i++) {
                            $("#s_" + appletSeqlineitems + "_l tr#" + (i + 1) + "").trigger("click");
                            //SBOORLA:Added code for defect 733
                            if (Lineitemrecords[i]["Fulfillment Status Code"] != 'Booked' || Lineitemrecords[i]["Fulfillment Status Code"] != "Closed" || Lineitemrecords[i]["Fulfillment Status Code"] != "Completed" || Lineitemrecords[i]["Fulfillment Status Code"] != "Cancelled")
                                hideRevison = "N";
                            var tdmarkup = ""
                            if (Lineitemrecords[i]["Product Type Code"] != ProductTypeCode) {
                                tdmarkup += '                                            <tr id="row' + (i + 1) + '">';
                                tdmarkup += '                                                <td class="min-width-col" title="' + Lineitemrecords[i]["Line Number"] + '">' + Lineitemrecords[i]["Line Number"] + '</td>';
                                tdmarkup += '                                                <td class="min-width-col" title="' + Lineitemrecords[i]["Part Number"] + '">' + Lineitemrecords[i]["Part Number"] + '</td>';
                                tdmarkup += '                                                <td class="min-width-col" title="' + Lineitemrecords[i]["Quantity Requested"] + '">' + Lineitemrecords[i]["Quantity Requested"] + '</td>';
                                tdmarkup += '                                               <td class="min-width-col" title="' + Lineitemrecords[i]["SC Calc Long Description"] + '">' + Lineitemrecords[i]["SC Calc Long Description"] + '</td>';
                                tdmarkup += '                                               <td class="min-width-col" title="' + Lineitemrecords[i]["Fulfillment Status Code"] + '">' + Lineitemrecords[i]["Fulfillment Status Code"] + '</td>';
                                //SPATIBAN:15-june-20: Added code for #STRY0024300
								if(Lineitemrecords[i]["Shipping"]!=""){
									if( Lineitemrecords[i]["Shipping"] == "Home Delivery"){
										tdmarkup += '                                               <td class="min-width-col" title="' + Lineitemrecords[i]["Ship Method"] +'">' + Lineitemrecords[i]["Ship Method"] + '</td>';
									}else{
										tdmarkup += '                                               <td class="min-width-col" title="' + Lineitemrecords[i]["Ship Method"] + ' - '+Lineitemrecords[i]["Shipping"]+'">' + Lineitemrecords[i]["Ship Method"] + '-'+Lineitemrecords[i]["Shipping"]+'</td>';
									}
								}else{
									tdmarkup += '                                               <td class="min-width-col" title="' + Lineitemrecords[i]["Ship Method"] + '">' + Lineitemrecords[i]["Ship Method"] + '</td>';
                                }
                                tdmarkup += '                                                <td class="min-width-col" title="' + Lineitemrecords[i]["SC Line Total NRC"] + '">' + Lineitemrecords[i]["SC Line Total NRC"] + '</td>';
								tdmarkup += '                                               <td class="min-width-col" title="' + Lineitemrecords[i]["ATP Status As Of Date"] + '">' + Lineitemrecords[i]["ATP Status As Of Date"] + '</td>';
                                tdmarkup += '                                                <td class="min-width-col"><img src="images/custom/fileboard.png" class="so-add-cart" id="so-popup"></td>';
                                //Ngolla-04/10/2018 added Condition for defect no:698
                                var shipmethod = "";
                                shipmethod = Lineitemrecords[i]["Ship Method"];
                                if (((shipmethod.indexOf("UPS") >= 0) || (shipmethod == "Home Delivery")) && Lineitemrecords[i]["Product Line"] != "DELIVERY" && Lineitemrecords[i]["Fulfillment Status Code"] != "Cancelled")
                                    tdmarkup += '                                                <td class="min-width-col"><img src="images/custom/truck_round_blue.png" class="so-add-cart" id="linedetails_expand"></td>';
                                else
                                    tdmarkup += '                                                <td class="SC-disabled min-width-col"><img src="images/custom/truck_round_grey.png" class="so-add-cart" id="linedetails_expand"></td>';
                                //NGOLLA Added code for components 
                                /*if(Lineitemrecords[i]["Product Def Type Code"]=="Customizable")
				tdmarkup+='                                           <td id="add-on-linedetails" class="min-width-col" ><img src="images/custom/script-tblue.png" class="so-add-cart"></td>';
				else
				tdmarkup+='                                           <td id="add-on-linedetails" class="min-width-col" style="pointer-events:none;"><img src="images/custom/script-grey.png" class="so-add-cart"></td>';
			 */ //NGOLLA Added code for components 
                                tdmarkup += '                                           <td id="add-on-linedetails" class="min-width-col" ><img id="' + Lineitemrecords[i]["Id"] + '" src="images/custom/BOM Icon.png" class="so-add-cart add-on"></td>';
                                //RCHATHAR: Modified for defect number=653
                                tdmarkup += '                                           <td id="about_record_linedetail_item" class="min-width-col"><img src="images/custom/about_record.png" class="so-add-cart"></td>';
                                tdmarkup += '                                            </tr>';
                                shipitemrecords = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC SWI Ship Detail List Custom Applet OUI"].GetPModel().GetRenderer().GetPM().Get("GetRecordSet");
                                SiebelJS.Log("shipitemrecords" + JSON.stringify(shipitemrecords));
                                //var shipitemrecords=SiebelApp.S_App.GetActiveView().GetAppletMap()["SC SWI Ship Detail List Custom //Applet"].GetPModel().GetRenderer().GetPM().Get("GetRecordSet");
                                //SiebelJS.Log("shipitemrecords"+JSON.stringify(shipitemrecords));
                                tdmarkup += '								<tr class="showhide">';
                                tdmarkup += '                               <td class="main-bg" colspan="11">';
                                tdmarkup += '                                    <div class="collapse-block store-collapse">';
                                tdmarkup += '                                        <div class="row SC-SO-row clearfix">';
                                tdmarkup += '                                            <div class="col-md-6 col-lg-6 col-sm-6 SC-SO-item no-margin">';
                                tdmarkup += '                                            </div>';
								tdmarkup += '                                            <div class="col-md-2 col-lg-2 col-sm-2 SC-SO-item no-margin">';
                                tdmarkup += '                                                <label class="item-label"><b>SHIP DATE</b></label>';
                                tdmarkup += '                                            </div>';
                                tdmarkup += '                                            <div class="col-md-2 col-lg-2 col-sm-2 SC-SO-item no-margin">';
                                tdmarkup += '                                                <label class="item-label"><b>BOX NUMBER</b></label>';
                                tdmarkup += '                                            </div>';
                                tdmarkup += '                                            <div class="col-md-2 col-lg-2 col-sm-2 SC-SO-item no-margin">';
                                tdmarkup += '                                                <label class="item-label"><b>TRACKING NUMBER</b></label>';
                                tdmarkup += '                                          </div>';
                                tdmarkup += '                                        </div>';
                                var shipmentlength = shipitemrecords.length;
                                for (var st = 0; st < shipmentlength; st++) {
                                    tdmarkup += '                                        <div class="col-md-6 col-lg-6 col-sm-6 SC-SO-item no-margin">';
                                    tdmarkup += '                                            </div>';
                                    tdmarkup += '                                            <div class="col-md-2 col-lg-2 col-sm-2 SC-SO-item no-margin">';
                                    if (shipitemrecords[st]["Ship Date"] != "")
                                        tdmarkup += '                                                <label class="item-label" style="color:#ffffff">' + shipitemrecords[st]["Ship Date"] + '</label>';
                                    else
                                        tdmarkup += '                                                <label class="item-label"></label>';
                                    tdmarkup += '                                            </div>';
                                    tdmarkup += '                                            <div class="col-md-2 col-lg-2 col-sm-2 SC-SO-item no-margin">';
                                    if (shipitemrecords[st]["SC Box Number"] != "")
                                        tdmarkup += '                                                <label class="item-label" style="color:#ffffff">' + shipitemrecords[st]["SC Box Number"] + '</label>';
                                    else
                                        tdmarkup += '                                                <label class="item-label"></label>';
                                    tdmarkup += '                                            </div>';
                                    tdmarkup += '                                            <div class="col-md-2 col-lg-2 col-sm-2 SC-SO-item no-margin">';
                                    //Ngolla for Defect Number 732
                                    if (shipitemrecords[st]["SC UPS Tracking URL Calc"] != "")
                                        tdmarkup += '                                                <label class="item-label">' + shipitemrecords[st]["SC UPS Tracking URL Calc"] + '</label>';
                                    else
                                        tdmarkup += '                                                <label class="item-label"></label>';
                                    tdmarkup += '                                          </div>';
                                }
                                tdmarkup += '                                        </div>';
                                tdmarkup += '                                    </div>';
                                tdmarkup += '                                </td>';
                                tdmarkup += '                            </tr>';
                                LineDetailsmarkup += tdmarkup;
                            }
                        }
                        $('#sc-LineDetails-Rcd').html(LineDetailsmarkup);

                    }
                }
                //Start:Home Delivery SR  Record Set	 
                function GetHDSRRecords() {
                    var HDSR_Rcds = "";
                    HDSRrecords = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Field Service List Applet OUI"].GetPModel().GetRenderer().GetPM().Get("GetRecordSet");
                    SiebelJS.Log("shipitemrecords" + JSON.stringify(HDSRrecords));
                    var HDrecordsetlength = "";
                    HDrecordsetlength = HDSRrecords.length;
                    for (var i = 0; i < HDrecordsetlength; i++) {
                        HDSR_Rcds += '<tr id="row' + (i + 1) + '">';
                        HDSR_Rcds += '<td>' + HDSRrecords[i]["Created"] + '</td>';
                        HDSR_Rcds += '<td>' + HDSRrecords[i]["SC HD Order Number"] + '</td>';
                        HDSR_Rcds += '<td><a href="javascript:void(0)" id="SCsrnumdrilldown">' + HDSRrecords[i]["SR Number"] + '</td>';
                        HDSR_Rcds += '<td>' + HDSRrecords[i]["Status"] + '</td>';
                        HDSR_Rcds += '<td>' + HDSRrecords[i]["SC HD Activity Planned"] + '</td>';
                        HDSR_Rcds += '<td>' + HDSRrecords[i]["SC HD Activity Sched Start Dt"] + '</td>';
                        HDSR_Rcds += '<td>' + HDSRrecords[i]["SC Rescheduled"] + '</td>';
                        HDSR_Rcds += '<td title="' + HDSRrecords[i]["SC Rescheduled Reason"] + '" class="comments-col"><textarea class="SC-input no-padding" readonly>' + HDSRrecords[i]["SC Rescheduled Reason"] + '</textarea></td>';
                        HDSR_Rcds += '</tr>';
                    }
                    $("#SC-homedeliver-Sr-records").html(HDSR_Rcds);
                }
                //End:Home Delivery SR  Record Set


                function getPaymentDetailsRcds() {
                    PaymentdetailsPM = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Payments List Applet OUI"].GetPModel().GetRenderer().GetPM();
                    SiebelJS.Log("PaymentdetailsPM" + PaymentdetailsPM);
                    var Paymentdetailsrecords = PaymentdetailsPM.Get("GetRecordSet");
                    //SiebelJS.Log("---------function called------");
                    PaymentAdminfun(Paymentdetailsrecords);
                    SiebelJS.Log("Paymentdetailsrecords" + Paymentdetailsrecords);
                    SiebelJS.Log("Paymentdetailsrecords" + JSON.stringify(Paymentdetailsrecords));
                    //if(Paymentdetailsrecords.length>=1){
                    var paymentdetailsmarkup = "";
                    var delpayrowid = "";
                    var PaymentRecordlength = "";
                    PaymentRecordlength = Paymentdetailsrecords.length;
                    for (i = 0; i < PaymentRecordlength; i++) {
                        //$("#s_"+appletSeq+"_l tr#"+i+"").trigger("click");
                        var Paymentformrecords = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Payment Detail Applet - Admin OUI"].GetPModel().GetRenderer().GetPM().Get("GetRecordSet");
                        //SiebelJS.Log("i"+i);
                        //RCHATHAR: STRY0089627 Added to remove the payments error
                        if(Paymentdetailsrecords[i]["SC Payment Status"] == "Declined")
                        paymentdetailsmarkup += '                                            <tr class="SC-disabled" id="paydet' + (i + 1) + '" readonly="true" disable="true">';
						else
						paymentdetailsmarkup += '                                            <tr id="paydet' + (i + 1) + '">';
                        paymentdetailsmarkup += '                                                <td title="' + Paymentdetailsrecords[i]["Payment Method"] + '">' + Paymentdetailsrecords[i]["Payment Method"] + '</td>';
                        //NGOLLA for Defect NO:739
                        paymentdetailsmarkup += '                                                <td>' + Paymentdetailsrecords[i]["SC Auth Date"] + '</td>';
                        paymentdetailsmarkup += '                                                <td title="' + Paymentdetailsrecords[i]["SC Payment Status"] + '">' + Paymentdetailsrecords[i]["SC Payment Status"] + '</td>';
                        paymentdetailsmarkup += '                                                <td title="' + Paymentdetailsrecords[i]["SC Payment Type Code"] + '">' + Paymentdetailsrecords[i]["SC Payment Type Code"] + '</td>';
                        if (Paymentdetailsrecords[i]["Payment Method"] == "Financing")
                            paymentdetailsmarkup += '                                                <td title="' + Paymentdetailsrecords[i]["SC Financing Disclaimer"] + '" class="comments-col"><textarea name="detdes" class="SC-input no-padding" readonly>' + Paymentdetailsrecords[i]["SC Financing Disclaimer"] + '</textarea></td>';
                        else
                            paymentdetailsmarkup += '                                                <td title="' + Paymentdetailsrecords[i]["SC Pmt Receipt Text"] + '" class="comments-col"><textarea name="detdes" class="SC-input no-padding" readonly>' + Paymentdetailsrecords[i]["SC Pmt Receipt Text"] + '</textarea></td>';
                        paymentdetailsmarkup += '                                                <td>' + Paymentdetailsrecords[i]["Transaction Amount"] + '</td>';
                        if ((Paymentdetailsrecords[i]["SC Payment Status"] == "Entered" || Paymentdetailsrecords[i]["SC Payment Status"] == "Authorization Submitted") && Paymentdetailsrecords[i]["SC Delete Button Enable"] == "N")
                            paymentdetailsmarkup += '                                                <td><img src="images/custom/delete-red.png" class="so-add-cart"></td>';
                        else
                            paymentdetailsmarkup += '                                                <td class="SC-disabled"><img src="images/custom/delete-red.png" class="so-add-cart"></td>';
                        paymentdetailsmarkup += '                                            </tr>';
                        if (OrderDetailrecords[0]["SC Payment Admin Responsbility"] == 'Y') {
                            paymentdetailsmarkup += '                                            <tr class="showhide">';
                            paymentdetailsmarkup += '                                                <td class="main-bg" colspan="7">';
                            paymentdetailsmarkup += '                                                    <div class="collapse-block">';
                            paymentdetailsmarkup += '                                                        <div class="row SC-SO-row clearfix">';
                            paymentdetailsmarkup += '                                                            <div class="col-md-3 col-lg-3 SC-SO-item">';
                            paymentdetailsmarkup += '                                                                <label class="item-label">payment method:</label>';
                            paymentdetailsmarkup += '                                                                <select class="item-value-select-box" id="PaymentMethod' + i + '">';
                            paymentdetailsmarkup += ' <option title="' + Paymentformrecords[i]["Payment Method"] + '" value="' + Paymentformrecords[i]["Payment Method"] + '">' + Paymentformrecords[i]["Payment Method"] + '</option>';
                            var paymentlength = "";
                            paymentlength = payementMethodArray.length;
                            for (var pm = 0; pm < paymentlength; pm++) {
                                if (Paymentformrecords[i]["Payment Method"] != payementMethodArray[pm])
                                    paymentdetailsmarkup += ' <option value="' + payementMethodArray[pm] + '">' + payementMethodArray[pm] + '</option>';
                            }
                            paymentdetailsmarkup += '                                                                </select>';
                            paymentdetailsmarkup += '                                                            </div>';
                            paymentdetailsmarkup += '                                                            <div class="col-md-3 col-lg-3 SC-SO-item">';
                            paymentdetailsmarkup += '                                                                <label class="item-label">settlement amount:</label>';
                            paymentdetailsmarkup += '                                                                <input type="text" name="" class="item-value-select-box padding-for-currency" id="settlementamount' + i + '" value="' + Paymentformrecords[0]["SC Settled Amount"] + '">';
                            paymentdetailsmarkup += '                                                                <span class="currency">$</span>';
                            paymentdetailsmarkup += '                                                            </div>';
                            paymentdetailsmarkup += '                                                            <div class="col-md-3 col-lg-3 SC-SO-item">';
                            paymentdetailsmarkup += '                                                                <label class="item-label">deposited at store?</label>';
                            paymentdetailsmarkup += '                                                                <p class="Order-value SC-checkbox-white-square">';
                            if (Paymentformrecords[i]["SC Deposited at Store"] == "Y")
                                paymentdetailsmarkup += '                                                                    <input type="checkbox" name="" id="das' + i + '" checked/>';
                            else
                                paymentdetailsmarkup += '                                                                    <input type="checkbox" name="" id="das' + i + '" />';
                            paymentdetailsmarkup += '                                                                    <label for="das' + i + '" class="SC-360-cusin"></label>';
                            paymentdetailsmarkup += '                                                                </p>';
                            paymentdetailsmarkup += '                                                            </div>';
                            paymentdetailsmarkup += '                                                            <div class="col-md-3 col-lg-3 SC-SO-item">';
                            paymentdetailsmarkup += '                                                                <label class="item-label">payment status:</label>';
                            paymentdetailsmarkup += '                                                                <select class="item-value-select-box" id="PaymentStatus' + i + '">';
                            paymentdetailsmarkup += ' <option value="' + Paymentformrecords[i]["SC Payment Status"] + '">' + Paymentformrecords[i]["SC Payment Status"] + '</option>';
                            var paymentlength = "";
                            paymentlength = paymentStatusArray.length;
                            for (var ps = 0; ps < paymentlength; ps++) {
                                if (Paymentformrecords[i]["SC Payment Status"] != paymentStatusArray[ps])
                                    paymentdetailsmarkup += ' <option value="' + paymentStatusArray[ps] + '">' + paymentStatusArray[ps] + '</option>';
                            }
                            paymentdetailsmarkup += '                                                                </select>';
                            paymentdetailsmarkup += '                                                            </div>';
                            paymentdetailsmarkup += '                                                        </div>';
                            paymentdetailsmarkup += '                                                        <div class="row SC-SO-row clearfix">';
                            paymentdetailsmarkup += '                                                            <div class="col-md-3 col-lg-3 SC-SO-item">';
                            paymentdetailsmarkup += '                                                                <label class="item-label">payment type:</label>';
                            paymentdetailsmarkup += '                                                                <input type="text" name="" class="item-value-select-box padding-for-search" id="paymenttype' + i + '" value="' + Paymentformrecords[i]["SC Payment Type Code"] + '">';
                            paymentdetailsmarkup += '                                                                <img src="images/custom/search.png" class="location-search-icon" id="paymenttypeimg">';
                            paymentdetailsmarkup += '                                                            </div>';
                            paymentdetailsmarkup += '                                                            <div class="col-md-3 col-lg-3 SC-SO-item">';
                            paymentdetailsmarkup += '                                                                <label class="item-label">account number:</label>';
                            paymentdetailsmarkup += '                                                                <input type="text" name="" class="item-value-select-box" id="accountno' + i + '" value="' + Paymentformrecords[i]["Account Number"] + '">';
                            paymentdetailsmarkup += '                                                            </div>';
                            paymentdetailsmarkup += '                                                            <div class="col-md-3 col-lg-3 SC-SO-item">';
                            paymentdetailsmarkup += '                                                                <label class="item-label">address check verified?</label>';
                            paymentdetailsmarkup += '                                                                <p class="Order-value SC-checkbox-white-square">';
                            if (Paymentformrecords[i]["SC Add Check Verified"] == "Y")
                                paymentdetailsmarkup += '                                                                    <input type="checkbox" name="" id="acv' + i + '" checked/>';
                            else
                                paymentdetailsmarkup += '                                                                    <input type="checkbox" name="" id="acv' + i + '" />';
                            paymentdetailsmarkup += '                                                                    <label for="acv' + i + '" class="SC-360-cusin"></label>';
                            paymentdetailsmarkup += '                                                                </p>';
                            paymentdetailsmarkup += '                                                            </div>';
                            paymentdetailsmarkup += '                                                            <div class="col-md-3 col-lg-3 SC-SO-item">';
                            paymentdetailsmarkup += '                                                                <label class="item-label">authorization code:</label>';
                            paymentdetailsmarkup += '                                                                <input type="text" name="" class="item-value-select-box" id="autcode' + i + '" value="' + Paymentformrecords[i]["Authorization Code"] + '">';
                            paymentdetailsmarkup += '                                                            </div>';
                            paymentdetailsmarkup += '                                                        </div>';
                            paymentdetailsmarkup += '                                                        <div class="row SC-SO-row clearfix">';
                            //paymentdetailsmarkup+='                                                            <div class="col-md-6 col-lg-6 SC-SO-item">';
                            paymentdetailsmarkup += '                                                            <div class="col-md-3 col-lg-3 SC-SO-item">';
                            paymentdetailsmarkup += '                                                                <label class="item-label">transfer payment:</label>';
                            paymentdetailsmarkup += '                                                                <p class="Order-value SC-checkbox-white-square">';
                            if (Paymentformrecords[i]["SC Transfer Payment Flag"] == "Y")
                                paymentdetailsmarkup += '                                                                    <input type="checkbox" name="" id="tp' + i + '" checked/>';
                            else
                                paymentdetailsmarkup += '                                                                    <input type="checkbox" name="" id="tp' + i + '" />';
                            paymentdetailsmarkup += '                                                                    <label for="tp' + i + '" class="SC-360-cusin"></label>';
                            paymentdetailsmarkup += '                                                                </p>';
                            paymentdetailsmarkup += '                                                            </div>';
                            paymentdetailsmarkup += '                                                            <div class="col-md-3 col-lg-3 SC-SO-item">';
                            paymentdetailsmarkup += '                                                                <label class="item-label">invalid payment:</label>';
                            paymentdetailsmarkup += '                                                                <p class="Order-value SC-checkbox-white-square">';
                            if (Paymentformrecords[i]["SC Invalid Payment"] == "Y")
                                paymentdetailsmarkup += '                                                                    <input type="checkbox" name="" id="ip' + i + '" checked/>';
                            else
                                paymentdetailsmarkup += '                                                                    <input type="checkbox" name="" id="ip' + i + '" />';
                            paymentdetailsmarkup += '                                                                    <label for="ip' + i + '" class="SC-360-cusin"></label>';
                            paymentdetailsmarkup += '                                                                </p>';
                            paymentdetailsmarkup += '                                                            </div>';
                            /*paymentdetailsmarkup+='                                                            <div class="SC-SO-item">';
                            //SNARRA 18-06-2018 Added code for CVV Failed Flag field
                            paymentdetailsmarkup+='                                                                <label class="item-label">CVV Failed Flag:</label>';
                            paymentdetailsmarkup+='                                                                <p class="Order-value SC-checkbox-white-square">';
                            if(Paymentformrecords[i]["SC CVV Failed Flag"]=="Y")
                            paymentdetailsmarkup+='                                                                    <input type="checkbox" name="" id="cvf'+i+'" checked/>';
                            else
                            paymentdetailsmarkup+='                                                                    <input type="checkbox" name="" id="cvf'+i+'" />';	
                            paymentdetailsmarkup+='                                                                    <label for="cvf'+i+'" class="SC-360-cusin"></label>';
                            paymentdetailsmarkup+='                                                                </p>';
                            paymentdetailsmarkup+='                                                            </div>';
                            paymentdetailsmarkup+='                                                            </div>';*/
                            paymentdetailsmarkup += '                                                            <div class="col-md-3 col-lg-3 SC-SO-item">';
                            paymentdetailsmarkup += '                                                                <label class="item-label">manual auth?</label>';
                            paymentdetailsmarkup += '                                                                <p class="Order-value SC-checkbox-white-square">';
                            if (Paymentformrecords[i]["Manual Authorization Flag"] == "Y")
                                paymentdetailsmarkup += '                                                                    <input type="checkbox" name="" id="ma' + i + '" checked/>';
                            else
                                paymentdetailsmarkup += '                                                                    <input type="checkbox" name="" id="ma' + i + '" />';
                            paymentdetailsmarkup += '                                                                    <label for="ma' + i + '" class="SC-360-cusin"></label>';
                            paymentdetailsmarkup += '                                                                </p>';
                            paymentdetailsmarkup += '                                                            </div>';
                            paymentdetailsmarkup += '                                                            <div class="col-md-3 col-lg-3 SC-SO-item">';
                            paymentdetailsmarkup += '                                                                <label class="item-label">authorization date:</label>';
                            paymentdetailsmarkup += '                                                                <input type="text" name="" class="item-value-select-box padding-for-calendar" id="autdate' + i + '" value="' + Paymentformrecords[i]["SC Auth Date"] + '">';
                            paymentdetailsmarkup += '                                                                    <img src="images/custom/calendar-grey.png" class="calendar-icon" id="autdateimg">';
                            paymentdetailsmarkup += '                                                            </div>';
                            paymentdetailsmarkup += '                                                        </div>';
                            paymentdetailsmarkup += '                                                        <div class="row SC-SO-row clearfix">';
                            paymentdetailsmarkup += '                                                            <div class="col-md-3 col-lg-3 SC-SO-item">';
                            paymentdetailsmarkup += '                                                                <label class="item-label">payment amount:</label>';
                            paymentdetailsmarkup += '                                                                <input type="text" name="" class="item-value-select-box padding-for-currency" id="paymentamount' + i + '" value="' + Paymentformrecords[i]["Transaction Amount"] + '">';
                            paymentdetailsmarkup += '                                                                <span class="currency">$</span>';
                            paymentdetailsmarkup += '                                                            </div>';
                            paymentdetailsmarkup += '                                                            <div class="col-md-3 col-lg-3 SC-SO-item">';
                            paymentdetailsmarkup += '                                                                <label class="item-label">invoice ref#:</label>';
                            paymentdetailsmarkup += '                                                                <input type="text" name="" class="item-value-select-box" id="invoice' + i + '" value="' + Paymentformrecords[i]["SC Invoice Ref#"] + '">';
                            paymentdetailsmarkup += '                                                            </div>';
                            paymentdetailsmarkup += '                                                            <div class="col-md-3 col-lg-3 SC-SO-item">';
                            paymentdetailsmarkup += '                                                                <label class="item-label">check refund verified?:</label>';
                            paymentdetailsmarkup += '                                                                <p class="Order-value SC-checkbox-white-square">';
                            if (Paymentformrecords[i]["SC Refund Verified Flg"] == "Y")
                                paymentdetailsmarkup += '                                                                    <input type="checkbox" name="" id="crv' + i + '" checked/>';
                            else
                                paymentdetailsmarkup += '                                                                    <input type="checkbox" name="" id="crv' + i + '"/>';
                            paymentdetailsmarkup += '                                                                    <label for="crv' + i + '" class="SC-360-cusin"></label>';
                            paymentdetailsmarkup += '                                                                </p>';
                            paymentdetailsmarkup += '                                                            </div>';
                            paymentdetailsmarkup += '                                                            <div class="col-md-3 col-lg-3 SC-SO-item">';
                            paymentdetailsmarkup += '                                                                <label class="item-label">pay reference:</label>';
                            paymentdetailsmarkup += '                                                                <input type="text" name="" class="item-value-select-box padding-for-search" id="payreference' + i + '" value="' + Paymentformrecords[i]["SC Pay Ref#"] + '">';
                            paymentdetailsmarkup += '                                                                <img src="images/custom/search.png" class="location-search-icon" id="payreferenceimg">';
                            paymentdetailsmarkup += '                                                            </div>';
                            paymentdetailsmarkup += '                                                        </div>';
                            paymentdetailsmarkup += '                                                        <div class="row SC-SO-row clearfix">';
                            paymentdetailsmarkup += '                                                            <div class="col-md-4 col-lg-4 SC-SO-item">';
                            paymentdetailsmarkup += '                                                                <label class="item-label">decline reason:</label>';
                            paymentdetailsmarkup += '                                                                <textarea class="item-value-select-box text-area" id="declinereason' + i + '" value="' + Paymentformrecords[i]["SC Response"] + '">' + Paymentformrecords[i]["SC Response"] + '</textarea>';
                            paymentdetailsmarkup += '                                                            </div>';
                            paymentdetailsmarkup += '                                                            <div class="col-md-4 col-lg-4 SC-SO-item">';
                            paymentdetailsmarkup += '                                                                <label class="item-label">Payment Comments:</label>';
                            paymentdetailsmarkup += '                                                                <textarea class="item-value-select-box text-area" id="paymentcomments' + i + '" value="' + Paymentformrecords[i]["Payment Comments"] + '">' + Paymentformrecords[i]["Payment Comments"] + '</textarea>';
                            paymentdetailsmarkup += '                                                            </div>';
                            paymentdetailsmarkup += '                                                            <div class="col-md-4 col-lg-4 SC-SO-item">';
                            paymentdetailsmarkup += '                                                                <label class="item-label">payment receipt text:</label>';
                            paymentdetailsmarkup += '                                                                <textarea class="item-value-select-box text-area" id="paymentrecipt' + i + '" value="' + Paymentformrecords[i]["SC Pmt Receipt Text"] + '">' + Paymentformrecords[i]["SC Pmt Receipt Text"] + '</textarea>';
                            paymentdetailsmarkup += '                                                            </div>';
                            paymentdetailsmarkup += '                                                        </div>';
                            paymentdetailsmarkup += '                                                        <div class="row SC-SO-row clearfix">';
                            paymentdetailsmarkup += '                                                            <div class="col-md-3 col-lg-3">';
                            paymentdetailsmarkup += '                                                                <div class="SC-SO-item SC-SO-heading">';
                            paymentdetailsmarkup += '                                                                    <label class="item-label item-heading">Credit Card</label>';
                            paymentdetailsmarkup += '                                                                </div>';
                            paymentdetailsmarkup += '                                                                <div class="SC-SO-item">';
                            paymentdetailsmarkup += '                                                                    <label class="item-label">Credit/Gift Card#:</label>';
                            paymentdetailsmarkup += '                                                                    <input type="text" name="" class="item-value-select-box" id="creditgift' + i + '" value="' + Paymentformrecords[i]["SC Credit Card Number"] + '">';
                            paymentdetailsmarkup += '                                                                </div>';
                            paymentdetailsmarkup += '                                                                <div class="SC-SO-item">';
                            paymentdetailsmarkup += '                                                                    <label class="item-label">CVV/PIN #:</label>';
                            paymentdetailsmarkup += '                                                                    <input type="text" name="" class="item-value-select-box" id="cvvpin' + i + '" value="' + Paymentformrecords[i]["SC CVV Number"] + '">';
                            paymentdetailsmarkup += '                                                                </div>';
                            paymentdetailsmarkup += '                                                                <div class="SC-SO-item">';
                            paymentdetailsmarkup += '                                                                    <label class="item-label">Expiration Month:</label>';
                            paymentdetailsmarkup += '                                                                    <select class="item-value-select-box" id="ExpirationMonth' + i + '">';
                            if (Paymentformrecords[i]["SC Expiration Month"] == undefined)
                                paymentdetailsmarkup += '<option></option>';
                            else
                                paymentdetailsmarkup += ' <option value="' + Paymentformrecords[i]["SC Expiration Month"] + '">' + Paymentformrecords[i]["SC Expiration Month"] + '</option>';
                            for (var em = 0; em < ExpirationMonthArray.length; em++) {
                                if (Paymentformrecords[i]["SC Expiration Month"] != ExpirationMonthArray[em])
                                    paymentdetailsmarkup += ' <option value="' + ExpirationMonthArray[em] + '">' + ExpirationMonthArray[em] + '</option>';
                            }
                            paymentdetailsmarkup += '                                                                    </select>';
                            paymentdetailsmarkup += '                                                                </div>';
                            paymentdetailsmarkup += '                                                                <div class="SC-SO-item">';
                            paymentdetailsmarkup += '                                                                    <label class="item-label">Expiration Year:</label>';
                            paymentdetailsmarkup += '                                                                    <select class="item-value-select-box" id="ExpirationYear' + i + '">';
                            if (Paymentformrecords[i]["SC Expiration Year"] == undefined)
                                paymentdetailsmarkup += '<option></option>';
                            else
                                paymentdetailsmarkup += ' <option value="' + Paymentformrecords[i]["SC Expiration Year"] + '">' + Paymentformrecords[i]["SC Expiration Year"] + '</option>';
                            for (var ey = 0; ey < ExpirationYearArray.length; ey++) {
                                if (Paymentformrecords[i]["SC Expiration Year"] != ExpirationYearArray[ey])
                                    paymentdetailsmarkup += ' <option value="' + ExpirationYearArray[ey] + '">' + ExpirationYearArray[ey] + '</option>';
                            }
                            paymentdetailsmarkup += '                                                                    </select>';
                            paymentdetailsmarkup += '                                                                </div>';
                            paymentdetailsmarkup += '                                                            </div>';
                            paymentdetailsmarkup += '                                                            <div class="col-md-3 col-lg-3">';
                            paymentdetailsmarkup += '                                                                <div class="SC-SO-item SC-SO-heading">';
                            paymentdetailsmarkup += '                                                                    <label class="item-label item-heading">Reward</label>';
                            paymentdetailsmarkup += '                                                                </div>';
                            paymentdetailsmarkup += '                                                                <div class="SC-SO-item">';
                            paymentdetailsmarkup += '                                                                    <label class="item-label">IC Reward Cert:</label>';
                            paymentdetailsmarkup += '                                                                    <input type="text" name="" class="item-value-select-box padding-for-search" id="innercirclereward' + i + '" value="' + Paymentformrecords[i]["SC Voucher Number"] + '">';
                            paymentdetailsmarkup += '                                                                    <img src="images/custom/search.png" class="location-search-icon right" id="innercircleimg">';
                            paymentdetailsmarkup += '                                                                </div>';
                            paymentdetailsmarkup += '                                                                <div class="SC-SO-item SC-SO-heading SC-SO-head">';
                            paymentdetailsmarkup += '                                                                    <label class="item-label item-heading">Check</label>';
                            paymentdetailsmarkup += '                                                                </div>';
                            paymentdetailsmarkup += '                                                                <div class="SC-SO-item">';
                            paymentdetailsmarkup += '                                                                    <label class="item-label">Check#:</label>';
                            paymentdetailsmarkup += '                                                                    <input type="text" name="" class="item-value-select-box"  id="check' + i + '" value="' + Paymentformrecords[i]["SC Check Number"] + '">';
                            paymentdetailsmarkup += '                                                                </div>';
                            paymentdetailsmarkup += '                                                                <div class="SC-SO-item">';
                            paymentdetailsmarkup += '                                                                    <label class="item-label">Bank Account#:</label>';
                            paymentdetailsmarkup += '                                                                    <input type="text" name="" class="item-value-select-box" id="bankaccno' + i + '" value="' + Paymentformrecords[i]["SC Bank Account Number"] + '">';
                            paymentdetailsmarkup += '                                                                </div>';
                            paymentdetailsmarkup += '                                                            </div>';
                            paymentdetailsmarkup += '                                                            <div class="col-md-3 col-lg-3">';
                            paymentdetailsmarkup += '                                                                <div class="SC-SO-item SC-SO-heading">';
                            paymentdetailsmarkup += '                                                                    <label class="item-label item-heading">Check</label>';
                            paymentdetailsmarkup += '                                                                </div>';
                            paymentdetailsmarkup += '                                                                <div class="SC-SO-item">';
                            paymentdetailsmarkup += '                                                                    <label class="item-label">Routing#:</label>';
                            paymentdetailsmarkup += '                                                                    <input type="text" name="" class="item-value-select-box" id="routing' + i + '" value="' + Paymentformrecords[i]["SC Bank Routing Num"] + '">';
                            paymentdetailsmarkup += '                                                                </div>';
                            paymentdetailsmarkup += '                                                                <div class="SC-SO-item">';
                            paymentdetailsmarkup += '                                                                    <label class="item-label">Drivers License:</label>';
                            paymentdetailsmarkup += '                                                                    <input type="text" name="" class="item-value-select-box" id="driverslicence' + i + '" value="' + Paymentformrecords[i]["SC Drivers License Number"] + '">';
                            paymentdetailsmarkup += '                                                                </div>';
                            paymentdetailsmarkup += '                                                                <div class="SC-SO-item">';
                            paymentdetailsmarkup += '                                                                    <label class="item-label">Drivers License State:</label>';
                            paymentdetailsmarkup += '                                                                    <select class="item-value-select-box" id="DriversLicenseState' + i + '">';
                            if (Paymentformrecords[i]["SC Drivers License State"] == undefined)
                                paymentdetailsmarkup += '<option></option>';
                            else
                                paymentdetailsmarkup += ' <option value="' + Paymentformrecords[i]["SC Drivers License State"] + '">' + Paymentformrecords[i]["SC Drivers License State"] + '</option>';
                            for (var dl = 0; dl < DriverLicenceStateArray.length; dl++) {
                                if (Paymentformrecords[i]["SC Drivers License State"] != DriverLicenceStateArray[dl])
                                    paymentdetailsmarkup += ' <option value="' + DriverLicenceStateArray[dl] + '">' + DriverLicenceStateArray[dl] + '</option>';
                            }
                            paymentdetailsmarkup += '                                                                    </select>';
                            paymentdetailsmarkup += '                                                                </div>';
                            paymentdetailsmarkup += '                                                                <div class="SC-SO-item">';
                            paymentdetailsmarkup += '                                                                    <label class="item-label">Date Of Birth:</label>';
                            paymentdetailsmarkup += '                                                                    <input type="text" name="" class="item-value-select-box padding-for-calendar" id="dateofbirth' + i + '" value="' + Paymentformrecords[i]["SC Date Of Birth"] + '">';
                            paymentdetailsmarkup += '                                                                    <input type="image" src="images/custom/calendar-grey.png" class="calendar-icon left" id="dateofbirthimg">';
                            paymentdetailsmarkup += '                                                                </div>';
                            paymentdetailsmarkup += '                                                            </div>';
                            paymentdetailsmarkup += '                                                            <div class="col-md-3 col-lg-3">';
                            paymentdetailsmarkup += '                                                                <div class="SC-SO-item SC-SO-heading">';
                            paymentdetailsmarkup += '                                                                    <label class="item-label item-heading">Financing</label>';
                            paymentdetailsmarkup += '                                                                </div>';
                            paymentdetailsmarkup += '                                                                <div class="SC-SO-item">';
                            paymentdetailsmarkup += '                                                                    <label class="item-label">Disclaimer:</label>';
                            paymentdetailsmarkup += '                                                                    <textarea name="detdes" class="item-value-select-box text-area big" id="disclaimer' + i + '" value="' + Paymentformrecords[i]["SC Financing Disclaimer"] + '">' + Paymentformrecords[i]["SC Financing Disclaimer"] + '</textarea>';
                            paymentdetailsmarkup += '                                                                </div>';
                            paymentdetailsmarkup += '                                                            </div>';
                            paymentdetailsmarkup += '                                                        </div>';
                            paymentdetailsmarkup += '                                                        <div class="row SC-SO-row center-align clearfix">';
                            paymentdetailsmarkup += '                                                            <button id="cancel' + i + '">Cancel</button>';
                            paymentdetailsmarkup += '                                                            <button class="sc-pay-save-360" id="save' + i + '">Save</button>';
                            paymentdetailsmarkup += '                                                        </div>';
                            paymentdetailsmarkup += '                                                    </div>';
                            paymentdetailsmarkup += '                                                </td>';
                            paymentdetailsmarkup += '                                            </tr>';
                        }
                    }
                    $('#sc-PaymenyDetails-rcd').html(paymentdetailsmarkup);
                    //return paymentdetailsmarkup;

                    // }


                }



                function getPaymentHistoryRcds() {
                    var Paymenthistoryrecords = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Payment History List Applet OUI"].GetPModel().GetRenderer().GetPM().Get("GetRecordSet");
                    //SiebelJS.Log("Paymenthistoryrecords"+JSON.stringify(Paymenthistoryrecords));
                    var paymenthistorylength = Paymenthistoryrecords.length;
                    if (paymenthistorylength >= 1) {
                        var paymenthistorymarkup = "";
                        for (i = 0; i < paymenthistorylength; i++) {
                            paymenthistorymarkup += '                                <tr id="payhis' + (i + 1) + '">';
                            paymenthistorymarkup += '                                    <td title="' + Paymenthistoryrecords[i]["Field"] + '">' + Paymenthistoryrecords[i]["Field"] + '</td>';
                            paymenthistorymarkup += '                                    <td title="' + Paymenthistoryrecords[i]["New Value"] + '">' + Paymenthistoryrecords[i]["New Value"] + '</td>';
                            paymenthistorymarkup += '                                    <td title="' + Paymenthistoryrecords[i]["Old Value"] + '">' + Paymenthistoryrecords[i]["Old Value"] + '</td>';
                            paymenthistorymarkup += '                                    <td title="' + Paymenthistoryrecords[i]["Date"] + '">' + Paymenthistoryrecords[i]["Date"] + '</td>';
                            paymenthistorymarkup += '                                    <td title="' + Paymenthistoryrecords[i]["Record Id"] + '">' + Paymenthistoryrecords[i]["Record Id"] + '</td>';
                            paymenthistorymarkup += '                                    <td title="' + Paymenthistoryrecords[i]["Employee Login"] + '">' + Paymenthistoryrecords[i]["Employee Login"] + '</td>';
                            paymenthistorymarkup += '                                    <td title="' + Paymenthistoryrecords[i]["Employee Id"] + '">' + Paymenthistoryrecords[i]["Employee Id"] + '</td>';
                            paymenthistorymarkup += '                                </tr>';
                        }
                        $('#sc-Paymenthistory-rcd').html(paymenthistorymarkup);
                    }
                }

                function getAttachments() {
                    var attrecords = SiebelApp.S_App.GetActiveView().GetAppletMap()["Order Entry - Attachment Applet"].GetPModel().GetRenderer().GetPM().Get("GetRecordSet");
                    var attrecordlength = attrecords.length;
                    if (attrecordlength >= 1) {
                        var attmarkup = "";
                        for (i = 0; i < attrecordlength; i++) {
                            attmarkup += '                                <tr id="attach' + (i + 1) + '">';
                            attmarkup += '                                    <td><a href="javascript:void(0)" id="attfilenamedrilldown">' + attrecords[i]["OrderFileName"] + '</td>';
                            attmarkup += '                                    <td>' + attrecords[i]["OrderFileSize"] + '</td>';
                            attmarkup += '                                    <td>' + attrecords[i]["OrderFileExt"] + '</td>';
                            attmarkup += '                                    <td>' + attrecords[i]["OrderFileDate"] + '</td>';
                            attmarkup += '                                    <td class="comments-col" id="attachments' + (i + 1) + '"><textarea name="detdes" class="SC-input no-padding" id="attcomment' + (i + 1) + '">' + attrecords[i]["OrderComments"] + '</textarea></td>';
                            attmarkup += '                                    <td><img src="images/custom/delete-red.png" class="so-add-cart attachment_del_360" id="attachmentdel' + (i + 1) + '"></td>';
                            attmarkup += '                                </tr>';
                        }
                        $('#sc-attachments-Rcd').html(attmarkup);
                    }

                }

                function LineItemPopup(k, Lineitemrecords) {
                    var Salesordermarkup = "";
                    Salesordermarkup += '                <div class="modal-dialog">';
                    Salesordermarkup += '                    <div class="modal-content" style="height:880px !important">';
                    Salesordermarkup += '                        <div class="modal-header">';
                    Salesordermarkup += '                            <button type="button" class="close SC-close-popup blue-bg" data-dismiss="modal">&times;</button>';
                    Salesordermarkup += '                            <div class="header-content">';
                    Salesordermarkup += '                                <div><img src="images/custom/sc-logo.png" class="sc-logo"></div>';
                    Salesordermarkup += '                                <div class="sc-header-text">';
                    Salesordermarkup += '                                    <p class="no-margin">' + Lineitemrecords[k]["SC Calc Long Description"] + '</p>';
                    Salesordermarkup += '                                    <span>SKU# <label class="label-number">' + Lineitemrecords[k]["Part Number"] + '</label></span>';
                    Salesordermarkup += '                                </div>';
                    Salesordermarkup += '                            </div>';
                    Salesordermarkup += '                        </div>';
                    Salesordermarkup += '                        <div class="modal-body">';
                    Salesordermarkup += '                            <div class="SC-Order-line-card">';
                    Salesordermarkup += '                                <p class="sc-order-line-card-head">Line Info</p>';
                    Salesordermarkup += '                                <div class="sc-order-line-card-body">';
                    Salesordermarkup += '                                    <div class="row no-margin no-padding clearfix">';
                    Salesordermarkup += '                                        <div class="col-md-6 col-lg-6">';
                    Salesordermarkup += '                                            <div class="SC-order-item">';
                    Salesordermarkup += '                                                <label class="SC-order-item-label no-margin">line:</label>';
                    Salesordermarkup += '                                                <label class="SC-order-item-value no-margin">' + Lineitemrecords[k]["Line Number"] + '</label>';
                    Salesordermarkup += '                                            </div>';
                    Salesordermarkup += '                                        </div>';
                    Salesordermarkup += '                                        <div class="col-md-6 col-lg-6">';
                    Salesordermarkup += '                                            <div class="SC-order-item">';
                    Salesordermarkup += '                                                <label class="SC-order-item-label no-margin">status:</label>';
                    Salesordermarkup += '                                                <label class="SC-order-item-value no-margin">' + Lineitemrecords[k]["Fulfillment Status Code"] + '</label>';
                    Salesordermarkup += '                                            </div>';
                    Salesordermarkup += '                                        </div>';
                    Salesordermarkup += '                                    </div>';
                    Salesordermarkup += '                                    <div class="row no-margin no-padding clearfix">';
                    Salesordermarkup += '                                        <div class="col-md-6 col-lg-6">';
                    Salesordermarkup += '                                            <div class="SC-order-item">';
                    Salesordermarkup += '                                                <label class="SC-order-item-label no-margin">quantity:</label>';
                    var qty = Lineitemrecords[k]["Quantity Requested"];
                    Salesordermarkup += '                                                <label class="SC-order-item-value no-margin">' + Lineitemrecords[k]["Quantity Requested"] + '</label>';
                    Salesordermarkup += '                                            </div>';
                    Salesordermarkup += '                                        </div>';
                    Salesordermarkup += '                                        <div class="col-md-6 col-lg-6">';
                    Salesordermarkup += '                                            <div class="SC-order-item">';
                    Salesordermarkup += '                                                <label class="SC-order-item-label no-margin">status as of:</label>';
                    Salesordermarkup += '                                                <label class="SC-order-item-value no-margin">' + Lineitemrecords[k]["As Of Date"] + '</label>';
                    Salesordermarkup += '                                            </div>';
                    Salesordermarkup += '                                        </div>';
                    Salesordermarkup += '                                    </div>';
                    Salesordermarkup += '                                    <div class="row no-margin no-padding clearfix">';
                    Salesordermarkup += '                                        <div class="col-md-6 col-lg-6">';
                    Salesordermarkup += '                                            <div class="SC-order-item">';
                    Salesordermarkup += '                                                <label class="SC-order-item-label no-margin">invoice number:</label>';
                    Salesordermarkup += '                                                <label class="SC-order-item-value no-margin">' + Lineitemrecords[k]["SC Invoice Number"] + '</label>';
                    Salesordermarkup += '                                            </div>';
                    Salesordermarkup += '                                        </div>';
                    Salesordermarkup += '                                        <div class="col-md-6 col-lg-6">';
                    Salesordermarkup += '                                            <div class="SC-order-item">';
                    Salesordermarkup += '                                                <label class="SC-order-item-label no-margin">source:</label>';
                    Salesordermarkup += '                                                <label class="SC-order-item-value no-margin">' + Lineitemrecords[k]["SC SKU Data Source Calc"] + '</label>';
                    Salesordermarkup += '                                            </div>';
                    Salesordermarkup += '                                        </div>';
                    Salesordermarkup += '                                    </div>';
                    Salesordermarkup += '                                    <div class="row no-margin no-padding clearfix">';
                    Salesordermarkup += '                                        <div class="col-md-6 col-lg-6">';
                    Salesordermarkup += '                                            <div class="SC-order-item">';
                    Salesordermarkup += '                                                <label class="SC-order-item-label no-margin">invoice date:</label>';
                    Salesordermarkup += '                                                <label class="SC-order-item-value no-margin">' + Lineitemrecords[k]["SC Invoice Date"] + '</label>';
                    Salesordermarkup += '                                            </div>';
                    Salesordermarkup += '                                        </div>';
                    Salesordermarkup += '                                        <div class="col-md-6 col-lg-6">';
                    Salesordermarkup += '                                            <div class="SC-order-item">';
                    Salesordermarkup += '                                                <label class="SC-order-item-label no-margin">display bed:</label>';
                    Salesordermarkup += '                                                <label class="SC-order-item-value no-margin">' + Lineitemrecords[k]["SC Display Bed"] + '</label>';
                    Salesordermarkup += '                                            </div>';
                    Salesordermarkup += '                                        </div>';
                    Salesordermarkup += '                                    </div>';
                    Salesordermarkup += '                                    <div class="row no-margin no-padding clearfix">';
                    Salesordermarkup += '                                        <div class="col-md-6 col-lg-6">';
                    Salesordermarkup += '                                            <div class="SC-order-item">';
                    Salesordermarkup += '                                                <label class="SC-order-item-label no-margin">cancel flag:</label>';
                    //Ngolla defect #799
                    if (Lineitemrecords[k]["Request To Cancel"] != undefined)
                        Salesordermarkup += '                                                <label class="SC-order-item-value no-margin">' + Lineitemrecords[k]["Request To Cancel"] + '</label>';
                    else
                        Salesordermarkup += '                                                <label class="SC-order-item-value no-margin"></label>';
                    Salesordermarkup += '                                            </div>';
                    Salesordermarkup += '                                        </div>';
                    Salesordermarkup += '                                        <div class="col-md-6 col-lg-6">';
                    Salesordermarkup += '                                            <div class="SC-order-item">';
                    Salesordermarkup += '                                                <label class="SC-order-item-label no-margin">cancel reason:</label>';
                    Salesordermarkup += '                                                <label class="SC-order-item-value no-margin">' + Lineitemrecords[k]["Cancel Reason"] + '</label>';
                    Salesordermarkup += '                                            </div>';
                    Salesordermarkup += '                                        </div>';
                    Salesordermarkup += '                                    </div>';
                    Salesordermarkup += '                                </div>';
                    Salesordermarkup += '                            </div>';
                    Salesordermarkup += '                            <div class="SC-Order-line-card">';
                    Salesordermarkup += '                                <p class="sc-order-line-card-head">Shipping Info</p>';
                    Salesordermarkup += '                                <div class="sc-order-line-card-body">';
                    Salesordermarkup += '                                    <div class="row no-margin no-padding clearfix">';
                    Salesordermarkup += '                                        <div class="col-md-6 col-lg-6">';
                    Salesordermarkup += '                                            <div class="SC-order-item">';
                    Salesordermarkup += '                                                <label class="SC-order-item-label no-margin">ship to:</label>';
                    Salesordermarkup += '                                                <label class="SC-order-item-value no-margin" title="' + Lineitemrecords[k]["Ship To Contact - First Name"] + ' ' + Lineitemrecords[k]["Ship To Contact - Last Name"] + '" >' + Lineitemrecords[k]["Ship To Contact - First Name"] + ' ' + Lineitemrecords[k]["Ship To Contact - Last Name"] + '</label>';
                    Salesordermarkup += '                                            </div>';
                    Salesordermarkup += '                                        </div>';
                    Salesordermarkup += '                                        <div class="col-md-6 col-lg-6">';
                    Salesordermarkup += '                                            <div class="SC-order-item">';
                    Salesordermarkup += '                                                <label class="SC-order-item-label no-margin">delivery phone number:</label>';
                    Salesordermarkup += '                                                <label class="SC-order-item-value no-margin">' + Lineitemrecords[k]["SC Preferred Contact"] + '</label>';
                    Salesordermarkup += '                                            </div>';
                    Salesordermarkup += '                                        </div>';
                    Salesordermarkup += '                                    </div>';
                    Salesordermarkup += '                                    <div class="row no-margin no-padding clearfix">';
                    Salesordermarkup += '                                        <div class="col-md-6 col-lg-6">';
                    Salesordermarkup += '                                            <div class="SC-order-item front-align ">';
                    Salesordermarkup += '                                                <label class="SC-order-item-label no-margin">ship to address:</label>';
                    var address = "";
                    if (Lineitemrecords[k]["SC Con Ship To Address"] != ('' | "" | "undefined"))
                        address += Lineitemrecords[k]["SC Con Ship To Address"] + ',';
                    if (Lineitemrecords[k]["SC Ship To City"] != ('' | "" | "undefined"))
                        address += Lineitemrecords[k]["SC Ship To City"] + ',';
                    if (Lineitemrecords[k]["SC Ship To State"] != ('' | "" | "undefined"))
                        address += Lineitemrecords[k]["SC Ship To State"] + ',';
                    if (Lineitemrecords[k]["SC Ship To Country"] != ('' | "" | "undefined"))
                        address += Lineitemrecords[k]["SC Ship To Country"] + '.';
                    Salesordermarkup += '                                                <label class="SC-order-item-value no-margin" title="' + address + '">'
                    if (Lineitemrecords[k]["SC Con Ship To Address"] != ('' | "" | "undefined"))
                        Salesordermarkup += Lineitemrecords[k]["SC Con Ship To Address"] + ',';
                    if (Lineitemrecords[k]["SC Ship To City"] != ('' | "" | "undefined"))
                        Salesordermarkup += Lineitemrecords[k]["SC Ship To City"] + ',';
                    if (Lineitemrecords[k]["SC Ship To State"] != ('' | "" | "undefined"))
                        Salesordermarkup += Lineitemrecords[k]["SC Ship To State"] + ',';
                    if (Lineitemrecords[k]["SC Ship To Country"] != ('' | "" | "undefined"))
                        Salesordermarkup += Lineitemrecords[k]["SC Ship To Country"] + '.';
                    '</label>';
                    Salesordermarkup += '                                            </div>';
                    Salesordermarkup += '                                        </div>';
                    Salesordermarkup += '                                        <div class="col-md-6 col-lg-6">';
                    Salesordermarkup += '                                            <div class="SC-order-item front-align ">';
                    Salesordermarkup += '                                                <label class="SC-order-item-label no-margin">HD Service level:</label>';
                    Salesordermarkup += '                                                <label class="SC-order-item-value no-margin">' + Lineitemrecords[k]["SC HD Service Level"] + '</label>';
                    Salesordermarkup += '                                            </div>';
                    Salesordermarkup += '                                        </div>';
                    Salesordermarkup += '                                    </div>';
                    Salesordermarkup += '                                    <div class="row no-margin no-padding clearfix">';
                    Salesordermarkup += '                                        <div class="col-md-6 col-lg-6">';
                    Salesordermarkup += '                                            <div class="SC-order-item">';
                    Salesordermarkup += '                                                <label class="SC-order-item-label no-margin">ship via:</label>';
                    //SPATIBAN:15-June-20: Added code for #STRY0024300
					if(Lineitemrecords[k]["Shipping"]!=""){
						if( Lineitemrecords[k]["Shipping"] == "Home Delivery"){
							Salesordermarkup += '<td class="min-width-col" title="' + Lineitemrecords[k]["Ship Method"] + '">' + Lineitemrecords[k]["Ship Method"] +'</td>';
						}else{
							Salesordermarkup += '<td class="min-width-col" title="' + Lineitemrecords[k]["Ship Method"] + ' - '+Lineitemrecords[k]["Shipping"]+'">' + Lineitemrecords[k]["Ship Method"] + '-'+Lineitemrecords[i]["Shipping"]+'</td>';
						}
					}else{
						Salesordermarkup += '<td class="min-width-col" title="' + Lineitemrecords[k]["Ship Method"] + '">' + Lineitemrecords[k]["Ship Method"] + '</td>';
					}
                    Salesordermarkup += '                                            </div>';
                    Salesordermarkup += '                                        </div>';
                    Salesordermarkup += '                                        <div class="col-md-6 col-lg-6">';
                    Salesordermarkup += '                                            <div class="SC-order-item">';
                    Salesordermarkup += '                                                <label class="SC-order-item-label no-margin">territory(DMA):</label>';
                    Salesordermarkup += '                                                <label class="SC-order-item-value no-margin">' + Lineitemrecords[k]["SC Territory"] + '</label>';
                    Salesordermarkup += '                                            </div>';
                    Salesordermarkup += '                                        </div>';
                    Salesordermarkup += '                                    </div>';
                    Salesordermarkup += '                                    <div class="row no-margin no-padding clearfix">';
                    Salesordermarkup += '                                        <div class="col-md-6 col-lg-6">';
                    Salesordermarkup += '                                            <div class="SC-order-item">';
                    Salesordermarkup += '                                                <label class="SC-order-item-label no-margin">request ship date:</label>';
                    Salesordermarkup += '                                                <label class="SC-order-item-value no-margin">' + Lineitemrecords[k]["Due Date"] + '</label>';
                    Salesordermarkup += '                                            </div>';
                    Salesordermarkup += '                                        </div>';
                    Salesordermarkup += '                                        <div class="col-md-6 col-lg-6">';
                    Salesordermarkup += '                                            <div class="SC-order-item">';
                    Salesordermarkup += '                                                <label class="SC-order-item-label no-margin">ship from RDC:</label>';
                    Salesordermarkup += '                                                <label class="SC-order-item-value no-margin">' + Lineitemrecords[k]["SC Ship From Location"] + '</label>';
                    Salesordermarkup += '                                            </div>';
                    Salesordermarkup += '                                        </div>';
                    Salesordermarkup += '                                    </div>';
                    Salesordermarkup += '                                </div>';
                    Salesordermarkup += '                            </div>';
                    Salesordermarkup += '                            <div class="SC-Order-line-card">';
                    Salesordermarkup += '                                <p class="sc-order-line-card-head">Discounts</p>';
                    Salesordermarkup += '                                <div class="sc-order-line-card-body">';
                    Salesordermarkup += '                                    <div class="row no-margin no-padding clearfix">';
                    Salesordermarkup += '                                        <div class="col-md-6 col-lg-6">';
                    Salesordermarkup += '                                            <div class="SC-order-item">';
                    Salesordermarkup += '                                                <label class="SC-order-item-label no-margin">line discount:</label>';
                    var discounts = Lineitemrecords[k]["SC Total Line Discounts"].replace(/[$,]/g, "");
                    var linedisc = Number.parseFloat(discounts);
                    linedisc = (linedisc * qty).toFixed(2);
                    Salesordermarkup += '                                                <label class="SC-order-item-value no-margin">$' + Number(linedisc).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,') + '</label>';
                    Salesordermarkup += '                                            </div>';
                    Salesordermarkup += '                                        </div>';
                    Salesordermarkup += '                                        <div class="col-md-6 col-lg-6">';
                    Salesordermarkup += '                                            <div class="SC-order-item">';
                    Salesordermarkup += '                                                <label class="SC-order-item-label no-margin">manual discount reason:</label>';
                    Salesordermarkup += '                                                <label class="SC-order-item-value no-margin" title="' + Lineitemrecords[k]["SC Manual Discount Reason"] + '">' + Lineitemrecords[k]["SC Manual Discount Reason"] + '</label>';
                    Salesordermarkup += '                                            </div>';
                    Salesordermarkup += '                                        </div>';
                    Salesordermarkup += '                                    </div>';
                    Salesordermarkup += '                                    <div class="row no-margin no-padding clearfix">';
                    Salesordermarkup += '                                        <div class="col-md-6 col-lg-6">';
                    Salesordermarkup += '                                            <div class="SC-order-item">';
                    Salesordermarkup += '                                                <label class="SC-order-item-label no-margin">product coupon:</label>';
                    Salesordermarkup += '                                               <label class="SC-order-item-value add-wrap no-margin">' + Lineitemrecords[k]["Prod Prom Name"] + '</label>';
                    Salesordermarkup += '                                            </div>';
                    Salesordermarkup += '                                        </div>';
                    Salesordermarkup += '                                        <div class="col-md-6 col-lg-6">';
                    Salesordermarkup += '                                            <div class="SC-order-item">';
                    Salesordermarkup += '                                                <label class="SC-order-item-label no-margin">manual discount amount:</label>';
                    Salesordermarkup += '                                                <label class="SC-order-item-value no-margin">' + Lineitemrecords[k]["Discount Amount"] + '</label>';
                    Salesordermarkup += '                                            </div>';
                    Salesordermarkup += '                                        </div>';
                    Salesordermarkup += '                                    </div>';
                    Salesordermarkup += '                                    <div class="row no-margin no-padding clearfix">';
                    Salesordermarkup += '                                        <div class="col-md-6 col-lg-6 SC-align-right">';
                    Salesordermarkup += '                                            <div class="SC-order-item">';
                    Salesordermarkup += '                                                <label class="SC-order-item-label no-margin">manual discount%:</label>';
                    Salesordermarkup += '                                                <label class="SC-order-item-value no-margin">' + Lineitemrecords[k]["Discount Percent"] + '</label>';
                    Salesordermarkup += '                                            </div>';
                    Salesordermarkup += '                                        </div>';
                    Salesordermarkup += '                                    </div>';
                    Salesordermarkup += '                                </div>';
                    Salesordermarkup += '                            </div>';
                    Salesordermarkup += '                            <div class="SC-Order-line-card">';
                    Salesordermarkup += '                                <p class="sc-order-line-card-head">Price</p>';
                    Salesordermarkup += '                                <div class="sc-order-line-card-body">';
                    Salesordermarkup += '                                    <div class="row no-margin no-padding clearfix">';
                    Salesordermarkup += '                                        <div class="col-md-6 col-lg-6">';
                    Salesordermarkup += '                                            <div class="SC-order-item">';
                    Salesordermarkup += '                                                <label class="SC-order-item-label no-margin">start price:</label>';
                    //var startprice=Number.parseFloat(Lineitemrecords[k]["Start Price"].replace(/\$/g, '')).toFixed(2);
                    //SCHERKU: For Displaying amount correctly
                    var startprice = Number(Lineitemrecords[k]["Start Price"].replace(/[^0-9\.-]+/g, ""))
                    startprice = parseFloat(startprice * qty);
                    startprice = startprice.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,');
                    Salesordermarkup += '                                                <label class="SC-order-item-value no-margin">$' + startprice + '</label>';
                    Salesordermarkup += '                                            </div>';
                    Salesordermarkup += '                                        </div>';
                    Salesordermarkup += '                                        <div class="col-md-6 col-lg-6">';
                    Salesordermarkup += '                                            <div class="SC-order-item">';
                    Salesordermarkup += '                                                <label class="SC-order-item-label no-margin">gift card amount:</label>';
                    Salesordermarkup += '                                                <label class="SC-order-item-value no-margin">' + Lineitemrecords[k]["Unit Price - Display"] + '</label>';
                    Salesordermarkup += '                                            </div>';
                    Salesordermarkup += '                                        </div>';
                    Salesordermarkup += '                                    </div>';
                    Salesordermarkup += '                                    <div class="row no-margin no-padding clearfix">';
                    Salesordermarkup += '                                        <div class="col-md-6 col-lg-6">';
                    Salesordermarkup += '                                            <div class="SC-order-item">';
                    Salesordermarkup += '                                                <label class="SC-order-item-label no-margin">net price:</label>';
                    //SCHERKU: For Displaying amount correctly
                    var netprice = Number(Lineitemrecords[k]["Item Price - Display"].replace(/[^0-9\.-]+/g, ""))
                    netprice = parseFloat(netprice * qty);
                    netprice = netprice.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,');
                    Salesordermarkup += '                                                <label class="SC-order-item-value no-margin">$' + netprice + '</label>';
                    Salesordermarkup += '                                            </div>';
                    Salesordermarkup += '                                        </div>';
                    Salesordermarkup += '                                        <div class="col-md-6 col-lg-6">';
                    Salesordermarkup += '                                            <div class="SC-order-item">';
                    Salesordermarkup += '                                                <label class="SC-order-item-label no-margin"><b>Asset Integration Id:</b></label>';
                    Salesordermarkup += '                                                <label class="SC-order-item-value no-margin"><b>' + Lineitemrecords[k]["Asset Integration Id"] + '</b></label>';
                    Salesordermarkup += '                                            </div>';
                    Salesordermarkup += '                                        </div>';
                    Salesordermarkup += '                                    </div>';
                    Salesordermarkup += '                                    <div class="row no-margin no-padding clearfix">';
                    Salesordermarkup += '                                        <div class="col-md-6 col-lg-6">';
                    Salesordermarkup += '                                            <div class="SC-order-item">';
                    Salesordermarkup += '                                                <label class="SC-order-item-label no-margin">tax amount:</label>';
                    Salesordermarkup += '                                                <label class="SC-order-item-value no-margin">' + Lineitemrecords[k]["Tax Amount"] + '</label>';
                    Salesordermarkup += '                                            </div>';
                    Salesordermarkup += '                                        </div>';
                    Salesordermarkup += '                                        <div class="col-md-6 col-lg-6">';
                    Salesordermarkup += '                                            <div class="SC-order-item">';
                    Salesordermarkup += '                                                <label class="SC-order-item-label black-bg no-margin"><b>line total:</b></label>';
                    Salesordermarkup += '                                                <label class="SC-order-item-value main-bg no-margin"><b>' + Lineitemrecords[k]["SC Line Total NRC"] + '</b></label>';
                    Salesordermarkup += '                                            </div>';
                    Salesordermarkup += '                                        </div>';
                    Salesordermarkup += '                                    </div>';
                    Salesordermarkup += '                                    <div class="row no-margin no-padding clearfix">';
                    Salesordermarkup += '                                        <div class="col-md-6 col-lg-6">';
                    Salesordermarkup += '                                            <div class="SC-order-item">';
                    Salesordermarkup += '                                                <label class="SC-order-item-label no-margin">NRC sub-total:</label>';
                    Salesordermarkup += '                                                <label class="SC-order-item-value no-margin">' + Lineitemrecords[k]["NRC CxTotal in Header Currency"] + '</label>';
                    Salesordermarkup += '                                            </div>';
                    Salesordermarkup += '                                        </div>';
                    Salesordermarkup += '                                    </div>';
                    Salesordermarkup += '                                </div>';
                    Salesordermarkup += '                            </div>';
                    Salesordermarkup += '                        </div>';
                    Salesordermarkup += '                    </div>';
                    Salesordermarkup += '                </div>';
                    return Salesordermarkup;
                }
                //SNARRA:01/06/2018:START Added for Getting the Details of Manual Discounts
                function getmdrecrds() {
                    var mdisrecords = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Line Item Manual Discount List Applet OUI"].GetPModel().GetRenderer().GetPM().Get("GetRecordSet");
                    var mdisrecordslength = mdisrecords.length;
                    if (mdisrecordslength >= 1) {
                        var mdmarkup = "";
                        for (i = 0; i < mdisrecordslength; i++) {
                            mdmarkup += '                                <tr id="attach' + (i + 1) + '">';
                            mdmarkup += '                                    <td>' + mdisrecords[i]["Order Number"] + '</td>';
                            mdmarkup += '                                    <td>' + mdisrecords[i]["Line Number"] + '</td>';
                            mdmarkup += '                                    <td>' + mdisrecords[i]["Part Number"] + '</td>';
                            mdmarkup += '                                    <td>' + mdisrecords[i]["Discount Reason"] + '</td>';
                            mdmarkup += '                                    <td>' + mdisrecords[i]["Quantity Requested"] + '</td>';
                            mdmarkup += '                                    <td>' + mdisrecords[i]["SC Manual Discount"] + '</td>';
                            mdmarkup += '                                    <td>' + mdisrecords[i]["Total Discount Amount"] + '</td>';
                            mdmarkup += '                                    <td>' + mdisrecords[i]["Login Name"] + '</td>';
                            mdmarkup += '                                    <td>' + mdisrecords[i]["Created Date"] + '</td>';
                            mdmarkup += '                                </tr>';
                        }
                        $('#sc-manuladiscount-Records').html(mdmarkup);
                    }

                }

                //NGOLLA added code for ADDon's
                function AddonDetailsPopup(LineId) {
                    var addonstartprice, netprice, startprice, discounts, qua, carttotalno, taxamount, nrcsubtotal = 0;
                    var AddonDetailsmarkup = "";
                    AddonDetailsmarkup += '     <div class="modal-dialog" style="width:800px !important">';
                    AddonDetailsmarkup += '          <div class="modal-content" style="height:500px !important">';
                    AddonDetailsmarkup += '          <div class="modal-header" style="height:100px !important">';
                    AddonDetailsmarkup += '           <button type="button" class="close SC-close-popup blue-bg" data-dismiss="modal">&times;</button>';
                    AddonDetailsmarkup += '                   <div class="header-content">';
                    AddonDetailsmarkup += '                      <div><img src="images/custom/sc-logo.png" class="sc-logo"></div>';
                    AddonDetailsmarkup += '                       <div class="sc-header-text">';
                    AddonDetailsmarkup += '                           <p class="no-margin">Add-ons Details</p>';
                    AddonDetailsmarkup += '                         </div>';
                    AddonDetailsmarkup += '                    </div>';
                    AddonDetailsmarkup += '            </div>';
                    AddonDetailsmarkup += '          <div class="modal-body" style="height:400px !important">';
                    AddonDetailsmarkup += '             <div class="SC-table-with-scroll-main" style="max-height:350px !important; overflow-y:auto">';
                    AddonDetailsmarkup += '                 <table class="SC-table" id="Addon-table" >';
                    AddonDetailsmarkup += '                 <thead>';
                    AddonDetailsmarkup += '                      <tr>';
                    AddonDetailsmarkup += '                      <th></th>';
                    AddonDetailsmarkup += '                      <th>S.NO</th>';
                    AddonDetailsmarkup += '                      <th>LINE</th>';
                    AddonDetailsmarkup += '                      <th>SKU</th>';
                    AddonDetailsmarkup += '                      <th>Product Name</th>';
                    AddonDetailsmarkup += '                      <th>Qty</th>';
                    AddonDetailsmarkup += '                       <th>Start Price</th>';
                    AddonDetailsmarkup += '                        <th>Line Discount</th>';
                    AddonDetailsmarkup += '                        <th >Net Price</th>';
                    AddonDetailsmarkup += '                        <th>Tax</th>';
                    AddonDetailsmarkup += '                        <th>Line Total</th>';
                    AddonDetailsmarkup += '                        <th>Status</th>';
                    AddonDetailsmarkup += '                        <th>Asset Integration Id</th>'; //SPATIBAN:MAY2019:Added code for displaying Integration Id
                    AddonDetailsmarkup += '                        <th>Box Number</th>';
                    AddonDetailsmarkup += '                        <th>Tracking Number</th>';
                    AddonDetailsmarkup += '                    </tr>';
                    AddonDetailsmarkup += '             </thead>';
                    AddonDetailsmarkup += '             <tbody>';
                    var orderId = OrderDetailrecords[0]["Id"];
                    LineItems_RS = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Order Entry - Line Item List Applet (Sales) OUI"].GetPModel().GetRenderer().GetPM().Get("GetRecordSet");
                    for (var childpr = 0; childpr < LineItems_RS.length; childpr++) {
                        if (LineItems_RS[childpr]["Id"] == LineId) {
                            //for(var childpr=0;childpr<OutPS.GetChild(0).GetChild(pr).GetChildCount();childpr++){
                            var InPSa = SiebelApp.S_App.NewPropertySet();
                            var OutPSa = SiebelApp.S_App.NewPropertySet();
                            InPSa.SetProperty("BO", "Order Entry (Sales)");
                            InPSa.SetProperty("BC", "SWI Ship Tracking Details");
                            var FieldsArray = ["SC UPS Tracking URL", "SC Box Number"];
                            var SearchSpecification = "[Order Item Id]='" + LineItems_RS[childpr]["Id"] + "'";
                            InPSa.SetProperty("FieldsArray", FieldsArray);
                            InPSa.SetProperty("SearchSpecification", SearchSpecification);
                            var Service = SiebelApp.S_App.GetService("SC Custom Query");
                            OutPSa = Service.InvokeMethod("Query", InPSa);
                            var ChildCount = OutPSa.GetChildCount();
                            var Child = OutPSa.GetChild(0);
                            var BSData = Child.GetProperty("OutputRecordSet");
                            var RecordSeta = "";
                            var boxnumber = "";
                            if (BSData != "}") {
                                var RecordSet = new Array;
                                RecordSet = BSData.split(";");
                                for (var i = 0; i < RecordSet.length; i++) {
                                    var RecordSetb = JSON.parse(RecordSet[i]);
                                    if (RecordSeta != "")
                                        RecordSeta += ", ";
                                    RecordSeta += RecordSetb["SC UPS Tracking URL"];
                                    if (boxnumber != "")
                                        boxnumber += ", ";
                                    boxnumber += RecordSetb["SC Box Number"];

                                }
                            }
                            //nrcsubtotal
                            AddonDetailsmarkup += '             <tr id="BOM' + LineItems_RS[childpr]["Parent Order Item Id"] + '">';
                            AddonDetailsmarkup += '            <td class="child1"><span class="glyphicon glyphicon-plus-sign icon-img add-item child' + childpr + '" id="BOM' + LineItems_RS[childpr]["Id"] + '"></span></td>';
                            AddonDetailsmarkup += '            <td>1</td>';
                            AddonDetailsmarkup += '            <td>' + LineItems_RS[childpr]["Line Number"] + '</td>';
                            AddonDetailsmarkup += '            <td>' + LineItems_RS[childpr]["Part Number"] + '</td>';
                            AddonDetailsmarkup += '            <td>' + LineItems_RS[childpr]["SC Calc Long Description"] + '</td>';
                            AddonDetailsmarkup += '            <td>' + LineItems_RS[childpr]["Quantity Requested"] + '</td>';
                            AddonDetailsmarkup += '              <td>' + LineItems_RS[childpr]["Start Price"] + '</td>';
                            AddonDetailsmarkup += '              <td>' + LineItems_RS[childpr]["SC Total Line Discounts"] + '</td>';
                            AddonDetailsmarkup += '              <td>' + LineItems_RS[childpr]["Item Price - Display"] + '</td>';
                            AddonDetailsmarkup += '              <td>' + LineItems_RS[childpr]["Tax Amount"] + '</td>';
                            AddonDetailsmarkup += '              <td>' + LineItems_RS[childpr]["SC Line Total NRC"] + '</td>';
                            AddonDetailsmarkup += '              <td>' + LineItems_RS[childpr]["Fulfillment Status Code"] + '</td>';
                            AddonDetailsmarkup += '              <td>' + LineItems_RS[childpr]["Asset Integration Id"] + '</td>'; //SPATIBAN:MAY2019:Added code for displaying Integration Id
                            AddonDetailsmarkup += '              <td>' + boxnumber + '</td>';
                            AddonDetailsmarkup += '              <td>' + RecordSeta + '</td>';
                            AddonDetailsmarkup += '             </tr>';
                        }
                    }
                    /*if(orderId!=null && orderId!=""){
			 var inPS="";
			var OutPS="";
			inPS = SiebelApp.S_App.NewPropertySet();
			OutPS = SiebelApp.S_App.NewPropertySet();
			var fieldnames="Id,Root Order Item Id,Part Number,Parent Order Item Id,Line Number,Start Price,SC Total Line Discounts,Item Price - Display,Quantity Requested,SC Line Total NRC,SC Tax Amount,Outline Number,Fulfillment Status Code,SC Long Description";
			var fieldvalues="";
			inPS.SetProperty("BO","Order Entry (Sales)");
			inPS.SetProperty("BC","Order Entry - Line Items (Simple)");
			inPS.SetProperty("FieldsArray",fieldnames );
			inPS.SetProperty("SearchSpecification","[Order Header Id] = '" + orderId +"' AND [Parent Order Item Id]='"+ParentId+"'");
			Bservice = SiebelApp.S_App.GetService("SC Custom Query"); //get service
			OutPS = Bservice.InvokeMethod("Query", inPS);
			var outputRecordSet="";
			outputRecordSet = OutPS.GetChild(0).GetProperty("OutputRecordSet");
			if(outputRecordSet!="}"){
			var childsdataArray = new Array;
            childsdataArray = outputRecordSet.split(";");
			for(var childpr=0;childpr<childsdataArray.length;childpr++){
				var childData = '';
						var str = childsdataArray[childpr];
						var found = false;
					str = str.replace(/(".,*?")(?!\})/g, function(match) {
					if(found && match.endsWith('"')) return match.substring(0, match.length - 1) + '\\"';
					found = found || match === '"SC Long Description"';

					return match;
					});

					//var obj = JSON.parse(str);
					str=str.replace(/\n/g,"");
					childData = JSON.parse(str);
					if(childsdataArray.length>=1){
						//for(var childpr=0;childpr<OutPS.GetChild(0).GetChild(pr).GetChildCount();childpr++){
							var InPSa = SiebelApp.S_App.NewPropertySet();
							var OutPSa = SiebelApp.S_App.NewPropertySet();
							InPSa.SetProperty("BO","Order Entry (Sales)");
							InPSa.SetProperty("BC","SWI Ship Tracking Details");
							var FieldsArray=["SC UPS Tracking URL"];
							var SearchSpecification="[Order Item Id]='"+childData["Id"]+"'";
							InPSa.SetProperty("FieldsArray",FieldsArray);
							InPSa.SetProperty("SearchSpecification", SearchSpecification);			
							var Service = SiebelApp.S_App.GetService("SC Custom Query");
							OutPSa = Service.InvokeMethod("Query",InPSa);
							var ChildCount =OutPSa.GetChildCount();
							var Child = OutPSa.GetChild(0);
							var BSData = Child.GetProperty("OutputRecordSet"); 
							var RecordSeta="";
							if(BSData!="}"){
								var RecordSet=new Array; 
								RecordSet = BSData.split(";");
								for(var i=0;i<RecordSet.length;i++){
									var RecordSetb=JSON.parse(RecordSet[i]);
									if(RecordSeta!="")
										RecordSeta+=", ";
									RecordSeta+=RecordSetb["SC UPS Tracking URL"];
								}
							} 
							addonstartprice=childData["Start Price"]!=""?parseFloat(childData["Start Price"]):0.00;
							//startprice=outPS.GetChild(0).GetChild(pr).GetProperty("Start Price")!=""?parseFloat(outPS.GetChild(0).GetChild(pr).GetProperty("Start Price")):0.00;
							discounts=childData["SC Total Line Discounts"]!=""?parseFloat(childData["SC Total Line Discounts"]):0.00;
							netprice=childData["Item Price - Display"]!=""?parseFloat(childData["Item Price - Display"]):0.00;
							qua=childData["Quantity Requested"];
							taxamount=childData["SC Tax Amount"]!=""?parseFloat(childData["SC Tax Amount"]):0.00;
							addonstartprice=(addonstartprice*qua);
							discounts=(discounts*qua);
							netprice=(netprice*qua);
							nrcsubtotal=childData["SC Line Total NRC"]!=""?parseFloat(childData["SC Line Total NRC"]):0.00;
							//nrcsubtotal
							AddonDetailsmarkup+='             <tr id="BOM'+childData["Parent Order Item Id"]+'">';
							AddonDetailsmarkup+='            <td class="child'+(childpr+1)+'"><span class="glyphicon glyphicon-plus-sign icon-img add-item child'+childpr+'" id="'+childData["Id"]+'"></span></td>';
							AddonDetailsmarkup+='            <td>'+(childpr+1)+'</td>';
							AddonDetailsmarkup+='            <td>'+childData["Line Number"]+'</td>';
							AddonDetailsmarkup+='            <td>'+childData["Part Number"]+'</td>';
							AddonDetailsmarkup+='            <td>'+childData["SC Long Description"]+'</td>';
							AddonDetailsmarkup+='            <td>'+qua+'</td>';
							AddonDetailsmarkup+='              <td>$'+addonstartprice.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,')+'</td>';
							AddonDetailsmarkup+='              <td>$'+discounts.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,')+'</td>';
							AddonDetailsmarkup+='              <td>$'+netprice.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,')+'</td>';
							AddonDetailsmarkup+='              <td>$'+taxamount.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,')+'</td>';
							AddonDetailsmarkup+='              <td>$'+nrcsubtotal.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,')+'</td>';
							AddonDetailsmarkup+='              <td>'+childData["Fulfillment Status Code"]+'</td>';
							AddonDetailsmarkup+='              <td>'+RecordSeta+'</td>';
							AddonDetailsmarkup+='             </tr>';
							
						//}
					}
			}
	      }
		}*/

                    AddonDetailsmarkup += '           </tbody>';
                    AddonDetailsmarkup += '          </table>';
                    AddonDetailsmarkup += '    </div>';
                    AddonDetailsmarkup += '  </div>';
                    AddonDetailsmarkup += '  </div>';
                    AddonDetailsmarkup += '  </div>';
                    return AddonDetailsmarkup;
                }


                function PaymentAdminfun(Paymentdetailsrecords) {
                    SiebelJS.Log("entered");
                    for (i = 0; i < Paymentdetailsrecords.length; i++) {
                        $(document).on('click', "#cancel" + i, function() {
                            SiebelJS.Log("cancel clicked" + i);
                            $(this).parent().removeClass("main-bg");
                            $(".padding-for-calendar").datepicker("hide");
                            $(this).parent().parent().parent().parent().hide();
                            $(this).parent().parent().parent().parent().prev().removeClass("main-bg");
                            //function for payment admin details records
                            paymenydetailsrcdmarkup = getPaymentDetailsRcds();
                            $('#sc-PaymenyDetails-rcd').html(paymenydetailsrcdmarkup);
                        });



                        // Start:validation for settlement amount
                        $(document).on('keyup', "#settlementamount" + i, function() {
                            this.value = this.value.replace(/[^0-9-.]/g, '');
                        });

                        $(document).on('focusout', "#settlementamount" + i, function() {
                            if ($(this).val() != "") {
                                var no = $(this).val();
                                var num = parseFloat(no);
                                var cleanNum = num.toFixed(2);
                                $(this).val(cleanNum);
                            }
                        });
                        // End:validation for settlement amount

                        // Start:validation for payment amount
                        $(document).on('keyup', "#paymentamount" + i, function() {
                            this.value = this.value.replace(/[^0-9-.]/g, '');
                        });

                        $(document).on('focusout', "#paymentamount" + i, function() {
                            if ($(this).val() != "") {
                                var no = $(this).val();
                                var num = parseFloat(no);
                                var cleanNum = num.toFixed(2);
                                $(this).val(cleanNum);
                            }
                        });
                        // End:validation for payment amount

                        //validation for Account no
                        /* $(document).on('keyup', "#accountno" + i, function() {
                             this.value = this.value.replace(/[^0-9\.]/g, '');
                         });*/

                        //validation for CVV/PIN no
                        $(document).on('keyup', "#cvvpin" + i, function() {
                            this.value = this.value.replace(/[^0-9\.]/g, '');
                        });

                        //validation for check
                        $(document).on('keyup', "#check" + i, function() {
                            this.value = this.value.replace(/[^0-9\.]/g, '');
                        });

                        //validation for Bank account no
                        $(document).on('keyup', "#bankaccno" + i, function() {
                            this.value = this.value.replace(/[^0-9\.]/g, '');
                        });

                        //Date picker for authorisation date
                        $(document).on("click", "#autdate" + i, function() {
                            SiebelJS.Log("id   " + this.id);
                            SiebelJS.Log("before click");
                            $("#" + this.id).datepicker({
                                showButtonPanel: true
                            });
                        });

                        //Date picker for date of birth
                        $(document).on("click", "#dateofbirth" + i, function() {
                            SiebelJS.Log("before click");
                            $("#" + this.id).datepicker({
                                showButtonPanel: true
                            });
                        });
                        $("html, body").on("DOMMouseScroll MouseScrollEvent MozMousePixelScroll wheel scroll", function() {
                            $(".padding-for-calendar").datepicker("hide");
                            //$("#autdate"+i).datepicker("hide");
                        });
                    }
                }

                return SCiPadSalesOrder360DegreeViewPR;
            }());
            return "SiebelAppFacade.SCiPadSalesOrder360DegreeViewPR";
        })
}