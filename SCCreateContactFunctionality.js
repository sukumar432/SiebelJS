void 0===SiebelAppFacade.SCCreateContactFunctionality&&(SiebelJS.Namespace("SiebelAppFacade.SCCreateContactFunctionality"),define("siebel/custom/SelectComfort/SCCreateContactFunctionality",["siebel/viewpr","siebel/custom/SelectComfort/SCCreateContactMarkup","siebel/custom/SelectComfort/SCErrorCodes","siebel/custom/SelectComfort/SC_OUI_Methods","siebel/custom/SelectComfort/SC_OUI_Markups","siebel/custom/SelectComfort/SC_OUI_Definitions"],function(){function e(e){}var o,t,w,r,V,G,a,O;return SiebelAppFacade.SCCreateContactFunctionality=(t=new e,w=SiebelJS.Dependency("SiebelApp.SCCreateContactMarkup"),r=SiebelJS.Dependency("SiebelApp.SCErrorCodes"),V=SiebelJS.Dependency("SiebelApp.SC_OUI_Methods"),G=SiebelJS.Dependency("SiebelApp.Constants"),SiebelJS.Dependency("SiebelApp.SC_OUI_Markups"),a=SiebelJS.Dependency("SiebelApp.SC_OUI_Definitions"),O={},e.prototype.CreateNewContact=function(){var e=SiebelApp.S_App.GetService("SC Custom Query Simplified"),t="",o=w.SCCreateNewContactMarkup();$("#SC-add-contact").html(o),$("#_sweclient #_swecontent #_sweview").css("position","inherit"),$("#custommaskoverlay").hide(),$("#SC-add-contact").modal({backdrop:"static"}),t="",t=V.SCGetOrderLoVs("[Order By] >= 1 and [Order By] <= 52 and [Type]= 'STATE_ABBREV' and [Active] = 'Y'");var r="";r+=" <option></option>";for(var i=0;i<t.length;i++)r+=" <option>"+t[i]+"</option>";$("#StateName").html(r),t="",t=V.SCGetOrderLoVs("[Type]= 'COUNTRY' AND [Low] IS NOT NULL AND [Active]='Y'");var a="";a+=" <option></option>";for(var l=0;l<t.length;l++)"USA"!=t[l]&&"CANADA"!=t[l]||(a+=" <option>"+t[l]+"</option>");$("#CountryName").html(a);var n=SiebelApp.S_App.GetActiveView().GetName(),s=SiebelApp.S_App.NewPropertySet(),c=SiebelApp.S_App.NewPropertySet(),p=V.SCGetProfileAttrValue("SC Primary Division Type"),o=V.SCGetProfileAttrValue("SC Store User");SiebelJS.Log("storeuser"+o),SiebelJS.Log("scChanel"+p);(c="Y"==o?(o=V.SCGetProfileAttrValue("SC Store Number"),s.SetProperty("SC Store Number",o),s.SetProperty("Retail User","Y"),e.InvokeMethod("GetMediaDetails",s)):"CS"==p||"CSC"==p||"CRC"==p||"DIRECT"==p||"Direct"==p||"Wholesale"==p||"WHOLESALE"==p||"Commercial"==p||"COMMERICAL"==p||"Chat"==p||"CHAT"==p?e.InvokeMethod("GetMediaDetails_CallCenter",s):(s.SetProperty("Retail User","N"),e.InvokeMethod("GetMediaDetails",s))).GetChildCount();var c=c.GetChild(0).GetProperty("OutputRecordSet").split(";"),d=new Array,S=new Array,C=new Array,d=c[0].split("|"),S=c[1].split("|"),C=c[2].split("|"),m="";m+='<select style="display: none;"> ',m+=" <option></option>";for(var b=0;b<d.length;b++)m+=' <option value="'+d[b]+'">'+S[b]+"</option>",O[d[b]]=C[b];m+="</select>",$("#MediaCode").html(m),$(document).on("change","#mediaCodeIPbox",function(){for(var e=$("#MediaCode")[0].options,t=$(this).val(),o=0;o<e.length;o++)if(e[o].value===t){var r=$("#MediaCode").children('option[value="'+t+'"]').text();$("#MediaCodeDiscription").parent().addClass("is-active is-completed"),$("#MediaCodeDiscription").val(r);break}}),$("#mediaCodeIPbox").focusout(function(){var e=$(this).val();d.includes(e)||($(this).val(""),$("#MediaCodeDiscription").val(""))});c=V.SCGetProfileAttrValue("SC Primary Division Sub Type");"SC ANI Match Contacts Info"==n&&"CSC"!=c&&$("#sc-media-block").hide();var f=new Array,f=V.SCGetOrderLoVs("[Type]= 'SC_REASON_VISIT' AND [Active]='Y'"),v="";v+=" <option></option>";for(var u=0;u<f.length;u++)v+=" <option>"+f[u]+"</option>";$("#ReasonForVisit").html(v),t="",t=V.SCGetOrderLoVs("[Type]= 'SC_LEAD_RANK' AND [Active]='Y'");var y="";y+=" <option></option>";for(u=0;u<t.length;u++)y+=" <option>"+t[u]+"</option>";$("#LeadRank").html(y),t="",t=V.SCGetOrderLoVs("[Type]= 'SC_SERIES_BED' AND [Active]='Y'");var h="";h+=" <option></option>";for(u=0;u<t.length;u++)h+=" <option>"+t[u]+"</option>";$("#Series").html(h),t="",t=V.SCGetOrderLoVs("[Type]= 'SC_BASE' AND [Active]='Y'");var A="";A+=" <option></option>";for(var g=0;g<t.length;g++)A+=" <option>"+t[g]+"</option>";$("#Base").html(A),t="",t=V.SCGetOrderLoVs("[Type]= 'SC_CON_SIZE' AND [Active]='Y'");var P="";P+=" <option></option>";for(var _=0;_<t.length;_++)P+=" <option>"+t[_]+"</option>";$("#Size").html(P),t="",t=V.SCGetOrderLoVs("[Type]= 'SC_SLEEP_NUM' AND [Active]='Y'");var N="";N+=" <option></option>";for(var I=0;I<t.length;I++)N+=" <option>"+t[I]+"</option>";return $("#SleepNumber").html(N),$("#PartnerSleepNumber").html(N),$("#CustomerType").parent().addClass("is-active is-completed"),$(document).on("change","#AddressLine",function(e){e.preventDefault();try{""==$("#SN-new-con-APT").val()&&$("#SN-new-con-APT").focus()}catch(e){}}),$(document).on("focus","#SN-new-con-APT",function(e){e.preventDefault();try{""==$("#SN-new-con-APT").val()&&$("#SN-new-con-APTToolTip").show()}catch(e){}}),$(document).on("focusout","#SN-new-con-APT",function(e){e.preventDefault(),$("#SN-new-con-APTToolTip").hide()}),""},e.prototype.ContactFieldValidation1=function(){var e=r.errorcodes();jQuery.validator.addMethod("regex",function(e,t,o){return o.constructor!=RegExp?o=new RegExp(o):o.global&&(o.lastIndex=0),this.optional(t)||o.test(e)},"");1==$("#email").prop("checked")&&(""==$("#EmailAddress").val()||$("#EmailAddress").attr("name","emailfield"));return 1==$("#mobilephonecheck").prop("checked")&&(""==$("#MobilePhone").val()||$("#MobilePhone").attr("name","mobilefield")),$("#contactform").validate({rules:{firstname:{required:!0},lastname:{required:!0},address:{required:!0},emailfield:{email:!0},emailEmpty:{required:!0},city:{required:!0},state:{required:!0},postalcode:{required:!0},mobilephone:{required:!0,regex:/\(?[\d\s]{3}\)[\w\s][\d\s]{3}-[\d\s]{4}$/},mobilefield:{regex:/\(?[\d\s]{3}\)[\w\s][\d\s]{3}-[\d\s]{4}$/},secondaryphone:{regex:/\(?[\d\s]{3}\)[\w\s][\d\s]{3}-[\d\s]{4}$/},tertiaryphone:{regex:/\(?[\d\s]{3}\)[\w\s][\d\s]{3}-[\d\s]{4}$/}},messages:{firstname:e.SC_REQUIRED_FIRST_NAME,lastname:e.SC_REQUIRED_LAST_NAME,address:e.SC_REQUIRED_ADDRESS,emailfield:e.SC_INVALID_EMAIL,emailEmpty:e.SC_REQUIRED_EMAIL,city:e.SC_REQUIRED_CITY,state:e.SC_REQUIRED_STATE,postalcode:e.SC_REUIRED_POSTAL_CODE,mobilephone:e.SC_MOBILE_NUMBER,mobilefield:e.SC_MOBILE_NUMBER,secondaryphone:e.SC_MOBILE_NUMBER,tertiaryphone:e.SC_MOBILE_NUMBER},tooltip_options:{firstname:{trigger:"focus",placement:"bottom",html:!0},lastname:{trigger:"focus",placement:"bottom",html:!0},address:{trigger:"focus",placement:"bottom",html:!0},emailfield:{trigger:"focus",placement:"bottom",html:!0},emailEmpty:{trigger:"focus",placement:"bottom",html:!0},city:{trigger:"focus",placement:"bottom",html:!0},state:{trigger:"focus",placement:"bottom",html:!0},postalcode:{trigger:"focus",placement:"bottom",html:!0},mobilephone:{trigger:"focus",placement:"bottom",html:!0},mobilefield:{trigger:"focus",placement:"bottom",html:!0},secondaryphone:{trigger:"focus",placement:"bottom",html:!0},tertiaryphone:{trigger:"focus",placement:"bottom",html:!0}},submitHandler:function(e){$("#SC-contact-profile").show(),$("#SC-contact-contact").hide(),$(".SC-contact-contact img").attr({src:"images/custom/completed-step.PNG"}),$(".SC-contact-profile img").attr({src:"images/custom/not-completed.png"}),$(".SC-contact-contact").removeClass("active"),$(".SC-contact-profile").addClass("active")}}),""},e.prototype.ContactFieldValidation2=function(E,M,D){var R,e=r.errorcodes();return $("#contactprofileform").validate({rules:{MediaCode:{required:!0},referredbyins:{required:!0}},messages:{MediaCode:e.SC_REQUIRED_MEDIA_CODE,referredbyins:e.SC_REQUIRED_REFERRED_INSIDER},tooltip_options:{MediaCode:{trigger:"focus",placement:"bottom",html:!0},referredbyins:{trigger:"focus",placement:"bottom",html:!0}},submitHandler:function(e){event.preventDefault(),$("#SC-add-contact").modal("hide"),$("body").trigger("Custom.Start"),setTimeout(function(){var e="",t="",o=$("#FirstName").val().toUpperCase(),r=$("#LastName").val().toUpperCase(),i=$("#PartnerName").val(),a=$("#EmailAddress").val(),l=$("#AddressLine").val(),n=$("#CityName").val(),s=$("#StateName").val(),t=$("#PostlCode").val(),c=$("#MobilePhone").val().replace(/[^0-9]/g,""),p=$("#SecondaryPhone").val().replace(/[^0-9]/g,""),d=$("#TeritaryPhone").val().replace(/[^0-9]/g,""),S=$("#CountryName").val(),C=$("#mediaCodeIPbox").val(),m=($("#MediaCodeDiscription").val(),$("#CustomerType").val(),$("#ReasonForVisit").val()),b=$("#LeadRank").val(),f=$("#Series").val(),v=$("#Base").val(),u=$("#Size").val(),y=$("#SleepNumber").val(),h=$("#PartnerSleepNumber").val(),A=$("#scMiddleName").val(),g=$("#Referredby").parent().val(),P=(V.SCGetProfileAttrValue("SC Primary Division Type"),V.SCGetProfileAttrValue("SC Primary Division Sub Type")),_=SiebelApp.S_App.GetActiveView().GetName();("SC Contact 360 Degree View OUI"==_||"SC Contact List View OUI"==_||"SC Visible Contact List View OUI"==_||"SC Manager's Contact List View OUI"==_||"SC ANI Match Contacts Info"==_&&"CSC"==P)&&(e=O[C],SiebelJS.Log("scMediaBuyId"+e));var N="";N=SiebelApp.S_App.NewPropertySet(),SiebelApp.S_App.NewPropertySet(),N.SetProperty("CellularNumber",c),N.SetProperty("EmailAddress",a),N.SetProperty("ContactFirstName",o),N.SetProperty("HomePhoneNumber",p),N.SetProperty("PartnerName",i),N.SetProperty("Reason for Visiting",m),N.SetProperty("WorkPhoneNumber",d),N.SetProperty("ContactLastName",r),("SC Contact 360 Degree View OUI"==_||"SC Contact List View OUI"==_||"SC Visible Contact List View OUI"==_||"SC Manager's Contact List View OUI"==_||"SC ANI Match Contacts Info"==_&&"CSC"==P)&&(N.SetProperty("Media Code Id",e),N.SetProperty("MediaCode",C)),N.SetProperty("LeadRank",b),N.SetProperty("Series",f),N.SetProperty("Base",v),N.SetProperty("Size",u),N.SetProperty("SleepNumber",y),N.SetProperty("PartnerSleepNumber",h),N.SetProperty("MiddleName",A),N.SetProperty("Address Mail to",l),N.SetProperty("City",n),N.SetProperty("State",s),N.SetProperty("Country",S),N.SetProperty("Postal Code",t),N.SetProperty("Referring By Insider Id",g),N.SetProperty("IpadContact",""),N.SetProperty("SC StreetAddr2",$("#SN-new-con-APT").val()),N.SetProperty("ProcessName","SC Create New Contact Flow"),"Y"==M?N.SetProperty("Object Id",D):N.SetProperty("Object Id",""),N.SetProperty("isIFITRecord",M);t=SiebelApp.S_App.GetService("Workflow Process Manager").InvokeMethod("RunProcess",N).GetChild(0),g=t.GetProperty("ContactId");R=g;var I,w;t.GetProperty("AddressId");"SCContactListAppletPR"==E&&(w={"First Name":"Id='"+R+"'"},"SC Contact 360 Degree View OUI"==SiebelApp.S_App.GetActiveView().GetName()?(V.ExecuteListAppletFrame(G,w,"SC Contact List Applet"),SiebelApp.S_App.GotoView("SC Contact 360 Degree View OUI")):(N="",N=SiebelApp.S_App.NewPropertySet(),SiebelApp.S_App.NewPropertySet(),N.SetProperty("ProcessName","SC Go to Contact 360 View OUI"),N.SetProperty("Object Id",R),SiebelApp.S_App.GetService("Workflow Process Manager").InvokeMethod("RunProcess",N))),"SCContact360ViewPR"==E&&(t=V.SCGetProfileAttrValue("SC Primary Division Sub Type"),"SC ANI Match Contacts Info"==SiebelApp.S_App.GetActiveView().GetName()?("CSC"!=t?(I=SiebelApp.S_App.NewPropertySet(),SiebelApp.S_App.NewPropertySet(),localStorage.setItem("whitescreen",1),I.SetProperty("View","Contact Detail View")):(I=SiebelApp.S_App.NewPropertySet(),SiebelApp.S_App.NewPropertySet(),localStorage.setItem("whitescreen",1),I.SetProperty("View","SC Contact 360 Degree View OUI")),I.SetProperty("Business Component","Contact"),I.SetProperty("Row Id",R),SiebelApp.S_App.GetService("CUT eSales Order Entry Toolkit Service").InvokeMethod("GotoView",I)):(w={"First Name":"Id='"+R+"'"},V.ExecuteListAppletFramesync(G,w,"SC Contact List Applet"),"SC Contact 360 Degree View OUI"==SiebelApp.S_App.GetActiveView().GetName()&&0==SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact List Applet"].GetBusComp().GetRecordSet().length?(N="",N=SiebelApp.S_App.NewPropertySet(),SiebelApp.S_App.NewPropertySet(),N.SetProperty("ProcessName","SC Go to Contact 360 View OUI"),N.SetProperty("Object Id",R),SiebelApp.S_App.GetService("Workflow Process Manager").InvokeMethod("RunProcess",N)):SiebelApp.S_App.GotoView("SC Contact 360 Degree View OUI"))),$("body").trigger("Custom.End")},1e3)}}),""},e.prototype.Cont_Create_EmailValidation=function(){return 1==$("#email").prop("checked")?($("#EmailAddress").removeAttr("disabled"),$("#email-label").addClass("mandatory"),$("#EmailAddress").attr("name","mobilephone")):($("#EmailAddress").attr("disabled",!0),$("#EmailAddress").attr("name",""),$("#EmailAddress").val(""),$("#email-label").removeClass("mandatory")),""},e.prototype.Cont_Create_MobileValidation=function(){return 1==$("#mobilephonecheck").prop("checked")?($("#MobilePhone").removeAttr("disabled"),$("#mobile-label").addClass("mandatory"),$("#MobilePhone").attr("name","emailEmpty")):($("#MobilePhone").attr("disabled",!0),$("#MobilePhone").attr("name",""),$("#MobilePhone").val(""),$("#mobile-label").removeClass("mandatory")),""},e.prototype.Cont_Create_ReferredBY=function(){return 1==$("#referredby").prop("checked")?(function(){refsearchfields=a.referralcontactsearchfields(),searchCount=2,next=1,o=["Last Name","Postal Code"];var e="";for(e+=' \t\t\t\t\t\t<div class="modal-header" >',e+='                            <button type="button" class="close SC-close-popup blue-bg" id="SC-close-referredby">&times;</button>',e+='                            <div class="header-content no-padding">',e+='                                <div class="sc-head-title sc-set-top">',e+='                                    <div class="sc-icon-text sc-top-padding">',e+="                                        <div>",e+='                                            <img src="images/custom/sc-logo.png" class="sc-order-icon">',e+="                                        </div>",e+="                                    </div>",e+='                                    <div class="container SC-search-container row no-top-padding">',e+='                                        <div class="col-lg-2 col-md-2 no-padding">',e+='                                            <p class="SC-search-title margin-top SC-search-color">Search Contacts</p>',e+="                                        </div>",e+='                                        <div class="col-lg-10 col-md-10" id="searchfields">',e+='                                            <form name="search">',e+='                            <div id="field">',e+='                                <select class="select-box margin-top sc-select-box" autocomplete="off" id="cfield0" name="prof1">',i=0;i<refsearchfields.length;i++)0==i?e+='                                    <option id="'+refsearchfields[i]+'" value="'+refsearchfields[i]+'" selected="selected">'+refsearchfields[i]+"</option>":e+='                                    <option id="'+refsearchfields[i]+'" value="'+refsearchfields[i]+'">'+refsearchfields[i]+"</option>";for(e+="                                                    </select>",e+='                                                    <input type="text" id="rcfield0" class="search-box sc-referred-search-box margin-top text-color" autocomplete="off">',e+='                                                    <div id="b1" class="add-more margin-top "></div>',e+="                                                </div>",e+='                            <div id="field">',e+='                                <select class="select-box margin-top sc-select-box" autocomplete="off" id="cfield1" name="prof1">',i=0;i<refsearchfields.length;i++)1==i?e+='                                    <option id="'+refsearchfields[i]+'" value="'+refsearchfields[i]+'" selected="selected">'+refsearchfields[i]+"</option>":e+='                                    <option id="'+refsearchfields[i]+'" value="'+refsearchfields[i]+'">'+refsearchfields[i]+"</option>";e+="                                                    </select>",e+='                                                    <input type="text" id="rcfield1" class="search-box sc-referred-search-box margin-top text-color" autocomplete="off">',e+='                                                    <div id="b1" class="add-more margin-top"><span class="glyphicon glyphicon-plus-sign icon-img ref-icon-img add-item" style="display:none" id="refferedPlusicon"></span></div>',e+="                                                </div>",e+="                                            </form>",e+="                                        </div>",e+="                                    </div>",e+='                                    <div class="sc-search-box SC-search-top-padding">',e+='                                        <button class="SC-SO-search-button SC-disabled" type="button" id="sc-referredby-con-search">Search</button>',e+="                                    </div>",e+="                                </div>",e+="                            </div>",e+="                        </div>",e+='                        <div class="modal-body">',e+='                            <div class="SC-table-with-scroll-main" id="SC-table-search-referredbycontact-body">',e+='                            <div class="SC-noresults-container clearfix no-padding margin-top">',e+='                               <div class="text-block">',e+="                                    <p>Please enter search criteria to begin search</p>",e+="                                </div>",e+="                            </div>",e+="                            </div>",e+='<div class="container"> ',e+='\t<div class="pagination sc-pagination pull-right" id="referredby-contact-pagination" style="display:none">',e+="\t</div>",e+="</div>",e+="                        </div>",e+='                        <div class="modal-footer">',e+='                            <div class="SC-button">',e+='                                <button id="SC-select-contact-referredby" class="SC-disabled">Select Contact</button>',e+="                            </div>",e+="                        </div>",$("#referredby-contact-search").html(e),$(".sc-select-box").each(function(){for(var e=$(this).val(),t=0;t<o.length;t++)e!=o[t]&&$("#"+$(this).attr("id")+" option[value='"+o[t]+"']").wrap("<span>");$("#"+$(this).attr("id")+" option[value='"+e+"']").attr("selected","selected")})}(),$("#SC-search-referredby").modal({backdrop:"static"}),$("#Referredby").removeAttr("disabled"),$("#referredby-label").addClass("mandatory"),$("#Referredby").attr("name","referredbyins")):($("#Referredby").attr("disabled",!0),$("#referredby-label").removeClass("mandatory"),$("#Referredby").attr("name",""),$("#Referredby").val("")),""},e.prototype.GotoPreviousPage=function(){return event.preventDefault(),$("#SC-contact-contact").show(),$("#SC-contact-account").hide(),$("#SC-contact-profile").hide(),$(".SC-contact-contact img").attr({src:"images/custom/completed-step.PNG"}),$(".SC-contact-account img").attr({src:"images/custom/completed-step.PNG"}),$(".SC-contact-profile img").attr({src:"images/custom/not-completed.png"}),$(".SC-contact-account").removeClass("active"),$(".SC-contact-contact").addClass("active"),$(".SC-contact-profile").removeClass("active"),""},t),"SiebelAppFacade.SCCreateContactFunctionality"}));