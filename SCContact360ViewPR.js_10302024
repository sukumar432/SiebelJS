/*****************************
Author: Harish
Created Date: 
Modified Date: 
Purpose: Contacts 360 view along with contact creation functionality

******************************/

if (typeof(SiebelAppFacade.SCContact360ViewPR) === "undefined") {

    SiebelJS.Namespace("SiebelAppFacade.SCContact360ViewPR");
    define("siebel/custom/SelectComfort/SCContact360ViewPR", ["siebel/viewpr","siebel/custom/SelectComfort/bootstrap.min","siebel/custom/SelectComfort/jquery.validate.min","siebel/custom/SelectComfort/SCContact360Markup","siebel/custom/SelectComfort/SCCreateContactMarkup","siebel/custom/SelectComfort/SCCreateContactFunctionality","siebel/custom/SelectComfort/SCErrorCodes","siebel/custom/SelectComfort/SC_OUI_Markups","siebel/custom/SelectComfort/SC_OUI_Methods","siebel/custom/SelectComfort/SC_OUI_Definitions"],
     function () {
      SiebelAppFacade.SCContact360ViewPR = (function () {
          //Start -- Variable declaration
               var pm = '';
               var SiebelConstants = SiebelJS.Dependency("SiebelApp.Constants");
               var Contact360Markup = SiebelJS.Dependency("SiebelAppFacade.SCContact360Markup");
               var ContactCreatefn = SiebelJS.Dependency("SiebelAppFacade.SCCreateContactFunctionality");
               var ErrorCodesfn = SiebelJS.Dependency("SiebelApp.SCErrorCodes");
               var CreateNewCon = SiebelJS.Dependency("SiebelApp.SCCreateContactMarkup");
               var scOUIMarkups = SiebelJS.Dependency("SiebelApp.SC_OUI_Markups");
               var SC_OUI_Methods=SiebelJS.Dependency("SiebelApp.SC_OUI_Methods");
               var SCOUIDefinitions = SiebelJS.Dependency("SiebelApp.SC_OUI_Definitions");
			   //Sukumar Added for Digital
           var divisions = {"Cust-Details-Pin":"Cust-Details-Applet","Con-Info-Pin":"Con-Info-Applet","Cust-inter-Pin":"Cust-inter-Applet","Prof-Info-Pin":"Prof-Info-Applet","Cons-Notes-Pin":"Cons-Notes-Applet","Assets-Pin":"Assets-Applet","Digital-Assets-Pin":"Digital-Assets-Applet","Additional-Sleeper-Pin":"Additional-Sleeper-Applet","Eligible-Offer-Pin":"Eligible-Offer-Applet","Orders-Pin":"Orders-Applet","HDSR-Pin":"HDSR-Applet","Oppor-Pin":"Oppor-Applet","SR-Pin":"SR-Applet","Activities-Pin":"Activities-Applet","Inn-Circle-Pin":"Inn-Circle-Applet","Item-lookup-Pin":"Item-lookup-Applet"};
               var appletNames = {"Cust-Details-Pin":"Cust-Details","Con-Info-Pin":"Cont-Info","Cust-inter-Pin":"Cust-Interacion","Prof-Info-Pin":"prof-Info","Cons-Notes-Pin":"Cons-Notes","Assets-Pin":"Assets","Digital-Assets-Pin":"Digital-Assets","Additional-Sleeper-Pin":"Additional-Sleeper","Eligible-Offer-Pin":"Eligible-Offer","Orders-Pin":"Orders","HDSR-Pin":"HDSR","Oppor-Pin":"Opportunity","SR-Pin":"Serv-Req","Activities-Pin":"Activities","Inn-Circle-Pin":"Inn-Circle","Item-lookup-Pin":"item-lookup"};
               var pinids= [];
                var sFields = ['Last Name','Postal Code'];
                
               var noteRsn1=true,noteRsn2=true,note_CSN=true,noteType_CSN=true,owner_CSN=true,status_CSN=true,updated_CSN=true,scheduledDate_CSN=true,skunumber=true,skudescription=true,skuproductline=true,versionstatus=true;
               var ProdDetail_Asset=true,Display_Asset=true,Asset_Asset=true,status_Asset=true,sku_Asset=true,ProName_Asset=true,purchased_Asset=true,oNumber_Asset=true,InstalDate_Asset=true,warranty_Asset=true,warr_EndDt_Asset=true,originalOrders_Asset=true,relatedlOrder_Asset=true;
               var orderDt_Orders=true,orderNum_Orders=true,ord_SubType_Orders=true,status_Orders=true,orderTotal_Orders=true,ordersaleLC_Orders=true,orderSalesOT_Orders=true,orderRev_Orders=true,sleepIQStatus_Orders=true;
               var OptyName_Opportunities=true,Created_Opportunities=true,createdBy_Opportunities=true,probability_Opportunities=true,salesTeam_Opportunities=true,channel_Opportunities=true,status_Opportunities=true,Revenue_Opportunities=true;
               var OpenDt_ServiceRequests=true,srNum_ServiceRequests=true,srType_ServiceRequests=true,typeSR_ServiceRequests=true,area_ServiceRequests=true,subArea_ServiceRequests=true,detailDesc_ServiceRequests=true,owner_ServiceRequests=true,priority_ServiceRequests=true,HDDD_ServiceRequests=true,OrderNumb_serviceRequests=true,status_serviceRequests=true;
               var HDSR_OpenedDate_ServiceRequests=true,HDSR_OrderNumber_sr_serviceRequests=true,HDSR_SR_ServiceRequests=true,HDSR_DeliveryType_ServiceRequests=true,HDSR_Status_sr_ServiceRequests=true,HDSR_SchStartDate_ServiceRequests=true,HDSR_SchEndDate_ServiceRequests=true,HDSR_Priority_ServiceRequests=true,HDSR_DeliveryPhone_ServiceRequests=true;
               var comments_Activities=true,status_Activities=true,type_Activities=true,desc_Activities=true,subChannel_Activities=true,created_Activities=true,owner_Activities=true,startDt_Activities=true,sr_Activities=true,activity_Activities=true,activity_rsn1=true,activity_rsn2=true,activity_Category1=true;
               var toolbarflag = "N";
               //SWAGH:10192023:SFSTRY0003043
               //var name_Campaigns=true,promotioninformation_Campaigns=true,startdate_Campaigns=true,endDate_Campaigns=true,couponcode_Campaigns=true;
               var toolbarflag = "N";
               
               var ContactFormApplet_PM = '', ConFormApp_RS='';
               var Assets_PM="",Asset_Records="";
			   var Digital_Assets_PM="",Digital_Asset_Records="";  //Sukumar Added for Digital
			   var Additional_Sleeper_PM="",Additonal_Sleeper_Records="";  //Sukumar Added for Additonal_Sleeper
               var Eligible_Offer_PM="",Eligible_Offer_Records="";
			  var Orders_PM="";
               var Opportunity_PM="";
               var HDSR_PM="";
               var SR_PM="";
               var Inn_Circle_PM="";
               var Activities_PM="";
               //SWAGH:10192023:SFSTRY0003043
               //var Campaigns_PM="";
               var Item_PM = "",sLogUserNamePinids,sLogUserNamePos,savePinId;
               //var Compaigns_PM="";
               
               var csearchfields="",refsearchfields="",refsearchCount=2,next=1,currentValue="";
               var parentobj=[];
               var filterobj=[],User_pinnedIds_Loc;
               var Startpage=0;
               var endpage="";
               var Filter_search="N";
               
               var notetypevalues="";
               var ownervalues="";
               var searcharray = {};
               var skunum='',skudesc='';
               var conrecordset='',Contact_Id='';
               var SRTypeFlag='N';	
               var actcamflag = "N";
               var inactcamflag = "N";
               var isiFitRecord = "N";
               var sContactId = "";
               
           //End -- Variable declaration
           
           function SCContact360ViewPR(pm) {
            SiebelAppFacade.SCContact360ViewPR.superclass.constructor.apply(this, arguments);
           }
   
           SiebelJS.Extend(SCContact360ViewPR, SiebelAppFacade.ViewPR);
   
       
       
           SCContact360ViewPR.prototype.Init = function () {
            SiebelAppFacade.SCContact360ViewPR.superclass.Init.apply(this, arguments);
               //SiebelJS.Log("Contact 360 View PR --Init");
               localStorage.setItem('whitescreen', 0);
               $("#_swescrnbar").hide();
               $("#_swethreadbar").hide();
               $("#_sweappmenu").hide();
               $("#s_vctrl_div").hide();
               $(".siebui-button-toolbar").hide();
               $('#CommunicationPanelContainer').css("padding-top","77px");
               $("#_sweview").hide();
               SRTypeFlag="Y";
           }
   
           SCContact360ViewPR.prototype.ShowUI = function () {
               SiebelAppFacade.SCContact360ViewPR.superclass.ShowUI.apply(this, arguments);
               SiebelJS.Log("Contact 360 View PR --ShowUI");
               $(".whitescreentimer").remove();
               $("#custommaskoverlay").hide();
               $("#_sweview").show();
                //hiding tool tip
               $('div[title="Contact Summary"]').attr("title","");
               pinids=[];
               parentobj=[];
               filterobj=[];
               Filter_search="N";
               Startpage=0;
               endpage="";
               savePinId="Y";
               
               //Start: Getting PM Instances
                    Assets_PM=SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact 360 Asset List Applet OUI"].GetPModel().GetRenderer().GetPM();
                     //Sukumar Added for Digital
					Digital_Assets_PM=SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact 360 Asset List Applet OUI"].GetPModel().GetRenderer().GetPM();
                    Additional_Sleeper_PM=SiebelApp.S_App.GetActiveView().GetAppletMap()["Contact Relationship List Applet"].GetPModel().GetRenderer().GetPM();
                   Eligible_Offer_PM=SiebelApp.S_App.GetActiveView().GetAppletMap()["SN Eligible Offers List Applet"].GetPModel().GetRenderer().GetPM();
				   Orders_PM=SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact 360 Order List Applet OUI"].GetPModel().GetRenderer().GetPM();
                    Opportunity_PM=SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact 360 Opportunity List Applet"].GetPModel().GetRenderer().GetPM();
                    HDSR_PM=SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact 360 HDSR List Applet OUI"].GetPModel().GetRenderer().GetPM();				 
                    SR_PM=SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact 360 Service Request List Applet OUI"].GetPModel().GetRenderer().GetPM();
                    Activities_PM=SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact 360 Activity List Applet OUI"].GetPModel().GetRenderer().GetPM();
                    Inn_Circle_PM=SiebelApp.S_App.GetActiveView().GetAppletMap()["SC LOY Member Vouchers List Applet"].GetPModel().GetRenderer().GetPM();
                    Item_PM=SiebelApp.S_App.GetActiveView().GetAppletMap()["SC SIS Product List Applet"].GetPModel().GetRenderer().GetPM();
                    //SWAGH:10192023:SFSTRY0003043
                    //Campaigns_PM=SiebelApp.S_App.GetActiveView().GetAppletMap()["Marketing History List Applet"].GetPModel().GetRenderer().GetPM();
               //End: Getting PM Instances
               
                Contact_Id=SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact Form Applet"].GetBusComp().GetFieldValue("Id");
                var sccontactsearchspec=[],
                   sccontactsortspec=[];
                   
                   sccontactsearchspec[0]="[Type]= 'MR_MS' AND [Active]='Y'",
                   sccontactsortspec[0]="";
                   sccontactsearchspec[1]="[Type]= 'FINS_SUFFIX_MLOV' AND [Active]='Y'",
                   sccontactsortspec[1]="";
                   sccontactsearchspec[2]="[Parent]= 'Package' AND [Active]='Y' AND [Type]='OFFER_MEDIA'",
                   sccontactsortspec[2]="";
                   sccontactsearchspec[3]="[Type]= 'SC_SLEEP_NUM' AND [Active]='Y'",
                   sccontactsortspec[3]="";
                   sccontactsearchspec[4]="[Type]= 'SC_BLKLSTD_RSN' AND [Active]='Y'",
                   sccontactsortspec[4]="";
                   sccontactsearchspec[5]="[Type]= 'SC_LEAD_RANK' AND [Active]='Y'",
                   sccontactsortspec[5]="";
                   sccontactsearchspec[6]="[Type]= 'SC_SERIES_BED' AND [Active]='Y'",
                   sccontactsortspec[6]="";
                   sccontactsearchspec[7]="[Type]= 'SC_BASE' AND [Active]='Y'",
                   sccontactsortspec[7]="";
                   sccontactsearchspec[8]="[Type]= 'SC_CON_SIZE' AND [Active]='Y'",
                   sccontactsortspec[8]="";
                   sccontactsearchspec[9]="[Type]= 'SC_BEDNG_COL' AND [Active]='Y'",
                   sccontactsortspec[9]="";
                   sccontactsearchspec[10]="[Type]= 'SC_PERSNLTY_TYPE' AND [Active]='Y'",
                   sccontactsortspec[10]="";
                   sccontactsearchspec[11]="[Type]= 'SC_HOT_BUTTON' AND [Active]='Y'",
                   sccontactsortspec[11]="";
                   sccontactsearchspec[12]="[Type]= 'SC_SPL_GRP' AND [Active]='Y'",
                   sccontactsortspec[12]="";
                   sccontactsearchspec[13]="[Type]= 'SC_OPTY_PROB' AND [Active]='Y'",
                   sccontactsortspec[13]="";
                   sccontactsearchspec[14]="[Type]= 'OPTY_CHANNEL_TYPE' AND [Active]='Y'",
                   sccontactsortspec[14]="";
                   sccontactsearchspec[15]="[Type]= 'SR_TYPE' AND [Active]='Y' AND [Name]='Incident'",
                   sccontactsortspec[15]="";
                   sccontactsearchspec[16]="[Type]= 'SC_ASSET_QTY'",
                   sccontactsortspec[16]="Order By";
                   
                   //SC_OUI_Methods.SCSetLoVs(sccontactsearchspec, sccontactsortspec);
                   //SC_OUI_Methods.SCGetProfileAttr("SC Primary Division Sub Type,SC Store User,SC Store Number,SC Primary Division Type,Login Name,DISALocFound,Last Name,First Name");
                     
   
               // loading waiting time
               $(document).ready(function (){
                   $("body").bind('Custom.Start', function(ev) {
                     $('#maskoverlay').show();
                     SiebelJS.Log("Start");
                   });
   
                   $("body").bind('Custom.End', function(ev) {
                       $('#maskoverlay').hide();
                       SiebelJS.Log("Stop");
                   });
               });
                   
                   csearchfields = SCOUIDefinitions.contactsearchfields();
                   refsearchfields = SCOUIDefinitions.referralcontactsearchfields();
               //Start: Appending contact 360 markup
                   Contact360Markup = SiebelJS.Dependency("SiebelAppFacade.SCContact360Markup");
                   var markup = Contact360Markup.MarkupFn(); 			 
                   //$("#_sweview").hide();
                   var a="";
                   a=SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact 360 Activity List Applet OUI"].GetPModel().Get("GetFullId");
                   $("#"+a).hide();
                   a=SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact 360 Asset List Applet OUI"].GetPModel().Get("GetFullId");
                   $("#"+a).hide();
				   
				   a=SiebelApp.S_App.GetActiveView().GetAppletMap()["SN Asset Management Digital List Applet"].GetPModel().Get("GetFullId");
                   $("#"+a).hide();//Sukumar Digital Services
				   a=SiebelApp.S_App.GetActiveView().GetAppletMap()["SN Asset Management Digital List Applet"].GetPModel().Get("GetFullId");
                   $("#"+a).hide();//Sukumar Digital Services Additional Sleeper
				  
                   a=SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact 360 Opportunity List Applet"].GetPModel().Get("GetFullId");
                   $("#"+a).hide(); //Sukumar Digital Services
				   
                   a=SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact 360 Order List Applet OUI"].GetPModel().Get("GetFullId");
                   $("#"+a).hide();
                   a=SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact 360 HDSR List Applet OUI"].GetPModel().Get("GetFullId");
                   $("#"+a).hide();
                   a=SiebelApp.S_App.GetActiveView().GetAppletMap()["SN FIN Service Request - Notes List Applet"].GetPModel().Get("GetFullId");
                   $("#"+a).hide();
                   a=SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact 360 Service Request List Applet OUI"].GetPModel().Get("GetFullId");
                   $("#"+a).hide();
                   a=SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact List Applet"].GetPModel().Get("GetFullId");
                   $("#"+a).hide();
                   a=SiebelApp.S_App.GetActiveView().GetAppletMap()["SC LOY Member Vouchers List Applet"].GetPModel().Get("GetFullId");
                   $("#"+a).hide();
                   a=SiebelApp.S_App.GetActiveView().GetAppletMap()["SHM Contact LOY Member List Applet"].GetPModel().Get("GetFullId");
                   $("#"+a).hide();
                   a=SiebelApp.S_App.GetActiveView().GetAppletMap()["SC SIS Product List Applet"].GetPModel().Get("GetFullId");
                   $("#"+a).hide();
                   a=SiebelApp.S_App.GetActiveView().GetAppletMap()["Marketing History List Applet"].GetPModel().Get("GetFullId");
                   $("#"+a).hide();
                   a=SiebelApp.S_App.GetActiveView().GetAppletMap()["SC LOY Member List Applet"].GetPModel().Get("GetFullId");
                   $('#s_'+a+'_div').hide();
                   a=SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact Form Applet"].GetPModel().Get("GetFullId");
                   $('#s_'+a+'_div').hide();
                   
                   $('#'+a).append(markup);
                   // $(markup).insertAfter("#_sweview"); //over rides the existing html code with 'markup' variable's html code
                   //$("#_sweview").append(markup);	//over rides the existing html code with 'markup' variable's html code
                   //End: Appending contact 360 markup
                
                  
                 //Adding CustomerMarkup 
                   customtimermarkup=scOUIMarkups.CustomTimer();
                   $('#applet1').append(customtimermarkup);
               //Start: Appending Header
                    var StoreUser =  SC_OUI_Methods.SCGetProfileAttrValue('SC Store User');
                       var lastName = SC_OUI_Methods.SCGetProfileAttrValue('Last Name');
                       var firstName = SC_OUI_Methods.SCGetProfileAttrValue('First Name');
                       var loginName = SC_OUI_Methods.SCGetProfileAttrValue('Login Name');
                       var divsubtype = SC_OUI_Methods.SCGetProfileAttrValue('SC Primary Division Sub Type');
                    var headerMarkup = scOUIMarkups.Header_block("Contacts",StoreUser,lastName,firstName,loginName,divsubtype);
                    $(".nav-header").html(headerMarkup);
               //End: Appending Header
                   //NTHARRE:02JUL2021:To hide the functionality for store users based on lov - SFSTRY0001090
                       var searchExpr = "[Type] = 'SC_IS_STORE_LEAD' AND [Active] = 'Y'";
                        var sortSpec = "Order By";
                       var StoreLead = SC_OUI_Methods.SCGetOrderLoVs(searchExpr);
                       if(StoreUser == "Y" && StoreLead =="No"){
                           $("#SC-add-contact-btn").hide();
                           $("#sc-c-create-Activity-btn").hide();
                           $("#sc-c-create-opp-btn").hide();
                       }
                //SNARRA:Added code for P2PE customer Info Check
                
                var P2peflag = localStorage.getItem("IsP2PECustom");
                
                    if(P2peflag=="Y"){
                        
                          $("#SC-SO-P2PE-change").modal({
                               backdrop: 'static'
                           });
                           $("#SC-SO-P2PE-change").css({
                               "display": "flex",
                               "justify-content": "center",
                               "align-items": "center"
                           }); 
                           
                    }
                
                
                //SNARRA:Added CTI Toolbar Issue 
                  if($("#CommunicationPanelContainer").is(":visible") && (localStorage.getItem('CTIToolbar')== "Y")){
                      $(".SC-data-container").css("position","inherit");
                      $("#sc-orange").show();
                      $("#sc-white").hide();
                  }
                  if($("#CommunicationPanelContainer").is(":visible")){
                       $("#sc-orange").show();
                       $("#sc-white").hide();
                  }
               //Start: Code for divisions drag and drop starts
                   var $sortable = $('#SC-360-RightContainer');
                   //SiebelJS.Log("In sortable");
                   //var pos = JSON.parse(localStorage.getItem(sLogUserNamePos));
                   //SBOORLA: Added code for Sequence based on User Preferences
                   var Custom_Service="",Input_BS="",Out_BS="",pinnedIds_Loc="";
                   Custom_Service = SiebelApp.S_App.GetService("SC Custom Query");
                   Input_BS = SiebelApp.S_App.NewPropertySet();
                   Out_BS = SiebelApp.S_App.NewPropertySet();
                   searchfields = "Cosmetics/ContactSequence,Cosmetics/ContactPinUnpin";
                   Input_BS.SetProperty("BO", "User Preferences");
                   Input_BS.SetProperty("BC", "User Preferences");
                   Input_BS.SetProperty("SearchSpecification", "");
                   Input_BS.SetProperty("SortSpecification", "");
                   Input_BS.SetProperty("ReqNoOfRecords", "");
                   Input_BS.SetProperty("FieldsArray", searchfields);
                   Out_BS = Custom_Service.InvokeMethod("Query", Input_BS);
                   var Child_BS = Out_BS.GetChild(0);
                   var BS_Data = Child_BS.GetProperty("OutputRecordSet");
                   if(BS_Data!="}"){
                           var ResArray = new Array;
                           ResArray = BS_Data.split(";");
                           
                               jsonRes = JSON.parse(ResArray[0]);
                               pinnedIds_Loc=jsonRes["Cosmetics/ContactSequence"];
                               SiebelJS.Log("jsonSK"+jsonRes["Cosmetics/ContactSequence"]);
                               pinnedIds_Loc=pinnedIds_Loc.split("_");
                               User_pinnedIds_Loc=jsonRes["Cosmetics/ContactPinUnpin"];
                               SiebelJS.Log("jsonSK"+jsonRes["Cosmetics/ContactPinUnpin"]);
                               User_pinnedIds_Loc=User_pinnedIds_Loc.split("_");
                   }
                   SiebelJS.Log("userPositions"+pinnedIds_Loc);
                   if (pinnedIds_Loc!="") {
                    //SiebelJS.Log("In sortable");
                        $.each(pinnedIds_Loc, function(i, position) {
                        //SiebelJS.Log("pos::"+pos);
                        //SiebelJS.Log("position::"+position);			
                           var $target = $sortable.find('#' + position);
                           $target.appendTo($sortable); 
                       });
                   }
                   $sortable.sortable({
                   update: saveNewOrder,
                    items: '.SC-360-card:not(.fixed)'
                   });
                   function saveNewOrder() {
                   //SiebelJS.Log("in save new order function");
                   //var pos = JSON.stringify($sortable.sortable("toArray"));
                   //SBOORLA:Added code for storing the applet sequence based on User Preference
                   var fieldvalues="",inPS="",outPS="",Bservice="";
                   var pos = $sortable.sortable("toArray");
                   for(var i=0;i<pos.length;i++){
                       
                       if(pos.length!=(i+1))
                           fieldvalues+=pos[i]+"_";
                       else
                           fieldvalues+=pos[i];
                   
                   }
                   var fieldnames="Cosmetics/ContactSequence";
                   inPS = SiebelApp.S_App.NewPropertySet();
                   outPS = SiebelApp.S_App.NewPropertySet();
                   inPS.SetProperty("BO","User Preferences");
                   inPS.SetProperty("BC","User Preferences");
                   inPS.SetProperty("FieldsArray",fieldnames );
                   inPS.SetProperty("ValuesArray",fieldvalues);
                   inPS.SetProperty("SearchSpecification","" );
                   Bservice = SiebelApp.S_App.GetService("SC Custom Query Simplified"); //get service
                   outPS = Bservice.InvokeMethod("Insert", inPS);
                   //localStorage.setItem(sLogUserNamePos, pos);
                   //SiebelJS.Log("position::"+position);
                   }
               //End: division drag and drop ends
            
                //navigation to store report
               /*var customerType = SiebelApp.S_App.GetProfileAttr('SC Primary Division Type');
               if (customerType == 'STORE' || customerType == 'SHOW') {
                   
                   $(document).on('click', '#storereport', function(){
                       scOUIMarkups.StoreNavigation();
                   });
               }
               else{
               $("#storereport").hide();
               }*/
               //item look up
                   
                   
                   //VALLA:Added for Synchrony change
                   $(document).on('click', "#search_itemlookup_button", function (e) {
                       $("#sku_il_number").val("");
                       $("#sku_il_desc").val("");
                       $("#Itemlookup-Body-Initial").hide();
                       var rowid = $("#item-lookup-table tbody tr").attr('id');
                       SiebelJS.Log("rowid"+rowid);
                       if($("#item-lookup-table tbody tr").hasClass('highlate-row'))
                       $("#item-lookup-table tbody tr").removeClass('highlate-row');
                       $(this).hide();
                       $("#sc-searched-row").show();
                       $("#SC-360-il-save").show();
                       $("#SC-il-save").addClass("SC-disabled");
                       $("#find_sku").hide();
                       $(".SC-input").css("cssText", "border: -5px !important;");
                       
                   });
                   $(document).on('keypress', "#sku_il_number", function (e) {
                       $("#SC-il-save").removeClass("SC-disabled");
                   });
                   $(document).on('keypress', "#sku_il_desc", function (e) {
                       $("#SC-il-save").removeClass("SC-disabled");
                   });
                   $(document).on('click', "#SC-il-save", function (e) {
                       $("#find_sku").addClass("SC-disabled");
                       event.preventDefault();
                       var FieldQueryPair;
                       skunum = $("#sku_il_number").val();
                       skudesc = $("#sku_il_desc").val();
                       $("body").trigger('Custom.Start');
                       setTimeout(function(){
                       //if (event.which == 13) {
                       FieldQueryPair  =  {"SKU #":skunum, "Description":skudesc};
                       //setTimeout(function(){
                       SC_OUI_Methods.ExecuteListAppletFramesync(SiebelConstants,FieldQueryPair,"SC SIS Product List Applet");
                       //},1000);
                       Item_PM=SiebelApp.S_App.GetActiveView().GetAppletMap()["SC SIS Product List Applet"].GetPModel().GetRenderer().GetPM();
                       Itemlookup_GetRecords(Item_PM);
                       SC_OUI_Methods.PrimaryButton(Item_PM, 'Itemlookup-pagination');
                       $("#SC-360-consolidated-notes-edit").show();
                       $("#SC-360-il-save").hide();
                       
                       $("#find_sku").show();
                       $("#SC-360-item-lookup-search").show();
                       $("#search_itemlookup_button").show();
                       //$('#sc-il-form')[0].reset();
                       //}
                       $("body").trigger('Custom.End');
                       },1000);
                       
                       
                   });
                   $(document).on('click', "#SC-il-close", function (e) {
                       $("#find_sku").addClass("SC-disabled");
                       $("#search_itemlookup_button").show();
                       //$("#SC-360-consolidated-notes-edit").show();
                       //$('#sc-il-form')[0].reset();
                       $("#sc-searched-row").hide();
                       $("#SC-360-il-save").hide();
                       $("#find_sku").show();
                       $("#SC-360-item-lookup-search").show();
                       var Item_markup = Contact360Markup.ItemlookupMarkupFn();
                       $("#Item-lookup-Applet").html(Item_markup);
                   });
                   var find_il;
                   $(document).on("click","#item-lookup-table tbody tr",function(){
                   $("#find_sku").removeClass("SC-disabled");
                   var rowid = $(this).attr('id');
                   find_il = rowid.split("m");
                   SiebelJS.Log("find_il:"+find_il);
                   find_il = find_il[1];
                   find_il = find_il-1;
                   SiebelJS.Log("find_il:"+find_il);
                   SiebelJS.Log("rowid:"+rowid);
                   if(rowid != "sc-searched-row" && rowid != "Itemlookup-Body-Initial")
                   {
                   $('#' + rowid).addClass('highlate-row').siblings().removeClass('highlate-row');
                   //SKU Popup
                   Item_PM=SiebelApp.S_App.GetActiveView().GetAppletMap()["SC SIS Product List Applet"].GetPModel().GetRenderer().GetPM();
                   
                   }
                        
   
                        
                       
               });
               $(document).on("click", "#find_sku", function () {
                           var Item_RS_il = Item_PM.Get("GetRecordSet");
                           var name_il = Item_RS_il[find_il]["Part #"];
                           var desc_il = Item_RS_il[find_il]["Description"];
                           var product_line_il = Item_RS_il[find_il]["Product Line"];
                           SiebelJS.Log("name_il:"+name_il);
                           SiebelJS.Log("desc_il:"+desc_il);
                           SiebelJS.Log("product_line_il:"+product_line_il);
                            //if (event.which == 13) {
                               $("body").trigger('Custom.Start');
                               setTimeout(function(){
                                var InputSKU = SiebelApp.S_App.NewPropertySet();
                                var OutputSKU = SiebelApp.S_App.NewPropertySet();
   
                                //var searchsku_name="*"+$("#SC-360-sku-contact-input").val()+"*";
                               var searchsku_name=name_il;
                               var searchsku_desc=desc_il;
                               //SPATIBAN:15-july-2019:Updated code for Item Look Search Issue
                               var srcSpec="";
                               if(searchsku_name!="")
                                   srcSpec="[Part #] LIKE '"+searchsku_name+"'";
                               else
                                   srcSpec="[Detailed Description] LIKE '"+searchsku_desc+"'";
                                //InputSKU.SetProperty("Part Number", searchsku_name);
                               //InputSKU.SetProperty("Detailed Description", searchsku_desc);
                               InputSKU.SetProperty("SearchSpec", srcSpec);
                                var ItemLookup = SiebelApp.S_App.GetService("SC Product Item Lookup OUI");
                                OutputSKU = ItemLookup.InvokeMethod("SCItemLookup", InputSKU);
                               
                                //SiebelJS.Log("OutputSKU::"+JSON.stringify(OutputSKU));
                                var Child_Out = OutputSKU.GetChild(0);
                                //SiebelJS.Log("Child_Out::"+JSON.stringify(Child_Out));
                               var skunumber = Child_Out.GetProperty("SKUnumber");
                                SiebelJS.Log("skuPrice:::@@@"+skunumber);
                                var skuPrice = Child_Out.GetProperty("SKUPrice");
                                //SiebelJS.Log("skuPrice:::@@@"+skuPrice);
                                var skuDes = Child_Out.GetProperty("SKUDesc");
                               //SiebelJS.Log("skuDes:::@@@"+skuDes);
                                var outPutSet = Child_Out.GetProperty("outPutSet");	
                               SiebelJS.Log("outPutSet:"+JSON.stringify(outPutSet));
                               var subskuArray = outPutSet.split("|");
                               SiebelJS.Log("subskuArray:::@@@"+subskuArray);
                               
                               
                                   var SKU_Markup = '';
                                   SKU_Markup += '<div class="modal-content" id="sku-modal-content">';
                                   SKU_Markup += '<div class="modal-header">';
                                   //SKU_Markup+='<button type="button" class="close SC-close-popup blue-bg" data-dismiss="modal" id="SC-360-contact-fr-close">&times;</button>';
                                   SKU_Markup += '<div class="header-content">';
                                   SKU_Markup += '<div class="sku-head-title">';
                                   if(name_il!="")
                                   SKU_Markup += '<p class="no-margin">Substitutes for <span>SKU #</span><span>' + name_il + '</span></p>';
                                   else
                                   SKU_Markup += '<p class="no-margin">Substitutes for <span>SKU #</span><span></span></p>';
                                   if(skuPrice != ""){
                                       SKU_Markup += '<span>$' + skuPrice + '</span>';
                                   }
                                   else{
                                       SKU_Markup += '<span></span>';
                                   }
                                   SKU_Markup += '</div>';
                                   if(desc_il != ""){
                                       SKU_Markup += '<p class="description">' + desc_il + '</p>';
                                   }
                                   else{
                                       SKU_Markup += '<p class="description"></p>';
                                   }
                                   SKU_Markup += '</div>';
                                   SKU_Markup += '</div>';
                                   SKU_Markup += '<div class="modal-body">';
                                   SKU_Markup += ' <div class="SC-table-with-scroll-main">';
                                   SKU_Markup += ' <table class="SC-table">';
                                   SKU_Markup += '<thead>';
                                   SKU_Markup += '<tr class="no-bg">';
                                   SKU_Markup += '<th>SUBSTITUTE SKU#</th>';
                                   SKU_Markup += '<th>SKU Description</th>';
                                   SKU_Markup += '<th>SKU Price</th>';
                                   SKU_Markup += '</tr>';
                                   SKU_Markup += '</thead>';
                                   SKU_Markup += '<tbody>';
                                   if(subskuArray != ""){
                                       //SPATIBAN:JUNE2019:Added below code for item lookup search is not working it contains any special characters
                                       //for (i = 0; i < subskuArray.length; i++) {
                                       for (var childarray = 0; childarray < subskuArray.length; childarray++) {
                                           var record = '',
                                           subSKUJSSON = '';
                                           var str = subskuArray[childarray];
                                           var SCCalLongDes="",SCCalcdescname="";
                                           var split_cars = str.split('","');
                                           for (var i = 0; i < split_cars.length; i++) {
                                               if(i==1){
                                                   var desc_name = split_cars[i].split('":"');
                                                   var prod_name="";
                                                   for(var j = 0;j<desc_name.length;j++){
                                                       if(j == 1){
                                                           if( /"/.test( desc_name[j] )){
                                                               desc_name[j]=desc_name[j].replace(/"/g, '\\"');
                                                               prod_name = desc_name[j];
                                                                   if(prod_name!=""){
                                                                        SCCalcdescname+= prod_name;
                                                                   }
                                                           }
                                                        } else{
                                                            SCCalcdescname+=desc_name[j]+'":"';  
                                                        }
   
                                                   }
                                                       SiebelJS.Log("SCCalcdescname:"+SCCalcdescname);
                                                       SCCalLongDes+=SCCalcdescname+'","';
                                               }
                                               else{
                                                    if(i !=1){
                                                        if(i== (split_cars.length-1)){
                                                           SCCalLongDes+=split_cars[i];
                                                        }else{
                                                          SCCalLongDes+=split_cars[i]+'","'; 
                                                        }
                                                    }
                                               }
                                       }
                                       if(prod_name!=""){
                                               str = SCCalLongDes;
                                       }
                                       var found = false;
                                       str = str.replace(/(".,*?")(?!\})/g, function(match) {
                                       if(found && match.endsWith('"')) return match.substring(0, match.length - 1) + '\\"';
                                       found = found || match === '"Desc"';
   
                                       return match;
                                       });
                                       str=str.replace(/\n/g,"");
                                           subSKUJSSON = JSON.parse(str);
                                           //subSKUJSSON = JSON.parse(subskuArray[i]);
                                           record += '<tr>';
                                           record += '<td>' + subSKUJSSON["subsku"] + '</td>';
                                           record += '<td>' + subSKUJSSON["Desc"] + '</td>';
                                           if(subSKUJSSON["Price"] != ""){
                                               record += '<td>$' + subSKUJSSON["Price"] + '</td>';
                                           }
                                           else{
                                               record += '<td>' + subSKUJSSON["Price"] + '</td>';
                                           }											
                                           record += '</tr>';
                                           SKU_Markup += record;
                                       }
                                   }
                                   /*else
                                   {
                                       SKU_Markup += '<tr>';
                                       if(skunumber!=""){
                                       SKU_Markup += '<td>' + skunumber + '</td>';}
                                       else{
                                       SKU_Markup += '<td></td>';}
                                       if(skuDes != ""){						
                                       SKU_Markup += '<td>' + skuDes + '</td>';}
                                       else{
                                       SKU_Markup += '<td></td>';}
                                       if(skuPrice != ""){
                                           SKU_Markup += '<td>$' + skuPrice + '</td>';
                                       }
                                       else{
                                           SKU_Markup += '<td></td>';
                                       }											
                                       SKU_Markup += '</tr>';
                                   }*/
                                   SKU_Markup += '</tbody>';
                                   SKU_Markup += '</table>';
                                   SKU_Markup += '<div class="SC-single-button-container less-padding">';
                                   SKU_Markup += '<button id="sku-close">Close</button>';
                                   SKU_Markup += '</div>';
                                   SKU_Markup += '</div>';
                                   SKU_Markup += '</div>';
                                   SKU_Markup += '</div>';
                               
                                   $("#SKU-PopUp").html(SKU_Markup);
                                   setTimeout(function(){
                                       $("body").trigger('Custom.End');
                                   $("#SC-360-contact-fr").modal({
                                      backdrop: 'static'
                                     });
                                },500);
                                   
                               },1000);
                               
                               //}
                            
                        });	 
                       $(document).on('click', "#sku-close", function () {
                           $("#find_sku").addClass("SC-disabled");
                           $("#item-lookup-table tbody tr").removeClass('highlate-row');
                            $("#SC-360-contact-fr").modal('hide');
                           $("#sku-modal-content").html("");
                        });
           }//Close ShowUI
   
           SCContact360ViewPR.prototype.BindData = function (bRefresh) {
               SiebelAppFacade.SCContact360ViewPR.superclass.BindData.apply(this, arguments);
               SiebelJS.Log("Contact 360 View PR --BindData");
               
               ContactFormApplet_PM = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact Form Applet"].GetPModel().GetRenderer().GetPM();
               ConFormApp_RS = ContactFormApplet_PM.Get("GetRecordSet");
               //SiebelJS.Log("ConFormApp_RS::"+JSON.stringify(ConFormApp_RS));
               
               //VALLA: 15-JULY-19 Added the below condition for iFIT change
               if(ConFormApp_RS[0]["Type"] == "Pressure Map_Unqualified"){
                   isiFitRecord = "Y";
               }else{
                   isiFitRecord = "N";
               }
               sContactId = ConFormApp_RS[0]["Id"];
               
               //VALLA: 15-JULY-19 Added the below condition for iFIT change
                if(isiFitRecord == "Y"){
                   $("#SC-add-contact-btn").hide();
                }else{
                   //NTHARRE:02JUL2021:To hide the functionality for store users based on lov - SFSTRY0001090
                   var searchExpr = "[Type] = 'SC_IS_STORE_LEAD' AND [Active] = 'Y'";
                   var sortSpec = "Order By";
                   var StoreLead = SC_OUI_Methods.SCGetOrderLoVs(searchExpr);
                   var StoreUser =  SC_OUI_Methods.SCGetProfileAttrValue('SC Store User');
                   if(StoreUser == "Y" && StoreLead =="No"){
                       $("#SC-add-contact-btn").hide();
                       $("#sc-c-create-Activity-btn").hide();
                       $("#sc-c-create-opp-btn").hide();
                   }
                   else{
                       $("#SC-add-contact-btn").show();
                       $("#sc-c-create-Activity-btn").show();
                       $("#sc-c-create-opp-btn").show();
                   }
                }
                
               
               //VALLA: 15-JULY-19 Added the below condition for iFIT change
               if(isiFitRecord == "Y"){
                   $("#Cust-inter-AppletName-div").hide();
                   $("#Prof-Info-AppletName-div").hide();
                   $("#Cons-Notes-AppletName-div").hide();
                   $("#Assets-AppletName-div").hide();
				   $("#Digital-Assets-AppletName-div").hide();  //Sukumar Added for Digital
				   $("#Additional-Sleeper-AppletName-div").hide();  //Sukumar Added for Digital
				    $("#Eligible-Offer-AppletName-div").hide();  //Sukumar Added for Digital
                   $("#Orders-AppletName-div").hide();
                   $("#Oppor-AppletName-div").hide();
                   $("#HDSR-AppletName-div").hide();				
                   $("#SR-AppletName-div").hide();
                   $("#Activities-AppletName-div").hide();
                   $("#Inn-Circle-AppletName-div").hide();
                   $("#Itemlookup-AppletName-div").hide();
                   //SWAGH:10192023:SFSTRY0003043
                   //$("#Campaigns-AppletName-div").hide();
                   $("#SC-360-Finance").hide();
                   $("#SC-360-SalesOrder").hide();
                   $("#SC-360-Convert").show();
               }else{
                   $("#Prof-Info-AppletName-div").show();
                   $("#Cons-Notes-AppletName-div").show();
                   $("#Assets-AppletName-div").show();
				   $("#Digital-Assets-AppletName-div").hide(); //MSukumar hide for DS Sepetember 
				   $("#Additional-Sleeper-AppletName-div").hide(); //MSukumar hide for DS Sepetember 
				   $("#Eligible-Offer-AppletName-div").show();
                   $("#Orders-AppletName-div").show();
                   $("#Oppor-AppletName-div").show();
                   $("#HDSR-AppletName-div").show();				
                   $("#SR-AppletName-div").show();
                   $("#Activities-AppletName-div").show();
                   $("#Inn-Circle-AppletName-div").show();
                   $("#Itemlookup-AppletName-div").show();
                   //SWAGH:10192023:SFSTRY0003043
                   //$("#Campaigns-AppletName-div").show();
                   //$("#Campaigns-AppletName-div").show();
                   $("#SC-360-Finance").show();
                   $("#SC-360-SalesOrder").show();
                   $("#SC-360-Convert").hide(); 
               }
               
               // Start-- profile-name mark up
               var setProfName = '';
               setProfName = '<p class="SC-360-profile-name no-margin" style="text-align: center;">' + ConFormApp_RS[0]["M/M"] + ' ' + ConFormApp_RS[0]["First Name"] + ' ' + ConFormApp_RS[0]["Last Name"] + '</p>';
               //NTHARRE:07-APR-2021: added check and creoss images as per the STRY0090901
               //Added Customer Category filed 
               //setProfName += '<p class="SC-360-profile-name customer-name no-margin">'+ConFormApp_RS[0]["SC Customer Category"]+'</p>';
               //Added by SJAKKIDI to display community name
               if(ConFormApp_RS[0]["Community"] != "" && ConFormApp_RS[0]["Community"] != null && ConFormApp_RS[0]["SC Sub Community"] != "" && ConFormApp_RS[0]["SC Sub Community"] != null){
               setProfName += '<p class="SC-360-profile-name customer-name no-margin">'+ConFormApp_RS[0]["Community"]+' - '+ConFormApp_RS[0]["SC Sub Community"]+'</p>';
               }
               else{
               setProfName += '<p class="SC-360-profile-name customer-name no-margin">'+ConFormApp_RS[0]["Community"]+'</p>';
               }
               setProfName += '<p class="SC-360-profile-name customer-name no-margin"><img src="" id="SC-profile-Insider" class=""><span class="SC-profile-checkmarks">'+ConFormApp_RS[0]["SN Customer Category Calc"]+'</span></p>';
               setProfName += '<p class="SC-360-profile-name customer-name no-margin"><img src="" id="SC-profile-IC" class=""><span class="SC-profile-checkmarks">Sleep Number Rewards Member</span></p>';
              // setProfName += '<p class="SC-360-profile-name customer-name no-margin"><img src="" id="SC-profile-IC" class=""><span class="SC-profile-checkmarks">'+ConFormApp_RS[0]["User Type"]+'</p>';
               if(ConFormApp_RS[0]["User Type"]== "Digital Products Active")
			   {
				  $("#SC-product-Insider").attr("src","images/custom/IC-Insider-Check.png");
				 setProfName += '<p class="SC-360-profile-name customer-name no-margin"><img src="" id="SC-product-Insider" class=""><span class="SC-profile-checkmarks">Digital Products</p>';  
			   }
			   if(ConFormApp_RS[0]["User Type"]== "Digital Products Cancelled")
			   {
				   $("#SC-product-Insider").attr("src","images/custom/IC-Insider-Cross.png");
					setProfName += '<p class="SC-360-profile-name customer-name no-margin"><img src="" id="SC-product-Insider" class=""><span class="SC-profile-checkmarks">Digital Products</p>';  
			   }
               $(".SC-360-profile-name").html(setProfName);
			   if(ConFormApp_RS[0]["User Type"]== "Digital Products Active")
			   {
				  $("#SC-product-Insider").attr("src","images/custom/IC-Insider-Check.png");
			   }
			   if(ConFormApp_RS[0]["User Type"]== "Digital Products Cancelled")
			   {
				   $("#SC-product-Insider").attr("src","images/custom/IC-Insider-Cross.png");
			   }
               
               if(ConFormApp_RS[0]["SN Customer Category Calc"] == "Smart Sleeper")
                   $("#SC-profile-Insider").attr("src","images/custom/IC-Insider-Check.png");
               else
                   $("#SC-profile-Insider").attr("src","");
                   //$("#SC-profile-Insider").attr("src","images/custom/IC-Insider-Cross.png");
               
               if(ConFormApp_RS[0]["SC CrowdTwist UserId"] !="" && ConFormApp_RS[0]["SC CrowdTwist UserId"] != null && ConFormApp_RS[0]["SC CrowdTwist UserId"] != undefined){
                   $("#SC-profile-IC").attr("src","images/custom/IC-Insider-Check.png");
               }
               else{
                   $("#SC-profile-IC").attr("src","images/custom/IC-Insider-Cross.png");
               }
               // End-- profile-name mark up
               
               // start -- customer Details mark up
               var Order_RS = Orders_PM.Get("GetRecordSet");
               //13-MAY-2019 : VALLA : Passing Order Recordset to show most recent order in contact Details
               var divisionType = SiebelApp.S_App.GetProfileAttr('SC Primary Division Type');
               var divisionSubType = SiebelApp.S_App.GetProfileAttr('SC Primary Division Sub Type');
               var custDetails_Markup = Contact360Markup.CustomerDetailsMarkupFn(ConFormApp_RS,Order_RS,isiFitRecord,divisionType,divisionSubType);
               $("#Cust-Details-Applet").html(custDetails_Markup);
               
               //VALLA:Added for Synchrony change
               UpdateAvailableAmount();
               
               $(document).on('click', '#cellularmessageicon', function(){
                   $("#SC-Other-App-popup").modal({
                       backdrop: 'static'
                   });
                   $("#SC-Other-App-popup").css({
                       "display": "flex",
                       "justify-content": "center",
                       "align-items": "center"
                   });
               });
               
               $(document).on('click', '#sc-App-No', function(){
                   $("#SC-Other-App-popup").modal('hide');
                   
               });
               $(document).on('click', '#sc-App-Yes', function(){
                       ConFormApp_RS = ContactFormApplet_PM.Get("GetRecordSet");
                       var PHONENUMBER = ConFormApp_RS[0]["Cellular Phone #"];
                       var FIRSTNAME = ConFormApp_RS[0]["First Name"];
                       var LASTNAME =  ConFormApp_RS[0]["Last Name"]
                       window.open("https://app.zipwhip.com/messaging/"+PHONENUMBER+"%20"+FIRSTNAME+"%20"+LASTNAME+"");
                       var sStoreNum = SC_OUI_Methods.SCGetProfileAttrValue('SC Store Number');
                       var inPS = SiebelApp.S_App.NewPropertySet();
                       var outPS = SiebelApp.S_App.NewPropertySet();
                       inPS.SetProperty("Row Id", ConFormApp_RS[0]["Id"]);
                       inPS.SetProperty("StoreNum", sStoreNum);
                       inPS.SetProperty("ZipWhipURL","https://app.zipwhip.com/messaging/"+PHONENUMBER+"%20"+FIRSTNAME+"%20"+LASTNAME+"");
                       var Bservice = SiebelApp.S_App.GetService("SC Automatic Contact Updates"); //get service
                       outPS = Bservice.InvokeMethod("CreateZipWhipActivity", inPS);
                       $("#SC-Other-App-popup").modal('hide');
               });
               //End-- customer Details mark up
               
               $(document).on('click', "#zipwhipactivity", function (e) {
                       ConFormApp_RS = ContactFormApplet_PM.Get("GetRecordSet");
                       var PHONENUMBER = ConFormApp_RS[0]["Cellular Phone #"];
                       var FIRSTNAME = ConFormApp_RS[0]["First Name"];
                       var LASTNAME =  ConFormApp_RS[0]["Last Name"]
                       window.open("https://app.zipwhip.com/messaging/"+PHONENUMBER+"%20"+FIRSTNAME+"%20"+LASTNAME+"");
               });
               
               if(isiFitRecord != "Y"){
                   //Start -- Customer Interaction Maru ups
                   var cust_inter_markup = Contact360Markup.CustomerInteractionMarkupFn(ConFormApp_RS);
                   $("#Cust-inter-Applet").html(cust_inter_markup);
                   
                   //End -- Customer Interaction Maru ups
   
                   //Start -- Profile Information Mark ups
                   var prof_Info_markup = Contact360Markup.ProfileInfoMarkupFn(ConFormApp_RS);
                   $("#Prof-Info-Applet").html(prof_Info_markup);
                   //End -- Profile Information Mark ups
   
                   //Start -- Consolidated Notes Mark ups
                   var cons_Notes_Markup = Contact360Markup.ConsolidatedNoteMarkupFn();
                   $("#Cons-Notes-Applet").html(cons_Notes_Markup);
                   //End -- Consolidated Notes Mark ups
   
                   //Start: Pagination buttons markup for Consolidated Notes
                   var markup = "";
                   markup += '<li id="PrevConsolidate"><img src="images/custom/previous.png" /></li>';
                   markup += '<li id="NextConsolidate"><img src="images/custom/next.png" /></li>';
                   $("#cons-pagenation").html(markup);
                   //End: Pagination buttons markup for Consolidated Notes
   
                   //Start: Getting Consolidated Notes Records
                   consolidatedNotes_GetRecords(parentobj);
                   uniquevalues();
                   //End: Getting Consolidated Notes Records
   
                   //Start -- Assetts Mark ups
                   var assets_markup = Contact360Markup.AssetsMarkupFn();
                   $("#Assets-Applet").html(assets_markup);
                   //End -- Assets Mark ups
                   assets_GetRecords();
                   SC_OUI_Methods.PrimaryButton(Assets_PM, 'assets-pagenation');
				    //Sukumar Added for Digital
				   //Start -- Assetts Mark ups
                   var digital_assets_markup = Contact360Markup.DigitalAssetsMarkupFn();
                   $("#Digital-Assets-Applet").html(digital_assets_markup);
                   //End -- Assets Mark ups
                   digital_assets_GetRecords(); //Sukumar Need add method
                   SC_OUI_Methods.PrimaryButton(Digital_Assets_PM, 'digital-assets-pagenation');
				   //Sukumar Added for Additional Sleeper				   
                   var additional_sleeper_markup = Contact360Markup.AdditionalSleeperMarkupFn();
                   $("#Additional-Sleeper-Applet").html(additional_sleeper_markup);
                   additional_sleeper_GetRecords(); //Sukumar Need add method
                   SC_OUI_Methods.PrimaryButton(Additional_Sleeper_PM, 'additional-sleeper-pagenation');

				    //Sukumar Added for Additional Sleeper				   
                   var Eligible_Offer_markup = Contact360Markup.EligibleOfferMarkupFn();
                   $("#Eligible-Offer-Applet").html(Eligible_Offer_markup);
                   Eligible_Offer_GetRecords(); //Sukumar Need add method
                   SC_OUI_Methods.PrimaryButton(Eligible_Offer_PM, 'Eligible-Offer-pagenation');
   
                   //Start -- Orders Mark ups
                   var orders_markup = Contact360Markup.OrdersMarkupFn();
                   $("#Orders-Applet").html(orders_markup);
                   //End -- Orders Mark ups
                   orders_GetRecords();
                   SC_OUI_Methods.PrimaryButton(Orders_PM, 'orders-pagenation');
   
                   //Start -- HDSR Mark ups
                   var hdsr_markup = Contact360Markup.HDSRMarkupFn();
                   $("#HDSR-Applet").html(hdsr_markup);
                   //End -- HDSR Mark ups
                   HDSR_GetRecords();
                   SC_OUI_Methods.PrimaryButton(HDSR_PM, 'hdsr-pagenation');
                   
                   //Start -- Opportunity Mark ups
                   var opportunity_markup = Contact360Markup.OpportunityMarkupFn();
                   $("#Oppor-Applet").html(opportunity_markup);
                   //End -- Opportunity Mark ups
                   opportunities_GetRecords();
                   SC_OUI_Methods.PrimaryButton(Opportunity_PM, 'opp-pagenation');
                   
                   //Start -- SR Mark ups
                   var serv_req_markup = Contact360Markup.SRMarkupFn();
                   $("#SR-Applet").html(serv_req_markup);
                   //End -- SR Mark ups
                   SR_GetRecords();
                   SC_OUI_Methods.PrimaryButton(SR_PM, 'serv-req-pagenation');
   
                   //Start -- Activities Mark ups
                   var customerType = SC_OUI_Methods.SCGetProfileAttrValue('SC Primary Division Type');
                   var activities_markup = Contact360Markup.ActivityMarkupFn(customerType);
                   $("#Activities-Applet").html(activities_markup);
                   //End -- Activities Mark ups
                   activities_GetRecords();
                   SC_OUI_Methods.PrimaryButton(Activities_PM, 'activities-pagenation');
   
                   //Start -- Inner Circle Rewards Mark ups
                   var InnerCircle_markup = Contact360Markup.ICRMarkupFn();
                   $("#Inn-Circle-Applet").html(InnerCircle_markup);
                   //End -- Inner Circle Rewards Mark ups
                   innerCircle_GetRecords();
                   //NGOLLA: D.No:562 Added Pagination for ICR 
                   SC_OUI_Methods.PrimaryButton(Inn_Circle_PM, 'ICR-pagenation');
                   //SC_OUI_Methods.PrimaryButton(Inn_Circle_PM,'innercricle','innercircle-pagenation');
                   $(".SC-360-item-value").prop('readonly', true);
                   //for item lookup
                   var Item_markup = Contact360Markup.ItemlookupMarkupFn();
                   $("#Item-lookup-Applet").html(Item_markup);
                    //Start: on focus out, change the phone number to US format				
                   SC_OUI_Methods.PH_USFormat("MobilePhone");
                   SC_OUI_Methods.PH_USFormat("SecondaryPhone");
                   SC_OUI_Methods.PH_USFormat("TeritaryPhone");
                   //End: on focus out, change the phone number to US format
                   //SWAGH:10192023:SFSTRY0003043
                   /*
                   //Start -- Campaigns Mark ups 
                   var campaigns_markup = Contact360Markup.CampaignMarkupFn();
                   $("#Campaigns-Applet").html(campaigns_markup);
                   //End -- Campaigns Mark ups
                   campaigns_GetRecords();
                   SC_OUI_Methods.PrimaryButton(Campaigns_PM, 'Campaigns-pagenation');
                   */
                   //NTHARRE:02JUL2021:To hide the functionality for store users based on lov - SFSTRY0001090
                   var StoreUser =  SC_OUI_Methods.SCGetProfileAttrValue('SC Store User');
                   var searchExpr = "[Type] = 'SC_IS_STORE_LEAD' AND [Active] = 'Y'";
                   var sortSpec = "Order By";
                   var StoreLead = SC_OUI_Methods.SCGetOrderLoVs(searchExpr);
                   if(StoreUser == "Y" && StoreLead =="No"){
                       $("#SC-360-customer-interaction-edit").hide();
                       $("#SC-360-profile-information-edit").hide();
                       $("#SC360ActEditIcon").hide();
                   }
                   else{
                       $("#SC-360-customer-interaction-edit").show();
                       $("#SC-360-profile-information-edit").show();
                       $("#SC360ActEditIcon").show();
                   }
               }else{
                   SC_OUI_Methods.PH_USFormat("MobilePhone");
                   SC_OUI_Methods.PH_USFormat("SecondaryPhone");
                   SC_OUI_Methods.PH_USFormat("TeritaryPhone");
               }
               
                var phoneNumber = ConFormApp_RS[0]["Cellular Phone #"];
                if(phoneNumber != ""){
                   $('#cellularmessageicon').show()
                }else{
                   $('#cellularmessageicon').hide()
                }
               
               //setting default checkbox values
               $(document).ready(function () {
   
                   if (ConFormApp_RS[0]["Suppress All Calls"] == 'Y') {
                       $("#cin-dnc").prop("checked", true);
                   }
   
                   if (ConFormApp_RS[0]["Suppress All Emails"] == 'Y') {
                       $("#cin-dne").prop("checked", true);
                   }
   
                   if (ConFormApp_RS[0]["Suppress All Mailings"] == 'Y') {
                       $("#cin-dnm").prop("checked", true);
                   }
                   if (ConFormApp_RS[0]["SC QVC Customer Opt In"] == 'Y') {
                       $("#cin-qvc").prop("checked", true);
                   }
                   if (ConFormApp_RS[0]["SC DNC Do Not Call"] == 'Y') {
                       $("#cin-ndnc").prop("checked", true);
                   }
                   //NTHARRE: 12/10/2020: Added code as part of  story STRY0030811
                   if (ConFormApp_RS[0]["SC Text Opt In"] == 'Y') {
                       $("#cin-toin").prop("checked", true);
                   }
                   var mblNumb = ConFormApp_RS[0]["Cellular Phone #"];
                   SC_OUI_Methods.PH_USFormat_Save("cd-Mobile-Phone", mblNumb);
   
                   var hmNumb = ConFormApp_RS[0]["Home Phone #"];
                   SC_OUI_Methods.PH_USFormat_Save("cd-Secondary-Phone", hmNumb);
   
                   var wrkNumb = '';
                   wrkNumb = ConFormApp_RS[0]["Work Phone #"];
                   SC_OUI_Methods.PH_USFormat_Save("cd-Secondary-Phone2", wrkNumb);
   
               });
   
           /*//Start: To hide SKU Description seach box
                   var storeuser = SiebelApp.S_App.GetProfileAttr("SC Store User");
                   if (storeuser=='Y') { //checking call centre users or not
                   $(".SC-360-sku-block").hide();
                   }
               //End: To hide SKU Description seach box
               //start:To show SKU Description seach box
               var Lov=SC_OUI_Methods.GetLOVs("[Type]= 'DIVISION_TYPE' and [Active] = 'Y' and [Name]='DIRECT'","Order By");
                   var Lov1=SC_OUI_Methods.GetLOVs("[Type]= 'DIVISION_TYPE' and [Active] = 'Y' and [Name]='ECOM'","Order By");
                   var GetProfileAttr = SiebelApp.S_App.GetProfileAttr('SC Primary Division Type');
                   if(GetProfileAttr == Lov[0]||GetProfileAttr == Lov1[0]){
                       //if user is  CS user,showing SKU Description 
                       $(".SC-360-sku-block").show();
                   }else{
                       $(".SC-360-sku-block").hide();
                   }
                   //End: To show SKU Description seach box*/
   
               //Start:: To restore pinned tabs on refresh
               /*var pinnedIds_Loc = localStorage.getItem(sLogUserNamePinids);
               localStorage.setItem(sLogUserNamePinids, "");
               if(pinnedIds_Loc!=null){
               var pinnedIds = pinnedIds_Loc.split(',');
                   for (var key in appletNames) {
                       //SiebelJS.Log("Key is :::"+key);
                       for (var i = 0; i < pinnedIds.length; i++) {
                           if (pinnedIds[i] == key)
                               document.getElementById(key).click();
   
                       }
                   }
               }*/
               //SBOORLA:added code for Pin/unpin UserPrefernces
               /*var Custom_Service="",Input_BS="",Out_BS="",pinnedIds_Loc;
               Custom_Service = SiebelApp.S_App.GetService("SC Custom Query");
               Input_BS = SiebelApp.S_App.NewPropertySet();
               Out_BS = SiebelApp.S_App.NewPropertySet();
               searchfields = "Cosmetics/ContactPinUnpin";
               Input_BS.SetProperty("BO", "User Preferences");
               Input_BS.SetProperty("BC", "User Preferences");
               Input_BS.SetProperty("SearchSpecification", "");
               Input_BS.SetProperty("SortSpecification", "");
               Input_BS.SetProperty("ReqNoOfRecords", "");
               Input_BS.SetProperty("FieldsArray", searchfields);
               Out_BS = Custom_Service.InvokeMethod("Query", Input_BS);
               var Child_BS = Out_BS.GetChild(0);
               var BS_Data = Child_BS.GetProperty("OutputRecordSet");
               if(BS_Data!="}"){
                       var ResArray = new Array;
                       ResArray = BS_Data.split(";");
                       
                           jsonRes = JSON.parse(ResArray[0]);
                           pinnedIds_Loc=jsonRes["Cosmetics/ContactPinUnpin"];
                           SiebelJS.Log("jsonSK"+jsonRes["Cosmetics/ContactPinUnpin"]);
                           pinnedIds_Loc=pinnedIds_Loc.split("_");
               }*/
               SiebelJS.Log("userPinIds"+User_pinnedIds_Loc);
               if(isiFitRecord != "Y"){
                   for (var key in appletNames) {
                       //SiebelJS.Log("Key is :::"+key);
                       for (var i = 0; i < User_pinnedIds_Loc.length; i++) {
                           if (User_pinnedIds_Loc[i] == key)
                               document.getElementById(key).click();
   
                       }
                   }
               }
               
               if(savePinId=="Y"){
                   savePinId="N";
                   /*var Bservice = '', inPS = '', outPS = '';
                   var fieldvalues="";
                   for(var i=0;i<pinids.length;i++)
                       if(pinids.length!=(i+1))
                           fieldvalues+=pinids[i]+"_";
                       else
                           fieldvalues+=pinids[i]
                   var fieldnames="Cosmetics/ContactPinUnpin";
                   inPS = SiebelApp.S_App.NewPropertySet();
                   outPS = SiebelApp.S_App.NewPropertySet();
                   inPS.SetProperty("BO","User Preferences");
                   inPS.SetProperty("BC","User Preferences");
                   inPS.SetProperty("FieldsArray",fieldnames );
                   inPS.SetProperty("ValuesArray",fieldvalues);
                   inPS.SetProperty("SearchSpecification","" );
                   Bservice = SiebelApp.S_App.GetService("SC Custom Query Simplified"); //get service
                   outPS = Bservice.InvokeMethod("Insert", inPS);*/
               }
               
               //End:: To restore pinned tabs on refresh
               $( "div#SC-360-RightContainer" ).scrollTop( 0 );
               //Start: This is for Profile incomplete scenario
               profileIncompleteIndicator();
               //End: This is for Profile incomplete scenario
   
               //Start: Hiding Employee number Code
               SC_OUI_Methods.Hide_EmployeeCode("cd-Employee-Number");
               //End: Hiding Employee number Code
               //editing and saving detailed description  field
                   $(document).on("focusout","#sr-360-table tr",function() {
                       var Appletid_sr=SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact 360 Service Request List Applet OUI"].GetPModel().Get("GetFullId");
                       SiebelJS.Log("Appletid_sr:"+Appletid_sr);
                       var SR_appletSeq=Appletid_sr[Appletid_sr.length -1];
                       SiebelJS.Log("SR_appletSeq:"+SR_appletSeq);
                       var comments_id = $(this).attr('id');
                       SiebelJS.Log("comments_id:"+comments_id);
                       var comment_att = document.getElementById("srcomment"+comments_id).value;
                       SiebelJS.Log("comment_att:"+comment_att);
                       comments_id = parseInt(comments_id)+1;
                        //setTimeout(function() {
                       $("#s_"+SR_appletSeq+"_l tr#"+comments_id).trigger("click");
                       //},1000);
                       SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact 360 Service Request List Applet OUI"].GetBusComp().SetFieldValue("Description",comment_att);
                       SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact 360 Service Request List Applet OUI"].InvokeMethod("WriteRecord");
                   });
                   setInterval(function(){
                       if($(".siebui-icon-phone-outbound").length>0)
                           $('.phone-360').show();
                       else
                           $('.phone-360').hide();
                    }, 3000);
   
           } //Close -- BindData
   
           SCContact360ViewPR.prototype.BindEvents = function () {
                    SiebelAppFacade.SCContact360ViewPR.superclass.BindEvents.apply(this, arguments);
                    //SiebelJS.Log("Contact 360 View PR --BindEvents");
                    //sushma 19-07-2018:Added for Resizing CTI Toolbar
                      $(document).on('click','#commPanelDockToShowUnpin',function(){
                        $("#CommunicationPanelContainer").css("cssText", "padding-top: 0px !important;");
                      });
                      $(document).on('click','#commPanelDockToShowPin',function(){
                          $("#CommunicationPanelContainer").css("cssText", "padding-top: 77px !important;");
                     });
                     
                     /*$(document).on('click','#SC-360-Convert',function(e){
                         $("#SC-add-contact").modal({
                             backdrop: 'static'
                          });
                         
                     });*/
                     
                     //SNARRA:27052019 Added code for Close
                    
                      $(document).on('click','#SC-SO-P2PE-ok',function(){
                        localStorage.setItem("IsP2PECustom","N");
                          $("#SC-SO-P2PE-change").modal('hide');
                     });
                     //SNARRA:29-10-2018 Start: show CTI Toolbar
                       $(document).on('click','#SC-ANI-CTItool',function() {
                           $(this).find('img').toggle();
                           //Commented for IP23 by peeyush.kumar on Dec 5 2023
          // $('#tb_1')[0].click();
          //Added for IP23 by peeyush.kumar on  Dec 5 2023
          $("li[name='Toggle Communication Panel']").click();
                           setTimeout(function(){
                            $('#commPanelDockToShowpin').click();
                           },500);
                       });
                       $(document).on('click','#commPanelCloseToggle',function(){
                           $("#SC-ANI-CTItool").find('img').toggle();
                           $(".SC-data-container").css("position","absolute");
                       });
                       
                       //SNARRA 28-02-2019 Added code for CTIToolbar Issue
                        $(".modal").on('show.bs.modal', function () {
                            if($("#sc-orange").is(":visible")){
                                   toolbarflag = "Y";
                               }else{
                                   toolbarflag = "N";
                               }
                          });
   
                       $(".modal").on('hide.bs.modal', function () {
                           if(toolbarflag=="Y"){
                               $(".SC-data-container").css("position","inherit");
                               localStorage.setItem('CTIToolbar', "Y");
                           }else{
                               localStorage.setItem('CTIToolbar', "N");
                           }
                       }); 
                       
                    //Start:on click of last name drill down to Activities view
                    $(document).on("click",".sc-navigate-contact",function(){
                       localStorage.setItem('whitescreen', 1);
                       SiebelApp.S_App.GotoView("Contact Detail View","","","");
                   });
			
                   //End:on click of last name drill down to Activities view 
                    var war_NameId_json = '', sku_NameId_json = '';
                    var searchExpr, sortSpec, lovArray, lovValue;
                    $(document).ready(function () {
   
                        //This is for customer details card
                        var appletInstance = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact Form Applet"];
                        var ContactFormApp_BC = appletInstance.GetBusComp();
   
                        var ContactId = ContactFormApp_BC.GetFieldValue("Id");
                       
   
                        $(document).on('click', "#SC-360-customer-details-edit", function () {
                            $(this).hide();
                           //document.getElementById("cd-Last-Name").disabled = true;
                           //$("#cd-Last-Name").unbind("click");
                           //document.getElementById("cd-Last-Name").addEventListener("click", function(event){
                               //event.preventDefault()
                           //});
                           $("#cd-Last-Name").removeClass("sc-navigate-contact");
                            //Starting -- Adding dropdowns
                           
                            //Start: For Prefix
                            searchExpr = '',
                            sortSpec = '',
                            lovArray = '',
                            lovValue = '';
                            searchExpr = "[Type]= 'MR_MS' AND [Active]='Y'";
                            sortSpec = '';
                            lovArray = SC_OUI_Methods.SCGetOrderLoVs(searchExpr);
   
                            //SiebelJS.Log("lovArray::"+lovArray);
                            lovValue += '  <label class="SC-360-item-label no-margin" id="cd-prefix-label">Title:</label>';
                           lovValue += '<select class="SC-360-item-value SC-360-cd" name="" id="cd-Prefix" >';
                            //lovValue += ' <option>' + ContactFormApp_BC.GetFieldValue("M/M") + '</option>';
                           lovValue += ' <option></option>';
                            for (var r = 0; r < lovArray.length; r++) {
                                if (lovArray[r] == ContactFormApp_BC.GetFieldValue("M/M")){
                                   lovValue += ' <option selected>' + ContactFormApp_BC.GetFieldValue("M/M") + '</option>';}
                                   else
                               lovValue += '<option value="'+lovArray[r]+'">' + lovArray[r] + '</option>';
                            }
                            lovValue += '</select>';
                           $('#cd-prefix-div').html(lovValue);
   
                            //End: For Prefix
   
                            //Start: For Suffix
   
                            searchExpr = '',
                            sortSpec = '',
                            lovArray = '',
                            lovValue = '';
                            searchExpr = "[Type]= 'FINS_SUFFIX_MLOV' AND [Active]='Y'";
                            sortSpec = "Order By";
                            lovArray = SC_OUI_Methods.SCGetOrderLoVs(searchExpr);
   
                            //SiebelJS.Log("lovArray::"+lovArray);
                            lovValue += '  <label class="SC-360-item-label no-margin">Suffix:</label>';
                           lovValue += '<select class="SC-360-item-value SC-360-cd" name="" id="cd-Suffix">';
                            //lovValue += ' <option>' + ContactFormApp_BC.GetFieldValue("Suffix") + '</option>';
                           lovValue += ' <option></option>';
                            for (var r = 0; r < lovArray.length; r++) {
                                if (lovArray[r] == ContactFormApp_BC.GetFieldValue("Suffix")){
                                   lovValue += ' <option selected>' + ContactFormApp_BC.GetFieldValue("Suffix") + '</option>';}
                                   else{	
                               lovValue += '<option value="'+lovArray[r]+'">' + lovArray[r] + '</option>';
                                   }
                            }
                            lovValue += '</select>';
                           $('#cd-Suffix-div').html(lovValue);
   
                            //End: For Suffix
   
   
                            //Start: For Prefered communication channel
   
                            searchExpr = '',
                            sortSpec = '',
                            lovArray = '',
                            lovValue = '';
                            searchExpr = "[Parent]= 'Package' AND [Active]='Y' AND [Type]='OFFER_MEDIA'";
                            sortSpec = "Order By";
                            lovArray = SC_OUI_Methods.SCGetOrderLoVs(searchExpr);
   
                            //SiebelJS.Log("lovArray::"+lovArray);
                            lovValue += ' <label class="SC-360-item-label no-margin">Preferred Contact Method:</label>';
                            //custDetails_Markup+=' <input type="text" name="" class="SC-360-item-value SC-360-cd" id="cd-Customer-Type" value="'+ConFormApp_RS[0]["Type"]+'">';
                            lovValue += '<select class="SC-360-item-value SC-360-cd" name="" id="cd-Preferred-Contact-Method">';
                            //lovValue += ' <option>' + ContactFormApp_BC.GetFieldValue("Preferred Communications") + '</option>';
                           lovValue += ' <option></option>';
                            for (var r = 0; r < lovArray.length; r++) {
                                //var reecord=''; reecord = JSON.parse(lovArray[r]);
                                if (lovArray[r] == ContactFormApp_BC.GetFieldValue("Preferred Communications")){
                                   lovValue += ' <option selected>' + ContactFormApp_BC.GetFieldValue("Preferred Communications") + '</option>';}
                                   else
                               lovValue += '<option value="'+lovArray[r]+'">' + lovArray[r] + '</option>';
                            }
                            lovValue += '</select>';
                           $('#cd-Preferred-Contact-Method-div').html(lovValue);
   
                            //End:For Prefered communication channel
   
                            //Start: Sleep Number
   
                            searchExpr = '',
                            sortSpec = '',
                            lovArray = '',
                            lovValue = '';
                            searchExpr = "[Type]= 'SC_SLEEP_NUM' AND [Active]='Y'";
                            sortSpec = "Order By";
                            lovArray = SC_OUI_Methods.SCGetOrderLoVs(searchExpr);
   
                            //SiebelJS.Log("lovArray::"+lovArray);
                            lovValue += '  <label class="SC-360-item-label no-margin">Sleep Number Setting:</label>';
                           lovValue += '<select class="SC-360-item-value SC-360-cd" name="" id="cd-Sleep-Number" >';
                            //lovValue += ' <option>' + ContactFormApp_BC.GetFieldValue("SC Sleep Number") + '</option>';
                           lovValue += ' <option></option>';
                            for (var r = 0; r < lovArray.length; r++) {
                               if (lovArray[r] == ContactFormApp_BC.GetFieldValue("SC Sleep Number")){
                                   lovValue += ' <option selected>' + ContactFormApp_BC.GetFieldValue("SC Sleep Number") + '</option>';}
                                   else
                               lovValue += '<option value="'+lovArray[r]+'">' + lovArray[r] + '</option>';
                            }
                            lovValue += '</select>';
                           $('#cd-Sleep-Number-div').html(lovValue);
   
                            //End: Sleep Number
   
                            //start: partner sleep number
   
                            //lovArray = '',
                            lovValue = '';
   
                            lovValue += '  <label class="SC-360-item-label no-margin">Partner Sleep Number Setting:</label>';
                           lovValue += '<select class="SC-360-item-value SC-360-cd" name="" id="cd-Partner-Sleep-Number">';
                            //lovValue += ' <option selected>' + ContactFormApp_BC.GetFieldValue("SC Partner Sleep Number") + '</option>';
                           lovValue += ' <option></option>';
                            for (var r = 0; r < lovArray.length; r++) {
                                
                               if (lovArray[r] == ContactFormApp_BC.GetFieldValue("SC Partner Sleep Number")){
                                   lovValue += ' <option selected>' + ContactFormApp_BC.GetFieldValue("SC Partner Sleep Number") + '</option>';}
                                   else
                               lovValue += '<option value="'+lovArray[r]+'">' + lovArray[r] + '</option>';
                           }
                           
                            lovValue += '</select>';
                           $('#cd-Partner-Sleep-Number-div').html(lovValue);
   
                            //End: Partner sleep number
                             
                             //Start: Sleep Number
   
                            searchExpr = '',
                            sortSpec = '',
                            lovArray = '',
                            lovValue = '';
                            searchExpr = "[Type]= 'SC_BLKLSTD_RSN' AND [Active]='Y'";
                            sortSpec = "Order By";
                            lovArray = SC_OUI_Methods.SCGetOrderLoVs(searchExpr);
   
                            //SiebelJS.Log("lovArray::"+lovArray);
                            lovValue += '  <label class="SC-360-item-label no-margin">Blocked List Reason:</label>';
                           lovValue += '<select class="SC-360-item-value SC-360-cd" name="" id="cd-Blacklisted-Reason" >';
                            //lovValue += ' <option>' + ContactFormApp_BC.GetFieldValue("SC Sleep Number") + '</option>';
                           lovValue += ' <option></option>';
                            for (var r = 0; r < lovArray.length; r++) {
                               if (lovArray[r] == ContactFormApp_BC.GetFieldValue("SC Blackisted Reason")){
                                   lovValue += ' <option selected>' + ContactFormApp_BC.GetFieldValue("SC Blackisted Reason") + '</option>';}
                                   else
                               lovValue += '<option value="'+lovArray[r]+'">' + lovArray[r] + '</option>';
                            }
                            lovValue += '</select>';
                           $('#cd-add-balcklisted-reason').html(lovValue);
   
                            //End: Sleep Number
                           
   
                            //Make MVG Field as editable
   
                            document.getElementById("MVG").style.display = "block";
                           //to highlight and copy fields
                        $(".SC-360-cd").prop('readonly', false);
                        $(".SC-360-cd").addClass('add-pointer-events');
                            $(".SC-360-cd").css({
                                "border-bottom": '1px solid #b2b2b2',
                               //"pointer-events": "all"
                            });
                        $("#cd-First-Name").removeAttr('title');
                         $("#cd-Last-Name").removeAttr('title');
                          $("#cd-Middle-Name").removeAttr('title');
                          $("#cd-Email-Address").removeAttr('title');
                        $("#cd-Last-Name").css('cursor','text');
                            $("#SC-360-cd-save").show();
   
                        }); //close of Edit functionality
   
                                   
                        //This is for refreshing the address selected from MVG Applet
                        $(document).on('click', 'button[title="Contact Addresses:OK"]', function () {
                            //$('Contact Addresses:OK').click(function(){
                            //$('input[title="Contact Addresses:OK"]').click(function(){
   
                            appletInstance = '';
                            appletInstance = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact Form Applet"];
                            ContactFormApp_BC = '';
                            ContactFormApp_BC = appletInstance.GetBusComp();
                            var newSetAfterCommit_address = '';
                            newSetAfterCommit_address = ContactFormApp_BC.GetRecordSet();
   
                            $("#cd-Address").val("");
                            $("#cd-Address").val(newSetAfterCommit_address[0]["Personal Street Address"]);
                            $("#cd-City").val("");
                            $("#cd-City").val(newSetAfterCommit_address[0]["Personal City"]);
                            $("#cd-State").val("");
                            $("#cd-State").val(newSetAfterCommit_address[0]["Personal State"]);
                            $("#cd-Postal-Code").val("");
                            $("#cd-Postal-Code").val(newSetAfterCommit_address[0]["Personal Postal Code"]);
                            $("#cd-Country").val("");
                            $("#cd-Country").val(newSetAfterCommit_address[0]["Personal Country"]);
   
                        });
   
                        //Start: Logic for Saving Customer Details
                        $(document).on("click", "#SC-cd-save", function () {
                           //document.getElementById("cd-Last-Name").disabled = true;
                           //$("#cd-Last-Name").bind("click");
                           //document.getElementById("cd-Last-Name").addEventListener("click", function(event){
                               //event.preventDefault()
                           //});	
                           $("#cd-Last-Name").addClass("sc-navigate-contact");
                             document.getElementById("MVG").style.display = "none";
   
                            var errorCodes = '';
                           
                           var phoneNumber =  $("#cd-Mobile-Phone").val();
                           if(phoneNumber != ""){
                               $('#cellularmessageicon').show()
                           }else{
                               $('#cellularmessageicon').hide()
                           }
                           
                           errorCodes = ErrorCodesfn.errorcodes();
                            //errorCodes = errorcodes();
   
                            //Start: For Phone Validation
                            jQuery.validator.addMethod(
                                "regex",
                                function (value, element, regexp) {
                                if (regexp.constructor != RegExp)
                                    regexp = new RegExp(regexp);
                                else if (regexp.global)
                                    regexp.lastIndex = 0;
                                return this.optional(element) || regexp.test(value);
                            },
                                "");
                            //End: For Phone Validation
   
                            $("#SC-360-Customer-Details-Form").validate({
                                rules: {
                                    SC_360_FirstName: {
                                        required: true
                                    },
                                    SC_360_LastName: {
                                        required: true
                                    },
                                    SC_360_Email: {
                                        email: true
                                    },
                                    CellPhone: {
                                        regex: /\(?[\d\s]{3}\)[\w\s][\d\s]{3}-[\d\s]{4}$/
                                    },
                                    SC_360_SecondaryPhone: {
                                        regex: /\(?[\d\s]{3}\)[\w\s][\d\s]{3}-[\d\s]{4}$/
                                    },
                                    SecondaryPhone2: {
                                        regex: /\(?[\d\s]{3}\)[\w\s][\d\s]{3}-[\d\s]{4}$/
                                    }
   
                                },
                                messages: {
                                    SC_360_FirstName: errorCodes.SC_360_FIRSTNAME,
                                    SC_360_LastName: errorCodes.SC_360_LASTNAME,
                                    SC_360_Email: errorCodes.SC_INVALID_EMAIL,
                                    CellPhone: errorCodes.SC_CELL_PHONE,
                                    SC_360_SecondaryPhone: errorCodes.SC_INVALID_HOME_PHONE,
                                    SecondaryPhone2: errorCodes.SC_WORK_PHONE
                                },
                                tooltip_options: {
                                    SC_360_FirstName: {
                                        trigger: 'focus',
                                        placement: 'bottom',
                                        html: true
                                    },
                                    SC_360_LastName: {
                                        trigger: 'focus',
                                        placement: 'bottom',
                                        html: true
                                    },
                                    SC_360_Email: {
                                        trigger: 'focus',
                                        placement: 'bottom',
                                        html: true
                                    },
                                    CellPhone: {
                                        trigger: 'focus',
                                        placement: 'bottom',
                                        html: true
                                    },
                                    SC_360_SecondaryPhone: {
                                        trigger: 'focus',
                                        placement: 'bottom',
                                        html: true
                                    },
                                    SecondaryPhone2: {
                                        trigger: 'focus',
                                        placement: 'bottom',
                                        html: true
                                    }
   
                                },
   
                                submitHandler: function (form) {
                                   //Start Loader
                                  $("body").trigger('Custom.Start');
                                 setTimeout(function() {
                                  $("#SC-360-customer-details-edit").show();
                                  //to highlight and copy fields
                                  $(".SC-360-cd").prop('readonly', true);
                                  $(".SC-360-cd").removeClass('add-pointer-events');
                                    $(".SC-360-cd").css({
                                        "border-bottom": '1px solid transparent',
                                       //"pointer-events":"none"
                                    });
                                   $("#cd-First-Name").attr('title',$("#cd-First-Name").val());
                                   $("#cd-Last-Name").attr('title',$("#cd-Last-Name").val());
                                   $("#cd-Middle-Name").attr('title',$("#cd-Middle-Name").val());
                                   $("#cd-Email-Address").attr('title',$("#cd-Email-Address").val());
                                   $("#cd-Last-Name").css('cursor','pointer');
                                   
                                   var Blacklist = $("#cd-Blacklisted").prop('checked') ? 'Y' : 'N';
                                    //SiebelJS.Log("Form submited phn validation--");
   
                                    ContactFormApp_BC.SetFieldValue("M/M", $("#cd-Prefix").val());
                                    ContactFormApp_BC.SetFieldValue("First Name", $("#cd-First-Name").val());
                                    ContactFormApp_BC.SetFieldValue("Middle Name", $("#cd-Middle-Name").val());
                                    ContactFormApp_BC.SetFieldValue("Last Name", $("#cd-Last-Name").val());
                                    ContactFormApp_BC.SetFieldValue("Suffix", $("#cd-Suffix").val());
                                    ContactFormApp_BC.SetFieldValue("Person UId", $("#cd-Customer-Num").val());
                                    ContactFormApp_BC.SetFieldValue("SC Customer Category", $("#cd-Customer-Category").val());
                                    ContactFormApp_BC.SetFieldValue("SC Sleep Number", $("#cd-Sleep-Number").val());
                                    ContactFormApp_BC.SetFieldValue("SC Partner Sleep Number", $("#cd-Partner-Sleep-Number").val());
                                    ContactFormApp_BC.SetFieldValue("Family", $("#cd-Partner-Name").val());
                                    ContactFormApp_BC.SetFieldValue("Personal Street Address", $("#cd-Address").val());
                                    ContactFormApp_BC.SetFieldValue("Personal City", $("#cd-City").val());
                                    ContactFormApp_BC.SetFieldValue("Personal State", $("#cd-State").val());
                                    ContactFormApp_BC.SetFieldValue("Personal Postal Code", $("#cd-Postal-Code").val());
                                    ContactFormApp_BC.SetFieldValue("Personal Country", $("#cd-Country").val());
                                    ContactFormApp_BC.SetFieldValue("Cellular Phone #", $("#cd-Mobile-Phone").val());
                                    ContactFormApp_BC.SetFieldValue("Home Phone #", $("#cd-Secondary-Phone").val());
                                    ContactFormApp_BC.SetFieldValue("Work Phone #", $("#cd-Secondary-Phone2").val());
                                    ContactFormApp_BC.SetFieldValue("Email Address", $("#cd-Email-Address").val());
                                    ContactFormApp_BC.SetFieldValue("Preferred Communications", $("#cd-Preferred-Contact-Method").val());
                                    ContactFormApp_BC.SetFieldValue("SC Cust HD Service Level", $("#cd-HD-Service-Level").val());
                                   ContactFormApp_BC.SetFieldValue("SC Closest Store 1", $("#cd-close-store1").val());
                                   ContactFormApp_BC.SetFieldValue("SC Closest Store 2", $("#cd-close-store2").val());
                                   ContactFormApp_BC.SetFieldValue("SC Blacklisted", Blacklist);
                                   ContactFormApp_BC.SetFieldValue("SC Blackisted Reason", $("#cd-Blacklisted-Reason").val());
                               
                                    //SiebelJS.Log("All fields are set");
   
                                    appletInstance.InvokeMethod("WriteRecord");
                                    //SiebelJS.Log("write record is done");
                                    appletInstance = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact Form Applet"];
                                    ContactFormApp_BC = appletInstance.GetBusComp();
   
                                    var newSetAfterCommit = '';
                                    newSetAfterCommit = ContactFormApp_BC.GetRecordSet();
   
                                    $("#SC-360-cd-save").hide();
   
                                    //changing values after commiting whith latest info
   
                                    var contact_info_markup = '';
                                    contact_info_markup += '  <label class="SC-360-item-label no-margin">Preferred Contact Method:</label>';
                                    contact_info_markup += '<input type="text" name="" class="SC-360-item-value SC-360-cd" id="cd-Preferred-Contact-Method" value="' + newSetAfterCommit[0]["Preferred Communications"] + '">';
                                    $('#cd-Preferred-Contact-Method-div').html(contact_info_markup);
   
                                    var custDetails_Markup = '';
                                    custDetails_Markup += '  <label class="SC-360-item-label no-margin" id="cd-prefix-label">Title:</label>';
                                    custDetails_Markup += '<input type="text" name="" class="SC-360-item-value SC-360-cd" id="cd-Prefix" value="' + newSetAfterCommit[0]["M/M"] + '">';
                                    $('#cd-prefix-div').html(custDetails_Markup);
   
                                    custDetails_Markup = '';
                                    custDetails_Markup += '<label class="SC-360-item-label no-margin">Suffix:</label>';
                                    custDetails_Markup += '<input type="text" name="" class="SC-360-item-value SC-360-cd"id="cd-Prefix" value="' + newSetAfterCommit[0]["Suffix"] + '">';
                                    $('#cd-Suffix-div').html(custDetails_Markup);
   
                                    custDetails_Markup = '';
                                    custDetails_Markup += '  <label class="SC-360-item-label no-margin">Sleep Number Setting:</label>';
                                    custDetails_Markup += '<input type="text" name="" class="SC-360-item-value SC-360-cd" id="cd-Sleep-Number" value="' + newSetAfterCommit[0]["SC Sleep Number"] + '">';
                                    $('#cd-Sleep-Number-div').html(custDetails_Markup);
   
                                    custDetails_Markup = '';
                                    custDetails_Markup += '  <label class="SC-360-item-label no-margin">Partner Sleep Number Setting:</label>';
                                    custDetails_Markup += '<input type="text" name="" class="SC-360-item-value SC-360-cd" id="cd-Partner-Sleep-Number" value="' + newSetAfterCommit[0]["SC Partner Sleep Number"] + '">';
                                    $('#cd-Partner-Sleep-Number-div').html(custDetails_Markup);
                                   
                                   custDetails_Markup = '';
                                    custDetails_Markup+='  <label class="SC-360-item-label no-margin">Blocked List Reason:</label>';
                                    custDetails_Markup+='<input type="text" name="" class="SC-360-item-value SC-360-cd" id="cd-Blacklisted-Reason" title="'+newSetAfterCommit[0]["SC Blackisted Reason"]+'" value="'+newSetAfterCommit[0]["SC Blackisted Reason"]+'">';
                                   $('#cd-add-balcklisted-reason').html(custDetails_Markup);
   
                                    $("#cd-First-Name").val(newSetAfterCommit[0]["First Name"]);
                                    //$("#cd-Middle-Name").val(newSetAfterCommit[0]["Middle Name"]);
                                    $("#cd-Last-Name").val(newSetAfterCommit[0]["Last Name"]);
   
                                    $("#cd-Customer-Num").val(newSetAfterCommit[0]["Person UId"]);
   
                                    $("#cd-Customer-Category").val(newSetAfterCommit[0]["SC Customer Category"]);
                                    $("#cd-Sleep-Number").val(newSetAfterCommit[0]["SC Sleep Number"]);
                                    $("#cd-Partner-Sleep-Number").val(newSetAfterCommit[0]["SC Partner Sleep Number"]);
                                    $("#cd-Partner-Name").val(newSetAfterCommit[0]["Family"]);
                                    $("#cd-Employee-Number").val(newSetAfterCommit[0]["Employee Number"]);
                                    $("#cd-Address").val(newSetAfterCommit[0]["Personal Street Address"]);
                                    $("#cd-City").val(newSetAfterCommit[0]["Personal City"]);
                                    $("#cd-State").val(newSetAfterCommit[0]["Personal State"]);
                                    $("#cd-Postal-Code").val(newSetAfterCommit[0]["Personal Postal Code"]);
                                    $("#cd-Country").val(newSetAfterCommit[0]["Personal Country"]);
                                   $("#cd-close-store1").val(newSetAfterCommit[0]["SC Closest Store 1"]);
                                   $("#cd-close-store2").val(newSetAfterCommit[0]["SC Closest Store 2"]);
                               
   
                                    var mblNumb = '';
                                    mblNumb = newSetAfterCommit[0]["Cellular Phone #"];
                                    SC_OUI_Methods.PH_USFormat_Save("cd-Mobile-Phone", mblNumb);
   
                                    var hmNumb = '';
                                    hmNumb = newSetAfterCommit[0]["Home Phone #"];
                                    SC_OUI_Methods.PH_USFormat_Save("cd-Secondary-Phone", hmNumb);
   
                                    var wrkNumb = '';
                                    wrkNumb = newSetAfterCommit[0]["Work Phone #"];
                                    SC_OUI_Methods.PH_USFormat_Save("cd-Secondary-Phone2", wrkNumb);
   
                                    $("#cd-Email-Address").val(newSetAfterCommit[0]["Email Address"]);
                                    $("#cd-Preferred-Contact-Method").val(newSetAfterCommit[0]["Preferred Communications"]);
                                    $("#cd-HD-Service-Level").val(newSetAfterCommit[0]["SC Cust HD Service Level"]);
   
                                    // Start-- profile-name mark up
                                    var setProfName = '';
                                    setProfName = '<p class="SC-360-profile-name no-margin" style="text-align: center;">' + newSetAfterCommit[0]["M/M"] + ' ' + newSetAfterCommit[0]["First Name"] + ' ' + newSetAfterCommit[0]["Last Name"] + '</p>';
                                   //NTHARRE:07-APR-2021:Removed Customer Category and community, added check and creoss images as per the STRY0090901
                                   //Added Customer Category filed 
                                   //setProfName += '<p class="SC-360-profile-name customer-name no-margin">'+newSetAfterCommit[0]["SC Customer Category"]+'</p>';
                                   //Added by SJAKKIDI to display community name
                                   if(newSetAfterCommit[0]["Community"] != "" && newSetAfterCommit[0]["Community"] != null && newSetAfterCommit[0]["SC Sub Community"] != "" && newSetAfterCommit[0]["SC Sub Community"] != null){
                                       setProfName += '<p class="SC-360-profile-name customer-name no-margin">'+newSetAfterCommit[0]["Community"]+' - '+newSetAfterCommit[0]["SC Sub Community"]+'</p>';
                                   }
                                   else
                                       setProfName += '<p class="SC-360-profile-name customer-name no-margin">'+newSetAfterCommit[0]["Community"]+'</p>';
                                   setProfName += '<p class="SC-360-profile-name customer-name no-margin"><img src="" id="SC-profile-Insider" class=""><span class="SC-profile-checkmarks">'+newSetAfterCommit[0]["SN Customer Category Calc"]+'</span></p>';
                                   setProfName += '<p class="SC-360-profile-name customer-name no-margin"><img src="" id="SC-profile-IC" class=""><span class="SC-profile-checkmarks">Sleep Number Rewards Member</span></p>';
                                   
                                   $(".SC-360-profile-name").html(setProfName);
                                   
                                   if(newSetAfterCommit[0]["SN Customer Category Calc"] == "Smart Sleeper")
                                       $("#SC-profile-Insider").attr("src","images/custom/IC-Insider-Check.png");
                                   else
                                       $("#SC-profile-Insider").attr("src","");
                                       //$("#SC-profile-Insider").attr("src","images/custom/IC-Insider-Cross.png");
                                   
                                   if(newSetAfterCommit[0]["SC CrowdTwist UserId"] !="" && newSetAfterCommit[0]["SC CrowdTwist UserId"] != null && newSetAfterCommit[0]["SC CrowdTwist UserId"] != undefined){
                                       $("#SC-profile-IC").attr("src","images/custom/IC-Insider-Check.png");
                                   }
                                   else{
                                       $("#SC-profile-IC").attr("src","images/custom/IC-Insider-Cross.png");
                                   }
                                    // End-- profile-name mark up
   
                                    //Start: This is for Profile incomplete scenario
                                    profileIncompleteIndicator();
                                    //End: This is for Profile incomplete scenario
                                
                                   //Hiding the Loader
                                   $("body").trigger('Custom.End');
                                   }, 1000);
                                
                               
                               } //closing submit handler
                            });
                         });
                        //End: Logic for Saving Customer Details
   
   
                        //Start: Logic for undo edited info of Customer Details
                        $(document).on("click", "#SC-cd-close", function () {
                           //document.getElementById("cd-Last-Name").disabled = true;
                           //$("#cd-Last-Name").bind("click");
                           //document.getElementById("cd-Last-Name").addEventListener("click", function(event){
                               //event.preventDefault()
                           //});
                           $("#cd-Last-Name").addClass("sc-navigate-contact");
                            document.getElementById("MVG").style.display = "none";
                            $("#SC-360-customer-details-edit").show();
                           //to highlight and copy fields
                           $(".SC-360-cd").prop('readonly', true);
                            $(".SC-360-cd").css({
                                "border-bottom": '1px solid transparent',
                               //"pointer-events":"none"
                            });
                            $("#SC-360-cd-save").hide();
   
                            var custDetails_Markup = '',assetCreat="N";
                            custDetails_Markup += '  <label class="SC-360-item-label no-margin" id="cd-prefix-label">Title:</label>';
                            custDetails_Markup += '<input type="text" name="" class="SC-360-item-value SC-360-cd" id="cd-Prefix" value="' + ContactFormApp_BC.GetFieldValue("M/M") + '">';
                            $('#cd-prefix-div').html(custDetails_Markup);
   
                            custDetails_Markup = '';
                            custDetails_Markup += '<label class="SC-360-item-label no-margin">Suffix:</label>';
                            custDetails_Markup += '<input type="text" name="" class="SC-360-item-value SC-360-cd"id="cd-Prefix" value="' + ContactFormApp_BC.GetFieldValue("Suffix") + '">';
                            $('#cd-Suffix-div').html(custDetails_Markup);
   
                            custDetails_Markup = '';
                            custDetails_Markup += '  <label class="SC-360-item-label no-margin">Sleep Number Setting:</label>';
                            custDetails_Markup += '<input type="text" name="" class="SC-360-item-value SC-360-cd" id="cd-Sleep-Number" value="' + ContactFormApp_BC.GetFieldValue("SC Sleep Number") + '">';
                            $('#cd-Sleep-Number-div').html(custDetails_Markup);
   
                            custDetails_Markup = '';
                            custDetails_Markup += '  <label class="SC-360-item-label no-margin">Partner Sleep Number Setting:</label>';
                            custDetails_Markup += '<input type="text" name="" class="SC-360-item-value SC-360-cd" id="cd-Partner-Sleep-Number" value="' + ContactFormApp_BC.GetFieldValue("SC Partner Sleep Number") + '">';
                            $('#cd-Partner-Sleep-Number-div').html(custDetails_Markup);
   
                            $("#cd-First-Name").val(ContactFormApp_BC.GetFieldValue("First Name"));
                            $("#cd-Middle-Name").val(ContactFormApp_BC.GetFieldValue("Middle Name"));
                            $("#cd-Last-Name").val(ContactFormApp_BC.GetFieldValue("Last Name"));
                            $("#cd-Customer-Num").val(ContactFormApp_BC.GetFieldValue("Person UId"));
                            $("#cd-Customer-Category").val(ContactFormApp_BC.GetFieldValue("SC Customer Category"));
                            $("#cd-Partner-Sleep-Number").val(ContactFormApp_BC.GetFieldValue("SC Partner Sleep Number"));
                            $("#cd-Partner-Name").val(ContactFormApp_BC.GetFieldValue("Family"));
                            $("#cd-Employee-Number").val(ContactFormApp_BC.GetFieldValue("Employee Number"));
                           $("#cd-First-Name").attr('title',$("#cd-First-Name").val());
                           $("#cd-Last-Name").attr('title',$("#cd-Last-Name").val());
                           $("#cd-Email-Address").attr('title',$("#cd-Email-Address").val());
                           $("#cd-Last-Name").css('cursor','pointer');
                            var contact_info_markup = '';
                            contact_info_markup += '  <label class="SC-360-item-label no-margin">Preferred Contact Method:</label>';
                            contact_info_markup += '<input type="text" name="" class="SC-360-item-value SC-360-cd" id="cd-Preferred-Contact-Method" value="' + ContactFormApp_BC.GetFieldValue("Preferred Communications") + '">';
                            $('#cd-Preferred-Contact-Method-div').html(contact_info_markup);
   
                            $("#cd-Address").val(ContactFormApp_BC.GetFieldValue("Personal Street Address"));
                            $("#cd-City").val(ContactFormApp_BC.GetFieldValue("Personal City"));
                            $("#cd-State").val(ContactFormApp_BC.GetFieldValue("Personal State"));
                            $("#cd-Postal-Code").val(ContactFormApp_BC.GetFieldValue("Personal Postal Code"));
                            $("#cd-Country").val(ContactFormApp_BC.GetFieldValue("Personal Country"));
                            
                           if (ContactFormApp_BC.GetFieldValue("SC Blacklisted") == 'Y') {
                               $("#cd-Blacklisted").prop('checked', true);
                              } else {
                               $("#cd-Blacklisted").prop('checked', false);
                               }
                            var mblNumb = '';
                            mblNumb = ContactFormApp_BC.GetFieldValue("Cellular Phone #");
                            SC_OUI_Methods.PH_USFormat_Save("cd-Mobile-Phone", mblNumb);
   
                            var hmNumb = '';
                            hmNumb = ContactFormApp_BC.GetFieldValue("Home Phone #")
                                SC_OUI_Methods.PH_USFormat_Save("cd-Secondary-Phone", hmNumb);
   
                            var wrkNumb = '';
                            wrkNumb = ContactFormApp_BC.GetFieldValue("Work Phone #");
                            SC_OUI_Methods.PH_USFormat_Save("cd-Secondary-Phone2", wrkNumb);
   
                            $("#cd-Email-Address").val(ContactFormApp_BC.GetFieldValue("Email Address"));
                            $("#cd-HD-Service-Level").val(ContactFormApp_BC.GetFieldValue("SC Cust HD Service Level"));
   
                            //Start: This is for Profile incomplete scenario
                            profileIncompleteIndicator();
                            //End: This is for Profile incomplete scenario
   
                        });
                        //End: Logic for undo edited info of Customer Details
                       var QVcChanged="N";
                       $(document).on("change","#cin-qvc",function(){
                           QVcChanged="Y";
                       });
                        //Start: This is for Customer Interaction Card Edit
                        $(document).on("click", "#SC-360-customer-interaction-edit", function () {
                            $(this).hide();
                           //to highlight and copy fields
                           $(".SC-360-cusin").prop('readonly', false);
                           $(".SC-360-cusin").addClass('add-pointer-events');
                            $(".SC-360-cusin").css({
                                "border-bottom": '1px solid #b2b2b2',
                               //"pointer-events":"all"
                            });
                            $("#SC-360-cusin-save").show();
                        });
                        //End: This is for Customer Interaction Card Edit
   
                        //Start: This is for Customer Interaction Card Save
                        $(document).on("click", "#SC-cusin-save", function () {
                            //Start loader 
                               $("body").trigger('Custom.Start');
                               setTimeout(function(){
                            $("#SC-360-customer-interaction-edit").show();
                           //to highlight and copy fields
                           $(".SC-360-cusin").prop('readonly', true);
                           $(".SC-360-cusin").removeClass('add-pointer-events');
                            $(".SC-360-cusin").css({
                                "border-bottom": '1px solid transparent',
                               //"pointer-events":"none"
                            });
                             //NGOLLA: D.N0:568 Refferring Insider field made as readonly
                            //ContactFormApp_BC.SetFieldValue("SC LOY Member Referral", $("#cin-Referring-Insider").val());
                           //ContactFormApp_BC.SetFieldValue("SC QVC Customer Opt In", $("#cin-qvc").val());
                            ContactFormApp_BC.SetFieldValue("SC Created By", $("#cin-Customer-Created-By").val());
                            var dncValue = $("#cin-dnc").prop('checked') ? 'Y' : 'N';
                            //SiebelJS.Log("SAVE:: suppress all call:: "+dncValue);
                            ContactFormApp_BC.SetFieldValue("Suppress All Calls", dncValue);
                            var dneValue = $("#cin-dne").prop('checked') ? 'Y' : 'N';
                            //SiebelJS.Log("SAVE:: suppress all Emails:: "+dneValue);
                            ContactFormApp_BC.SetFieldValue("Suppress All Emails", dneValue);
                            var dnmValue = $("#cin-dnm").prop('checked') ? 'Y' : 'N';
                            //SiebelJS.Log("SAVE:: suppress all mails:: "+dnmValue);
                            ContactFormApp_BC.SetFieldValue("Suppress All Mailings", dnmValue);
                            var qvcValu = $("#cin-qvc").prop('checked') ? 'Y' : 'N';
                            //SiebelJS.Log("SAVE:: SC QVC Customer Opt In:: "+qvcValu);
                           if(!$('#cin-qvc').prop('disabled') && QVcChanged == "Y")
                            ContactFormApp_BC.SetFieldValue("SC QVC Customer Opt In", qvcValu);
                           //NTHARRE: 12/10/2020: Added code as part of  story STRY0030811
                           var TxtOptnValu = $("#cin-toin").prop('checked') ? 'Y' : 'N';
                           ContactFormApp_BC.SetFieldValue("SC Text Opt In",TxtOptnValu);
                           
                            appletInstance.InvokeMethod("WriteRecord");
                            appletInstance = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact Form Applet"];
                            ContactFormApp_BC = appletInstance.GetBusComp();
                            //setting to newly saved values
   
                            if (ContactFormApp_BC.GetFieldValue("Suppress All Calls") == 'Y') {
                                $("#cin-dnc").prop('checked', true);
                                //SiebelJS.Log('do not call -- true');
                            } else {
                                $("#cin-dnc").prop('checked', false);
                                //SiebelJS.Log('do not call -- false');
                            }
   
                            if (ContactFormApp_BC.GetFieldValue("Suppress All Emails") == 'Y') {
                                $("#cin-dne").prop('checked', true);
                                //SiebelJS.Log('do not email -- true');
                            } else {
                                $("#cin-dne").prop('checked', false);
                                //SiebelJS.Log('do not email -- false');
                            }
   
                            if (ContactFormApp_BC.GetFieldValue("Suppress All Mailings") == 'Y') {
                                $("#cin-dnm").prop('checked', true);
                                //SiebelJS.Log('do not mail -- true');
                            } else {
                                $("#cin-dnm").prop('checked', false);
                                //SiebelJS.Log('do not mail -- false');
                            }
   
                            if (ContactFormApp_BC.GetFieldValue("SC QVC Customer Opt In") == 'Y') {
                                $("#cin-qvc").prop('checked', true);
                                //SiebelJS.Log('do not mail -- true');
                            } else {
                                $("#cin-qvc").prop('checked', false);
                                //SiebelJS.Log('do not mail -- false');
                            }
                           if (ContactFormApp_BC.GetFieldValue("SC DNC Do Not Call") == 'Y') {
                               $("#cin-ndnc").prop("checked", true);
                           } else {
                               $("#cin-ndnc").prop("checked", false);
                           }
                           //NTHARRE: 12/10/2020: Added code as part of  story STRY0030811
                           if (ContactFormApp_BC.GetFieldValue("SC Text Opt In") == 'Y') {
                               $("#cin-toin").prop("checked", true);
                           }
                           else{
                               $("#cin-toin").prop("checked", false);
                           }
                           //NGOLLA: D.N0:568 Refferring Insider field made as readonly
                            //$("#cin-Referring-Insider").val(ContactFormApp_BC.GetFieldValue("SC LOY Member Referral"));
                            $("#cin-QVC-Customer-Opt-In").val(ContactFormApp_BC.GetFieldValue("SC QVC Customer Opt In"));
                            $("#cin-Customer-Created-By").val(ContactFormApp_BC.GetFieldValue("SC Created By"));
                           //NTHARRE:16-Nov-2020:Added Refferring Created field.
                           //$("#cin-Member-Created-Date").val(ContactFormApp_BC.GetFieldValue("SC LOY Member Created"));
                           
                            $("#SC-360-cusin-save").hide();
                           //hiding the Loader
                           $("body").trigger('Custom.End');
                           },1000);
   
                        });
                        //End: This is for Customer Interaction Card Save
   
                        //Start: This is for Customer Interaction Card Undo edit
                        $(document).on("click", "#SC-cusin-close", function () {
   
                            if (ContactFormApp_BC.GetFieldValue("Suppress All Calls") == 'Y') {
                                $("#cin-dnc").prop('checked', true);
                                //SiebelJS.Log('do not call -- true');
                            } else {
                                $("#cin-dnc").prop('checked', false);
                                //SiebelJS.Log('do not call -- false');
                            }
   
                            if (ContactFormApp_BC.GetFieldValue("Suppress All Emails") == 'Y') {
                                $("#cin-dne").prop('checked', true);
                                //SiebelJS.Log('do not email -- true');
                            } else {
                                $("#cin-dne").prop('checked', false);
                                //SiebelJS.Log('do not email -- false');
                            }
   
                            if (ContactFormApp_BC.GetFieldValue("Suppress All Mailings") == 'Y') {
                                $("#cin-dnm").prop('checked', true);
                                //SiebelJS.Log('do not mail -- true');
                            } else {
                                $("#cin-dnm").prop('checked', false);
                                //SiebelJS.Log('do not mail -- false');
                            }
   
                            if (ContactFormApp_BC.GetFieldValue("SC QVC Customer Opt In") == 'Y') {
                                $("#cin-qvc").prop('checked', true);
                                //SiebelJS.Log('do not mail -- true');
                            } else {
                                $("#cin-qvc").prop('checked', false);
                                //SiebelJS.Log('do not mail -- false');
                            }
                           if (ContactFormApp_BC.GetFieldValue("SC DNC Do Not Call") == 'Y') {
                               $("#cin-ndnc").prop("checked", true);
                           } else {
                               $("#cin-ndnc").prop("checked", false);
                           }
                           //NTHARRE: 12/10/2020: Added code as part of  story STRY0030811
                           if (ContactFormApp_BC.GetFieldValue("SC Text Opt In") == 'Y') {
                               $("#cin-toin").prop("checked", true);
                           }
                           else{
                               $("#cin-toin").prop("checked", false);
                           }
                            //NGOLLA: D.N0:568 Refferring Insider field made as readonly
                            //$("#cin-Referring-Insider").val(ContactFormApp_BC.GetFieldValue("SC LOY Member Referral"));
                            $("#cin-QVC-Customer-Opt-In").val(ContactFormApp_BC.GetFieldValue("SC QVC Customer Opt In"));
                            $("#cin-Customer-Created-By").val(ContactFormApp_BC.GetFieldValue("SC Created By"));
                           //NTHARRE:16-Nov-2020:Added Refferring Created field.
                           //$("#cin-Member-Created-Date").val(ContactFormApp_BC.GetFieldValue("SC LOY Member Created"));
                           
                            $("#SC-360-customer-interaction-edit").show();
                           //to highlight and copy fields
                           $(".SC-360-cusin").prop('readonly', true);
                           $(".SC-360-cusin").removeClass('add-pointer-events');
                            $(".SC-360-cusin").css({
                                "border-bottom": '1px solid transparent',
                               //"pointer-events":"none"
                            });
                            $("#SC-360-cusin-save").hide();
   
                        });
                        //Start: This is for Customer Interaction Card Undo edit
   
                        //Start: This is for profile Information Card Edit
                        $(document).on("click", "#SC-360-profile-information-edit", function () {
                            $(this).hide();
   
                            //Start -- Adding drop down values
                            //Start: Lead Rank
   
                            searchExpr = '',
                            sortSpec = '',
                            lovArray = '',
                            lovValue = '';
                            searchExpr = "[Type]= 'SC_LEAD_RANK' AND [Active]='Y'";
                            sortSpec = "";
                            lovArray = SC_OUI_Methods.SCGetOrderLoVs(searchExpr);
   
                            //SiebelJS.Log("lovArray::"+lovArray);
                            lovValue += '  <label class="SC-360-item-label no-margin">Lead Rank:</label>';
                           lovValue += '<select class="SC-360-item-value SC-360-pi" name="" id="pi-Lead-Rank">';
                            lovValue += '<option></option>';
                            for (var r = 0; r < lovArray.length; r++) {
                                if (lovArray[r] == ContactFormApp_BC.GetFieldValue("SC Lead Rank")){
                                   lovValue += ' <option selected>' + ContactFormApp_BC.GetFieldValue("SC Lead Rank") + '</option>';}
                                   else{	
                                   lovValue += '<option value="'+lovArray[r]+'">' + lovArray[r] + '</option>';
                                   }
                            }
                            lovValue += '</select>';
                           $('#pi-Lead-Rank-div').html(lovValue);
   
                            //End: Lead Rank
   
                            //Start: Series
   
                            searchExpr = '',
                            sortSpec = '',
                            lovArray = '',
                            lovValue = '';
                            searchExpr = "[Type]= 'SC_SERIES_BED' AND [Active]='Y'";
                            sortSpec = "";
                            lovArray = SC_OUI_Methods.SCGetOrderLoVs(searchExpr);
   
                            //SiebelJS.Log("lovArray::"+lovArray);
                            lovValue += '  <label class="SC-360-item-label no-margin">Series:</label>';
                           lovValue += '<select class="SC-360-item-value SC-360-pi" name="" id="pi-Series">';
                            lovValue += ' <option></option>';
                            for (var r = 0; r < lovArray.length; r++) {
                                if (lovArray[r] == ContactFormApp_BC.GetFieldValue("SC Series")){
                                   lovValue += ' <option selected>' + ContactFormApp_BC.GetFieldValue("SC Series") + '</option>';}
                                   else{	
                                   lovValue += '<option value="'+lovArray[r]+'">' + lovArray[r] + '</option>';
                                   }
                            }
                            lovValue += '</select>';
                           $('#pi-Series-div').html(lovValue);
   
                            //End: Series
   
                            //Start: Base
   
                            searchExpr = '',
                            sortSpec = '',
                            lovArray = '',
                            lovValue = '';
                            searchExpr = "[Type]= 'SC_BASE' AND [Active]='Y'";
                            sortSpec = "";
                            lovArray = SC_OUI_Methods.SCGetOrderLoVs(searchExpr);
   
                            //SiebelJS.Log("lovArray::"+lovArray);
                            lovValue += '  <label class="SC-360-item-label no-margin">Base:</label>';
                           lovValue += '<select class="SC-360-item-value SC-360-pi" name="" id="pi-Base">';
                            lovValue += '<option></option>';
                            for (var r = 0; r < lovArray.length; r++) {
                            if (lovArray[r] == ContactFormApp_BC.GetFieldValue("SC Base")){
                                   lovValue += ' <option selected>' + ContactFormApp_BC.GetFieldValue("SC Base") + '</option>';}
                                   else{	
                                   lovValue += '<option value="'+lovArray[r]+'">' + lovArray[r] + '</option>';
                                   }
                            }
                            lovValue += '</select>';
                           $('#pi-Base-div').html(lovValue);
   
                            //End: Base
   
                            //Start: Size
   
                            searchExpr = '',
                            sortSpec = '',
                            lovArray = '',
                            lovValue = '';
                            searchExpr = "[Type]= 'SC_CON_SIZE' AND [Active]='Y'";
                            sortSpec = "";
                            lovArray = SC_OUI_Methods.SCGetOrderLoVs(searchExpr);
   
                            //SiebelJS.Log("lovArray::"+lovArray);
                            lovValue += '  <label class="SC-360-item-label no-margin">Size:</label>';
                           lovValue += '<select class="SC-360-item-value SC-360-pi" name="" id="pi-Size">';
                            lovValue += '<option></option>';
                            for (var r = 0; r < lovArray.length; r++) {
                            if (lovArray[r] == ContactFormApp_BC.GetFieldValue("SC Size")){
                                   lovValue += ' <option selected>' + ContactFormApp_BC.GetFieldValue("SC Size") + '</option>';}
                                   else{	
                                   lovValue += '<option value="'+lovArray[r]+'">' + lovArray[r] + '</option>';
                                   }
                            }
                            lovValue += '</select>';
                           $('#pi-Size-div').html(lovValue);
   
                            //End: Size
   
   
                            //Start: Bedding Type
                           searchExpr = '',
                            sortSpec = '',
                            lovArray = '',
                            lovValue = '';
                            searchExpr = "[Type]= 'SC_BEDNG_COL' AND [Active]='Y'";
                            sortSpec = "";
                            lovArray = SC_OUI_Methods.SCGetOrderLoVs(searchExpr);
   
                            //SiebelJS.Log("lovArray::"+lovArray);
                            lovValue += '  <label class="SC-360-item-label no-margin">Bedding Collection:</label>';
                           lovValue += '<select class="SC-360-item-value SC-360-pi" name="" id="pi-Bedding-Collection" >';
                            lovValue += '<option></option>';
                            for (var r = 0; r < lovArray.length; r++) {
                                if (lovArray[r] == ContactFormApp_BC.GetFieldValue("SC Bedding Collection")){
                                   lovValue += ' <option selected>' + ContactFormApp_BC.GetFieldValue("SC Bedding Collection") + '</option>';}
                                   else{	
                                   lovValue += '<option value="'+lovArray[r]+'">' + lovArray[r] + '</option>';
                                   }
                            }
                           
                            lovValue += '</select>';
                           $('#pi-Bedding-Collection-div').html(lovValue);
   
                            //End: Bedding Type
                           
                           
                           //Start: Personality Type
   
                            searchExpr = '',
                            sortSpec = '',
                            lovArray = '',
                            lovValue = '';
                            searchExpr = "[Type]= 'SC_PERSNLTY_TYPE' AND [Active]='Y'";
                            sortSpec = "";
                            lovArray = SC_OUI_Methods.SCGetOrderLoVs(searchExpr);
   
                            //SiebelJS.Log("lovArray::"+lovArray);
                            lovValue += '  <label class="SC-360-item-label no-margin">Personality Type:</label>';
                           lovValue += '<select class="SC-360-item-value SC-360-pi" name="" id="pi-Personality-Type">';
                             lovValue += '<option></option>';
                            for (var r = 0; r < lovArray.length; r++) {
                                if (lovArray[r] == ContactFormApp_BC.GetFieldValue("SC Personality Type")){
                                   lovValue += ' <option selected>' + ContactFormApp_BC.GetFieldValue("SC Personality Type") + '</option>';}
                                   else{	
                                   lovValue += '<option value="'+lovArray[r]+'">' + lovArray[r] + '</option>';
                                   }
                            }
                            lovValue += '</select>';
                           $('#pi-Personality-Type-div').html(lovValue);
   
                            //End: Personality Type
   
                            //Start: Promotional Hot Button
   
                            searchExpr = '',
                            sortSpec = '',
                            lovArray = '',
                            lovValue = '';
                            searchExpr = "[Type]= 'SC_HOT_BUTTON' AND [Active]='Y'";
                            sortSpec = "";
                            lovArray = SC_OUI_Methods.SCGetOrderLoVs(searchExpr);
   
                            //SiebelJS.Log("lovArray::"+lovArray);
                            lovValue += '  <label class="SC-360-item-label no-margin">Promotional Hot Button:</label>';
                           lovValue += '<select class="SC-360-item-value SC-360-pi" name="" id="pi-Promo-Hot-Button">';
                            lovValue += '<option></option>';
                           for (var r = 0; r < lovArray.length; r++) {
                                if (lovArray[r] == ContactFormApp_BC.GetFieldValue("SC Promotional Hot Button")){
                                   lovValue += ' <option selected>' + ContactFormApp_BC.GetFieldValue("SC Promotional Hot Button") + '</option>';}
                                   else{	
                                   lovValue += '<option value="'+lovArray[r]+'">' + lovArray[r] + '</option>';
                                   }
                            }
                            lovValue += '</select>';
                           $('#pi-Promo-Hot-Button-div').html(lovValue);
   
                            //End: Promotional Hot Button
   
                            //Start: Speciality Groups
   
                            searchExpr = '',
                            sortSpec = '',
                            lovArray = '',
                            lovValue = '';
                            searchExpr = "[Type]= 'SC_SPL_GRP' AND [Active]='Y'";
                            sortSpec = "";
                            lovArray = SC_OUI_Methods.SCGetOrderLoVs(searchExpr);
   
                            //SiebelJS.Log("lovArray::"+lovArray);
                            lovValue += '  <label class="SC-360-item-label no-margin">Speciality Groups:</label>';
                           lovValue += '<select class="SC-360-item-value SC-360-pi" name="" id="pi-Speciality-Groups">';
                            lovValue += '<option></option>';
                             for (var r = 0; r < lovArray.length; r++) {
                                if (lovArray[r] == ContactFormApp_BC.GetFieldValue("SC Speciality Groups")){
                                   lovValue += ' <option selected>' + ContactFormApp_BC.GetFieldValue("SC Speciality Groups") + '</option>';}
                                   else{	
                                   lovValue += '<option value="'+lovArray[r]+'">' + lovArray[r] + '</option>';
                                   }
                            }
                            lovValue += '</select>';
                           $('#pi-Speciality-Groups-div').html(lovValue);
   
                            //End: Speciality Groups
   
   
                            //Start -- Adding drop down values
                           //to highlight and copy fields
                             $(".SC-360-pi").prop('readonly', false);
                             $(".SC-360-pi").addClass('add-pointer-events');
                            $(".SC-360-pi").css({
                                "border-bottom": '1px solid #b2b2b2',
                               //"pointer-events":"all"
                            });
                            $("#SC-360-pi-save").show();
   
                        });
                        //End: This is for profile Information Card Edit
   
                        //Start: This is for profile Information Card Save
                        $(document).on("click", "#SC-pi-save", function () {
                            //Start loader 
                               $("body").trigger('Custom.Start');
                               setTimeout(function(){
                            $("#SC-360-profile-information-edit").show();
                           //to highlight and copy fields
                           $(".SC-360-pi").prop('readonly', true);
                            $(".SC-360-pi").removeClass('add-pointer-events');
                            $(".SC-360-pi").css({
                                "border-bottom": '1px solid transparent',
                               //"pointer-events":"none"
                            });
   
                            ContactFormApp_BC.SetFieldValue("SC Lead Rank", $("#pi-Lead-Rank").val());
                            ContactFormApp_BC.SetFieldValue("SC Series", $("#pi-Series").val());
                            ContactFormApp_BC.SetFieldValue("SC Base", $("#pi-Base").val());
                            ContactFormApp_BC.SetFieldValue("SC Size", $("#pi-Size").val());
                            ContactFormApp_BC.SetFieldValue("SC Bedding Collection", $("#pi-Bedding-Collection").val());
                            ContactFormApp_BC.SetFieldValue("SC Personality Type", $("#pi-Personality-Type").val());
                            ContactFormApp_BC.SetFieldValue("SC Promotional Hot Button", $("#pi-Promo-Hot-Button").val());
                            ContactFormApp_BC.SetFieldValue("SC Speciality Groups", $("#pi-Speciality-Groups").val());
   
                            appletInstance.InvokeMethod("WriteRecord");
                            appletInstance = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact Form Applet"];
                            ContactFormApp_BC = appletInstance.GetBusComp();
                            $("#SC-360-pi-save").hide();
   
                            var custDetails_Markup = '';
                            custDetails_Markup += '  <label class="SC-360-item-label no-margin">Lead Rank:</label>';
                            custDetails_Markup += '<input type="text" name="" class="SC-360-item-value SC-360-pi" id="pi-Lead-Rank" value="' + ContactFormApp_BC.GetFieldValue("SC Lead Rank") + '">';
                            $('#pi-Lead-Rank-div').html(custDetails_Markup);
   
                            custDetails_Markup = '';
                            custDetails_Markup += '  <label class="SC-360-item-label no-margin">Series:</label>';
                            custDetails_Markup += '<input type="text" name="" class="SC-360-item-value SC-360-pi" id="pi-Series" value="' + ContactFormApp_BC.GetFieldValue("SC Series") + '">';
                            $('#pi-Series-div').html(custDetails_Markup);
   
                            custDetails_Markup = '';
                            custDetails_Markup += '  <label class="SC-360-item-label no-margin">Base:</label>';
                            custDetails_Markup += '<input type="text" name="" class="SC-360-item-value SC-360-pi" id="pi-Base" value="' + ContactFormApp_BC.GetFieldValue("SC Base") + '">';
                            $('#pi-Base-div').html(custDetails_Markup);
   
                            custDetails_Markup = '';
                            custDetails_Markup += '  <label class="SC-360-item-label no-margin">Size:</label>';
                            custDetails_Markup += '<input type="text" name="" class="SC-360-item-value SC-360-pi" id="pi-Size" value="' + ContactFormApp_BC.GetFieldValue("SC Size") + '">';
                            $('#pi-Size-div').html(custDetails_Markup);
   
                            custDetails_Markup = '';
                            custDetails_Markup += '  <label class="SC-360-item-label no-margin">Bedding Collection:</label>';
                            custDetails_Markup += '<input type="text" name="" class="SC-360-item-value SC-360-pi" id="pi-Bedding-Collection" value="' + ContactFormApp_BC.GetFieldValue("SC Bedding Collection") + '">';
                            $('#pi-Bedding-Collection-div').html(custDetails_Markup);
   
                            custDetails_Markup = '';
                            custDetails_Markup += '  <label class="SC-360-item-label no-margin">Personality Type:</label>';
                            custDetails_Markup += '<input type="text" name="" class="SC-360-item-value SC-360-pi" id="pi-Personality-Type" value="' + ContactFormApp_BC.GetFieldValue("SC Personality Type") + '">';
                            $('#pi-Personality-Type-div').html(custDetails_Markup);
   
                            custDetails_Markup = '';
                            custDetails_Markup += '  <label class="SC-360-item-label no-margin">Promotional Hot Button:</label>';
                            custDetails_Markup += '<input type="text" name="" class="SC-360-item-value SC-360-pi" id="pi-Promo-Hot-Button" value="' + ContactFormApp_BC.GetFieldValue("SC Promotional Hot Button") + '">';
                            $('#pi-Promo-Hot-Button-div').html(custDetails_Markup);
   
                            custDetails_Markup = '';
                            custDetails_Markup += '  <label class="SC-360-item-label no-margin">Speciality Groups:</label>';
                            custDetails_Markup += '<input type="text" name="" class="SC-360-item-value SC-360-pi" id="pi-Speciality-Groups" value="' + ContactFormApp_BC.GetFieldValue("SC Speciality Groups") + '">';
                            $('#pi-Speciality-Groups-div').html(custDetails_Markup);
   
                            //Start: This is for Profile incomplete scenario
                            profileIncompleteIndicator();
                            //End: This is for Profile incomplete scenario
                           //hiding the Loader
                           $("body").trigger('Custom.End');
                           },1000);
                        });
                        //End: This is for profile Information Card Save
   
                        //Start: This is for profile Information Card Undo Edit
                        $(document).on("click", "#SC-pi-close", function () {
                            $("#SC-360-profile-information-edit").show();
                           //to highlight and copy fields
                           $(".SC-360-pi").prop('readonly', true);
                            $(".SC-360-pi").removeClass('add-pointer-events');
                            $(".SC-360-pi").css({
                                "border-bottom": '1px solid transparent',
                                //"pointer-events": "none"
                            });
                            $("#SC-360-pi-save").hide();
   
                            var custDetails_Markup = '';
                            custDetails_Markup += '  <label class="SC-360-item-label no-margin">Lead Rank:</label>';
                            custDetails_Markup += '<input type="text" name="" class="SC-360-item-value SC-360-pi" id="pi-Lead-Rank" value="' + ContactFormApp_BC.GetFieldValue("SC Lead Rank") + '">';
                            $('#pi-Lead-Rank-div').html(custDetails_Markup);
   
                            custDetails_Markup = '';
                            custDetails_Markup += '  <label class="SC-360-item-label no-margin">Series:</label>';
                            custDetails_Markup += '<input type="text" name="" class="SC-360-item-value SC-360-pi" id="pi-Series" value="' + ContactFormApp_BC.GetFieldValue("SC Series") + '">';
                            $('#pi-Series-div').html(custDetails_Markup);
   
                            custDetails_Markup = '';
                            custDetails_Markup += '  <label class="SC-360-item-label no-margin">Base:</label>';
                            custDetails_Markup += '<input type="text" name="" class="SC-360-item-value SC-360-pi" id="pi-Base" value="' + ContactFormApp_BC.GetFieldValue("SC Base") + '">';
                            $('#pi-Base-div').html(custDetails_Markup);
   
                            custDetails_Markup = '';
                            custDetails_Markup += '  <label class="SC-360-item-label no-margin">Size:</label>';
                            custDetails_Markup += '<input type="text" name="" class="SC-360-item-value SC-360-pi" id="pi-Size" value="' + ContactFormApp_BC.GetFieldValue("SC Size") + '">';
                            $('#pi-Size-div').html(custDetails_Markup);
   
                            custDetails_Markup = '';
                            custDetails_Markup += '  <label class="SC-360-item-label no-margin">Bedding Collection:</label>';
                            custDetails_Markup += '<input type="text" name="" class="SC-360-item-value SC-360-pi" id="pi-Bedding-Collection" value="' + ContactFormApp_BC.GetFieldValue("SC Bedding Collection") + '">';
                            $('#pi-Bedding-Collection-div').html(custDetails_Markup);
   
                            custDetails_Markup = '';
                            custDetails_Markup += '  <label class="SC-360-item-label no-margin">Personality Type:</label>';
                            custDetails_Markup += '<input type="text" name="" class="SC-360-item-value SC-360-pi" id="pi-Personality-Type" value="' + ContactFormApp_BC.GetFieldValue("SC Personality Type") + '">';
                            $('#pi-Personality-Type-div').html(custDetails_Markup);
   
                            custDetails_Markup = '';
                            custDetails_Markup += '  <label class="SC-360-item-label no-margin">Promotional Hot Button:</label>';
                            custDetails_Markup += '<input type="text" name="" class="SC-360-item-value SC-360-pi" id="pi-Promo-Hot-Button" value="' + ContactFormApp_BC.GetFieldValue("SC Promotional Hot Button") + '">';
                            $('#pi-Promo-Hot-Button-div').html(custDetails_Markup);
   
                            custDetails_Markup = '';
                            custDetails_Markup += '  <label class="SC-360-item-label no-margin">Speciality Groups:</label>';
                            custDetails_Markup += '<input type="text" name="" class="SC-360-item-value SC-360-pi" id="pi-Speciality-Groups" value="' + ContactFormApp_BC.GetFieldValue("SC Speciality Groups") + '">';
                            $('#pi-Speciality-Groups-div').html(custDetails_Markup);
   
                            //Start: This is for Profile incomplete scenario
                            profileIncompleteIndicator();
                            //End: This is for Profile incomplete scenario
   
                        });
                        //End: This is for profile Information Card Undo Edit
   
                        //SKU Popup
                        $(document).on("keypress", "#SC-360-sku-contact-input", function () {
                            if (event.which == 13) {
                                $("#SC-360-contact-fr").modal({
                                    backdrop: 'static'
                                });
   
                                var InputSKU = SiebelApp.S_App.NewPropertySet();
                                var OutputSKU = SiebelApp.S_App.NewPropertySet();
   
                                var searchsku="*"+$("#SC-360-sku-contact-input").val()+"*";
                                InputSKU.SetProperty("Part Number", searchsku);
                               InputSKU.SetProperty("Detailed Description", searchsku);
                                var ItemLookup = SiebelApp.S_App.GetService("SC Product Item Lookup OUI");
                                OutputSKU = ItemLookup.InvokeMethod("SCItemLookup", InputSKU);
                                //SiebelJS.Log("OutputSKU::"+JSON.stringify(OutputSKU));
                                var Child_Out = OutputSKU.GetChild(0);
                                //SiebelJS.Log("Child_Out::"+JSON.stringify(Child_Out));
                               var skunumber = Child_Out.GetProperty("SKUnumber");
                                SiebelJS.Log("skuPrice:::@@@"+skunumber);
                                var skuPrice = Child_Out.GetProperty("SKUPrice");
                                //SiebelJS.Log("skuPrice:::@@@"+skuPrice);
                                var skuDes = Child_Out.GetProperty("SKUDesc");
                               //SiebelJS.Log("skuDes:::@@@"+skuDes);
                                var outPutSet = Child_Out.GetProperty("outPutSet");							
                                var subskuArray = outPutSet.split("|");
                               //SiebelJS.Log("subskuArray:::@@@"+subskuArray);
   
                               
                                   var SKU_Markup = '';
                                   SKU_Markup += '<div class="modal-content" id="sku-modal-content">';
                                   SKU_Markup += '<div class="modal-header">';
                                   //SKU_Markup+='<button type="button" class="close SC-close-popup blue-bg" data-dismiss="modal" id="SC-360-contact-fr-close">&times;</button>';
                                   SKU_Markup += '<div class="header-content">';
                                   SKU_Markup += '<div class="sku-head-title">';
                                   if(skunumber!="")
                                   SKU_Markup += '<p class="no-margin">Substitutes for <span>SKU #</span><span>' + skunumber + '</span></p>';
                               else
                                   SKU_Markup += '<p class="no-margin">Substitutes for <span>SKU #</span><span>' + $("#SC-360-sku-contact-input").val() + '</span></p>';
                                   if(skuPrice != ""){
                                       SKU_Markup += '<span>$' + skuPrice + '</span>';
                                   }
                                   else{
                                       SKU_Markup += '<span></span>';
                                   }
                                   SKU_Markup += '</div>';
                                   if(skuDes != ""){
                                       SKU_Markup += '<p class="description">' + skuDes + '</p>';
                                   }
                                   else{
                                       SKU_Markup += '<p class="description">NO SUCH PRODUCT FOUND</p>';
                                   }
                                   SKU_Markup += '</div>';
                                   SKU_Markup += '</div>';
                                   SKU_Markup += '<div class="modal-body">';
                                   SKU_Markup += ' <div class="SC-table-with-scroll-main">';
                                   SKU_Markup += ' <table class="SC-table">';
                                   SKU_Markup += '<thead>';
                                   SKU_Markup += '<tr class="no-bg">';
                                   SKU_Markup += '<th>SUBSTITUTE SKU#</th>';
                                   SKU_Markup += '<th>SKU Description</th>';
                                   SKU_Markup += '<th>SKU Price</th>';
                                   SKU_Markup += '</tr>';
                                   SKU_Markup += '</thead>';
                                   SKU_Markup += '<tbody>';
                                   if(subskuArray != ""){
                                       for (i = 0; i < subskuArray.length; i++) {
                                           var record = '',
                                           subSKUJSSON = '';
                                           subSKUJSSON = JSON.parse(subskuArray[i]);
                                           record += '<tr>';
                                           record += '<td>' + subSKUJSSON["subsku"] + '</td>';
                                           record += '<td>' + subSKUJSSON["Desc"] + '</td>';
                                           if(subSKUJSSON["Price"] != ""){
                                               record += '<td>$' + subSKUJSSON["Price"] + '</td>';
                                           }
                                           else{
                                               record += '<td>' + subSKUJSSON["Price"] + '</td>';
                                           }											
                                           record += '</tr>';
                                           SKU_Markup += record;
                                       }
                                   }
                                   SKU_Markup += '</tbody>';
                                   SKU_Markup += '</table>';
                                   SKU_Markup += '<div class="SC-single-button-container less-padding">';
                                   SKU_Markup += '<button id="sku-close">Close</button>';
                                   SKU_Markup += '</div>';
                                   SKU_Markup += '</div>';
                                   SKU_Markup += '</div>';
                                   SKU_Markup += '</div>';
   
                                   $("#SKU-PopUp").html(SKU_Markup);
                               }
                            
                        });
   
                        $(document).on('click', "#sku-close", function () {
   
                            $("#SC-360-contact-fr").modal('hide');
                           $("#sku-modal-content").html("");
                        });
                    });
                    //Start -- Assets creation
                    //Start: popup
                    $(document).on('click', "#sc-c-create-asset-btn", function (event) {
                        $('#maskoverlay').show();
                        setTimeout(function() {
                                   
                                    //Start -- Adding drowpdown
                    
                                   assetCreat="N";
                                    var Custom_Service = SiebelApp.S_App.GetService("SC Custom Query");
   
                                    //Start: For -- SKU
                                    var In_SKU = SiebelApp.S_App.NewPropertySet();
                                    var Out_SKU = SiebelApp.S_App.NewPropertySet();
                                    var sku_fields = "Id,Name,Description,Product Line";
   
                                    In_SKU.SetProperty("BO", "Contact");
                                    In_SKU.SetProperty("BC", "Internal Product");
                                    In_SKU.SetProperty("SearchSpecification", "[Sales Product Flag] <> 'N'");
                                    In_SKU.SetProperty("SortSpecification", "Name");
                                    In_SKU.SetProperty("ReqNoOfRecords", "200");
                                    In_SKU.SetProperty("FieldsArray", sku_fields);
                                    Out_SKU = Custom_Service.InvokeMethod("Query", In_SKU);
   
                                    var Child_SKU = Out_SKU.GetChild(0);
                                    //SiebelJS.Log("Child_SKU--"+JSON.stringify(Child_SKU));
                                    var BS_Data_SKU = Child_SKU.GetProperty("OutputRecordSet");
                                    //SiebelJS.Log("BS_Data_SKU--"+BS_Data_SKU);
   
                                    var skuArray = new Array;
   
                                    skuArray = BS_Data_SKU.split(";");
                                    var skuValue = '';
                                    skuValue += ' <option></option>';
   
                                    var sku_NameId_String = '';
                                    sku_NameId_String += '{';
                                    for (var q = 0; q < skuArray.length; q++) {
                                       var jsonSKU = '';
                                       jsonSKU = JSON.parse(skuArray[q]);
                                       skuValue += '<option value="' + jsonSKU["Name"] + '">' + jsonSKU["Description"] + '|PL:' + jsonSKU["Product Line"] + '</option>';
                                       sku_NameId_String += '"' + jsonSKU["Name"] + '":"' + jsonSKU["Id"] + '",';
                                    }
                                    //SiebelJS.Log("skuArray.length@@#"+skuArray.length);
                                    sku_NameId_String = sku_NameId_String.substring(0, sku_NameId_String.length - 1);
                                    sku_NameId_String += '}';
                                    sku_NameId_json = JSON.parse(sku_NameId_String);
                                    $('#sku').html(skuValue);
                                   //End: For -- sku
                                   $('#maskoverlay').hide();
                               //SiebelJS.Log("Asset modal open");
                               $("#SC-360-create-assets").modal({
                                   backdrop: 'static'
                               });
                        //}
                       }, 50);
                    });
                    //End --  popup
   
                   
   
   
                    //Start -- Adding Calendar for Installed Date
                    $("#Asset-InstaledDate").datepicker({
                        maxDate: 0,
                        onSelect: function (dateText, inst) {
                            //SiebelJS.Log("Date is picked@@@");
                            $("#Asset-InstaledDate").parent().addClass("is-active is-completed");
                        },
                       showButtonPanel: true
                    });
                    //End -- Adding Calendar for Installed Date
                    //Start:on scroll hiding the datepicker
               $("html, body").on("DOMMouseScroll MouseScrollEvent MozMousePixelScroll wheel scroll", function ()
               {
                   if($("#Asset-InstaledDate").hasClass("hasDatepicker"))
                 $("#Asset-InstaledDate").datepicker("hide");
               });
             //End:on scroll hiding the datepicker
             //START SNARRA 28/05/2018 Added code for hiding DatePicker on tab
               $("#Asset-InstaledDate").on('keydown', function(ev){
                   if(ev.keyCode === 9){ //tab
                       if($("#Asset-InstaledDate").hasClass("hasDatepicker"))
                        $("#Asset-InstaledDate").datepicker("hide");
                   }
               });
               //END SNARRA 28/05/2018 Added code for hiding DatePicker on tab
               
                    //Start: Asset Field Validation
                    $(document).on('click', "#Create-Asset", function (e) {
                   
                           //var errorCodes = errorcodes();
                           var errorCodes = '';
                           errorCodes = ErrorCodesfn.errorcodes();
                           $("#sc-Asset-Create-Form").validate({
                               rules: {
                                   WholeSaleOrder: {
                                       required: true
                                   },
                                   SKU: {
                                       required: true
                                   },
                                   InstalledDate: {
                                       required: true
                                   },
                                   Quantity: {
                                       required: true
                                   },
                                   warrantyList: {
                                       required: true
                                   }
   
                               },
                               messages: {
                                   WholeSaleOrder: errorCodes.SC_REQUIRED_WHOLESALE_ORDER,
                                   SKU: errorCodes.SC_REQUIRED_SKU,
                                   InstalledDate: errorCodes.SC_REQUIRED_INSTALLED_DATE,
                                   Quantity: errorCodes.SC_REQUIRED_QUANTITY,
                                   warrantyList: errorCodes.SC_REQUIRED_WARRANTY
   
                               },
                               tooltip_options: {
                                   WholeSaleOrder: {
                                       trigger: 'focus',
                                       placement: 'bottom',
                                       html: true
                                   },
                                   SKU: {
                                       trigger: 'focus',
                                       placement: 'bottom',
                                       html: true
                                   },
                                   InstalledDate: {
                                       trigger: 'focus',
                                       placement: 'bottom',
                                       html: true
                                   },
                                   Quantity: {
                                       trigger: 'focus',
                                       placement: 'bottom',
                                       html: true
                                   },
                                   warrantyList: {
                                       trigger: 'focus',
                                       placement: 'bottom',
                                       html: true
                                   }
                               },
   
                               submitHandler: function (form) {
                                   event.preventDefault();
                                   //SiebelJS.Log("Submit Clicked");
                                   $(".sc-c-create-assets").modal('hide');
                                     //Start loader 
                                   $("body").trigger('Custom.Start');
                                   setTimeout(function(){
                                   if(assetCreat=="N"){
                                       var contact_Id_Asset = ConFormApp_RS[0]["Id"];
                                       //SiebelJS.Log("contact_Id_Asset::"+contact_Id_Asset);
   
                                       var isExists = '';
                                       $('#sku  option').each(function () {
                                           if (this.value == $('#Asset-SKU').val()) {
                                               isExists = true;
                                               //SiebelJS.Log("isExists::::"+isExists);
                                           }
                                       });
   
                                       if (isExists == true) {
                                           var prod_id = sku_NameId_json[$('#Asset-SKU').val()];
                                       } else {
   
                                           var In_SKU_New = SiebelApp.S_App.NewPropertySet();
                                           var Out_SKU_New = SiebelApp.S_App.NewPropertySet();
   
                                           In_SKU_New.SetProperty("BO", "Contact");
                                           In_SKU_New.SetProperty("BC", "Internal Product");
                                           In_SKU_New.SetProperty("SearchSpecification", "[Part #] ='" + $('#Asset-SKU').val() + "'");
                                           var fieldsArray_new = "Id";
                                           In_SKU_New.SetProperty("FieldsArray", fieldsArray_new);
                                           var Custom_Service = SiebelApp.S_App.GetService("SC Custom Query");
                                           Out_SKU_New = Custom_Service.InvokeMethod("Query", In_SKU_New);
   
                                           var Child_SKU = Out_SKU_New.GetChild(0);
                                           var BS_Data_SKU = Child_SKU.GetProperty("OutputRecordSet");
                                           BS_Data_SKU = BS_Data_SKU.toString();
                                         /* var str = BS_Data_SKU.split('"Description"');
                                          var strdesc = str[1].toString();
                                          strdesc = strdesc.substring(2,strdesc.length-2);
                                          strdesc = strdesc.replace(/"/g, "'");
                                          var Strre=str[0]+"\"Description\":\""+strdesc+"\"}";*/
                                           BS_Data_SKU = JSON.parse(BS_Data_SKU);
                                           var prod_id="";
                                           if(BS_Data_SKU!="{")
                                           prod_id = BS_Data_SKU["Id"];
                                       }
   
                                       var war_id = war_NameId_json[$('#Asset-WarentyName').val()];
   
                                       var wholeSale = $("#Asset-IsWholeSalesOrder").val();
                                       var Installed_Date="";
                                       Installed_Date = $("#Asset-InstaledDate").val();
                                       var warr_EndDate = $('#warranty').children('option[value="' + $("#Asset-WarentyName").val() + '"]').text(); ;
                                       if(Installed_Date!=""){
                                               var warr_EndDateArr = '';
                                               warr_EndDateArr = warr_EndDate.split("|");
                                               var ord_Ref = $("#Asset-OrderRef").val();
                                               var quantity = $("#Asset-Quantity").val();
   
                                               var Asset_inPS = '';
                                               Asset_inPS = SiebelApp.S_App.NewPropertySet();
                                               var Asset_outPS = '';
                                               Asset_outPS = SiebelApp.S_App.NewPropertySet();
   
                                               Asset_inPS.SetProperty("Product Id", prod_id);
                                               Asset_inPS.SetProperty("Contact Id", contact_Id_Asset);
                                               Asset_inPS.SetProperty("Warrenty Id", war_id);
                                               Asset_inPS.SetProperty("Warrenty End Date", warr_EndDateArr[1]);
                                               Asset_inPS.SetProperty("Installed Date", Installed_Date);
                                               Asset_inPS.SetProperty("Order # Reference", ord_Ref);
                                               Asset_inPS.SetProperty("Quantity", quantity);
                                               Asset_inPS.SetProperty("Whole Sale Order", wholeSale);
                                               Asset_inPS.SetProperty("Create Object", "Asset");
   
                                               Asset_inPS.SetProperty("ProcessName", "SC Create_Manual Asset_Opty_SR");
                                               //SiebelJS.Log("Invoking Asset Creation Workflow");
                                               var Asset_Service = '';
                                               Asset_Service = SiebelApp.S_App.GetService("Workflow Process Manager"); //get service
                                               Asset_outPS = Asset_Service.InvokeMethod("RunProcess", Asset_inPS); //invoke the method
                                               //SiebelJS.Log("Asset Creation Workflow invoked");
   
                                               assets_GetRecords(); // To diplay the latest Asset Records
                                               
                                                
                                               getConsolidateNoteRecords(contact_Id_Asset);
                                               assetCreat="Y";
                                       }
                                       
                                       
                                       //hiding the Loader
                                   }
                                   $('#sc-Asset-Create-Form')[0].reset();
                                     $("body").trigger('Custom.End');
                                   },1000);
   
                               } //closing submit handler
                           });
                       
                    }); //closing document ready
                    //End: Asset Field Validation
   
                    //Start: Asset close
                    $(document).on('click', "#Cancel-Asset", function () {
                        $('#sc-Asset-Create-Form')[0].reset();
                       $(".sc-c-create-assets").modal('hide');
                       if($("#Asset-InstaledDate").hasClass("hasDatepicker"))
                       $("#Asset-InstaledDate ~ .ui-datepicker").hide();
                    });
                    //End: Asset close
   
                   //Start -- Activity creation
                    //Start: popup
                    $(document).on('click', "#sc-c-create-Activity-btn", function (event) {
                        $('#maskoverlay').show();
                        setTimeout(function() {
                           var ActTypeArray = new Array;
                           searchExpr = '', sortSpec = '', lovArray = '';
                           var scsubchannel="";
                           scsubchannel=SC_OUI_Methods.SCGetProfileAttrValue('SC Primary Division Sub Type');
                           searchExpr = "[Type]= 'SC_TODO_TYPE' AND [Active]='Y' AND [Parent]='"+scsubchannel+"'";
                           sortSpec = "Order By";
                           ActTypeArray = SC_OUI_Methods.GetLOVs(searchExpr, sortSpec);
                           var ActTypedrpValue = '';
                           ActTypedrpValue += ' <option></option>';
                           for (var ac = 0; ac < ActTypeArray.length; ac++) {
                               ActTypedrpValue += ' <option>' + ActTypeArray[ac] + '</option>';
                           }
                           $('#con360-ActType').html(ActTypedrpValue);
                           var ActStatusArray = new Array;
                           searchExpr = "[Type] = 'EVENT_STATUS' AND [Active] = 'Y'";
                           sortSpec = "Order By";
                           ActStatusArray = SC_OUI_Methods.GetLOVs(searchExpr, sortSpec);
                           var ActStatusdrpValue = '';
                           ActStatusdrpValue += ' <option></option>';
                           for (var ac = 0; ac < ActStatusArray.length; ac++) {
                               ActStatusdrpValue += ' <option>' + ActStatusArray[ac] + '</option>';
                           }
                           $('#con360-ActStatus').html(ActStatusdrpValue);
                           var customerType = SC_OUI_Methods.SCGetProfileAttrValue('SC Primary Division Type');
                           if (customerType == 'STORE' || customerType == 'SHOW')
                               $('#con360-ActStatus').parent().parent().show();
                           else
                               $('#con360-ActStatus').parent().parent().hide();
                           $('#maskoverlay').hide();
                           $("#SC-360-create-Activity").modal({
                               backdrop: 'static'
                           });
                    }, 50);
                    });
                    //End --  popup
                   //Start -- Adding Calendar for Activity Start Date
                   $("#con-Act-Startdate").datetimepicker({
                        dateFormat: 'mm/dd/yy',
                       timeFormat: 'HH:mm:ss',
                       use24hours: true,
                       onSelect: function (dateText, inst) {
                            $("#con-Act-Startdate").parent().addClass("is-active is-completed");
                        },
                       showButtonPanel: true
                   });
                   //End -- Adding Calendar for Activity Start Date
                   //SPATIBAN
                   //Start -- Adding Calendar for Activity Start Date
                   $("#con-edit-Act-Startdate").datetimepicker({
                        dateFormat: 'mm/dd/yy',
                       timeFormat: 'HH:mm:ss',
                       use24hours: true,
                       onSelect: function (dateText, inst) {
                            $("#con-edit-Act-Startdate").parent().addClass("is-active is-completed");
                        },
                       showButtonPanel: true
                   });
                   //End -- Adding Calendar for Activity Start Date
                   //End:on scroll hiding the datepicker
                   $("#con-edit-Act-Startdate").on('keydown', function(ev){
                       if(ev.keyCode === 9){ //tab
                           if($("#con-edit-Act-Startdate").hasClass("hasDatepicker"))
                           $("#con-edit-Act-Startdate").datetimepicker("hide");
                       }
                   });
                    //start: clicks on Activity cancel button
                   //con-edit-Act-Startdate
                   //Start:on scroll hiding the datepicker
                   $("html, body").on("DOMMouseScroll MouseScrollEvent MozMousePixelScroll wheel scroll", function ()
                   {
                       if($("#con-Act-Startdate").hasClass("hasDatepicker"))
                           $("#con-Act-Startdate").datetimepicker("hide");
                       if($("#con-edit-Act-Startdate").hasClass("hasDatepicker"))
                           $("#con-edit-Act-Startdate").datetimepicker("hide");
                   });
                   //End:on scroll hiding the datepicker
                   $("#con-Act-Startdate").on('keydown', function(ev){
                       if(ev.keyCode === 9){ //tab
                           if($("#con-Act-Startdate").hasClass("hasDatepicker"))
                           $("#con-Act-Startdate").datetimepicker("hide");
                       }
                   });
                    //start: clicks on Activity cancel button
                    $(document).on('click', "#contact360-cancel-Activity", function (e) {
                       //e.stopImmediatePropagation();
                        //$('#sc-create-activity')[0].reset();
                       $("#con-Act-Description").val();
                       $("#con-Act-Startdate").val();
                       $("#con-Act-comments").val();
                        $("#con360-ActType").parent().removeClass("is-active is-completed");
                        $("#con-Act-Description").parent().removeClass("is-active is-completed");
                       $('#con360-ActStatus').parent().removeClass("is-active is-completed");
                        $("#SC-360-create-Activity").modal('hide');
   
                    });
                     //Start: Activity Field Validation and Creation
                    $(document).on('click', "#contact360-create-Activity", function (e) {
                        //var errorCodes = errorcodes();
                        var errorCodes = '';
                        errorCodes = ErrorCodesfn.errorcodes();
                        $("#sc-create-activity").validate({
                            rules: {
                                conacttype: {
                                    required: true
                                },
                            },
                            messages: {
                                conacttype: errorCodes.SC_REQUIRED_ACTIVITY_TYPE,
                                },
                            tooltip_options: {
                                conacttype: {
                                    trigger: 'focus',
                                    placement: 'bottom',
                                    html: true
                                },
                           },
                           submitHandler: function (form) {
                                event.preventDefault();
                               $("#SC-360-create-Activity").modal('hide');
                                  //Start loader 
                               $("body").trigger('Custom.Start');
                               setTimeout(function(){
                                   var contact_Id = ConFormApp_RS[0]["Id"];
                                   var conActType = $('#con360-ActType').val();
                                   var conActDesc = $('#con-Act-Description').val();	
                                   var conStartDate=$("#con-Act-Startdate").val();
                                   var conActComments=$("#con-Act-comments").val();
                                   var ConStatus=$("#con360-ActStatus").val();
                                   var Act_inPS = '';
                                   Act_inPS = SiebelApp.S_App.NewPropertySet();
                                   var Act_outPS = '';
                                   Act_outPS = SiebelApp.S_App.NewPropertySet();
                                   Act_inPS.SetProperty("ActivityType", conActType);
                                   Act_inPS.SetProperty("ActivityDescription", conActDesc);
                                   Act_inPS.SetProperty("ActivityComments", conActComments);
                                   Act_inPS.SetProperty("ActivityStartDate", conStartDate);
                                   Act_inPS.SetProperty("ActivityStatus", ConStatus);
                                   Act_inPS.SetProperty("Object Id", contact_Id);
                                   Act_inPS.SetProperty("Create Object", "Activity");
                                   Act_inPS.SetProperty("ProcessName", "SC Create_Manual Asset_Opty_SR");
                                   var Asset_Service = '';
                                   Asset_Service = SiebelApp.S_App.GetService("Workflow Process Manager"); //get service
                                   Act_outPS = Asset_Service.InvokeMethod("RunProcess", Act_inPS);							
                                   $('#sc-create-activity')[0].reset();
                                   $("#con360-ActType").parent().removeClass("is-active is-completed");
                                   $("#con-Act-Description").parent().removeClass("is-active is-completed");
                                   $('#con360-ActStatus').parent().removeClass("is-active is-completed");
                                   activities_GetRecords();
                                   getConsolidateNoteRecords(contact_Id);
                                   //hiding the Loader
                                   $("body").trigger('Custom.End');
                               },1000);
   
                            } //closing submit handler
                        });
                    });
   
                    //End: Activity Field Validation and Creation
                    //Start -- Opty Creation Logic
                    //Start:: Opportunity creation popup
                    $("#sc-c-create-opp-btn").click(function (event) {
                        $("#SC-360-create-opportunity").modal({
                            backdrop: 'static'
                        });
                    });
                    //End:: Opportunity creation popup
   
                    //Start: Getting LOV Values
                   
   
   
                    //Start: Opportunity Field Validation and Creation
                    $(document).on('click', "#create-opportunity", function (e) {
                        //var errorCodes = errorcodes();
                        var errorCodes = '';
                        errorCodes = ErrorCodesfn.errorcodes();
                        var errormessage = "";
   
                        if ($('#OpptyName').val() != '') {
   
                            var contact_Id = ConFormApp_RS[0]["Id"];
                            //SiebelJS.Log("contact_Id_Asset::"+contact_Id);
                            var OpportunityName = $('#OpptyName').val();
                            var Probability = $('#OppProb').val();
                            var Channel = $('#OppChannel').val();
                           var Revenue = "";   //SPATIBAN 11/28/2018: Added script for CHG0034565
                           Revenue = $('#SC_Revenue').val();
                           if(Revenue!=""){
                               Revenue=Revenue.replace(/[$,]/g,"");
                               Revenue=parseInt(Revenue);
                           }
                            var Opp_inPS = '';
                            Opp_inPS = SiebelApp.S_App.NewPropertySet();
                            var Opp_outPS = '';
                            Opp_outPS = SiebelApp.S_App.NewPropertySet();
                            Opp_inPS.SetProperty("Opportunity Name", OpportunityName);
                            Opp_inPS.SetProperty("Probability", Probability);
                            Opp_inPS.SetProperty("Channel", Channel);
                           Opp_inPS.SetProperty("SCRevenue", Revenue);
                            Opp_inPS.SetProperty("Object Id", contact_Id);
                            Opp_inPS.SetProperty("Create Object", "Opportunity");
   
                            Opp_inPS.SetProperty("ProcessName", "SC Create_Manual Asset_Opty_SR");
                            //SiebelJS.Log("Invoking Asset Creation Workflow");
                            var Asset_Service = '';
                            Asset_Service = SiebelApp.S_App.GetService("Workflow Process Manager"); //get service
                            Opp_outPS = Asset_Service.InvokeMethod("RunProcess", Opp_inPS); //invoke the method
                            var Child = Opp_outPS.GetChild(0);
                            var errorcode = Child.GetProperty("Error Code");
                            var errormessage1 = Child.GetProperty("Error Message");
   
                            if (errorcode == "(SBL-BPR-00187)--(SBL-BPR-00100)--(SBL-DAT-00382)") {
                                //SiebelJS.Log("error");
                                $('#OpptyName').val('');
                                $("#OpptyName").attr('name', 'optyexists');
   
                            }
   
                        } else {
   
                            $("#OpptyName").attr('name', 'optyname');
   
                        }
   
                        $("#sc-create-Opportunity").validate({
                            rules: {
                                optyname: {
                                    required: true
                                },
                                optyexists: {
                                    required: true
                                },
                               screvenue: {
                                   number: true,
                               },
                            },
                            messages: {
                                optyname: errorCodes.SC_REQUIRED_OPTY_NAME,
                                optyexists: errorCodes.SC_OPTY_NAME_EXIST,
                               screvenue: errorCodes.SC_NUMBERS_ONLY,
                                   
                            },
                            tooltip_options: {
                                optyname: {
                                    trigger: 'focus',
                                    placement: 'bottom',
                                    html: true
                                },
                                optyexists: {
                                    trigger: 'focus',
                                    placement: 'bottom',
                                    html: true
                                },
                               screvenue: {
                                   trigger: 'focus',
                                   placement: 'bottom',
                                   html: true
                               },
                            },
   
                            submitHandler: function (form) {
                                event.preventDefault();
                               $("#SC-360-create-opportunity").modal('hide');
                               //Start loader 
                               $("body").trigger('Custom.Start');
                               setTimeout(function(){	
                                $('#sc-create-Opportunity')[0].reset();
                                $("#OpptyName").parent().removeClass("is-active is-completed");
                                $("#OppChannel").parent().removeClass("is-active is-completed");
                                $("#OppProb").parent().removeClass("is-active is-completed");
                                  opportunities_GetRecords();
                               
                               getConsolidateNoteRecords(contact_Id);
                               //hiding the Loader
                           $("body").trigger('Custom.End');
                           },1000);
   
                            } //closing submit handler
                        });
                    });
   
                    //End: Opportunity Field Validation and Creation
   
                    //start: clicks on opportunity cancel button
                    $(document).on('click', "#cancel-opportunity", function (e) {
   
                        $('#sc-create-Opportunity')[0].reset();
                        $("#OpptyName").parent().removeClass("is-active is-completed");
                        $("#OppChannel").parent().removeClass("is-active is-completed");
                        $("#OppProb").parent().removeClass("is-active is-completed");
                        $("#SC-360-create-opportunity").modal('hide');
   
                    });
   
                    //end: clicks on opportunity cancel button
   
   
                    //End -- Opty Creation Logic
   
   
                    //Start:: SR Creation Logic
                    // Start: SR Pop-up Open
                    $("#sc-c-create-sr-btn").click(function (event) {
   
                        $("#SC-360-create-sr").modal({
                            backdrop: 'static'
                        });
                       if(SRTypeFlag=='Y')
                               {								
                                    var searchExpr = '', sortSpec = '', lovArray = '';
                                    searchExpr = "[Type]= 'SR_TYPE' AND [Active]='Y' AND [Name]='Incident'";
                                    //sortSpec = "";
                                    var BS_Data_SRType_Default = SC_OUI_Methods.SCGetOrderLoVs(searchExpr);
                                    //Check
   
                                    //SiebelJS.Log(BS_Data_SRType_Default);
                                    var SRTypeValue = '';
                                    SRTypeValue += ' <option>' + BS_Data_SRType_Default + '</option>';
   
                                    $('#SR-Type').html(SRTypeValue);
                                    //End: For --SRType - for Default Value
   
                                    //Start: For -- Type
                                    var TypeArray = new Array;
                                    searchExpr = '', sortSpec = '', lovArray = '';
                                    searchExpr = "[Type]= 'SR_AREA' AND [Active]='Y' AND [Order By] >=1000 and [Order By] <=1500 AND [Parent]='" + BS_Data_SRType_Default + "'";
                                    sortSpec = "Order By";
                                    TypeArray = SC_OUI_Methods.GetLOVs(searchExpr,sortSpec);
   
                                    var TypeValue = '';
                                    TypeValue += ' <option></option>';
                                    for (var sr = 0; sr < TypeArray.length; sr++) {
                                       TypeValue += ' <option>' + TypeArray[sr] + '</option>';
                                    }
   
                                   $('#SRSubType').html(TypeValue);
                                   SRTypeFlag="N";
                               }	
   
   
                    });
                    // Start: SR Pop-up Open
   
                    $("#SR-Type").parent().addClass("is-active is-completed");
                    $('#SR-Type').prop('disabled', true);
   
                   
                   /* var StatusArray = new Array;
                    searchExpr = '', sortSpec = '', lovArray = '';
                    searchExpr = "[Type]= 'SR_STATUS' AND [Active]='Y'";
                    sortSpec = "Order By";
                    StatusArray = SC_OUI_Methods.GetLOVs(searchExpr, sortSpec);
   
                    var StatusValue = '';
                    StatusValue += ' <option></option>';
                    for (var st = 0; st < StatusArray.length; st++) {
                        StatusValue += ' <option>' + StatusArray[st] + '</option>';
                    }
   
                    $('#SRStatus').html(StatusValue);
   
                    //End: For -- SRStatus
   
                    //Start: For -- prority
                    var ProrityArray = new Array;
                    searchExpr = '', sortSpec = '', lovArray = '';
                    searchExpr = "[Type]= 'SR_PRIORITY' AND [Active]='Y'";
                    sortSpec = "";
                    ProrityArray = SC_OUI_Methods.GetLOVs(searchExpr, sortSpec);
   
                    var prorityValue = '';
                    prorityValue += ' <option></option>';
                    for (var p = 0; p < ProrityArray.length; p++) {
                        prorityValue += ' <option>' + ProrityArray[p] + '</option>';
                    }
   
                    $('#SRPrority').html(prorityValue);*/
   
                    //End: For -- prority
   
                    //Start: on change Type
                    $(document).on('change', "#SRSubType", function () {
   
                        var AreaArray = new Array;
                        searchExpr = '',
                        sortSpec = '',
                        lovArray = '';
                        searchExpr = "[Type]= 'SR_AREA' AND [Active]='Y' AND  [Parent]='" + this.value + "'";
                        sortSpec = "Order By";
                        AreaArray = SC_OUI_Methods.GetLOVs(searchExpr,sortSpec);
   
                        var AreaValues = '';
                        AreaValues += '<option></option>';
                        for (var sr = 0; sr < AreaArray.length; sr++) {
                            AreaValues += ' <option>' + AreaArray[sr] + '</option>';
                        }
                        $('#SRArea').html(AreaValues);
   
                    });
                    //End -- on change Type
                   //SBOORLA:Added code for SR deefect
                    //start-- on change SR Area
                    $(document).on('change', "#SRArea", function () {
   
                        var In_SubArea = '';
                        In_SubArea = SiebelApp.S_App.NewPropertySet();
                        var Out_SubArea = '';
                        Out_SubArea = SiebelApp.S_App.NewPropertySet();
                        var Subtypevalue = $("#SRSubType").val();
                        var parentLOV = ""
                       var childLOV=this.value;
                       parentLOV = Subtypevalue + " " +childLOV;
                           SiebelJS.Log("this.value"+childLOV);
   
                        var SubAreaArray = new Array;
                        searchExpr = '',
                        sortSpec = '',
                        lovArray = '';
                       if(childLOV.includes("'")){
                           searchExpr = "[Type]= 'SR_AREA' AND [Active]='Y'";
                           searchExpr+='AND  [Parent]='+'"' + parentLOV + '"';
                       }
   
                       else
                        searchExpr = "[Type]= 'SR_AREA' AND [Active]='Y' AND  [Parent]='" + parentLOV + "'";
                        sortSpec = "Parent";
                        SubAreaArray = SC_OUI_Methods.GetLOVs(searchExpr,sortSpec);
   
                        var SubAreaValue = '';
                        SubAreaValue += ' <option></option>';
                        for (var sr = 0; sr < SubAreaArray.length; sr++) {
                            SubAreaValue += ' <option>' + SubAreaArray[sr] + '</option>';
                        }
   
                        $('#SRSubArea').html(SubAreaValue);
                    });
   
                    //End -- On change SR Area
   
   
                    //Start: SR Field validation and Creation
                    $(document).on('click', "#SCcreateservicerequest", function (e) {
                        //var errorCodes = errorcodes();
                        var errorCodes = '';
                        errorCodes = ErrorCodesfn.errorcodes();
   
                        $("#sc-create-sr").validate({
                            rules: {
                                srtype: {
                                    required: true
                                },
                                type: {
                                    required: true
                                },
                                area: {
                                    required: true
                                },
                                subarea: {
                                    required: true
                                },
                                status: {
                                    required: true
                                },
                                detdes: {
                                    required: true
                                }
                            },
                            messages: {
                                srtype: errorCodes.SC_REQUIRED_SRTYPE,
                                type: errorCodes.SC_REQUIRED_TYPE,
                                area: errorCodes.SC_REQUIRED_AREA,
                                subarea: errorCodes.SC_REQUIRED_SUBAREA,
                                status: errorCodes.SC_REQUIRED_STATUS,
                                detdes: errorCodes.SC_REQUIRED_DETDES
                            },
                            tooltip_options: {
                                srtype: {
                                    trigger: 'focus',
                                    placement: 'bottom',
                                    html: true
                                },
                                type: {
                                    trigger: 'focus',
                                    placement: 'bottom',
                                    html: true
                                },
                                area: {
                                    trigger: 'focus',
                                    placement: 'bottom',
                                    html: true
                                },
                                subarea: {
                                    trigger: 'focus',
                                    placement: 'bottom',
                                    html: true
                                },
                                status: {
                                    trigger: 'focus',
                                    placement: 'bottom',
                                    html: true
                                },
                                detdes: {
                                    trigger: 'focus',
                                    placement: 'bottom',
                                    html: true
                                }
                            },
                            submitHandler: function (form) {
                                event.preventDefault();
                                //SiebelJS.Log("Submit Clicked");
                               //Start loader 
                               $("#SC-360-create-sr").modal('hide');
                               $("body").trigger('Custom.Start');
                               setTimeout(function(){	
                                var contact_Id = ConFormApp_RS[0]["Id"];
                                //SiebelJS.Log("contact_Id_Asset::"+contact_Id);
                                var New = $("#dn").is(':checked') ? 'Y' : 'N';
                                var SRType = $('#SR-Type').val();
                                var SRSubType = $('#SRSubType').val();
                                var SRSubArea = $('#SRSubArea').val();
                                var SRPrority = $('#SRPrority').val();
                                var SRStatus = $('#SRStatus').val();
                                var SRDetailedDescription = $('#SRDetailedDescription').val();
                                var SRArea = $('#SRArea').val();
                                var SR_inPS = '';
                                SR_inPS = SiebelApp.S_App.NewPropertySet();
                                var SR_outPS = '';
                                Opp_outPS = SiebelApp.S_App.NewPropertySet();
   
                                SR_inPS.SetProperty("SR Type", SRType);
                                SR_inPS.SetProperty("Type", SRSubType);
                                SR_inPS.SetProperty("Area", SRArea);
                                SR_inPS.SetProperty("Sub Area", SRSubArea);
                                SR_inPS.SetProperty("SR Status", SRStatus);
                                SR_inPS.SetProperty("Priority", SRPrority);
                                SR_inPS.SetProperty("Detailed Description", SRDetailedDescription);
                                SR_inPS.SetProperty("Object Id", contact_Id);
                                SR_inPS.SetProperty("Create Object", "Service Request");
   
                                SR_inPS.SetProperty("ProcessName", "SC Create_Manual Asset_Opty_SR");
                                //SiebelJS.Log("Invoking Asset Creation Workflow");
                                var Asset_Service = '';
                                Asset_Service = SiebelApp.S_App.GetService("Workflow Process Manager"); //get service
                                SR_outPS = Asset_Service.InvokeMethod("RunProcess", SR_inPS); //invoke the method
                                //SiebelJS.Log("Asset Creation Workflow invoked");
                            
                                $('#sc-create-sr')[0].reset();
   
                                $("#SRSubType").parent().removeClass("is-active is-completed");
                                $("#SRSubArea").parent().removeClass("is-active is-completed");
                                $("#SRArea").parent().removeClass("is-active is-completed");
                                $("#SRPrority").parent().removeClass("is-active is-completed");
                                $("#SRStatus").parent().removeClass("is-active is-completed");
                                $("#SRDetailedDescription").parent().removeClass("is-active is-completed");
   
                                //get the latest service Request records
                                SR_GetRecords();
                               
                               getConsolidateNoteRecords(contact_Id);
   
                                
                              //hiding the Loader
                              $("body").trigger('Custom.End');
                              },1000);
                            } //closing submit handler
                        });
                    });
                    //Start: SR Field validation and Creation
   
                   //13-MAY-19 :VALLA : Added below code to drill down on Contact Most Recent Order
                    $(document).on('click', "#cd-scconrecentord", function (e) {
                       setTimeout(function(){
                       ContactFormApplet_PM = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact 360 Order List Applet OUI"].GetPModel().GetRenderer().GetPM();
                       ConFormApp_RS = ContactFormApplet_PM.Get("GetRecordSet");
                       if(ConFormApp_RS[0]["Order Type Code"]=="Service"){
                               localStorage.setItem('whitescreen', 1);
                           }
                       Orders_PM.ExecuteMethod("OnDrillDown", 'Order Number', 1);
                       $('#custommaskoverlay').hide();
                           },50);
                       });

			   $(document).on('click', "#cd-scconprimsleeper", function (e) {
                       setTimeout(function(){
						var Custom_Service="",Input_BS="",Out_BS="";
						var row_id=""
						var sPrimSleeper = ConFormApp_RS[0]["SC Primary Slpr Customer Number"]
						Custom_Service = SiebelApp.S_App.GetService("SC Custom Query");
						Input_BS = SiebelApp.S_App.NewPropertySet();
						Out_BS = SiebelApp.S_App.NewPropertySet();
						searchfields = "Id";
						Input_BS.SetProperty("BO", "Contact");
						Input_BS.SetProperty("BC", "Contact");
						Input_BS.SetProperty("SearchSpecification", "[Person UId] = '"+sPrimSleeper+"'");
						Input_BS.SetProperty("SortSpecification", "");
						Input_BS.SetProperty("ReqNoOfRecords", "1");
						Input_BS.SetProperty("FieldsArray", searchfields);
						Out_BS = Custom_Service.InvokeMethod("Query", Input_BS);
						var Child_BS = Out_BS.GetChild(0);
						var BS_Data = Child_BS.GetProperty("OutputRecordSet");
						if(BS_Data!="}"){
							var RecordSet =  new Array; 
							RecordSet = BS_Data.split(";");
							RecordSet = JSON.parse(RecordSet);
							row_id = RecordSet["Id"];
							
						
		
                       var InPut = "",
						OutPut = "",
						BService;
					InPut = SiebelApp.S_App.NewPropertySet();
					OutPut = SiebelApp.S_App.NewPropertySet();
					InPut.SetProperty("View", "SC Contact 360 Degree View OUI");
					InPut.SetProperty("Business Component", "Contact");
					InPut.SetProperty("Row Id", row_id);
					BService = SiebelApp.S_App.GetService("CUT eSales Order Entry Toolkit Service");
					OutPut = BService.InvokeMethod("GotoView", InPut);
						}
                       $('#custommaskoverlay').hide();
                           },50);
                       });
			                    
                    //start:clicks on sr cancel button
                    $(document).on('click', "#sr-cancel", function (e) {
                        $('#sc-create-sr')[0].reset();
                        $("#SRSubType").parent().removeClass("is-active is-completed");
                        $("#SRSubArea").parent().removeClass("is-active is-completed");
                        $("#SRArea").parent().removeClass("is-active is-completed");
                        $("#SRPrority").parent().removeClass("is-active is-completed");
                        $("#SRStatus").parent().removeClass("is-active is-completed");
                        $("#SRDetailedDescription").parent().removeClass("is-active is-completed");
                        $("#SC-360-create-sr").modal('hide');
                    });
   
                    //End:clicks on sr cancel button
   
   
                    //End : SR Creation Logic
   
                    //Start -- This is for the input box animations. this is required across the app
                    $(".SC-input").focus(function () {
                        $(this).parent().addClass("is-active is-completed");
                    });
   
                    $(".SC-input").focusout(function () {
                        if ($(this).val() === "" && this.id != "SC_Revenue") //SPATIBAN 11/28/2018: Added for CHG0034565
                            $(this).parent().removeClass("is-completed");
                        $(this).parent().removeClass("is-active");
                    });
                    //End -- This is for the input box animations. this is required across the app
   
                    //START -- ONLICK OF PIN
                    $(document).on("click", ".SC-contact360-pin", function () {
                       var id_clicked = '';
                        id_clicked = this.id;
                        var respectiveDivId = '';
                        respectiveDivId = divisions[id_clicked];
                        //SiebelJS.Log("respectiveDivId:"+ respectiveDivId);
   
                        var appletName = '';
                        appletName = appletNames[id_clicked];
   
                        if (id_clicked != "Cust-Details-Pin" && id_clicked != "Con-Info-Pin") {
                            //SiebelJS.Log("Pin Clicked is: "+id_clicked);
                            var divElement = '';
   
                            divElement = document.getElementById(respectiveDivId);
                            //divElement = $('#'+respectiveDivId).val();
   
                            //SiebelJS.Log("divElement::"+divElement);
                            if (divElement.style.display == "block") {
                                divElement.style.display = "none";
                                $("#" + appletName).removeClass("active");
                                $("#" + id_clicked).attr("src", "images/custom/Pin.png");
                                if (id_clicked == 'Cust-inter-Pin') {
                                    document.querySelector('img[alt="Cust-Interaction"]').src = "images/custom/customer_interaction.png";
                                } else if (id_clicked == 'Prof-Info-Pin') {
                                    $("#Prof-Info-Img").attr("src", "images/custom/profile_info.png");
                                } else if (id_clicked == 'Cons-Notes-Pin') {
                                    $("#Cons-Notes-Img").attr("src", "images/custom/consolidated_notes.png");
                                   } else if (id_clicked == 'Assets-Pin') {
                                    $("#Assets-Img").attr("src", "images/custom/Asset.png");
                                    $("#sc-c-create-asset-btn").attr("src", "images/custom/plus_circle_inactive.png");
                                    $("#sc-c-create-asset-btn").removeClass("active");
                                    $("#sc-c-create-asset-btn").addClass("inactive");
   
                                } else if (id_clicked == 'Digital-Assets-Pin') {
                                    $("#Assets-Img").attr("src", "images/custom/Asset.png");
                                   // $("#sc-c-create-digital-asset-btn").attr("src", "images/custom/plus_circle_inactive.png");
                                    //$("#sc-c-create-digital-asset-btn").removeClass("active");
                                    //$("#sc-c-create-digital-asset-btn").addClass("inactive");
   
                                } else if (id_clicked == 'Additional-Sleeper-Pin') {
                                    $("#Assets-Img").attr("src", "images/custom/Asset.png");
                                     
                                }
								else if (id_clicked == 'Orders-Pin') {
                                    $("#Orders-Img").attr("src", "images/custom/orders.png");
                                } else if (id_clicked == 'HDSR-Pin') {
                                    $("#HDSR-Img").attr("src", "images/custom/truck_round_grey.png");								
                               } else if (id_clicked == 'Oppor-Pin') {
                                    $("#Oppor-Img").attr("src", "images/custom/opportunity.png");
                                    $("#sc-c-create-opp-btn").attr("src", "images/custom/plus_circle_inactive.png");
                                    $("#sc-c-create-opp-btn").removeClass("active");
                                    $("#sc-c-create-opp-btn").addClass("inactive");
                               } else if (id_clicked == 'SR-Pin') {
                                    $("#SR-Img").attr("src", "images/custom/SR.png");
                                    $("#sc-c-create-sr-btn").attr("src", "images/custom/plus_circle_inactive.png");
                                    $("#sc-c-create-sr-btn").removeClass("active");
                                    $("#sc-c-create-sr-btn").addClass("inactive");
                                } else if (id_clicked == 'Activities-Pin') {
                                    $("#Activities-Img").attr("src", "images/custom/Activities-grey.png");
                                   $("#sc-c-create-Activity-btn").attr("src", "images/custom/plus_circle_inactive.png");
                                    $("#sc-c-create-Activity-btn").removeClass("active");
                                    $("#sc-c-create-Activity-btn").addClass("inactive");
                                } else if (id_clicked == 'Inn-Circle-Pin') {
                                    $("#Inn-Circle-Img").attr("src", "images/custom/ICR.png");
                                } else if (id_clicked == 'Item-lookup-Pin') {
                                    $("#Itemlookup-Img").attr("src", "images/custom/lookup_grey.png");
                               //SWAGH:10192023:SFSTRY0003043                            
                               /*
                               } else if (id_clicked == 'Campaigns-Pin') {
                                    $("#Campaigns-Img").attr("src", "images/custom/Campaign_gray.png");
                                */
                               } else {}
                                pinids.splice(pinids.indexOf(id_clicked), 1);
                                $(this).addClass("inactive");
                            } else {
                                divElement.style.display = 'block';
                               $("#" + appletName).addClass("active");
                                $("#" + id_clicked).attr("src", "images/custom/Pinned.png");
                                if (id_clicked == 'Cust-inter-Pin') {
                                    document.querySelector('img[alt="Cust-Interaction"]').src = "images/custom/customer_interaction_selected.png";
                                } else if (id_clicked == 'Prof-Info-Pin') {
                                    $("#Prof-Info-Img").attr("src", "images/custom/profile_info_selected.png");
                                } else if (id_clicked == 'Cons-Notes-Pin') {
                                    $("#Cons-Notes-Img").attr("src", "images/custom/consolidated_notes_selected.png");
                                   var contact_Id_CS = ConFormApp_RS[0]["Id"];
                                   getConsolidateNoteRecords(contact_Id_CS);
                                   consolidatedNotes_GetRecords(parentobj);
                                   uniquevalues();
                                   } else if (id_clicked == 'Assets-Pin') {
                                    $("#Assets-Img").attr("src", "images/custom/Assets-selected.png");
                                    $("#sc-c-create-asset-btn").attr("src", "images/custom/plus_circle.png");
                                    $("#sc-c-create-asset-btn").removeClass("inactive");
                                    $("#sc-c-create-asset-btn").addClass("active");
                                   //Start: For -- Quantity
                                    var qunatityArray = new Array;
                                    searchExpr = '', sortSpec = '', lovArray = '';
                                    searchExpr = "[Type]= 'SC_ASSET_QTY'";
                                    sortSpec = "Order By";
                                    qunatityArray = SC_OUI_Methods.SCGetOrderLoVs(searchExpr);
   
                                    var qValue = '';
                                    qValue += ' <option></option>';
   
                                    for (var q = 0; q < qunatityArray.length; q++) {
                                       qValue += ' <option>' + qunatityArray[q] + '</option>';
                                    }
   
                                    $('#Asset-Quantity').html(qValue);
                                   //End: For -- Quantity
                                   //Start: For -- warranty
                                    var Custom_Service = SiebelApp.S_App.GetService("SC Custom Query");
                                    var In_War = SiebelApp.S_App.NewPropertySet();
                                    var Out_War = SiebelApp.S_App.NewPropertySet();
                                    var war_fields = "Id,Warranty Name,Description,SC Warranty End Date";
   
                                    In_War.SetProperty("BO", "FS Warranty");
                                    In_War.SetProperty("BC", "FS Warranty");
                                    In_War.SetProperty("SearchSpecification", "");
                                    //In_War.SetProperty("SortSpecification", "Name");
                                    In_War.SetProperty("ReqNoOfRecords", "100");
                                    In_War.SetProperty("FieldsArray", war_fields);
                                    Out_War = Custom_Service.InvokeMethod("Query", In_War);
   
                                    var Child_War = Out_War.GetChild(0);
                                    var BS_Data_War = Child_War.GetProperty("OutputRecordSet");
                                    //SiebelJS.Log("BS_Data_War--"+BS_Data_War);
   
                                    var warArray = new Array;
   
                                    warArray = BS_Data_War.split(";");
                                    var warValue = '';
                                    warValue += ' <option></option>';
   
                                    var war_NameId_String = '';
                                    war_NameId_String += '{';
                                    for (var q = 0; q < warArray.length; q++) {
                                       var jsonSKU = '';
                                       var warArry_json=warArray[q];
                                       warArry_json=warArry_json.replace(/\n/g,"");
                                       jsonSKU = JSON.parse(warArry_json);
                                       warValue += '<option value="' + jsonSKU["Warranty Name"] + '">' + jsonSKU["Description"] + '|' + jsonSKU["SC Warranty End Date"] + '</option>';
                                       war_NameId_String += '"' + jsonSKU["Warranty Name"] + '":"' + jsonSKU["Id"] + '",';
                                    }
                                    war_NameId_String = war_NameId_String.substring(0, war_NameId_String.length - 1);
                                    war_NameId_String += '}';
                                    war_NameId_json = JSON.parse(war_NameId_String);
                                    $('#warranty').html(warValue);
                                   //End: For -- warranty
                               }else if (id_clicked == 'Assets-Pin') {
                                    $("#Assets-Img").attr("src", "images/custom/Assets-selected.png");
                                    $("#sc-c-create-digital-asset-btn").attr("src", "images/custom/plus_circle.png");
                                    $("#sc-c-create-digital-asset-btn").removeClass("inactive");
                                    $("#sc-c-create-digital-asset-btn").addClass("active");
								} else if (id_clicked == 'Orders-Pin') {
                                    $("#Orders-Img").attr("src", "images/custom/orders_selected.png");
                                } else if (id_clicked == 'HDSR-Pin') {
                                    $("#HDSR-Img").attr("src", "images/custom/truck_round_blue.png");								
                               } else if (id_clicked == 'Oppor-Pin') {
                                    $("#Oppor-Img").attr("src", "images/custom/opportunity_selected.png");
                                    $("#sc-c-create-opp-btn").attr("src", "images/custom/plus_circle.png");
                                    $("#sc-c-create-opp-btn").removeClass("inactive");
                                    $("#sc-c-create-opp-btn").addClass("active");
                                    //Start: For -- probability
                                    var ProbalityArray = new Array;
                                    searchExpr = '', sortSpec = '', lovArray = '';
                                    searchExpr = "[Type]= 'SC_OPTY_PROB' AND [Active]='Y'";
                                    sortSpec = "";
                                    ProbalityArray = SC_OUI_Methods.SCGetOrderLoVs(searchExpr);
   
                                    var probValue = '';
                                    // probValue += ' <select class="SC-input" onchange="this.nextElementSibling.value=this.value" >';
                                    probValue += ' <option></option>';
                                    for (var p = 0; p < ProbalityArray.length; p++) {
                                       probValue += ' <option>' + ProbalityArray[p] + '</option>';
                                    }
                                   // probValue += '</select>';
                                              //     probValue += ' <input type="text" value="' + ProbalityArray[p] + '"/>';
                                    $('#OppProb').html(probValue);
   
                                    //End: For -- probability
   
                                    //Start: For -- Channel
                                    var ChannelArray = new Array;
                                    searchExpr = '', sortSpec = '', lovArray = '';
                                    searchExpr = "[Type]= 'OPTY_CHANNEL_TYPE' AND [Active]='Y'";
                                    sortSpec = "";
                                    ChannelArray = SC_OUI_Methods.SCGetOrderLoVs(searchExpr);
   
                                    var ChannelValue = '';
                                    ChannelValue += ' <option></option>';
                                    for (var c = 0; c < ChannelArray.length; c++) {
                                       ChannelValue += ' <option>' + ChannelArray[c] + '</option>';
                                    }
                                     $('#OppChannel').html(ChannelValue);
                                    //End: For -- Channel
                               } else if (id_clicked == 'SR-Pin') {
                                    $("#SR-Img").attr("src", "images/custom/SR-selected.png");
                                    $("#sc-c-create-sr-btn").attr("src", "images/custom/plus_circle.png");
                                    $("#sc-c-create-sr-btn").removeClass("inactive");
                                    $("#sc-c-create-sr-btn").addClass("active");
                                   //Start: Getting LOV Values for SR
                                    //Start: For -- SRType - for Default Value
                                   /* searchExpr = '', sortSpec = '', lovArray = '';
                                    searchExpr = "[Type]= 'SR_TYPE' AND [Active]='Y' AND [Name]='Incident'";
                                    sortSpec = "";
                                    var BS_Data_SRType_Default = SC_OUI_Methods.SCGetOrderLoVs(searchExpr);
                                    //Check
   
                                    //SiebelJS.Log(BS_Data_SRType_Default);
                                    var SRTypeValue = '';
                                    SRTypeValue += ' <option>' + BS_Data_SRType_Default + '</option>';
   
                                    $('#SR-Type').html(SRTypeValue);
                                    //End: For --SRType - for Default Value
   
                                    //Start: For -- Type
                                    var TypeArray = new Array;
                                    searchExpr = '', sortSpec = '', lovArray = '';
                                    searchExpr = "[Type]= 'SR_AREA' AND [Active]='Y' AND [Order By] >=1000 and [Order By] <=1500 AND [Parent]='" + BS_Data_SRType_Default + "'";
                                    sortSpec = "Order By";
                                    TypeArray = SC_OUI_Methods.GetLOVs(searchExpr,sortSpec);
   
                                    var TypeValue = '';
                                    TypeValue += ' <option></option>';
                                    for (var sr = 0; sr < TypeArray.length; sr++) {
                                       TypeValue += ' <option>' + TypeArray[sr] + '</option>';
                                    }
   
                                   $('#SRSubType').html(TypeValue);*/
   
                                   //End: For --Type
   
                                   //Start: For -- SRStatus
                                } else if (id_clicked == 'Activities-Pin') {
                                    $("#Activities-Img").attr("src", "images/custom/Activities-selected.png");
                                   $("#sc-c-create-Activity-btn").attr("src", "images/custom/plus_circle.png");
                                    $("#sc-c-create-Activity-btn").removeClass("inactive");
                                    $("#sc-c-create-Activity-btn").addClass("active");
                                } else if (id_clicked == 'Inn-Circle-Pin') {
                                    $("#Inn-Circle-Img").attr("src", "images/custom/icr_selected.png");
                                } else if (id_clicked == 'Item-lookup-Pin') {
                                    $("#Itemlookup-Img").attr("src", "images/custom/lookup_blue.png");
                               //SWAGH:10192023:SFSTRY0003043							
                               /*					
                               } else if (id_clicked == 'Campaigns-Pin') {
                                    $("#Campaigns-Img").attr("src", "images/custom/Campaign_blue.png");
                                */
                               } else {}
                                pinids.push(id_clicked);
                                $(this).removeClass("inactive");
   
                                //$("#SC-360-RightContainer").scrollTop($("#"+divid).position().top-$("#SC-360-RightContainer").position().top);
                            }
                        } //if close
                        //localStorage.setItem(sLogUserNamePinids, pinids);
                       //SBOORLA:Added code for pin/Unpin user Preferences
                       if(savePinId=="N"){
                           var Bservice = '', inPS = '', outPS = '';
                           var fieldvalues="";
                           for(var i=0;i<pinids.length;i++)
                               if(pinids.length!=(i+1))
                                   fieldvalues+=pinids[i]+"_";
                               else
                                   fieldvalues+=pinids[i]
                           var fieldnames="Cosmetics/ContactPinUnpin";
                           inPS = SiebelApp.S_App.NewPropertySet();
                           outPS = SiebelApp.S_App.NewPropertySet();
                           inPS.SetProperty("BO","User Preferences");
                           inPS.SetProperty("BC","User Preferences");
                           inPS.SetProperty("FieldsArray",fieldnames );
                           inPS.SetProperty("ValuesArray",fieldvalues);
                           inPS.SetProperty("SearchSpecification","" );
                           Bservice = SiebelApp.S_App.GetService("SC Custom Query Simplified"); //get service
                           outPS = Bservice.InvokeMethod("Insert", inPS);
                       }
                   });
   
                    //Start: Navigating to other screens
                    //To Contacts Home Screen
                   $("#SC_HOME").click(function(){
                        localStorage.setItem('whitescreen', 1);
                        var storeUser = SC_OUI_Methods.SCGetProfileAttrValue("SC Store User");
                           if(storeUser=="Y")
                           SiebelApp.S_App.GotoView("User Profile Default View");
                           else
                           SiebelApp.S_App.GotoView("Home Page View (WCC)");	
                   });
           
                    //To Contacts List View
                    $("#SC_CONTACTS").click(function(){
                        //SiebelApp.S_App.GotoView("SC Contact List View OUI");
                       SiebelApp.S_App.GotoView("SC Contact List View OUI","","SWEKeepContext=false","");
                    });
   
                    //To Accounts List View
                    $("#SC_ACCOUNTS").click(function(){
                        SiebelApp.S_App.GotoView("SC All Accounts List View OUI");
   
                    }); 
   
                    //To Sales Order View
                    $("#SC_SALESORDERS").click(function(){
                        SiebelApp.S_App.GotoView("SC Sales Order Search View OUI");
                    });
                   //SBOORLA:on click of open Regiser Button
                   $("#sc-cash-draw").click(function(){
                       SC_OUI_Methods.OpenCashDrawer();
                   });
                    //On Click of Sales Order button
                    $(document).on("click", "#SC-360-SalesOrder", function () {
                         $('#custommaskoverlay').show();
						//AKSHAY: Added below line for Terminal UI.
						SC_OUI_Methods.ResetTerminalProfileAttrib();
                       setTimeout(function(){
                           localStorage.setItem('isNewSalesOrder',"Y");
                        SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact Form Applet"].InvokeMethod("NewOrder");	
                       $('#custommaskoverlay').hide();
                    },50);
       
                    });
                    //On Click of finance button 
                    $(document).on("click", "#SC-360-Finance", function () {
                         $('#custommaskoverlay').show();
                          setTimeout(function(){
                           SiebelApp.S_App.GotoView("SC Contact Finance List View OUI");
                           $('#custommaskoverlay').hide();
                            },50);
                    });
                    //End: Navigating to other screens
   
                    //START -- CONTACT CREATION PROCESS
                    //Start: contact create pop up
                    $(document).on('click', '#SC-add-contact-btn,#SC-360-Convert', function () {
                       $("body").trigger('Custom.Start');
                       setTimeout(function(){
                               var con = ContactCreatefn.CreateNewContact();
                               setTimeout(function(){
                                   if(isiFitRecord == "Y"){
                                       $("#FirstName").parent().addClass('is-completed');
                                       $("#FirstName").val(ConFormApp_RS[0]["First Name"]);
                                       $("#EmailAddress").parent().addClass('is-completed');
                                       $("#EmailAddress").val(ConFormApp_RS[0]["Email Address"]);
                                   }
                               },1000);
                               //Start -- Customer Interaction Maru ups
                               var cust_inter_markup = Contact360Markup.CustomerInteractionMarkupFn(ConFormApp_RS);
                               $("#Cust-inter-Applet").html(cust_inter_markup);
                               //End -- Customer Interaction Maru ups
                               //Start -- Profile Information Mark ups
                               var prof_Info_markup = Contact360Markup.ProfileInfoMarkupFn(ConFormApp_RS);
                               $("#Prof-Info-Applet").html(prof_Info_markup);
                               //End -- Profile Information Mark ups
                               //Start -- Consolidated Notes Mark ups
                                var contact_Id_CS = ConFormApp_RS[0]["Id"];
                                getConsolidateNoteRecords(contact_Id_CS);
                                var cons_Notes_Markup = Contact360Markup.ConsolidatedNoteMarkupFn();
                               $("#Cons-Notes-Applet").html(cons_Notes_Markup);
                               //End -- Consolidated Notes Mark ups
                               //Start: Getting Consolidated Notes Records
                               consolidatedNotes_GetRecords(parentobj);
                               uniquevalues();
                               //End: Getting Consolidated Notes Records
   
                               //Start -- Assetts Mark ups
                               var assets_markup = Contact360Markup.AssetsMarkupFn();
                               $("#Assets-Applet").html(assets_markup);
                               //End -- Assets Mark ups
                               assets_GetRecords();
                               SC_OUI_Methods.PrimaryButton(Assets_PM, 'assets-pagenation');
   
                               //Start -- Orders Mark ups
                               var orders_markup = Contact360Markup.OrdersMarkupFn();
                               $("#Orders-Applet").html(orders_markup);
                               //End -- Orders Mark ups
                               orders_GetRecords();
                               SC_OUI_Methods.PrimaryButton(Orders_PM, 'orders-pagenation');
   
                               //Start -- HDSR Mark ups
                               var hdsr_markup = Contact360Markup.HDSRMarkupFn();
                               $("#HDSR-Applet").html(hdsr_markup);
                               //End -- HDSR Mark ups
                               HDSR_GetRecords();
                               SC_OUI_Methods.PrimaryButton(HDSR_PM, 'hdsr-pagenation');
                               
                               //Start -- Opportunity Mark ups
                               var opportunity_markup = Contact360Markup.OpportunityMarkupFn();
                               $("#Oppor-Applet").html(opportunity_markup);
                               //End -- Opportunity Mark ups
                               opportunities_GetRecords();
                               SC_OUI_Methods.PrimaryButton(Opportunity_PM, 'opp-pagenation');
                               
                               //Start -- SR Mark ups
                               var serv_req_markup = Contact360Markup.SRMarkupFn();
                               $("#SR-Applet").html(serv_req_markup);
                               //End -- SR Mark ups
                               SR_GetRecords();
                               SC_OUI_Methods.PrimaryButton(SR_PM, 'serv-req-pagenation');
   
                               //Start -- Activities Mark ups
                               var customerType = SC_OUI_Methods.SCGetProfileAttrValue('SC Primary Division Type');
                               var activities_markup = Contact360Markup.ActivityMarkupFn(customerType);
                               $("#Activities-Applet").html(activities_markup);
                               //End -- Activities Mark ups
                               activities_GetRecords();
                               SC_OUI_Methods.PrimaryButton(Activities_PM, 'activities-pagenation');
   
                               //Start -- Inner Circle Rewards Mark ups
                               var InnerCircle_markup = Contact360Markup.ICRMarkupFn();
                               $("#Inn-Circle-Applet").html(InnerCircle_markup);
                               //End -- Inner Circle Rewards Mark ups
                               innerCircle_GetRecords();
                               //NGOLLA: D.No:562 Added Pagination for ICR 
                               SC_OUI_Methods.PrimaryButton(Inn_Circle_PM, 'ICR-pagenation');
                               //for item lookup
                               var Item_markup = Contact360Markup.ItemlookupMarkupFn();
                               $("#Item-lookup-Applet").html(Item_markup);
                               //NTHARRE:02JUL2021:To hide the functionality for store users based on lov - SFSTRY0001090
                               var StoreUser =  SC_OUI_Methods.SCGetProfileAttrValue('SC Store User');
                               var searchExpr = "[Type] = 'SC_IS_STORE_LEAD' AND [Active] = 'Y'";
                               var sortSpec = "Order By";
                               var StoreLead = SC_OUI_Methods.SCGetOrderLoVs(searchExpr);
                               if(StoreUser == "Y" && StoreLead =="No"){
                                   $("#SC-360-customer-interaction-edit").hide();
                                   $("#SC-360-profile-information-edit").hide();
                                   $("#SC360ActEditIcon").hide();
                               }
                               else{
                                   $("#SC-360-customer-interaction-edit").show();
                                   $("#SC-360-profile-information-edit").show();
                                   $("#SC360ActEditIcon").show();
                               }
                       $("body").trigger('Custom.End');
                       },500);
                   });
                    //End: contact create pop up
   
                    //Start: Create contact modal- closing
                    $(document).on('click','#SC-close-add-contact',function(event){
                        //$("#SC-close-add-contact").click(function () {
                            //SiebelJS.Log("New Contact Closed");
                            $("#SC-add-contact").modal('hide');
                           //FieldQueryPair={"Id":Contact_Id};
                          //SC_OUI_Methods.ExecuteListAppletFrame(SiebelConstants,FieldQueryPair,"SC Contact List Applet");
                       //});
                    });
                    //End: Create contact modal-closing
   
                    //Start: contact field validation & contact creation
                    $(document).on('click', "#gotoContactAccount", function (e) {
                        var ValidateTab1 = ContactCreatefn.ContactFieldValidation1();
                       //SWAGH:10132023:SFSTRY0003040
                       $("#sc-media-block").hide();					
                    });
   
                    $(document).on('click', "#createContact", function (e) {
                       var conCreate = ContactCreatefn.ContactFieldValidation2("SCContact360ViewPR",isiFitRecord,sContactId);
                    });
                    //End: contact field validation & contact creation
   
                    //Start: Email Validation
                    $(document).on("click", "#email", function () {
                        var emailValidain = ContactCreatefn.Cont_Create_EmailValidation();
                    });
                    //End: Email Validation
                   //VALLA: 13-JUNE-19 : Start: Mobile Validation
                   $(document).on("click","#mobilephonecheck",function(){
                       var mobileValidation =  ContactCreatefn.Cont_Create_MobileValidation();
                   });
                   //End: Mobile Validation
   
                    //Start: Referred by  checkbox
                   $(document).on("click","#referredby",function(){
                       var referredBy =  ContactCreatefn.Cont_Create_ReferredBY();
                   });
               //End: Referred by  checkbox
               
                    //Start: Goto previous page
                    $(document).on('click', "#gotoContactContact", function (event) {
                        var emailValidain = ContactCreatefn.GotoPreviousPage();
                    });
                    //End: Goto previous page
   
   
                    //This is for the input box animations. this is required across the app
                    $(document).on('focus', '.SC-input', function () {
                        $(this).parent().addClass("is-active is-completed");
                    });
   
                    $(document).on('focusout', '.SC-input', function () {
                        if ($(this).val() === "" && this.id != "SC_Revenue") //SPATIBAN 11/28/2018: Added for CHG0034565
                            $(this).parent().removeClass("is-completed");
                        $(this).parent().removeClass("is-active");
                    });
   
                    //This is for moving recents scroll in header
                    $(document).on('click', '#scroll', function () {
                        var leftPos = $('div.recent-results').scrollLeft();
                        $("div.recent-results").animate({
                            scrollLeft: leftPos + 300
                        }, 500);
                    });
   
                    //Start: on focus out, change the phone numbeer to US format
                    SC_OUI_Methods.PH_USFormat("cd-Mobile-Phone");
                    SC_OUI_Methods.PH_USFormat("cd-Secondary-Phone");
                    SC_OUI_Methods.PH_USFormat("cd-Secondary-Phone2");
                    //End: on focus out, change the phone numbeer to US format
                    //END -- CONTACT CREATION PROCESS 
   
   
                    //START: Drill downs for list applets
                   $(document).on('click', '.Activity-ordnum', function () {
                       localStorage.setItem('whitescreen', 1);
                       var row_id = '';
                       row_id = $(this).closest('tr').prop('id');
                       SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact 360 Activity List Applet OUI"].GetBusComp().SetSelection(row_id);
                       Activities_PM.ExecuteMethod("OnDrillDown", "SC Order Number", row_id);
                   });

			    $(document).on('click', ".scconsleeper", function () {
                       localStorage.setItem('whitescreen', 1);
                       var row_id = '';
                      row_id = $(this).closest('tr').prop('id');
				//	SiebelApp.S_App.GetActiveView().GetAppletMap()["Contact Relationship List Applet"].GetBusComp().SetSelection(row_id);
                      // ContactFormApplet_PM = SiebelApp.S_App.GetActiveView().GetAppletMap()["Contact Relationship List Applet"].GetPModel().GetRenderer().GetPM();
                    setTimeout(function(){
						var Custom_Service="",Input_BS="",Out_BS="";
						//var row_id=""
						 var additional_sleeper_RS = '';
	                       additional_sleeper_RS = SiebelApp.S_App.GetActiveView().GetAppletMap()["Contact Relationship List Applet"].GetPModel().GetRenderer().GetPM().Get("GetRecordSet");
						var sPrimSleeper = additional_sleeper_RS[row_id]["Contact UId"]
						Custom_Service = SiebelApp.S_App.GetService("SC Custom Query");
						Input_BS = SiebelApp.S_App.NewPropertySet();
						Out_BS = SiebelApp.S_App.NewPropertySet();
						searchfields = "Id";
						Input_BS.SetProperty("BO", "Contact");
						Input_BS.SetProperty("BC", "Contact");
						Input_BS.SetProperty("SearchSpecification", "[Person UId] = '"+sPrimSleeper+"'");
						Input_BS.SetProperty("SortSpecification", "");
						Input_BS.SetProperty("ReqNoOfRecords", "1");
						Input_BS.SetProperty("FieldsArray", searchfields);
						Out_BS = Custom_Service.InvokeMethod("Query", Input_BS);
						var Child_BS = Out_BS.GetChild(0);
						var BS_Data = Child_BS.GetProperty("OutputRecordSet");
						if(BS_Data!="}"){
							var RecordSet =  new Array; 
							RecordSet = BS_Data.split(";");
							RecordSet = JSON.parse(RecordSet);
							row_id = RecordSet["Id"];
							
						
		
                       var InPut = "",
						OutPut = "",
						BService;
					InPut = SiebelApp.S_App.NewPropertySet();
					OutPut = SiebelApp.S_App.NewPropertySet();
					InPut.SetProperty("View", "SC Contact 360 Degree View OUI");
					InPut.SetProperty("Business Component", "Contact");
					InPut.SetProperty("Row Id", row_id);
					BService = SiebelApp.S_App.GetService("CUT eSales Order Entry Toolkit Service");
					OutPut = BService.InvokeMethod("GotoView", InPut);
						}
                       $('#custommaskoverlay').hide();
                           },50);
					
					//Additional_Sleeper_PM.ExecuteMethod("OnDrillDown", 'Customer #', row_id);
                       
                       });
                    $(document).on('click', '.Activity-AType', function () {
                       localStorage.setItem('whitescreen', 1);
                        var row_id = '';
                        row_id = $(this).closest('tr').prop('id');
                        SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact 360 Activity List Applet OUI"].GetBusComp().SetSelection(row_id);
                        Activities_PM.ExecuteMethod("OnDrillDown", "Type", row_id);
   
                    });
   
                    $(document).on('click', '.Asset-AssetNum', function () {
                       localStorage.setItem('whitescreen', 1);
                        var row_id = '';
                        row_id = $(this).closest('tr').prop('id');
                        SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact 360 Asset List Applet OUI"].GetBusComp().SetSelection(row_id);
                        Assets_PM.ExecuteMethod("OnDrillDown", 'Asset Number', row_id);
                        row_id = null;
   
                    });
                    $(document).on('click', '.Opty-OName', function () {
                       localStorage.setItem('whitescreen', 1);
                        var row_id = '';
                        row_id = $(this).closest('tr').prop('id');
                        SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact 360 Opportunity List Applet"].GetBusComp().SetSelection(row_id);
                        Opportunity_PM.ExecuteMethod("OnDrillDown", 'Name', row_id);
                        row_id = null;
   
                    });
   
                    //SWAGH:09282023:SFSTRY0003023
                    $(document).on('click', '.HDSR-Orders-ONumber', function () {
                        var row_id = '';
                        row_id = $(this).closest('tr').prop('id');
                       SiebelJS.Log(SiebelApp.S_App.GetActiveView().GetAppletMap()['SC Contact 360 HDSR List Applet OUI'].GetBusComp().GetFieldValue('Order Type Code'));
                        SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact 360 HDSR List Applet OUI"].GetBusComp().SetSelection(row_id);
                       if(SiebelApp.S_App.GetActiveView().GetAppletMap()['SC Contact 360 HDSR List Applet OUI'].GetBusComp().GetFieldValue('Order Type Code') == "Service"){
                           localStorage.setItem('whitescreen', 1);
                       }
                        HDSR_PM.ExecuteMethod("OnDrillDown", 'SC Order Number', row_id);
                        row_id = null;
                    });
                    
                    $(document).on('click', '.Orders-ONumber', function () {
                        var row_id = '';
                        row_id = $(this).closest('tr').prop('id');
                       SiebelJS.Log(SiebelApp.S_App.GetActiveView().GetAppletMap()['SC Contact 360 Order List Applet OUI'].GetBusComp().GetFieldValue('Order Type Code'));
                        SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact 360 Order List Applet OUI"].GetBusComp().SetSelection(row_id);
                       if(SiebelApp.S_App.GetActiveView().GetAppletMap()['SC Contact 360 Order List Applet OUI'].GetBusComp().GetFieldValue('Order Type Code')=="Service"){
                           localStorage.setItem('whitescreen', 1);
                       }
                        Orders_PM.ExecuteMethod("OnDrillDown", 'Order Number', row_id);
                        row_id = null;
                    });
   
                    $(document).on('click', '.HDSR-SRNum', function () {
                       localStorage.setItem('whitescreen', 1);				 
                        var row_id = '';
                        row_id = $(this).closest('tr').prop('id');
                        SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact 360 HDSR List Applet OUI"].GetBusComp().SetSelection(row_id);
                        HDSR_PM.ExecuteMethod("OnDrillDown", 'SR Number', row_id);
                        row_id = null;
   
                    });
                    
                    $(document).on('click', '.SR-SRNum', function () {
                       localStorage.setItem('whitescreen', 1);				 
                        var row_id = '';
                        row_id = $(this).closest('tr').prop('id');
                        SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact 360 Service Request List Applet OUI"].GetBusComp().SetSelection(row_id);
                        SR_PM.ExecuteMethod("OnDrillDown", 'SR Number', row_id);
                        row_id = null;
   
                    });
                    //END: Drill downs for list applets
   
                    //Start: On click of Address MVG
                    $(document).on("click", "#MVG", function () {
                        //$("#s_9_1_218_0_icon").trigger("click");
                        SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact Form Applet"].GetPModel().OnControlEvent(SiebelApp.Constants.get("PHYEVENT_INVOKE_MVG"), SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact Form Applet"].GetControls()["Personal Address"]);
                        SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact Form Applet"].GetPModel().AttachNotificationHandler("g", function (o) {
                            var Field_Name = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact Form Applet"].GetPModel().ExecuteMethod("GetFieldValue", SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact Form Applet"].GetControls()["Personal Address"]);
                            $('#SiebelField').val(Field_Name);
                           $("#cd-Address").val(SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact Form Applet"].GetBusComp().GetFieldValue("Personal Street Address"));
                           $("#cd-City").val(SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact Form Applet"].GetBusComp().GetFieldValue("Personal City"));
                           $("#cd-State").val(SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact Form Applet"].GetBusComp().GetFieldValue("Personal State"));
                           $("#cd-Postal-Code").val(SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact Form Applet"].GetBusComp().GetFieldValue("Personal Postal Code"));
                           $("#cd-Country").val(SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact Form Applet"].GetBusComp().GetFieldValue("Personal Country"));
                           $("#cd-close-store1").val(SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact Form Applet"].GetBusComp().GetFieldValue("SC Closest Store 1"));
                           $("#cd-close-store2").val(SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact Form Applet"].GetBusComp().GetFieldValue("SC Closest Store 2"));
   
                        });
                        SC_OUI_Methods.addAddressMVG();
                    });
                    //End: On click of Address MVG
   
                   //SPATIBAN:MAY 2019 Release:Added code for on click of store closure report button
                   $("#storereport").click(function() {
                       SiebelApp.S_App.GotoView("SC Store Report View","","","");
                   });
                    //Start: Log out button logic
                    $("#SC-profile").click(function () {
                        //navigation to store report
                          var customerName = SC_OUI_Methods.SCGetProfileAttrValue('SC Store Number');
                          var customerType = SC_OUI_Methods.SCGetProfileAttrValue('SC Primary Division Type');
                          if ((customerType == 'STORE' || customerType == 'SHOW') && customerName!= "") {
                           /* $(document).on('click', '#storereport', function(){
                           scOUIMarkups.StoreNavigation();
                           }); */
                           $("#storereport").show();
                          }
                          else{
                           $("#storereport").hide();}
                        $(".SC-Profile-container").toggle();
                    });
                    //on click of logout
                    $("#logout").click(function () {
                        SiebelApp.S_App.LogOff();
                    });
            $(document).on('click','#sc-referredby-con-search',function(e){
               e.stopImmediatePropagation();
               searchContact();
             
           });
           
                    //End: Log out button logic
                    //Start:referredBy logic for new Contact
                    
                       $(document).on('click','.ref-icon-img',function(e){
                           if(refsearchCount<=refsearchfields.length-1){
                               e.preventDefault();
                               next = parseInt(next);
                               var addto = "#rcfield" + next;
                               var addRemove = "#rcfield" + (next);
                               
                               var refOrderdate="N";
                               next = parseInt(next) + 1;
                               var newIn = '<select class="select-box margin-top sc-select-box" id="cfield' + next + '" name="field' + next + '">';
                               for(i=0;i<refsearchfields.length;i++){
                                   newIn+='<option value="'+refsearchfields[i]+'">'+refsearchfields[i]+'</option>';
                               }
                               
                               newIn+='</select><input type="text" tabindex="'+(next+1)+'" id="rcfield' + next + '" class="search-box sc-referred-search-box margin-top" autocomplete="off">';
                               var newInput = $(newIn);
                               
                               var removeBtn = '<div id="remove' + (next - 1) + '" class="remove-me referred-remove-me margin-top"> <span id="referredremoveicon" class="glyphicon glyphicon-minus-sign icon-img-remove"></span></div>';
                               var removeButton = $(removeBtn);
                               $(addto).after(newInput);
                               $(addRemove).after(removeButton);
                               
                               for(var j=0;j<sFields.length;j++){
                                   $( "#cfield"+next+" option[value='"+sFields[j]+"']" ).wrap( "<span>");
                               }
                               
                               var e = document.getElementById("cfield"+next);
                               var seletedvalue = e.options[e.selectedIndex].value;
                               $("#cfield"+next+" option[value='"+seletedvalue+"']").attr('selected', 'selected');
                               
                               $(".sc-select-box").each(function(){
                                   $(this).attr("id"); //this.id
                                   if($(this).attr("id")!="cfield"+next){
                                       $( "#"+$(this).attr("id")+" option[value='"+seletedvalue+"']" ).wrap( "<span>" );
                                   }
                               });
                               
                               sFields.push(seletedvalue);
                               
                               
                               $(".ref-icon-img").hide();
                               $("#rcfield" + next - 1).attr('data-source', $(addto).attr('data-source'));
                               $("#count").val(next);
                               storesearchfields();
                               refsearchCount++;
                               
                           }
                     });
           
           // Removing the search fields onclik of - icon
           $(document).on('click','.referred-remove-me',function(e){
               e.preventDefault();
               var idString = this.id.toString();
               
               var fieldNum = idString.substring(6, idString.length);
               var fieldID = "#cfield" + fieldNum;
               var rfieldID = "#rcfield" + fieldNum;
               
               var e = document.getElementById("cfield"+fieldNum);
               var seletedvalue = e.options[e.selectedIndex].value;
               $(".sc-select-box").each(function(){
               if($(this).attr("id")!="cfield"+parseInt(fieldNum)){
                    if ( $( "#"+$(this).attr("id")+" option[value='"+seletedvalue+"']" ).parent().is( "span" ) ){
                       $( "#"+$(this).attr("id")+" option[value='"+seletedvalue+"']" ).unwrap();
                   }
                }
               });
               
               var sIndex = sFields.indexOf(seletedvalue);
               sFields.splice(sIndex,1);
               $(this).remove();
               $(fieldID).remove();
               $(rfieldID).remove();
               storesearchfields();
               
               refsearchCount--;
           });
           
           $(document).on('click','#sc-referredby-con-search',function(e){
               e.stopImmediatePropagation();
              searchContact();
             
           });
           
           // on click of the enter in referred contact search
           //$(".sc-referred-search-box").keyup(function(event) {
           $(document).on('click','.sc-referred-search-box',function(event){	
               if (event.keyCode === 13) {
                   if(!$("#sc-referredby-con-search").hasClass("SC-disabled")){
                       searchContact();
                   }
               }
           });
           
           // search fields and search box code
       $(document).on('keyup','.sc-referred-search-box',function(){
           selectedFieldId = $(this).attr("id").substring(2,$(this).attr("id").length);
           var e = document.getElementById("c"+selectedFieldId);
           var selectedvalue = e.options[e.selectedIndex].value;
           //SCHERKU: For date of first activity
            if(selectedvalue == "Date Of First Activity"){
               this.value = this.value.replace(/[a-zA-Z ]+/g,'');
               }
               
           //NGOLLA commented the code for defect no:737
           /*if(selectedvalue == "Phone Number" || selectedvalue == "Customer Number" || selectedvalue == "Employee Number"){
               this.value = this.value.replace(/[^0-9\.]/g,'');
           }*/
           
           if($(this).attr("id")!="rcfield0"&&$("#rcfield0").val().length!=0&&$("#rcfield0").val()!="*"&&$(this).val().length!=0&&$(this).val()!="*"){
               if(refsearchCount!=refsearchfields.length){
                   $(".ref-icon-img").show();
               }else{
                   $("#referredremoveicon").show();
               }
           }else if($(this).attr("id")=="rcfield0"&&$("#rcfield0").val().length!=0){
               $(".sc-referred-search-box").each(function(){
                   if($(this).attr("id")!="rcfield0"){
                       if($(this).val().length!=0&&$(this).val()!="*"){
                           $(".ref-icon-img").show();
                       }
                   }
               });
           }else{
               $(".ref-icon-img").hide();
           }
           
           $(".sc-referred-search-box").each(function(){
                if($(this).val().length!=0&&$(this).val()!="*"){
                    $("#sc-referredby-con-search").removeClass('SC-disabled');
                     return false;
                }else{
                    $("#sc-referredby-con-search").addClass('SC-disabled');
                }
           });
        });
        
         // dynamic values change for dropdowns
         $(document).on('click','.sc-select-box',function(){
           var currentid = this.id;
           var e = document.getElementById(currentid);
           currentValue = e.options[e.selectedIndex].value;
        });
         $(document).on('change','.sc-select-box',function(){
           var currentid = this.id;
           var e = document.getElementById(currentid);
           var seletedvalue = e.options[e.selectedIndex].value;
           
           $(".sc-select-box").each(function(){
            $(this).attr("id"); //this.id
            if($(this).attr("id")!=currentid){
                $( "#"+$(this).attr("id")+" option[value='"+seletedvalue+"']" ).wrap( "<span>" );
                if ( $( "#"+$(this).attr("id")+" option[value='"+currentValue+"']" ).parent().is( "span" ) ){
                   $( "#"+$(this).attr("id")+" option[value='"+currentValue+"']" ).unwrap();
               }
            }
            $( "#"+currentid+" option[value='"+seletedvalue+"']" ).attr('selected', 'selected');
           });
           sFields.push(seletedvalue);
           var sIndex = sFields.indexOf(currentValue);
           sFields.splice(sIndex,1);
        });
          
          $(document).on('click', '#SC-table-referral-search-contact tbody tr', function(){
               sc_reffid = $(this).attr('id');
               selected_RefConId = sc_reffid;
               selected_RefConIndex = selected_RefConId.replace("ref_row","");
               $('#' + sc_reffid).addClass('highlate-row').siblings().removeClass('highlate-row');
               $("#SC-select-contact-referredby").removeClass('SC-disabled');
           });
           
           $(document).on('click', '#SC-select-contact-referredby', function(){
             $("#SC-select-contact-referredby").addClass('SC-disabled');	
             $("#SC-search-referredby").modal('hide');
             var rowid= sc_reffid.slice(-1);
             SiebelJS.Log(rowid);
             var referedcontactInfo=$("#"+rowid+"refcondet").text();
             var refconrcd=referedcontactInfo.split('_');
             RefById=refconrcd[0];
             var RefbyName=refconrcd[1]+" "+refconrcd[2];
             $("#Referredby").val(RefbyName);
              $("#Referredby").parent().val(RefById);
             $("#Referredby").parent().addClass("is-active is-completed");
           });
           
           //Start: Create contact modal- closing
                   /*$(document).ready(function() { 				  
                       $("#SC-close-add-contact").click(function() {
                           $("#SC-add-contact").modal('hide');						
                       });
                   });*/
               //End: Create contact modal-closing*/
                    //End:referredBy logic for new Contact
   
                    //Start:: Sorting Functionality
   
   
                    $(document).on("click", ".sort-by", function () {
                        //Consolidate Notes-------------------------------Consolidated Notes
                        if ($(this).attr('id') == "Note") {
                            if (note_CSN == true) {
                                //SiebelJS.Log("In asc number");
                                sortrecords(1, "Note");
                                note_CSN = false;
                            } else {
                                //SiebelJS.Log("In dec number");
                                sortrecords(0, "Note");
                                note_CSN = true;
                            }
                        } else if ($(this).attr('id') == "NoteType") {
                            if (noteType_CSN == true) {
                                //SiebelJS.Log("In asc");
                                sortrecords(1, "Note Type");
                                noteType_CSN = false;
                            } else {
                                //SiebelJS.Log("In dec");
                                sortrecords(0, "Note Type");
                                noteType_CSN = true;
                            }
                        } else if ($(this).attr('id') == "Owner_CN") {
                            if (owner_CSN == true) {
                                //SiebelJS.Log("In asc");
                                sortrecords(1, "Owner");
                                owner_CSN = false;
                            } else {
                                //SiebelJS.Log("In dec");
                                sortrecords(0, "Owner");
                                owner_CSN = true;
                            }
                        } else if ($(this).attr('id') == "Status_CN") {
                            if (status_CSN == true) {
                                //SiebelJS.Log("In asc");
                                sortrecords(1, "Status");
                                status_CSN = false;
                            } else {
                                //SiebelJS.Log("In dec");
                                sortrecords(0, "Status");
                                status_CSN = true;
                            }
                        }else if ($(this).attr('id') == "ScheduledDate_CSN") {
                            if (scheduledDate_CSN == true) {
                                //SiebelJS.Log("In asc");
                                sortrecords(1, "Scheduled Date");
                                scheduledDate_CSN = false;
                            } else {
                                //SiebelJS.Log("In dec");
                                sortrecords(0, "Scheduled Date");
                                scheduledDate_CSN = true;
                            }
                        }else if ($(this).attr('id') == "Updated") {
                            if (updated_CSN == true) {
                                //SiebelJS.Log("In asc");
                                sortrecords(1, "Updated Date");
                                updated_CSN = false;
                            } else {
                                //SiebelJS.Log("In dec");
                                sortrecords(0, "Updated Date");
                                updated_CSN = true;
                            }
                        }else if ($(this).attr('id') == "Reason1") {//SPATIBAN:Added code for Sorting #CHG0034381
                            if (noteRsn1 == true) {
                                //SiebelJS.Log("In asc");
                                sortrecords(1, "Reason 1");
                                noteRsn1 = false;
                            } else {
                                //SiebelJS.Log("In dec");
                                sortrecords(0, "Reason 1");
                                noteRsn1 = true;
                            }
                        }else if ($(this).attr('id') == "Reason2") {
                            if (noteRsn2 == true) {
                                //SiebelJS.Log("In asc");
                                sortrecords(1, "Reason 2");
                                noteRsn2 = false;
                            } else {
                                //SiebelJS.Log("In dec");
                                sortrecords(0, "Reason 2");
                                noteRsn2 = true;
                            }
                        }
                       
                       //Item lookup
                       else if ($(this).attr('id') == "skunumber") {
                           Item_PM=SiebelApp.S_App.GetActiveView().GetAppletMap()["SC SIS Product List Applet"].GetPModel().GetRenderer().GetPM();
                            if (skunumber == true) {
                                //AssetsPM.ExecuteMethod("OnClickSort", "SC Prod Detail", 'asc');
                                SC_OUI_Methods.SortRecords(Item_PM, "Part #", 'SortAscending');
   
                                Itemlookup_GetRecords(Item_PM);
                                skunumber = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Item_PM, "Part #", 'SortDescending');
   
                                Itemlookup_GetRecords(Item_PM);
                                skunumber = true;
   
                            }
                        } else if ($(this).attr('id') == "skudescription") {
                           Item_PM=SiebelApp.S_App.GetActiveView().GetAppletMap()["SC SIS Product List Applet"].GetPModel().GetRenderer().GetPM();
                            if (skudescription == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Item_PM, "Description", 'SortAscending');
   
                                Itemlookup_GetRecords(Item_PM);
                                skudescription = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Item_PM, "Description", 'SortDescending');
   
                                Itemlookup_GetRecords(Item_PM);
                                skudescription = true;
   
                            }
                        } else if ($(this).attr('id') == "skuproductline") {
                           Item_PM=SiebelApp.S_App.GetActiveView().GetAppletMap()["SC SIS Product List Applet"].GetPModel().GetRenderer().GetPM();
                            if (skuproductline == true) {
                                //SiebelJS.Log("In SortAscending@@");
                                SC_OUI_Methods.SortRecords(Item_PM, "Product Line", 'SortAscending');
   
                                Itemlookup_GetRecords(Item_PM);
                                skuproductline = false;
   
                            } else {
                                //SiebelJS.Log("In dec@@");
                                SC_OUI_Methods.SortRecords(Item_PM, "Product Line", 'SortDescending');
   
                                Itemlookup_GetRecords(Item_PM);
                                skuproductline = true;
   
                            }
                        }else if ($(this).attr('id') == "versionstatus") {
                           Item_PM=SiebelApp.S_App.GetActiveView().GetAppletMap()["SC SIS Product List Applet"].GetPModel().GetRenderer().GetPM();
                            if (versionstatus == true) {
                                //SiebelJS.Log("In SortAscending@@");
                                SC_OUI_Methods.SortRecords(Item_PM, "Version Status", 'SortAscending');
   
                                Itemlookup_GetRecords(Item_PM);
                                versionstatus = false;
   
                            } else {
                                //SiebelJS.Log("In dec@@");
                                SC_OUI_Methods.SortRecords(Item_PM, "Version Status", 'SortDescending');
   
                                Itemlookup_GetRecords(Item_PM);
                                versionstatus = true;
   
                            }
                        } 
                       //Item lookup
                        //Assets--------------------------------------------------Assets
                        else if ($(this).attr('id') == "ProdDetail") {
                            if (ProdDetail_Asset == true) {
                                //AssetsPM.ExecuteMethod("OnClickSort", "SC Prod Detail", 'asc');
                                SC_OUI_Methods.SortRecords(Assets_PM, "SC Prod Detail", 'SortAscending');
   
                                assets_GetRecords();
                                ProdDetail_Asset = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Assets_PM, "SC Prod Detail", 'SortDescending');
   
                                assets_GetRecords();
                                ProdDetail_Asset = true;
   
                            }
                        } else if ($(this).attr('id') == "Display") {
                            if (Display_Asset == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Assets_PM, "SC Display Sale Flag", 'SortAscending');
   
                                assets_GetRecords();
                                Display_Asset = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Assets_PM, "SC Display Sale Flag", 'SortDescending');
   
                                assets_GetRecords();
                                Display_Asset = true;
   
                            }
                        } else if ($(this).attr('id') == "Asset") {
                            if (Asset_Asset == true) {
                                //SiebelJS.Log("In SortAscending@@");
                                SC_OUI_Methods.SortRecords(Assets_PM, "Asset Number", 'SortAscending');
   
                                assets_GetRecords();
                                Asset_Asset = false;
   
                            } else {
                                //SiebelJS.Log("In dec@@");
                                SC_OUI_Methods.SortRecords(Assets_PM, "Asset Number", 'SortDescending');
   
                                assets_GetRecords();
                                Asset_Asset = true;
   
                            }
                        } else if ($(this).attr('id') == "Status_asst") {
                            if (status_Asset == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Assets_PM, "Status", 'SortAscending');
   
                                assets_GetRecords();
                                status_Asset = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Assets_PM, "Status", 'SortDescending');
   
                                assets_GetRecords();
                                status_Asset = true;
   
                            }
                        } else if ($(this).attr('id') == "ProductLine") {
                            if (status_Asset == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Assets_PM, "Product Primary Product Line", 'SortAscending');
   
                                assets_GetRecords();
                                status_Asset = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Assets_PM, "Product Primary Product Line", 'SortDescending');
   
                                assets_GetRecords();
                                status_Asset = true;
   
                            }
                        }else if ($(this).attr('id') == "SKU") {
                            if (sku_Asset == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Assets_PM, "Product Part Number", 'SortAscending');
   
                                assets_GetRecords();
                                sku_Asset = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Assets_PM, "Product Part Number", 'SortDescending');
   
                                assets_GetRecords();
                                sku_Asset = true;
   
                            }
                        } else if ($(this).attr('id') == "ProductName") {
                            if (ProName_Asset == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Assets_PM, "Product Description", 'SortAscending');
   
                                assets_GetRecords();
                                ProName_Asset = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Assets_PM, "Product Description", 'SortDescending');
   
                                assets_GetRecords();
                                ProName_Asset = true;
   
                            }
                        } else if ($(this).attr('id') == "Purchased") {
                            if (purchased_Asset == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Assets_PM, "Purchase Date", 'SortAscending');
   
                                assets_GetRecords();
                                purchased_Asset = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Assets_PM, "Purchase Date", 'SortDescending');
   
                                assets_GetRecords();
                                purchased_Asset = true;
   
                            }
                        } else if ($(this).attr('id') == "OrderNumber_asst") {
                            if (oNumber_Asset == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Assets_PM, "SC Order Number", 'SortAscending');
   
                                assets_GetRecords();
                                oNumber_Asset = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Assets_PM, "SC Order Number", 'SortDescending');
   
                                assets_GetRecords();
                                oNumber_Asset = true;
   
                            }
                        } else if ($(this).attr('id') == "InstalledDate") {
                            if (InstalDate_Asset == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Assets_PM, "Install Date", 'SortAscending');
   
                                assets_GetRecords();
                                InstalDate_Asset = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Assets_PM, "Install Date", 'SortDescending');
   
                                assets_GetRecords();
                                InstalDate_Asset = true;
   
                            }
                        }else if ($(this).attr('id') == "StartPrice") {
                            if (InstalDate_Asset == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Assets_PM, "Base Price", 'SortAscending');
   
                                assets_GetRecords();
                                InstalDate_Asset = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Assets_PM, "Base Price", 'SortDescending');
   
                                assets_GetRecords();
                                InstalDate_Asset = true;
   
                            }
                        } else if ($(this).attr('id') == "CurrentAssetValue") {
                            if (InstalDate_Asset == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Assets_PM, "Adjusted Value", 'SortAscending');
   
                                assets_GetRecords();
                                InstalDate_Asset = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Assets_PM, "Adjusted Value", 'SortDescending');
   
                                assets_GetRecords();
                                InstalDate_Asset = true;
   
                            }
                        } else if ($(this).attr('id') == "Warranty") {
                            if (warranty_Asset == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Assets_PM, "SC Prod Warranty Name", 'SortAscending');
   
                                assets_GetRecords();
                                warranty_Asset = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Assets_PM, "SC Prod Warranty Name", 'SortDescending');
   
                                assets_GetRecords();
                                warranty_Asset = true;
   
                            }
                        } else if ($(this).attr('id') == "WarrantyEndDate") {
                            if (warr_EndDt_Asset == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Assets_PM, "SC Prod Wnty Duration Calc", 'SortAscending');
   
                                assets_GetRecords();
                                warr_EndDt_Asset = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Assets_PM, "SC Prod Wnty Duration Calc", 'SortDescending');
   
                                assets_GetRecords();
                                warr_EndDt_Asset = true;
   
                            }
                        }else if ($(this).attr('id') == "Displayflag") {
                            if (warr_EndDt_Asset == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Assets_PM, "SC Display Sale Flag", 'SortAscending');
   
                                assets_GetRecords();
                                warr_EndDt_Asset = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Assets_PM, "SC Display Sale Flag", 'SortDescending');
   
                                assets_GetRecords();
                                warr_EndDt_Asset = true;
   
                            }
                        }else if ($(this).attr('id') == "Asset") {
                            if (warr_EndDt_Asset == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Assets_PM, "Asset Number", 'SortAscending');
   
                                assets_GetRecords();
                                warr_EndDt_Asset = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Assets_PM, "Asset Number", 'SortDescending');
   
                                assets_GetRecords();
                                warr_EndDt_Asset = true;
   
                            }
                        } else if ($(this).attr('id') == "AssetSaleLocation") {
                            if (warr_EndDt_Asset == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Assets_PM, "SC Division", 'SortAscending');
   
                                assets_GetRecords();
                                warr_EndDt_Asset = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Assets_PM, "SC Division", 'SortDescending');
   
                                assets_GetRecords();
                                warr_EndDt_Asset = true;
   
                            }
                        }
                       else if ($(this).attr('id') == "OriginalOrder") {
                            if (originalOrders_Asset == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Assets_PM, "SC Original Order Number", 'SortAscending');
   
                                assets_GetRecords();
                                originalOrders_Asset = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Assets_PM, "SC Original Order Number", 'SortDescending');
   
                                assets_GetRecords();
                                originalOrders_Asset = true;
   
                            }
                        } else if ($(this).attr('id') == "RelatedOrder") {
                            if (relatedlOrder_Asset == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Assets_PM, "SC Related Order No", 'SortAscending');
   
                                assets_GetRecords();
                                relatedlOrder_Asset = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Assets_PM, "SC Related Order No", 'SortDescending');
   
                                assets_GetRecords();
                                relatedlOrder_Asset = true;
   
                            }
                        }
                        //Orders---------------------------------------------------------Orders
                        else if ($(this).attr('id') == "OrderDate") {
                            if (orderDt_Orders == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Orders_PM, "Order Date", 'SortAscending');
   
                                orders_GetRecords();
                                orderDt_Orders = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Orders_PM, "Order Date", 'SortDescending');
   
                                orders_GetRecords();
                                orderDt_Orders = true;
   
                            }
                        } else if ($(this).attr('id') == "OrderNumber_ord") {
                            if (orderNum_Orders == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Orders_PM, "Order Number", 'SortAscending');
   
                                orders_GetRecords();
                                orderNum_Orders = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Orders_PM, "Order Number", 'SortDescending');
   
                                orders_GetRecords();
                                orderNum_Orders = true;
   
                            }
                        } else if ($(this).attr('id') == "OrderSubType") {
                            if (ord_SubType_Orders == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Orders_PM, "SC Sub-Type", 'SortAscending');
   
                                orders_GetRecords();
                                ord_SubType_Orders = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Orders_PM, "SC Sub-Type", 'SortDescending');
   
                                orders_GetRecords();
                                ord_SubType_Orders = true;
   
                            }
                        } else if ($(this).attr('id') == "Status_ord") {
                            if (status_Orders == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Orders_PM, "Status", 'SortAscending');
   
                                orders_GetRecords();
                                status_Orders = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Orders_PM, "Status", 'SortDescending');
   
                                orders_GetRecords();
                                status_Orders = true;
   
                            }
                        } else if ($(this).attr('id') == "OrderTotal") {
                            if (orderTotal_Orders == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Orders_PM, "Order Total", 'SortAscending');
   
                                orders_GetRecords();
                                orderTotal_Orders = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Orders_PM, "Order Total", 'SortDescending');
   
                                orders_GetRecords();
                                orderTotal_Orders = true;
   
                            }
                        }else if ($(this).attr('id') == "OrderRev") {
                            if (orderRev_Orders == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Orders_PM, "Revision", 'SortAscending');
   
                                orders_GetRecords();
                                orderRev_Orders = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Orders_PM, "Revision", 'SortDescending');
   
                                orders_GetRecords();
                                orderRev_Orders = true;
   
                            }
                        }
                       else if ($(this).attr('id') == "OrderSaleLC") {
                            if (ordersaleLC_Orders == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Orders_PM, "SC Sale Location", 'SortAscending');
   
                                orders_GetRecords();
                                ordersaleLC_Orders = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Orders_PM, "SC Sale Location", 'SortDescending');
   
                                orders_GetRecords();
                                ordersaleLC_Orders = true;
   
                            }
                        }
                       else if ($(this).attr('id') == "OrderSalesOT") {
                            if (orderSalesOT_Orders == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Orders_PM, "SC Sales Team Login", 'SortAscending');
   
                                orders_GetRecords();
                                orderSalesOT_Orders = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Orders_PM, "SC Sales Team Login", 'SortDescending');
   
                                orders_GetRecords();
                                orderSalesOT_Orders = true;
   
                            }
                        }
                       else if ($(this).attr('id') == "SleepIQStatus") {
                            if (sleepIQStatus_Orders == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Orders_PM, "SC Sleep IQ Status", 'SortAscending');
   
                                orders_GetRecords();
                                sleepIQStatus_Orders = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Orders_PM, "SC Sleep IQ Status", 'SortDescending');
   
                                orders_GetRecords();
                                sleepIQStatus_Orders = true;
   
                            }
                        }
                        //Opportunitiy--------------------------------------------------------Opportunity
                        else if ($(this).attr('id') == "OpportunityName") {
                            if (OptyName_Opportunities == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Opportunity_PM, "Name", 'SortAscending');
   
                                opportunities_GetRecords();
                                OptyName_Opportunities = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Opportunity_PM, "Name", 'SortDescending');
   
                                opportunities_GetRecords();
                                OptyName_Opportunities = true;
   
                            }
                        } else if ($(this).attr('id') == "Created_opp") {
                            if (Created_Opportunities == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Opportunity_PM, "Created", 'SortAscending');
   
                                opportunities_GetRecords();
                                Created_Opportunities = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Opportunity_PM, "Created", 'SortDescending');
   
                                opportunities_GetRecords();
                                Created_Opportunities = true;
   
                            }
                        } else if ($(this).attr('id') == "CreatedBy") {
                            if (createdBy_Opportunities == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Opportunity_PM, "Created By", 'SortAscending');
   
                                opportunities_GetRecords();
                                createdBy_Opportunities = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Opportunity_PM, "Created By", 'SortDescending');
   
                                opportunities_GetRecords();
                                createdBy_Opportunities = true;
   
                            }
                        } else if ($(this).attr('id') == "Probability") {
                            if (probability_Opportunities == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Opportunity_PM, "SC Oppty Prob", 'SortAscending');
   
                                opportunities_GetRecords();
                                probability_Opportunities = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Opportunity_PM, "SC Oppty Prob", 'SortDescending');
   
                                opportunities_GetRecords();
                                probability_Opportunities = true;
   
                            }
                        } else if ($(this).attr('id') == "SalesTeam") {
                            if (salesTeam_Opportunities == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Opportunity_PM, "Sales Rep", 'SortAscending');
   
                                opportunities_GetRecords();
                                salesTeam_Opportunities = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Opportunity_PM, "Sales Rep", 'SortDescending');
   
                                opportunities_GetRecords();
                                salesTeam_Opportunities = true;
   
                            }
                        } else if ($(this).attr('id') == "Channel") {
                            if (channel_Opportunities == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Opportunity_PM, "Channel", 'SortAscending');
   
                                opportunities_GetRecords();
                                channel_Opportunities = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Opportunity_PM, "Channel", 'SortDescending');
   
                                opportunities_GetRecords();
                                channel_Opportunities = true;
   
                            }
                        } else if ($(this).attr('id') == "Status_opp") {
                            if (status_Opportunities == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Opportunity_PM, "Status", 'SortAscending');
   
                                opportunities_GetRecords();
                                status_Opportunities = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Opportunity_PM, "Status", 'SortDescending');
   
                                opportunities_GetRecords();
                                status_Opportunities = true;
   
                            }
                        }
                       //SPATIBAN:Added code for CR#CHG0034565
                       else if ($(this).attr('id') == "Revenue_opp") {
                            if (Revenue_Opportunities == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Opportunity_PM, "Primary Revenue Amount", 'SortAscending');
   
                                opportunities_GetRecords();
                                Revenue_Opportunities = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Opportunity_PM, "Primary Revenue Amount", 'SortDescending');
   
                                opportunities_GetRecords();
                                Revenue_Opportunities = true;
   
                            }
                        }					     
                       //HDSR Service Requests---------------------------------------------------HDSR Service Requests				 	
                        else if ($(this).attr('id') == "HDSR-OpenedDate") {
                            if (HDSR_OpenedDate_ServiceRequests == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(HDSR_PM, "Created", 'SortAscending');
   
                                HDSR_GetRecords();
                                HDSR_OpenedDate_ServiceRequests = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(SR_PM, "Created", 'SortDescending');
   
                                SR_GetRecords();
                                HDSR_OpenedDate_ServiceRequests = true;
   
                            }
                        } else if ($(this).attr('id') == "HDSR-OrderNumber_sr") {
                            if (HDSR_OrderNumber_sr_serviceRequests == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(HDSR_PM, "SC Order Number", 'SortAscending');
   
                                HDSR_GetRecords();
                                HDSR_OrderNumber_sr_serviceRequests = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(HDSR_PM, "SC Order Number", 'SortDescending');
   
                                HDSR_GetRecords();
                                HDSR_OrderNumber_sr_serviceRequests = true;
   
                            }
                       } else if ($(this).attr('id') == "HDSR-SR") { 
                            if (HDSR_SR_ServiceRequests == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(HDSR_PM, "SR Number", 'SortAscending');
   
                                SR_GetRecords();
                                HDSR_SR_ServiceRequests = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(HDSR_PM, "SR Number", 'SortDescending');
   
                                HDSR_GetRecords();
                                HDSR_SR_ServiceRequests = true;
   
                            }					
                       } else if ($(this).attr('id') == "HDSR-DeliveryType") {
                            if (HDSR_DeliveryType_ServiceRequests == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(HDSR_PM, "Area", 'SortAscending');
   
                                HDSR_GetRecords();
                                HDSR_DeliveryType_ServiceRequests = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(HDSR_PM, "Area", 'SortDescending');
   
                                HDSR_GetRecords();
                                HDSR_DeliveryType_ServiceRequests = true;
   
                            }
                       } else if ($(this).attr('id') == "HDSR-Status_sr") {
                            if (HDSR_Status_sr_ServiceRequests == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(HDSR_PM, "Status", 'SortAscending');
   
                                HDSR_GetRecords();
                                HDSR_Status_sr_ServiceRequests = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(HDSR_PM, "Status", 'SortDescending');
   
                                HDSR_GetRecords();
                                HDSR_Status_sr_ServiceRequests = true;
   
                            }
                       } else if ($(this).attr('id') == "HDSR-SchStartDate") {
                            if (HDSR_SchStartDate_ServiceRequests == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(HDSR_PM, "Scheduled Start Date", 'SortAscending');
   
                                HDSR_GetRecords();
                                HDSR_SchStartDate_ServiceRequests = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(HDSR_PM, "Scheduled Start Date", 'SortDescending');
   
                                HDSR_GetRecords();
                                HDSR_SchStartDate_ServiceRequests = true;
   
                            }
                       } else if ($(this).attr('id') == "HDSR-SchEndDate") {
                            if (HDSR_SchEndDate_ServiceRequests == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(HDSR_PM, "Scheduled End Date", 'SortAscending');
   
                                HDSR_GetRecords();
                                HDSR_SchEndDate_ServiceRequests = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(HDSR_PM, "Scheduled End Date", 'SortDescending');
   
                                HDSR_GetRecords();
                                HDSR_SchEndDate_ServiceRequests = true;
   
                            }
                       } else if ($(this).attr('id') == "HDSR-Priority") {
                            if (HDSR_Priority_ServiceRequests == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(HDSR_PM, "Priority", 'SortAscending');
   
                                HDSR_GetRecords();
                                HDSR_Priority_ServiceRequests = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(HDSR_PM, "Priority", 'SortDescending');
   
                                HDSR_GetRecords();
                                HDSR_Priority_ServiceRequests = true;
   
                            }
                       } else if ($(this).attr('id') == "HDSR-DeliveryPhone") {
                            if (HDSR_DeliveryPhone_ServiceRequests == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(HDSR_PM, "SC Preferred Contact", 'SortAscending');
   
                                HDSR_GetRecords();
                                HDSR_DeliveryPhone_ServiceRequests = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(HDSR_PM, "SC Preferred Contact", 'SortDescending');
   
                                HDSR_GetRecords();
                                HDSR_DeliveryPhone_ServiceRequests = true;
   
                            }
                       } 
                       //Service Requests---------------------------------------------------Service Requests
                        else if ($(this).attr('id') == "OpenedDate") {
                            if (OpenDt_ServiceRequests == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(SR_PM, "Created", 'SortAscending');
   
                                SR_GetRecords();
                                OpenDt_ServiceRequests = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(SR_PM, "Created", 'SortDescending');
   
                                SR_GetRecords();
                                OpenDt_ServiceRequests = true;
   
                            }
                        } else if ($(this).attr('id') == "SR") {
                            if (srNum_ServiceRequests == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(SR_PM, "SR Number", 'SortAscending');
   
                                SR_GetRecords();
                                srNum_ServiceRequests = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(SR_PM, "SR Number", 'SortDescending');
   
                                SR_GetRecords();
                                srNum_ServiceRequests = true;
   
                            }
                        } else if ($(this).attr('id') == "SRType") {
                            if (srType_ServiceRequests == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(SR_PM, "SR Type", 'SortAscending');
   
                                SR_GetRecords();
                                srType_ServiceRequests = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(SR_PM, "SR Type", 'SortDescending');
   
                                SR_GetRecords();
                                srType_ServiceRequests = true;
   
                            }
                        } else if ($(this).attr('id') == "Type_sr") {
                            if (typeSR_ServiceRequests == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(SR_PM, "INS Product", 'SortAscending');
   
                                SR_GetRecords();
                                typeSR_ServiceRequests = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(SR_PM, "INS Product", 'SortDescending');
   
                                SR_GetRecords();
                                typeSR_ServiceRequests = true;
   
                            }
                        } else if ($(this).attr('id') == "Area") {
                            if (area_ServiceRequests == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(SR_PM, "Area", 'SortAscending');
   
                                SR_GetRecords();
                                area_ServiceRequests = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(SR_PM, "Area", 'SortDescending');
   
                                SR_GetRecords();
                                area_ServiceRequests = true;
   
                            }
                        } else if ($(this).attr('id') == "SubArea") {
                            if (subArea_ServiceRequests == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(SR_PM, "Sub-Area", 'SortAscending');
   
                                SR_GetRecords();
                                subArea_ServiceRequests = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(SR_PM, "Sub-Area", 'SortDescending');
   
                                SR_GetRecords();
                                subArea_ServiceRequests = true;
   
                            }
                        } else if ($(this).attr('id') == "DetailedDescription") {
                            if (detailDesc_ServiceRequests == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(SR_PM, "Description", 'SortAscending');
   
                                SR_GetRecords();
                                detailDesc_ServiceRequests = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(SR_PM, "Description", 'SortDescending');
   
                                SR_GetRecords();
                                detailDesc_ServiceRequests = true;
   
                            }
                        } else if ($(this).attr('id') == "Owner_sr") {
                            if (owner_ServiceRequests == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(SR_PM, "Owner", 'SortAscending');
   
                                SR_GetRecords();
                                owner_ServiceRequests = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(SR_PM, "Owner", 'SortDescending');
   
                                SR_GetRecords();
                                owner_ServiceRequests = true;
   
                            }
                        } else if ($(this).attr('id') == "Priority") {
                            if (priority_ServiceRequests == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(SR_PM, "Priority", 'SortAscending');
   
                                SR_GetRecords();
                                priority_ServiceRequests = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(SR_PM, "Priority", 'SortDescending');
   
                                SR_GetRecords();
                                priority_ServiceRequests = true;
   
                            }
                        } else if ($(this).attr('id') == "HDDeliveryDate") {
                            if (HDDD_ServiceRequests == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(SR_PM, "SC HD Delivery Date", 'SortAscending');
   
                                SR_GetRecords();
                                HDDD_ServiceRequests = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(SR_PM, "SC HD Delivery Date", 'SortDescending');
   
                                SR_GetRecords();
                                HDDD_ServiceRequests = true;
   
                            }
                        } else if ($(this).attr('id') == "OrderNumber_sr") {
                            if (OrderNumb_serviceRequests == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(SR_PM, "SC Order Number", 'SortAscending');
   
                                SR_GetRecords();
                                OrderNumb_serviceRequests = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(SR_PM, "SC Order Number", 'SortDescending');
   
                                SR_GetRecords();
                                OrderNumb_serviceRequests = true;
   
                            }
                        } else if ($(this).attr('id') == "Status_sr") {
                            if (status_serviceRequests == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(SR_PM, "Status", 'SortAscending');
   
                                SR_GetRecords();
                                status_serviceRequests = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(SR_PM, "Status", 'SortDescending');
   
                                SR_GetRecords();
                                status_serviceRequests = true;
   
                            }
                        }
                       //SWAGH:10192023:SFSTRY0003043					
                       /*
                       //Campaigns--------------------------------------------Campaigns
                       else if ($(this).attr('id') == "Campaign Name") {
                            if (name_Campaigns == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Campaigns_PM, "Name", 'SortAscending');
   
                                campaigns_GetRecords();
                                name_Campaigns = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Campaigns_PM, "Name", 'SortDescending');
   
                                campaigns_GetRecords();
                                name_Campaigns = true;
   
                            }
                        } else if ($(this).attr('id') == "Promotioninformation") {
                            if (promotioninformation_Campaigns == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Campaigns_PM, "Promotion Information", 'SortAscending');
   
                                campaigns_GetRecords();
                                promotioninformation_Campaigns = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Campaigns_PM, "Promotion Information", 'SortDescending');
   
                                campaigns_GetRecords();
                                promotioninformation_Campaigns = true;
   
                            }
                        } else if ($(this).attr('id') == "Startdate") {
                            if (startdate_Campaigns == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Campaigns_PM, "Start Date", 'SortAscending');
   
                                campaigns_GetRecords();
                                startdate_Campaigns = false;
                                //ActType
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Campaigns_PM, "Start Date", 'SortDescending');
   
                                campaigns_GetRecords();
                                startdate_Campaigns = true;
   
                            }
                        } else if ($(this).attr('id') == "Enddate") {
                            if (endDate_Campaigns == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Campaigns_PM, "End Date", 'SortAscending');
                                campaigns_GetRecords();
                                endDate_Campaigns = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Campaigns_PM, "End Date", 'SortDescending');
   
                                campaigns_GetRecords();
                                endDate_Campaigns = true;
   
                            }
                        } else if ($(this).attr('id') == "Couponcode") {
                            if (couponcode_Campaigns == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Campaigns_PM, "Coupon Code", 'SortAscending');
   
                                campaigns_GetRecords();
                                couponcode_Campaigns = false;
   
                            } else {
                                SC_OUI_Methods.SortRecords(Campaigns_PM, "Coupon Code", 'SortDescending');
                               campaigns_GetRecords();
                                couponcode_Campaigns = true;
   
                            }
                        } 
                        */
                       //Activities-------------------------------------------------Activities
                        else if ($(this).attr('id') == "Comments") {
                            if (comments_Activities == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Activities_PM, "Comment", 'SortAscending');
   
                                activities_GetRecords();
                                comments_Activities = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Activities_PM, "Comment", 'SortDescending');
   
                                activities_GetRecords();
                                comments_Activities = true;
   
                            }
                        } else if ($(this).attr('id') == "Status_act") {
                            if (status_Activities == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Activities_PM, "Status", 'SortAscending');
   
                                activities_GetRecords();
                                status_Activities = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Activities_PM, "Status", 'SortDescending');
   
                                activities_GetRecords();
                                status_Activities = true;
   
                            }
                        } else if ($(this).attr('id') == "Type") {
                            if (type_Activities == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Activities_PM, "Type", 'SortAscending');
   
                                activities_GetRecords();
                                type_Activities = false;
                                //ActType
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Activities_PM, "Type", 'SortDescending');
   
                                activities_GetRecords();
                                type_Activities = true;
   
                            }
                        } else if ($(this).attr('id') == "Description") {
                            if (desc_Activities == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Activities_PM, "Description", 'SortAscending');
                                activities_GetRecords();
                                desc_Activities = false;
   
                            } else {
                                //SiebelJS.Log("In dec");
                                SC_OUI_Methods.SortRecords(Activities_PM, "Description", 'SortDescending');
   
                                activities_GetRecords();
                                desc_Activities = true;
   
                            }
                        } else if ($(this).attr('id') == "Subchannel") {
                            if (subChannel_Activities == true) {
                                //SiebelJS.Log("In SortAscending");
                                SC_OUI_Methods.SortRecords(Activities_PM, "SC Sub-Channel", 'SortAscending');
   
                                activities_GetRecords();
                                subChannel_Activities = false;
   
                            } else {
                                SC_OUI_Methods.SortRecords(Activities_PM, "SC Sub-Channel", 'SortDescending');
                               activities_GetRecords();
                                subChannel_Activities = true;
   
                            }
                        } else if ($(this).attr('id') == "Created") {
                            if (created_Activities == true) {
                                SC_OUI_Methods.SortRecords(Activities_PM, "Created", 'SortAscending');
                               activities_GetRecords();
                                created_Activities = false;
   
                            } else {
                                SC_OUI_Methods.SortRecords(Activities_PM, "Created", 'SortDescending');
                               activities_GetRecords();
                                created_Activities = true;
   
                            }
                        } else if ($(this).attr('id') == "Owner") {
                            if (owner_Activities == true) {
                                SC_OUI_Methods.SortRecords(Activities_PM, "Primary Owned By", 'SortAscending');
                               activities_GetRecords();
                                owner_Activities = false;
   
                            } else {
                                SC_OUI_Methods.SortRecords(Activities_PM, "Primary Owned By", 'SortDescending');
                               activities_GetRecords();
                                owner_Activities = true;
   
                            }
                        } else if ($(this).attr('id') == "Act_Startdate") {
                            if (startDt_Activities == true) {
                                SC_OUI_Methods.SortRecords(Activities_PM, "Planned", 'SortAscending');
                               activities_GetRecords();
                                startDt_Activities = false;
   
                            } else {
                                SC_OUI_Methods.SortRecords(Activities_PM, "Planned", 'SortDescending');
                               activities_GetRecords();
                                startDt_Activities = true;
   
                            }
                        } else if ($(this).attr('id') == "SR_act") {
                            if (sr_Activities == true) {
                                SC_OUI_Methods.SortRecords(Activities_PM, "SC SR Number", 'SortAscending');
                               activities_GetRecords();
                                sr_Activities = false;
   
                            } else {
                                SC_OUI_Methods.SortRecords(Activities_PM, "SC SR Number", 'SortDescending');
                               activities_GetRecords();
                                sr_Activities = true;
   
                            }
                        } else if ($(this).attr('id') == "Activity") {
                            if (activity_Activities == true) {
                                SC_OUI_Methods.SortRecords(Activities_PM, "Activity UID", 'SortAscending');
                               activities_GetRecords();
                                activity_Activities = false;
   
                            } else {
                                SC_OUI_Methods.SortRecords(Activities_PM, "Activity UID", 'SortDescending');
                               activities_GetRecords();
                                activity_Activities = true;
   
                            }
                        }else if ($(this).attr('id') == "actReason1") {//SPATIBAN:Added code for Sorting #CHG0034381
                            if (activity_rsn1 == true) {
                                SC_OUI_Methods.SortRecords(Activities_PM, "Reason 1", 'SortAscending');
                               activities_GetRecords();
                                activity_rsn1 = false;
   
                            } else {
                                SC_OUI_Methods.SortRecords(Activities_PM, "Reason 1", 'SortDescending');
                               activities_GetRecords();
                                activity_rsn1 = true;
   
                            }
                        }else if ($(this).attr('id') == "actReason2") {
                            if (activity_rsn2 == true) {
                                SC_OUI_Methods.SortRecords(Activities_PM, "Reason 2", 'SortAscending');
                               activities_GetRecords();
                                activity_rsn2 = false;
   
                            } else {
                                SC_OUI_Methods.SortRecords(Activities_PM, "Reason 2", 'SortDescending');
                               activities_GetRecords();
                                activity_rsn2 = true;
   
                            }
                        }else if ($(this).attr('id') == "actCategory1") {
                            if (activity_Category1 == true) {
                                SC_OUI_Methods.SortRecords(Activities_PM, "Category 1", 'SortAscending');
                               activities_GetRecords();
                                activity_Category1 = false;
   
                            } else {
                                SC_OUI_Methods.SortRecords(Activities_PM, "Category 1", 'SortDescending');
                               activities_GetRecords();
                                activity_Category1 = true;
   
                            }
                        }
   
                    });
                    //End:: Sorting Functionality
   
   
                    //Start: Filter in Consolidated Notes---
                    $(document).on('click', "#SC-360-consolidated-notes-edit", function (event) {
                        $(this).hide();
                        $("#sc-edited-row").show();
                        $("#SC-360-cn-save").show();
                        $(".SC-input").css("cssText", "border: -5px !important;");
                    });
                    $(document).on('click', "#SC-cn-save", function () {
                        event.preventDefault();
                       //Start loader 
                               $('#maskoverlay').show();
                               setTimeout(function(){
                        var searcharray = {};
                        if ($("#FilterInput_Updated").val() == "" && $("#FilterInput_NoteType").val() == "" && $("#FilterInput_Owner").val() == "") {
                            Filter_search = "N";
                            endpage = parentobj.length;
                            Startpage = 0;
                            consolidatedNotes_GetRecords(parentobj);
                        } else {
                            if ($("#FilterInput_Updated").val() != "")
                                searcharray["Updated Date"] = $("#FilterInput_Updated").val();
                            if ($("#FilterInput_NoteType").val() != "")
                                searcharray["Note Type"] = $("#FilterInput_NoteType").val();
                            if ($("#FilterInput_Owner").val() != "")
                                searcharray["Owner"] = $("#FilterInput_Owner").val();
                            
                            filterobj = search(parentobj, searcharray);
                            Filter_search = "Y"
                            Startpage = 0;
                            endpage = filterobj.length;
                            consolidatedNotes_GetRecords(filterobj);
                        }
                        $("#SC-360-consolidated-notes-edit").show();
                        $("#SC-360-cn-save").hide();
                        $("#sc-edited-row").hide();
                        $('#sc-cn-form')[0].reset();
                       //hiding the Loader
                           $('#maskoverlay').hide();
                           },50);
                    });
   
                    $(document).on('click', "#SC-cn-close", function () {
                        $("#SC-360-consolidated-notes-edit").show();
                        $('#sc-cn-form')[0].reset();
                        $("#sc-edited-row").hide();
                        $("#SC-360-cn-save").hide();
   
                    });
   
                    $(document).on('focus', "#FilterInput_Updated", function () {
                        $(this).datepicker({
                       changeMonth: true,
                       changeYear: true,
                       showButtonPanel: true
                       });
                    });
                    //End: Filter in Consolidated Notes-----
                    //Start:on scroll hiding the datepicker
                   $("html, body").on("DOMMouseScroll MouseScrollEvent MozMousePixelScroll wheel scroll", function ()
                   {
                       if($("#FilterInput_Updated").hasClass("hasDatepicker"))
                     $("#FilterInput_Updated").datepicker("hide");
                   });
                 //End:on scroll hiding the datepicker
                 //START SNARRA 28/05/2018 Added code for hiding DatePicker on tab
                   $("#FilterInput_Updated").on('keydown', function(ev){
                       if(ev.keyCode === 9){ //tab
                           if($("#FilterInput_Updated").hasClass("hasDatepicker"))
                            $("#FilterInput_Updated").datepicker("hide");
                       }
                   });
               //END SNARRA 28/05/2018 Added code for hiding DatePicker on tab
                    //start:pagination logic on consolidate notes
                    $(document).on('click', "#PrevConsolidate", function () {
                        if (Startpage != 0) {
                            Startpage = Startpage - 10;
                            if (Filter_search == "Y")
                                consolidatedNotes_GetRecords(filterobj);
                            else
                                consolidatedNotes_GetRecords(parentobj);
                        }
                    });
                    $(document).on('click', "#NextConsolidate", function () {
                        if ((Startpage + 10) < endpage) {
                            Startpage = Startpage + 10;
                            if (Filter_search == "Y")
                                consolidatedNotes_GetRecords(filterobj);
                            else
                                consolidatedNotes_GetRecords(parentobj);
                        }
                    });
                    //end:pagination logic on consolidate notes
   
   
                    //start code for pagination
   
                    $(document).on('click', "#opp-pagenation", function () {
                        setTimeout(function () {
                            opportunities_GetRecords();
                        }, 500);
   
                    });
                    $(document).on('click', "#orders-pagenation", function () {
                        setTimeout(function () {
                            orders_GetRecords();
                        }, 500);
   
                    });
                    $(document).on('click', "#assets-pagenation", function () {
                        setTimeout(function () {
                            assets_GetRecords();
                        }, 500);
                   });	
				   //Sukumar
 $(document).on('click', "#digital-assets-pagenation", function () {
                        setTimeout(function () {
                            digital_assets_GetRecords();
                        }, 500);
                   });
$(document).on('click', "#additional-sleeper-pagenation", function () {
                        setTimeout(function () {
                            additional_sleeper_GetRecords();
                        }, 500);
                   });		
$(document).on('click', "#Eligible-Offer-pagenation", function () {
                        setTimeout(function () {
                            Eligible_Offer_GetRecords();
                        }, 500);
                   });	
				   
                   $(document).on('click', "#hdsr-pagenation", function () {
                        setTimeout(function () {
                            HDSR_GetRecords();
                        }, 500);
                    });				
                   $(document).on('click', "#serv-req-pagenation", function () {
                        setTimeout(function () {
                            SR_GetRecords();
                        }, 500);
   
                    });
                    $(document).on('click', "#activities-pagenation", function () {
                        setTimeout(function () {
                            activities_GetRecords();
                        }, 500);
   
                    });
                    //NGOLLA: D.No:562 Added Pagination for ICR 
                     $(document).on('click', "#ICR-pagenation", function () {
                        setTimeout(function () {
                            innerCircle_GetRecords();
                        }, 500);
   
                    });
                     $(document).on('click', "#Itemlookup-pagination", function () {
                        Item_PM=SiebelApp.S_App.GetActiveView().GetAppletMap()["SC SIS Product List Applet"].GetPModel().GetRenderer().GetPM();
                        setTimeout(function () {
                            Itemlookup_GetRecords(Item_PM);
                        }, 500);
                    });
                   //SWAGH:10192023:SFSTRY0003043				 
                    /*
                     $(document).on('click', "#Campaigns-pagenation", function () {
                        setTimeout(function () {
                            campaigns_GetRecords();
                        }, 500);
                       
   
                    }); 
                    */
                    //end: code for pagination
   
   
                    //Start-- Select Store Logic
                    var StoreLocation = '', LoginId = SC_OUI_Methods.SCGetProfileAttrValue("Login Name");
                    var storeChangeMarkup = scOUIMarkups.StoreChange();
                    $("#SC-add-storelocation").html(storeChangeMarkup);
                    //Add store Location modal open
                    $("#SC-add-store-location").click(function () {
   
                        //var storeChangeMarkup = scOUIMarkups.StoreChange();
   
                        $("#SC-add-storelocation").modal({
                            backdrop: 'static'
                        });
   
                    if(StoreLocation !== ""){
                   document.getElementById('StoreTitle').innerHTML = StoreLocation;
                   $("#StoreTitle").attr("title",StoreLocation);
               }else{
                   document.getElementById('StoreTitle').innerHTML = "Add Store Location";
               }
                        //document.getElementById("StoreTitle").innerHTML = StoreLocation;
                    });
   
                    //
   
                    //on selecting the store for change of store
   
                    var selectstoreid = "";
                    $("#SC-storelocation tr").click(function () {
                        $(this).addClass('cti-active').siblings().removeClass('cti-active');
                        selectstoreid = $(this).attr('id');
                    });
   
                    //on click of enter on store search
                    $("#SC-Store-Search").keyup(function (event) {
                        if (event.keyCode === 13) {
                            var value = document.getElementById('SC-Store-Search').value;
                            markup = scOUIMarkups.StoreChange2(value);
                            $("#SC-storelocation").html(markup);
                            $("#SC-storelocation tr").click(function () {
                                $(this).addClass('cti-active').siblings().removeClass('cti-active');
                                selectstoreid = $(this).attr('id');
   
                            });
                        }
                    });
                    
                   
                       // Getting Store location		
                       //StoreLocation = SC_OUI_Methods.StoreName(LoginId); 
                       StoreLocation = SC_OUI_Methods.SCGetProfileAttrValue("SC Store Name OUI"); 
                       if(StoreLocation!=""){
                           document.getElementById('storename').innerHTML = StoreLocation.substring(0,10);
                           $("#SC-add-store-location").attr("title","Change Store Location");
                           $("#storename").attr("title",StoreLocation);
                       }else{
                           $("#SC-add-store-location").attr("title","Add Store Location");
                       }
                       //SPATIBAN:added code for update the user location with DISA Location
                       var scdisaloc="";
                       scdisaloc=SC_OUI_Methods.SCGetProfileAttrValue("DISALocFound");
                       if(scdisaloc=="Y"){
                           $("#SC-add-store-location").addClass("SC-readonly");
                       }
                       
                       //Add store Location modal open
                       $("#SC-add-store-location").click(function(){
                           //StoreLocation = SC_OUI_Methods.StoreName(LoginId); 
                           StoreLocation = SC_OUI_Methods.SCGetProfileAttrValue("SC Store Name OUI"); 
                       $("#SC-add-storelocation").modal({
                               backdrop: 'static'
                           });
                           if(StoreLocation!=""){
                               document.getElementById('StoreTitle').innerHTML = StoreLocation;
                           }else{
                               document.getElementById('StoreTitle').innerHTML = "Add Store Location";
                           }
                       });
                       
                       
                       //on click of the store
                       $(document).on('click','#SC-selectstore',function(){
                           $("#SC-Store-Search").val("");
                           selectstoreid=$("#"+selectstoreid+" td:first-child").text();
                           if(selectstoreid.length!=0){
                               SC_OUI_Methods.SetStore(selectstoreid);
                               SC_OUI_Methods.SCGetProfileAttr("SC Primary Division Type,SC Store Number,MachineInfo,SC Store User,LoginFirstTimeOUI,PoleDisplayOUI,SC Store Name OUI,Login Name,Last Name,First Name,SC Primary Division Sub Type,DISALocFound,Primary responsibility Name,SC Primary Division Name,SCHCMerchantId,SCGEMerchantId,SC Primary Division Id,IP");
                               //StoreLocation = SC_OUI_Methods.StoreName(LoginId);
                               StoreLocation = SC_OUI_Methods.SCGetProfileAttrValue("SC Store Name OUI");
                               if(StoreLocation!=""){
                                   document.getElementById('storename').innerHTML = selectstoreid.substring(0,10);
                                   $("#SC-add-store-location").attr("title","Change Store");
                                   $("#storename").attr("title",selectstoreid);
                                   StoreLocation = selectstoreid;
                                   $("#storereport").show();
                               }else{
                                    $("#SC-add-store-location").attr("title","Add Store");
                               }
                           }
                           $("#SC-add-storelocation").modal('hide');
                           $("#SC-storelocation").html("");
                           });
                       
                       //NGollA defect for 663
                   $(document).on('click','#SC-Clear-store',function(){
                           SC_OUI_Methods.SetStore("");
                           SC_OUI_Methods.SCGetProfileAttr("SC Primary Division Type,SC Store Number,MachineInfo,SC Store User,LoginFirstTimeOUI,PoleDisplayOUI,SC Store Name OUI,Login Name,Last Name,First Name,SC Primary Division Sub Type,DISALocFound,Primary responsibility Name,SC Primary Division Name,SCHCMerchantId,SCGEMerchantId,SC Primary Division Id,IP");
                           //StoreLocation = SC_OUI_Methods.StoreName(LoginId);
                           StoreLocation = SC_OUI_Methods.SCGetProfileAttrValue("SC Store Name OUI");						
                           $("#storename").text('Add Store');
                           $("#StoreTitle").text('Add Store Location');
                       });
                       
                       // nullifying Store markup
                       $(".SC-close-popup").click(function() {
                           $("#SC-Store-Search").val('');
                           $("#SC-storelocation").html("");
                       });
   
                    //End of select store markups
                    //End-- Select Store Logic
   
   
                    //Start: To avoid entering the alphabets in phone number, fax etc. fields
                    $(document).on('keyup', "#cd-Mobile-Phone, #cd-Secondary-Phone, #cd-Secondary-Phone2, #MobilePhone, #SecondaryPhone, #TeritaryPhone", function () {
                        this.value = this.value.replace(/[^0-9\.]/g, '');
                    });
                    //End: To avoid entering the alphabets in phone number, fax etc. fields
   
                    //Start: About Record popup
                    SC_OUI_Methods.AboutRecord("SC Contact Form Applet");
                    //End: About Record popup
                    //Start:open the BOM Structure for an Asset
                    /* $(document).on('click', '#SC-Asset-table tbody tr td:nth-child(1)', function() {
                        var id= $(this).attr('id');
                         id=id.split("t");
                          id=id[1];
                          var Assetrecords=Assets_PM.Get("GetRecordSet");
                          Assetbommarkup=producttree(id,Assetrecords);
                          $("#SC-Produc-Tree-Body").html(Assetbommarkup);
                           $("#SC-bom-tree").modal({
                               backdrop: 'static'
                           });
                       $(".modal-backdrop").css('background', '#ffffff');
                        
                    });*/
                    //End:open the BOM Structure for an Asset 
                     //Start:open the BOM Structure for an Asset
                     $(document).on('click', '.sc-asset', function() {
                        var id= $(this).attr('id');
                         var AssetId="";
                          AssetId=id.substring(5,id.length);
                          var Assetrecords=Assets_PM.Get("GetRecordSet");
                          Assetbommarkup=ComponentsPopup(AssetId);
                           $("#SC-Asset-addon-line-details").html(Assetbommarkup);
                          $("#SC-Asset-addon-line-details").modal({
                             backdrop: 'static'
                           });
                       $(".modal-backdrop").css('background', '#ffffff');
                    });
                    //End:open the BOM Structure for an Asset 
             /*$(document).on('click','.bom-title',function(){
                var target = $(this).attr("id");
                var ParentId="";
               ParentId=target.split("T");
                if( $("#Body"+ParentId[1]).is(":visible")){
                 $("#Body"+ParentId[1]).hide();
                 }else{
                    var inPS="";
                   var outPS="";
                   inPS = SiebelApp.S_App.NewPropertySet();
                   outPS = SiebelApp.S_App.NewPropertySet();
                   var fieldnames="Asset Number,Root Asset Number,Parent Asset Number,SC Calc Long Description";
                   var fieldvalues="";
                   
                   inPS.SetProperty("BO","Contact");
                   inPS.SetProperty("BC","Asset Mgmt - Asset - Header");
                   inPS.SetProperty("FieldsArray",fieldnames );
                   inPS.SetProperty("SearchSpecification","[Parent Asset Number]='"+ParentId[1]+"'");
                   Bservice = SiebelApp.S_App.GetService("SC Custom Query"); //get service
                   outPS = Bservice.InvokeMethod("Query", inPS);
                   //SiebelJS.Log("outPS"+OutPS);
                   var outputRecordSet="";
                   outputRecordSet = outPS.GetChild(0).GetProperty("OutputRecordSet");
                   var parentmarkup="";
                    parentmarkup += '                <div class="SC-SO-panel-body no-left-padding background-bg collapse clearfix" id="Body'+ParentId[1]+'">';
                    parentmarkup += '                      <div class="row no-margin scroll-x">';
                    parentmarkup += '                         <div class="sc-product-tree-structure padding-left">';
                    parentmarkup += '                                <div class="branch no-margin lv1">';
                   if(outputRecordSet!="}"){
                   var childsdataArray = new Array;
                   childsdataArray = outputRecordSet.split(";");
                       for(var childpr=0;childpr<childsdataArray.length;childpr++){
                           var childData = '';
                           var str = childsdataArray[childpr];
                           var found = false;
                       str = str.replace(/(".*?")(?!\})/g, function(match) {
                       if(found && match.endsWith('"')) return match.substring(0, match.length - 1) + '\\"';
                       found = found || match === '"SC Calc Long Description"';
   
                       return match;
                       });
   
                       //var obj = JSON.parse(str);
                       str=str.replace(/\n/g,"");
                       childData = JSON.parse(str);
                         // childData = JSON.parse(childsdataArray[childpr]);
                        if(childsdataArray.length===1){
                            if(childData["SC Calc Long Description"]==""){
                                 parentmarkup += '                                  <div class="entry first" id="BOM'+childData["Asset Number"]+'"><span class="label" title="'+childData["Asset Number"]+'"><span class="glyphicon glyphicon-plus-sign icon-img add-item child'+childpr+'"></span><p>'+childData["Asset Number"]+' </p></span>';
                                 }
                            else{
                            parentmarkup += '                                  <div class="entry first" id="BOM'+childData["Asset Number"]+'"><span class="label" title="'+childData["SC Calc Long Description"]+'-'+childData["Asset Number"]+'"><span class="glyphicon glyphicon-plus-sign icon-img add-item child'+childpr+'"></span><p>'+childData["SC Calc Long Description"]+'-'+childData["Asset Number"]+' </p></span>';
                            }
                           }else{
                                if(childData["SC Calc Long Description"]==""){
                                    parentmarkup += '                                  <div class="entry first" id="BOM'+childData["Asset Number"]+'"><span class="label" title="'+childData["Asset Number"]+'"><span class="glyphicon glyphicon-plus-sign icon-img add-item child'+childpr+'"></span><p>'+childData["Asset Number"]+' </p></span>';
                                }else{
                           parentmarkup += '                                  <div class="entry first" id="BOM'+childData["Asset Number"]+'"><span class="label" title="'+childData["SC Calc Long Description"]+'-'+childData["Asset Number"]+'"><span class="glyphicon glyphicon-plus-sign icon-img add-item child'+childpr+'"></span><p>'+childData["SC Calc Long Description"]+'-'+childData["Asset Number"]+' </p></span>';
                                }
                           }
                     
                       parentmarkup += '                                </div>';
                       }
                       parentmarkup += '                      </div>';
                       parentmarkup += '                 </div>';
                       parentmarkup += '            </div>';
                       parentmarkup += '           </div>';
                       $("#"+target).parent().append(parentmarkup);
                        $("#Body"+ParentId[1]).show(); 
                   }else{
                         /* parentmarkup += '                <div class="SC-SO-panel-body no-left-padding background-bg collapse clearfix" id="Body'+ParentId[1]+'">';
                          parentmarkup += '           </div>';
                           $("#"+target).parent().append(parentmarkup);  
                         $("#Body"+ParentId[1]).show(); 
                   }
               }
                
           })*/
              
           //On Click of Plus Sign to display the child records for the order line items.
               /*$(document).on("click",".glyphicon-plus-sign",function(e){
                   var id= $(this).parent().parent().attr('id');
                   var inPS="";
                   var outPS="";
                   inPS = SiebelApp.S_App.NewPropertySet();
                   outPS = SiebelApp.S_App.NewPropertySet();
                   var fieldnames="Asset Number,Root Asset Number,Parent Asset Number,SC Prod Detail,SC Calc Long Description";
                   var fieldvalues="";
                   var ParentId="";
                   ParentId=id.split("M");
                   inPS.SetProperty("BO","Contact");
                   inPS.SetProperty("BC","Asset Mgmt - Asset - Header");
                   inPS.SetProperty("FieldsArray",fieldnames );
                   inPS.SetProperty("SearchSpecification","[Parent Asset Number]='"+ParentId[1]+"'");
                   Bservice = SiebelApp.S_App.GetService("SC Custom Query"); //get service
                   outPS = Bservice.InvokeMethod("Query", inPS);
                   var outputRecordSet="";
                   outputRecordSet = outPS.GetChild(0).GetProperty("OutputRecordSet");
                   if(outputRecordSet!="}"){
                   var childsdataArray = new Array;
                   childsdataArray = outputRecordSet.split(";");
                   var childmarkup="";
                   childmarkup += '                                   <div class="branch lv2" >';
                     for(var childf=0;childf<childsdataArray.length;childf++){
                       var childData = '';
                       var str = childsdataArray[childf];
                        var found = false;
                       str = str.replace(/(".*?")(?!\})/g, function(match) {
                       if(found && match.endsWith('"')) return match.substring(0, match.length - 1) + '\\"';
                       found = found || match === '"SC Calc Long Description"';
   
                       return match;
                       });
                       str=str.replace(/\n/g,"");
                       childData = JSON.parse(str);
                       if(childsdataArray.length===1){
                           if(childData["SC Calc Long Description"]==""){
                              childmarkup += '                                              <div class="entry first-child" id="BOM'+childData["Asset Number"]+'" title="'+childData["Asset Number"]+'"><span class="label"><span class="glyphicon glyphicon-plus-sign icon-img add-item child"></span><p>'+childData["Asset Number"]+'</p></span></div>';
                           }else{
                               childmarkup += '                                              <div class="entry first-child" id="BOM'+childData["Asset Number"]+'" title="'+childData["SC Calc Long Description"]+'-'+childData["Asset Number"]+'"><span class="label"><span class="glyphicon glyphicon-plus-sign icon-img add-item child"></span><p>'+childData["SC Calc Long Description"]+'-'+childData["Asset Number"]+'</p></span></div>';
                           }
                      }else{
                          if(childData["SC Calc Long Description"]==""){
                            childmarkup += '                                              <div class="entry" id="BOM'+childData["Asset Number"]+'" title="'+childData["Asset Number"]+'"><span class="label"><span class="glyphicon glyphicon-plus-sign icon-img add-item child"></span><p>'+childData["Asset Number"]+'</p></span></div>';  
                              
                          }else{
                        childmarkup += '                                              <div class="entry" id="BOM'+childData["Asset Number"]+'" title="'+childData["SC Calc Long Description"]+'-'+childData["Asset Number"]+'"><span class="label"><span class="glyphicon glyphicon-plus-sign icon-img add-item child"></span><p>'+childData["SC Calc Long Description"]+'-'+childData["Asset Number"]+'</p></span></div>';
                          }	
                       }
                   }
                   childmarkup += '                                     </div>';
                   $("#"+id).append(childmarkup);
                   $(this).removeClass("glyphicon-plus-sign");
                   $(this).addClass("glyphicon-minus-sign");
                   }else{
                   $(this).removeClass("glyphicon-plus-sign");
                   }
                   
               });*/
               //SNARRA --START added code for AssetBOM
               $(document).on("click",".glyphicon-plus-sign",function(e){
                   if($(this).attr("Id")!="refferedPlusicon"){
                   var baseprice,adjustvalue=0;
                   var rowId=$(this).attr('id');
                   var currentId =rowId.substring(3,rowId.length);
                   var Sequence=$(this).parent().attr('Class');
                   var SequenceId=Sequence.substring(5,Sequence.length);
                   SiebelJS.Log("SequenceId"+SequenceId);
                 $("body").trigger('Custom.Start');
                   setTimeout(function(){
                 if(currentId!=null && currentId!=""){
                   var inPS="";
                   var OutPS="";
                   inPS = SiebelApp.S_App.NewPropertySet();
                   OutPS = SiebelApp.S_App.NewPropertySet();
                   var fieldnames="Asset Number,Parent Asset Number,Product Part Number,SC Calc Long Description,Product Primary Product Line,Purchase Date,Install Date,Status,SC Order Number,Base Price,Adjusted Value,SC SRO Duplicate Flag,SC Prod Warranty Name,SC Prod Wnty Duration Calc,SC Display Sale Flag,Asset Number,SC Division";
                   var fieldvalues="";
                   inPS.SetProperty("BO","Contact");
                   inPS.SetProperty("BC","Asset Mgmt - Asset - Header");
                   inPS.SetProperty("FieldsArray",fieldnames );
                   inPS.SetProperty("SearchSpecification","[Parent Asset Number]='"+currentId+"'");
                   Bservice = SiebelApp.S_App.GetService("SC Custom Query"); //get service
                   OutPS = Bservice.InvokeMethod("Query", inPS);
                   var outputRecordSet="";
                   outputRecordSet = OutPS.GetChild(0).GetProperty("OutputRecordSet");
                   if(outputRecordSet!="}"){
                   var childsdataArray = new Array;
                   childsdataArray = outputRecordSet.split(";");
                   var Componentsmarkup="";
                   for(var childpr=0;childpr<childsdataArray.length;childpr++){
                       var childData = '';
                               var str = childsdataArray[childpr];
                               var SCCalLongDes="",SCCalcdescname="";
                            var split_cars = str.split('","');
                            for (var i = 0; i < split_cars.length; i++) {
                                 //SiebelJS.Log("values:"+split_cars[i]);
                                if(i==3){
                              SiebelJS.Log("prod name:"+split_cars[i]);
                              var desc_name = split_cars[i].split('":"');
                              var prod_name="";
                                  for(var j = 0;j<desc_name.length;j++){
                                      if(j == 1){
                                          if( /"/.test( desc_name[j] )){
                                           desc_name[j]=desc_name[j].replace(/"/g, '\\"');
                                           prod_name = desc_name[j];
                                               if(prod_name!=""){
                                                    SCCalcdescname+= prod_name;
                                               }
                                          }
                                     } else{
                                        SCCalcdescname+=desc_name[j]+'":"';  
                                     }
                                     
                                   }
                                   SiebelJS.Log("SCCalcdescname:"+SCCalcdescname);
                                   SCCalLongDes+=SCCalcdescname+'","';
                                }
                                else{
                                    if(i !=3){
                                        if(i== (split_cars.length-1)){
                                           SCCalLongDes+=split_cars[i];
                                        }else{
                                          SCCalLongDes+=split_cars[i]+'","'; 
                                        }
                                    }
                                }
                            }
                           if(prod_name!=""){
                                   str = SCCalLongDes;
                               }
                           var found = false;
                           str = str.replace(/(".,*?")(?!\})/g, function(match) {
                           if(found && match.endsWith('"')) return match.substring(0, match.length - 1) + '\\"';
                           found = found || match === '"SC Calc Long Description"';
   
                           return match;
                           });
   
                           //var obj = JSON.parse(str);
                           str=str.replace(/\n/g,"");
                           childData = JSON.parse(str);
                           if(childsdataArray.length>=1){
                                   baseprice = childData["Base Price"]!=""?parseFloat(childData["Base Price"]):0.00;
                                    adjustvalue = childData["Adjusted Value"]!=""?parseFloat(childData["Adjusted Value"]):0.00;
                                    if(SequenceId==1){
                                       Componentsmarkup+='             <tr style="background:#f63" id="BOM'+childData["Parent Asset Number"]+'">';
                                       Componentsmarkup+='            <td style="color:#fff" class="child'+SequenceId+'.'+(childpr+1)+'"><span class="glyphicon glyphicon-plus-sign icon-img add-item child'+childpr+'" style="color:#ffffff" id="BOM'+childData["Asset Number"]+'"></span></td>';
                                       Componentsmarkup+='            <td style="color:#fff">'+SequenceId+'.'+(childpr+1)+'</td>';
                                       Componentsmarkup+='            <td style="color:#fff">'+childData["SC Calc Long Description"]+'</td>';
                                       Componentsmarkup+='            <td style="color:#fff">'+childData["Product Part Number"]+'</td>';
                                       Componentsmarkup+='            <td style="color:#fff">'+childData["Product Primary Product Line"]+'</td>';
                                       Componentsmarkup+='            <td style="color:#fff">'+childData["Purchase Date"]+'</td>';
                                       Componentsmarkup+='              <td style="color:#fff">'+childData["Install Date"]+'</td>';
                                       Componentsmarkup+='              <td style="color:#fff">'+childData["Status"]+'</td>';
                                       Componentsmarkup+='              <td style="color:#fff">'+childData["SC Order Number"]+'</td>';
                                       Componentsmarkup+='              <td style="color:#fff">$'+baseprice.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,')+'</td>';
                                       Componentsmarkup+='              <td style="color:#fff">$'+adjustvalue.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,')+'</td>';
                                       Componentsmarkup+='              <td style="color:#fff">'+childData["SC SRO Duplicate Flag"]+'</td>';
                                       Componentsmarkup+='              <td style="color:#fff">'+childData["SC Prod Warranty Name"]+'</td>';
                                       Componentsmarkup+='              <td style="color:#fff">'+childData["SC Prod Wnty Duration Calc"]+'</td>';
                                       Componentsmarkup+='              <td style="color:#fff">'+childData["SC Display Sale Flag"]+'</td>';
                                       Componentsmarkup+='              <td style="color:#fff">'+childData["Asset Number"]+'</td>';
                                       Componentsmarkup+='              <td style="color:#fff">'+childData["SC Division"]+'</td>';
                                       Componentsmarkup+='             </tr>';  
                                     }else{
                                   Componentsmarkup+='             <tr class="main-bg" id="BOM'+childData["Parent Asset Number"]+'">';
                                   Componentsmarkup+='            <td class="child'+SequenceId+'.'+(childpr+1)+'"><span class="glyphicon glyphicon-plus-sign icon-img add-item child'+childpr+'" id="BOM'+childData["Asset Number"]+'"></span></td>';
                                   Componentsmarkup+='            <td>'+SequenceId+'.'+(childpr+1)+'</td>';
                                   Componentsmarkup+='            <td>'+childData["SC Calc Long Description"]+'</td>';
                                   Componentsmarkup+='            <td>'+childData["Product Part Number"]+'</td>';
                                   Componentsmarkup+='            <td>'+childData["Product Primary Product Line"]+'</td>';
                                   Componentsmarkup+='            <td>'+childData["Purchase Date"]+'</td>';
                                   Componentsmarkup+='              <td>'+childData["Install Date"]+'</td>';
                                   Componentsmarkup+='              <td>'+childData["Status"]+'</td>';
                                   Componentsmarkup+='              <td>'+childData["SC Order Number"]+'</td>';
                                   Componentsmarkup+='              <td>$'+baseprice.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,')+'</td>';
                                   Componentsmarkup+='              <td>$'+adjustvalue.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,')+'</td>';
                                   Componentsmarkup+='              <td>'+childData["SC SRO Duplicate Flag"]+'</td>';
                                   Componentsmarkup+='              <td>'+childData["SC Prod Warranty Name"]+'</td>';
                                   Componentsmarkup+='              <td>'+childData["SC Prod Wnty Duration Calc"]+'</td>';
                                   Componentsmarkup+='              <td>'+childData["SC Display Sale Flag"]+'</td>';
                                   Componentsmarkup+='              <td>'+childData["Asset Number"]+'</td>';
                                   Componentsmarkup+='              <td>'+childData["SC Division"]+'</td>';
                                   Componentsmarkup+='             </tr>';
                                    }
                           }
                       //}
                        $('#' + rowId).addClass("glyphicon-minus-sign");
                   }
                   //Componentsmarkup+='</div>'; 
                   $('#' + rowId).parent().parent().after(Componentsmarkup);
                   //$('#' + rowId).append(Componentsmarkup);
                 }
                  $('#' + rowId).removeClass("glyphicon-plus-sign");
               }
                
                 $("body").trigger('Custom.End');
             },1000);
           }			
      });
               //SNARRA -- END Added code for ASSetBOM
               //SNARRA-- START:Added code for Mius icon in AssetBOM
               $(document).on("click",".glyphicon-minus-sign",function(e){
                  if($(this).attr("Id")!="referredremoveicon"){
                    var rowClass=$(this).parent().attr('class');
                   $("#Components-table tbody tr").each(function() {
                     var currentClass = $(this).children(1).attr('class');	
                       if((currentClass.startsWith(rowClass)) && (currentClass!=rowClass)){
                       $(this).remove();	
                       }
                   });
                  $(this).addClass("glyphicon-plus-sign")
                  $(this).removeClass("glyphicon-minus-sign");  
                  }
                   
               }); 
               
               //SNARRA-- END:Added code for Mius icon in AssetBOM
               
               //Start--refresh the Activities
               $(document).on("click","#SC-refresh",function(e){
                   FieldQueryPair={"Activity #":"IS NOT NULL"};
                   SC_OUI_Methods.ExecuteListAppletFrame(SiebelConstants,FieldQueryPair,"SC Contact 360 Activity List Applet OUI");
                   activities_GetRecords();
               });
               //End--refresh the Activities
               
               //Start--on click of phone icon
               $(document).on("click",".phone-icon",function(e){
                   var icon=$(this).attr('id');
                   var classes;
                   var controls = ContactFormApplet_PM.Get( "GetControls" );
                   if((icon=="cellularphoneicon")){
                       //classes=$("[aria-labelledby='CellularPhoneNum_Label']").attr('class');
                       var cellPhoneId = controls['CellularPhoneNum'].GetInputName();
                       $('#'+cellPhoneId+'_icon').trigger("click");
                   }
                   else if((icon=="homephoneicon")){
                       //classes=$("[aria-labelledby='HomePhoneNum_Label']").attr('class');
                       var homePhoneId = controls['HomePhoneNum'].GetInputName();
                       $('#'+homePhoneId+'_icon').trigger("click");
                   }
                   else if((icon=="workphoneicon")){
                       //classes=$("[aria-labelledby='WorkPhoneNum_Label']").attr('class');
                       var workPhoneId = controls['WorkPhoneNum'].GetInputName();
                       $('#'+workPhoneId+'_icon').trigger("click");
                   }
                              $("[aria-describedby='comm_makecall_popup']").parent().css({position: 'relative'});
                               $("[aria-describedby='comm_makecall_popup']").css({top: 0, left: 0, position:'absolute'});
                              
                  // $("[aria-describedby='comm_makecall_popup']").css({"top":0,"left":0});
                   //classes=classes.split(" ");
                   //classes=classes[classes.length-1];
                   //$('#'+classes+'_icon').trigger("click");
               });
               //End--on click of phone icon
               
               //Start--hide child Nodes
               /*$(document).on("click",".glyphicon-minus-sign",function(e){
                   $(this).parent().siblings().remove();
                   $(this).removeClass("glyphicon-minus-sign");
                   $(this).addClass("glyphicon-plus-sign");
                   
               });//End--hide child Nodes*/
               $(document).on('click','#SC-close-referredby',function(){
                $("#SC-search-referredby").modal('hide');
              });
                  // kavya: Added code for Active and Inactive Functionality
                //$(".SC-360-card-tabs-one").click(function(event) {
                    //SWAGH:10192023:SFSTRY0003043
                    /*
                    $(document).on('click','.SC-360-card-tabs-one',function(event){
                           $(".SC-360-card-tabs-one").removeClass("tab-active");
                           $(this).addClass("tab-active");
                           if( $(this).attr("Id")=="Active-tab"){
                                if(actcamflag = "N"){
                              $("#Campaigns-pagenation").addClass("displaynone");
                              }else{
                                  $("#Campaigns-pagenation").addClass("displayflex"); 
                              } 
                               $("#Active-Campaigns-Body").show();
                               $("#Inactive-Campaigns-Body").hide();
                               
                           }else{
                                 
                                 if(inactcamflag = "N"){
                               $("#Campaigns-pagenation").addClass("displaynone");
                              }else{
                                  $("#Campaigns-pagenation").addClass("displayflex"); 
                              } 
                               
                               $("#Active-Campaigns-Body").hide();
                               $("#Inactive-Campaigns-Body").show();
                               
                           }
                       });
                       */
                         $(document).on("click",".SC-edit-Act-360",function(event){
                           var strid=$(this).attr("id");
                           strid=strid.split("_");
                           strid=strid[0];
                           $("#SC-360-Edit-Activity").modal({
                           backdrop: 'static'
                           });
                           $("#SC-360-Edit-Activity").css({
                           "display": "flex",
                           "justify-content": "center",
                           "align-items": "center"
                           });
                           var SiebelConstants = SiebelJS.Dependency("SiebelApp.Constants");
                           var ActPM=SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact 360 Activity List Applet OUI"].GetPModel().GetRenderer().GetPM();
                           ActPM.OnControlEvent(SiebelConstants.get("PHYEVENT_SELECT_ROW"), strid, false, false);
                           var ActRcdSet=ActPM.Get("GetRecordSet");
                           if(ActRcdSet.length>=strid){
                               $("#con-edit-Act-Startdate").val(ActRcdSet[strid]["Planned"]);
                               $("#con-Act-edit-Description").val(ActRcdSet[strid]["Description"]);
                               $("#con-Act-edit-comments").val(ActRcdSet[strid]["Comment"]);
                               var ActStatusArray = new Array;
                               searchExpr = "[Type] = 'EVENT_STATUS' AND [Active] = 'Y'";
                               sortSpec = "Order By";
                               ActStatusArray = SC_OUI_Methods.GetLOVs(searchExpr, sortSpec);
                               var ActStatusdrpValue = '';
                               ActStatusdrpValue += ' <option>'+ActRcdSet[strid]["Status"]+'</option>';
                               for (var ac = 0; ac < ActStatusArray.length; ac++) {
                                   if(ActStatusArray[ac]!=ActRcdSet[strid]["Status"])
                                   ActStatusdrpValue += ' <option>' + ActStatusArray[ac] + '</option>';
                               }
                               $('#con360-Act-Status').html(ActStatusdrpValue);
                           }
                           $('#con360-Act-Status').parent().addClass("is-active is-completed");
                           
                           $("#SC-360-Edit-Activity").find("input") .each(function(){
                                   $(this).attr("title",$(this).val());
                                   if($(this).val()!="")
                                       $(this).parent().addClass("is-active is-completed");
                                   else
                                       $(this).parent().removeClass("is-active is-completed");
                           });
                           $("#SC-360-Edit-Activity").find("textarea") .each(function(){
                                   $(this).attr("title",$(this).val());
                                   if($(this).val()!="")
                                       $(this).parent().addClass("is-active is-completed");
                                   else
                                       $(this).parent().removeClass("is-active is-completed");
                           });
                         });
                         $(document).on("click","#contact360-create-EditActivity",function(event){
                             var ActPM=SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact 360 Activity List Applet OUI"].GetPModel().GetRenderer().GetPM();
                             var ACtBusComp = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact 360 Activity List Applet OUI"].GetBusComp();
                             var sActStatusControl = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact 360 Activity List Applet OUI"].GetControls()["Status"];
                             var sActCommControl = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact 360 Activity List Applet OUI"].GetControls()["Comment"];
                             var sActdescControl = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact 360 Activity List Applet OUI"].GetControls()["Description"];
                             var sActStartdateControl = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact 360 Activity List Applet OUI"].GetControls()["Planned"];
                               if(ActPM.ExecuteMethod("CanInvokeMethod","WriteRecord")){
                                       ActPM.ExecuteMethod("SetFormattedValue", sActdescControl,$("#con-Act-edit-Description").val());
                                       ActPM.ExecuteMethod("SetFormattedValue", sActCommControl,$("#con-Act-edit-comments").val());
                                       ActPM.ExecuteMethod("SetFormattedValue", sActStartdateControl,$("#con-edit-Act-Startdate").val());
                                       ActPM.ExecuteMethod("SetFormattedValue", sActStatusControl,$('#con360-Act-Status').val());
                                       //ACtBusComp.SetFieldValue("Planned", $("#con-edit-Act-Startdate").val());
                                       //ACtBusComp.SetFieldValue("Description", $("#con-Act-edit-Description").val());
                                       //ACtBusComp.SetFieldValue("Comment", $("#con-Act-edit-comments").val());
                                       if(ActPM.ExecuteMethod("InvokeMethod","WriteRecord",null,false)){
                                               $("#SC-360-Edit-Activity").modal('hide');
                                               activities_GetRecords();
                                       }
                               }
                               else
                                   $("#SC-360-Edit-Activity").modal('hide');
                         });
                         
                       if(isiFitRecord == "Y"){
                           $("#SC-360-customer-interaction-edit").hide();
                           //SWAGH:10192023:SFSTRY0003043						
                           //$("#Campaigns-Applet").hide();
                           $("#Cust-inter-Applet").hide();
                           $("#Prof-Info-Applet").hide();
                           $("#Cons-Notes-Applet").hide();
                           $("#Assets-Applet").hide();
                           $("#Oppor-Applet").hide();
                           $("#Activities-Applet").hide();
                           $("#Inn-Circle-Applet").hide();
                           $("#SR-Applet").hide();
                           $("#Item-lookup-Applet").hide();
                           $("#Orders-Applet").hide();
                       }else{
                           $("#SC-360-customer-interaction-edit").hide();
                       }
               //VALLA:07-Aug-2020: Added Code for Synchrony Financing Change
               $(document).on("click","#SC-Synchrony-refresh",function(event){
                   event.stopImmediatePropagation();
                   UpdateAvailableAmount();
               });
               //VALLA:07-Aug-2020: Added Code for Synchrony Financing Change
               
               //SWAGH:09282023:SFSTRY0003023
               $(document).on('click', '#hdsr-360-table tbody tr td:nth-child(10)', function() {
                   var currentId = $(this).parent().attr('id');
                   if (!$(this).parent().hasClass("showhide")) {
                       var hidden = $(this).parent().next('tr.showhide').is(":visible");
                       if (hidden) {
                           $(this).parent().removeClass("main-bg");
                           $(this).parent().next('tr.showhide').hide('slow');
                           $('#hdsr-360-table tbody tr#' + currentId + ' td:nth-child(10)').find("img").attr("src", "images/custom/fileboard.png");						
                           //$(this).siblings().find("img").attr("src", "images/custom/fileboard.png");
                           /*
                           $(this).find("img").attr("src", "images/custom/truck_round_blue.png");
                           $(this).next().find("img").attr("src", "images/custom/BOM Icon.png");
                           $(this).next().next().find("img").attr("src", "images/custom/about_record.png");
                           */
                       } else {
                           $("#hdsr-360-table tbody tr").not(this).siblings().next('tr.showhide').hide('slow');
                           if ($("#hdsr-360-table tbody tr").not(this).siblings().next('tr.showhide').is(":visible")) {
                               var rowId = $(".expanded").attr("id");
                               /*
                               $('#' + rowId + " td:nth-child(9)").find("img").attr("src", "images/custom/fileboard.png");
                               $('#' + rowId + " td:nth-child(12)").find("img").attr("src", "images/custom/about_record.png");
                               $('#' + rowId + " td:nth-child(11)").find("img").attr("src", "images/custom/BOM Icon.png");
                               */
                               $('#hdsr-360-table tbody tr#' + rowId + ' td:nth-child(10)').find("img").attr("src", "images/custom/fileboard.png");
                               $('#hdsr-360-table tbody tr#' + rowId).removeClass("expanded");
                           }
                           $(this).parent().next('tr.showhide').show('slow');
                           $(this).parent().addClass("expanded");
                           /*
                           $('#' + currentId + " td:nth-child(9)").find("img").attr("src", "images/custom/fileboard-white.png");
                           */						
                           $('#hdsr-360-table tbody tr#' + currentId + ' td:nth-child(10)').find("img").attr("src", "images/custom/fileboard-white.png");
                           /*
                           $('#' + currentId + " td:nth-child(12)").find("img").attr("src", "images/custom/about_record.png");
                           $('#' + currentId + " td:nth-child(11)").find("img").attr("src", "images/custom/BOM Icon.png");
                           */
                           var selected = $(this).parent().hasClass("main-bg");
                           $("#hdsr-360-table tbody tr").removeClass("main-bg");
                           $(this).parent().addClass("main-bg");
   
                       }
                   }
               });
               //SWAGH:09282023:SFSTRY0003023
               
           }// BindEvents Close
   
           //Start: -- Functions to get latest information from applets
                    
                   //Start: for Consolidated Notes
                   function consolidatedNotes_GetRecords(jsonobj) {
                       var cons_Notes_Markup_Records = '';
                           var filterRow='';
                           filterRow+='<tr class="" id="sc-edited-row" style="display:none">';
                               filterRow+='<form id="sc-cn-form">';
                               filterRow+='<td><input type="text"  class="SC-input keep-border input-padding" autocomplete="off" id="FilterInput_Updated"></td>';
                               filterRow+='<td><select class="SC-input select-box keep-border no-padding" autocomplete="off" id="FilterInput_NoteType" name="notetype"><option></option></select></td>';
                               filterRow+='<td></td>';	
                               filterRow+='<td></td>';
                               filterRow+='<td></td>';
                               filterRow+='<td><select class="SC-input select-box keep-border no-padding" autocomplete="off" id="FilterInput_Owner" name="owner"><option></option></td>';
                           filterRow+='</form>';	
                           filterRow+='</tr>';
                           cons_Notes_Markup_Records+=filterRow;
                           //SiebelJS.Log(notetypevalues);
                           
                           //SiebelJS.Log(Startpage);
                           var rcdlen=Startpage+10;
               
                            for(var notes=Startpage;notes<rcdlen&&endpage!=notes;notes++)
                              {
                                   var noteRcd = '';
                                   noteRcd+='<tr>';
                                       noteRcd+='<td title="'+jsonobj[notes]["Updated Date"]+'">'+jsonobj[notes]["Updated Date"]+'</td>';
                                       noteRcd+='<td title="'+jsonobj[notes]["Note Type"]+'">'+jsonobj[notes]["Note Type"]+'</td>';
                                       noteRcd+='<td title="'+jsonobj[notes]["Note"]+'" class="comments-col"><textarea name="detdes" class="SC-input no-padding" readonly>'+jsonobj[notes]["Note"]+'</textarea></td>';
                                       noteRcd+='<td title="'+jsonobj[notes]["Status"]+'">'+jsonobj[notes]["Status"]+'</td>';
                                       noteRcd+='<td title="'+jsonobj[notes]["Scheduled Date"]+'">'+jsonobj[notes]["Scheduled Date"]+'</td>';
                                       noteRcd+='<td title="'+jsonobj[notes]["Owner"]+'">'+jsonobj[notes]["Owner"]+'</td>';
                                       noteRcd+='<td title="'+jsonobj[notes]["Reason 1"]+'">'+jsonobj[notes]["Reason 1"]+'</td>';//SPATIBAN:Added code for #CHG0034381
                                       noteRcd+='<td title="'+jsonobj[notes]["Reason 2"]+'">'+jsonobj[notes]["Reason 2"]+'</td>';
                                   noteRcd+='</tr>';
                                   cons_Notes_Markup_Records+=noteRcd; 
                              } 
                             $("#ConsolidatedNotes-Body").html(cons_Notes_Markup_Records);
                             $("#FilterInput_NoteType").html(notetypevalues);
                             $("#FilterInput_Owner").html(ownervalues);
                             if(Startpage==0)
                               $("#PrevConsolidate").hide();
                            else
                               $("#PrevConsolidate").show();	
                            if((Startpage+10)<endpage)
                               $("#NextConsolidate").show();
                            else
                              $("#NextConsolidate").hide();
                             
   
                   }
                   //End: for Consolidated Notes
                   //Start: Item lookup
                   function Itemlookup_GetRecords(Item_PM)
                   {
                       var Item_RS = '';
                       Item_RS = Item_PM.Get("GetRecordSet");
                       var Itemlookup_markup='';
                       var conrcdLen="";
                       conrcdLen=Item_RS.length;
                       Itemlookup_markup+='<tr class="" id="sc-searched-row" style="display:none">';
                       Itemlookup_markup+='<form id="sc-il-form">';
                       Itemlookup_markup+='<td>';
                       Itemlookup_markup+='<input type="text" name="" class="SC-input input-padding keep-border" id="sku_il_number">';
                       Itemlookup_markup+='</td>';
                       Itemlookup_markup+='<td>';
                       Itemlookup_markup+='<input type="text" name="" class="SC-input input-padding keep-border" id="sku_il_desc">';
                       Itemlookup_markup+='</td>';
                       Itemlookup_markup+=' <td></td>';
                       Itemlookup_markup+=' <td></td>';
                       Itemlookup_markup+='</form>';
                       Itemlookup_markup+='</tr>';
                       for(var item=0;item<conrcdLen;item++)
                       {
                           
                           Itemlookup_markup+='<tr id="item'+(item+1)+'">';
                           Itemlookup_markup+='<td id="itemname'+(item+1)+'">'+Item_RS[item]["Part #"]+'</td>';
                           Itemlookup_markup+='<td id="itemdesc'+(item+1)+'">'+Item_RS[item]["Description"]+'</td>';
                           Itemlookup_markup+='<td id="itemline'+(item+1)+'">'+Item_RS[item]["Product Line"]+'</td>';
                           Itemlookup_markup+='<td id="versionstatus'+(item+1)+'">'+Item_RS[item]["Version Status"]+'</td>';
                           Itemlookup_markup+='</tr>';
                       }
                       $("#Itemlookup-Body").html(Itemlookup_markup);
                   }
                   //End: Item lookup
                   //Start: for Assets
   
                   function assets_GetRecords() {
   
                       var Assets_RS = '',
                       assets_markup_Records = '';
                       Assets_RS = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact 360 Asset List Applet OUI"].GetPModel().GetRenderer().GetPM().Get("GetRecordSet");
                       var conrcdLen="";
                       conrcdLen=Assets_RS.length;
                       for (var asset = 0; asset < conrcdLen; asset++) {
                           var asset_new = '';
                           asset_new += '<tr id="' + asset + '">';
                           asset_new += ' <td class="sc-asset" id="Asset'+Assets_RS[asset]["Asset Number"]+'"><img class="so-add-cart"  src="images/custom/BOM Icon.png" /></td>';
                           asset_new += ' <td title="' + Assets_RS[asset]["SC Calc Long Description"] + '">' + Assets_RS[asset]["SC Calc Long Description"] + '</td>';
                           asset_new += ' <td>'+ Assets_RS[asset]["Product Part Number"]+'</td>';
                           asset_new += ' <td>'+ Assets_RS[asset]["Product Primary Product Line"] + '</td>';
                           asset_new += ' <td>'+ Assets_RS[asset]["Purchase Date"] + '</td>';
                           asset_new += ' <td>'+ Assets_RS[asset]["Install Date"] + '</td>';
                           asset_new += ' <td>'+ Assets_RS[asset]["Status"] + '</td>';
                           asset_new += ' <td>'+ Assets_RS[asset]["SC Order Number"] + '</td>';
                           asset_new += ' <td>'+ Assets_RS[asset]["Base Price"] + '</td>';
                           asset_new += ' <td>'+ Assets_RS[asset]["Adjusted Value"] + '</td>';
                           //SCHERKU: For defect number 883
                           asset_new += ' <td title="'+Assets_RS[asset]["SC SRO Duplicate Flag"]+ '">' + Assets_RS[asset]["SC SRO Duplicate Flag"] + '</td>';
                           asset_new += ' <td>'+ Assets_RS[asset]["SC Prod Warranty Name"] + '</td>';
                           asset_new += ' <td>'+ Assets_RS[asset]["SC Prod Wnty Duration Calc"]+'</td>';
                           asset_new += ' <td>'+ Assets_RS[asset]["SC Display Sale Flag"]+'</td>';
                           asset_new += ' <td> <a href="javascript:void(0)" class="Asset-AssetNum">' + Assets_RS[asset]["Asset Number"] + '</a></td>';
                           asset_new += ' <td>'+ Assets_RS[asset]["SC Division"]+'</td>';
                           asset_new += '</tr>';
                           assets_markup_Records += asset_new;
                       }
                       $("#Assets-Body").html('');
                       $("#Assets-Body").html(assets_markup_Records);
                   }
   
                   //End: for Assets
				   //Start: for Digital Assets
   //Sukumar Digital Product assets
                   function digital_assets_GetRecords() {
   
                       var Assets_Digital_RS = '',
                       digital_assets_markup_Records = '';
					   
	                       Assets_Digital_RS = SiebelApp.S_App.GetActiveView().GetAppletMap()["SN Asset Management Digital List Applet"].GetPModel().GetRenderer().GetPM().Get("GetRecordSet");
	                       var conrcdLen="";
	                       conrcdLen=Assets_Digital_RS.length;
	                       for (var digital_asset = 0; digital_asset < conrcdLen; digital_asset++) {
	                           var digital_asset_new = '';
	                           digital_asset_new += '<tr id="digital_asset">';
	                           //digital_asset_new += ' <td class="sc-asset" id="Asset'+Assets_Digital_RS[digital_asset]["Asset Number"]+'"><img class="so-add-cart"  src="images/custom/BOM Icon.png" /></td>';
	                           //digital_asset_new += ' <td title="' + Assets_Digital_RS[digital_asset]["SC Calc Long Description"] + '">' + Assets_Digital_RS[digital_asset]["SC Calc Long Description"] + '</td>';
	                           digital_asset_new += ' <td>'+ Assets_Digital_RS[digital_asset]["Product Name"]+'</td>';
	                           digital_asset_new += ' <td>'+ Assets_Digital_RS[digital_asset]["Install Date"] + '</td>';
	                           digital_asset_new += ' <td>'+ Assets_Digital_RS[digital_asset]["Status Calc"] + '</td>';
	                           digital_asset_new += ' <td>'+ Assets_Digital_RS[digital_asset]["SC Order Number"] + '</td>';
	                           // digital_asset_new += ' <td>'+ Assets_Digital_RS[digital_asset][""] + '</td>';
	                           digital_asset_new += ' <td>' + Assets_Digital_RS[digital_asset]["Asset Number"] + '</a></td>';
	                           digital_asset_new += ' <td>'+ Assets_Digital_RS[digital_asset]["SC Division"]+'</td>';
							   digital_asset_new += ' <td>'+ Assets_Digital_RS[digital_asset]["Integration Id"]+'</td>';
	                           digital_asset_new += '</tr>';
	                           digital_assets_markup_Records += digital_asset_new;
	                       }
	                       $("#Digital-Assets-Body").html('');
	                       $("#Digital-Assets-Body").html(digital_assets_markup_Records);
					   
                   }
				   //Sukumar Additional Sleeper
				    function additional_sleeper_GetRecords() {
   
                       var additional_sleeper_RS = '',
                       additional_sleeper_markup_Records = '';
					   
	                       additional_sleeper_RS = SiebelApp.S_App.GetActiveView().GetAppletMap()["Contact Relationship List Applet"].GetPModel().GetRenderer().GetPM().Get("GetRecordSet");
	                       var conrcdLen="";
	                       conrcdLen=additional_sleeper_RS.length;
	                       for (var additional_sleeper = 0; additional_sleeper < conrcdLen; additional_sleeper++) {
	                           var additional_sleeper_new = '';
	                           additional_sleeper_new += '<tr id="'+additional_sleeper+'">';
							   additional_sleeper_new += ' <td> <a href="javascript:void(0)" class="scconsleeper">'+ additional_sleeper_RS[additional_sleeper]["Contact UId"]+'</a></td>';
	                           additional_sleeper_new += ' <td>'+ additional_sleeper_RS[additional_sleeper]["Last Name"]+'</td>';
	                           additional_sleeper_new += ' <td>'+ additional_sleeper_RS[additional_sleeper]["First Name"] + '</td>';
	                           additional_sleeper_new += ' <td>'+ additional_sleeper_RS[additional_sleeper]["SN Customer Category Calc"] + '</td>';
	                           additional_sleeper_new += ' <td>'+ additional_sleeper_RS[additional_sleeper]["Email Address"] + '</td>';
	                            additional_sleeper_new += ' <td>' + additional_sleeper_RS[additional_sleeper]["Email Address2"] + '</td>';
	                           additional_sleeper_new += ' <td>'+ additional_sleeper_RS[additional_sleeper]["Full Address"]+'</td>';
							   // additional_sleeper_new += ' <td>' + additional_sleeper_RS[additional_sleeper]["Relationship Type"] + '</td>';
	                           additional_sleeper_new += ' <td>'+ additional_sleeper_RS[additional_sleeper]["Mobile Phone"]+'</td>';
	                           additional_sleeper_new += '</tr>';
	                           additional_sleeper_markup_Records += additional_sleeper_new;
	                       }
	                       $("#additional-sleeper-Body").html('');
	                       $("#additional-sleeper-Body").html(additional_sleeper_markup_Records);
					   
                   }
		   function Eligible_Offer_GetRecords() {
   
                       var Eligible_Offfer_RS = '',
                       Eligible_Offfer_markup_Records = '';
					   
	                       Eligible_Offfer_RS = SiebelApp.S_App.GetActiveView().GetAppletMap()["SN Eligible Offers List Applet"].GetPModel().GetRenderer().GetPM().Get("GetRecordSet");
	                       var conrcdLen="";
	                       conrcdLen=Eligible_Offfer_RS.length;
	                       for (var Eligible_Offfer = 0; Eligible_Offfer < conrcdLen; Eligible_Offfer++) {
	                           var Eligible_Offfer_new = '';
	                           Eligible_Offfer_new += '<tr id="'+Eligible_Offfer+'">';
							   Eligible_Offfer_new += ' <td>'+ Eligible_Offfer_RS[Eligible_Offfer]["Product"]+'</a></td>';
	                           Eligible_Offfer_new += ' <td>'+ Eligible_Offfer_RS[Eligible_Offfer]["Payment Type"]+'</td>';
	                           Eligible_Offfer_new += ' <td>'+ Eligible_Offfer_RS[Eligible_Offfer]["Header Start Date"] + '</td>';
	                           Eligible_Offfer_new += ' <td>'+ Eligible_Offfer_RS[Eligible_Offfer]["Header End Date"] + '</td>';
	                           Eligible_Offfer_new += ' <td>'+ Eligible_Offfer_RS[Eligible_Offfer]["Offer Status"] + '</td>';
	                            Eligible_Offfer_new += ' <td>' + Eligible_Offfer_RS[Eligible_Offfer]["SC Coupon Status"] + '</td>';
	                           Eligible_Offfer_new += ' <td>'+ Eligible_Offfer_RS[Eligible_Offfer]["Header Coupon"]+'</td>';							  
	                           Eligible_Offfer_new += '</tr>';
	                           Eligible_Offfer_markup_Records += Eligible_Offfer_new;
	                       }
	                       $("#Eligible-Offer-Body").html('');
	                       $("#Eligible-Offer-Body").html(Eligible_Offfer_markup_Records);
					   
                   }
   
                   //End: for Assets
   
                   //Start: for Orders
                   function orders_GetRecords() {
                       var Orders_RS = '',
                       orders_markup_Records = '';
                       Orders_RS = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact 360 Order List Applet OUI"].GetPModel().GetRenderer().GetPM().Get("GetRecordSet");
                       var conrcdLen="";
                       conrcdLen=Orders_RS.length;
                       for (var ord = 0; ord < conrcdLen; ord++) {
                           var order_new = '';
                           order_new += '<tr id="' + ord + '">';
                           order_new += '<td>' + Orders_RS[ord]["Order Date"] + '</td>';
                           order_new += '<td> <a href="javascript:void(0)" class="Orders-ONumber">' + Orders_RS[ord]["Order Number"] + '</a></td>';
                           order_new += '<td>' + Orders_RS[ord]["SC Sub-Type"] + '</td>';
                           order_new += '<td>' + Orders_RS[ord]["Status"] + '</td>';
                           order_new += '<td>' + Orders_RS[ord]["Order Total"] + '</td>';
                           order_new += '<td>' + Orders_RS[ord]["SC Sale Location"] + '</td>';
                           order_new += '<td>' + Orders_RS[ord]["SC Sales Team Login"] + '</td>';
                           order_new += '<td>' + Orders_RS[ord]["Revision"] + '</td>';
                           order_new += '<td>' + Orders_RS[ord]["SC SleepIQ Status"] + '</td>';
                           order_new += '</tr>';
                           orders_markup_Records += order_new;
                       }
                       $("#Orders-Body").html('');
                       $("#Orders-Body").html(orders_markup_Records);
                   }
   
                   //End: for Orders
   
                   //Start: for Opportunities
                   function opportunities_GetRecords() {
                       var Opportunity_RS = '',
                       opportunity_markup_Records = '';
                       Opportunity_RS = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact 360 Opportunity List Applet"].GetPModel().GetRenderer().GetPM().Get("GetRecordSet");
                       var conrcdLen="";
                       //NTHARRE:02JUL2021:To hide the functionality for store users based on lov - SFSTRY0001090
                       var searchExpr = "[Type] = 'SC_IS_STORE_LEAD' AND [Active] = 'Y'";
                       var sortSpec = "Order By";
                       var StoreLead = SC_OUI_Methods.SCGetOrderLoVs(searchExpr);
                       var StoreUser =  SC_OUI_Methods.SCGetProfileAttrValue('SC Store User');
                       conrcdLen=Opportunity_RS.length;
                       for (var opp = 0; opp < conrcdLen; opp++) {
                           var oppo = '';
                           oppo += '<tr id="' + opp + '">';
                           if(StoreUser == "Y" && StoreLead =="No")
                           oppo += '<td title="' + Opportunity_RS[opp]["Name"] + '">' + Opportunity_RS[opp]["Name"] + '</td>';
                           else
                           oppo += '<td title="' + Opportunity_RS[opp]["Name"] + '"><a href="javascript:void(0)" class="Opty-OName">' + Opportunity_RS[opp]["Name"] + '</a></td>';
                           oppo += '<td>' + Opportunity_RS[opp]["Created"] + '</td>';
                           oppo += '<td>' + Opportunity_RS[opp]["Created By Name"] + '</td>';
                           oppo += '<td>' + Opportunity_RS[opp]["SC Oppty Prob"] + '</td>';
                           oppo += '<td>' + Opportunity_RS[opp]["Sales Rep"] + '</td>';
                           oppo += '<td>' + Opportunity_RS[opp]["Channel"] + '</td>';
                           oppo += '<td>' + Opportunity_RS[opp]["Status"] + '</td>';
                           oppo += '<td>' + Opportunity_RS[opp]["Primary Revenue Amount"] + '</td>'; //SPATIBAN 11/28/2018: Added for CHG0034565
                           oppo += '</tr>';
                           opportunity_markup_Records += oppo;
                       }
                       $("#Opportunities-Body").html('');
                       $("#Opportunities-Body").html(opportunity_markup_Records);
                   }
   
                   //End: for Opportunities
   
                   //Start: for HDSR
                   function HDSR_GetRecords() {
                       
                       var Appletidlineitems = HDSR_PM.Get("GetFullId");
                       var appletSeqlineitems = Appletidlineitems[Appletidlineitems.length - 1];					
                       var notesrecords;	
                       var HDSR_RS = '',
                       hdsr_markup_Records = '';
                       HDSR_RS = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact 360 HDSR List Applet OUI"].GetPModel().GetRenderer().GetPM().Get("GetRecordSet");
                       var hdsrLength="";
                       hdsrLength=HDSR_RS.length;
                       for (var sr = 0; sr < hdsrLength; sr++) {
                           $("#s_" + appletSeqlineitems + "_l tr#" + (sr + 1) + "").trigger("click");						
                           var sr_new = '';
                           sr_new += '<tr id="' + sr + '">';
                           sr_new += '<td>' + HDSR_RS[sr]["Created"] + '</td>';
                           sr_new += '<td> <a href="javascript:void(0)" class="HDSR-Orders-ONumber">' + HDSR_RS[sr]["SC HD Order Number"] + '</a></td>';						
                           sr_new += '<td> <a href="javascript:void(0)" class="HDSR-SRNum">' + HDSR_RS[sr]["SR Number"] + '</a></td>';
                           sr_new += '<td>' + HDSR_RS[sr]["INS Area"] + '</td>';
                           sr_new += '<td>' + HDSR_RS[sr]["Status"] + '</td>';
                           sr_new += '<td>' + HDSR_RS[sr]["SC HD Activity Sched Start Dt"] + '</td>';
                           sr_new += '<td>' + HDSR_RS[sr]["SC HD Activity Sched End Dt"] + '</td>';
                           sr_new += '<td>' + HDSR_RS[sr]["Priority"] + '</td>';
                           sr_new += '<td>' + HDSR_RS[sr]["SC Preferred Contact"] + '</td>';
                           sr_new += '<td id="add-on-notesdetails" class="min-width-col" ><img id="HDSR-Notes" src="images/custom/fileboard.png" class="so-add-cart add-notes-popup"></td>';
                           sr_new += '</tr>';
                           sr_new += '								<tr class="showhide">';
                           sr_new += '                               <td class="main-bg" colspan="10">';
                           sr_new += '                                    <div class="collapse-block store-collapse">';
                           sr_new += '                                        <div class="row SC-SO-row clearfix">';
                           sr_new += '                                            <div class="col-md-4 col-lg-4 col-sm-4 SC-SO-item no-margin">';
                           sr_new += '                                            </div>';
                           sr_new += '                                            <div class="col-md-2 col-lg-2 col-sm-2 SC-SO-item no-margin">';
                           sr_new += '                                                <label class="item-label" style="width:100px;"><b>DATE CREATED</b></label>';
                           sr_new += '                                            </div>';
                           sr_new += '                                            <div class="col-md-2 col-lg-2 col-sm-2 SC-SO-item no-margin">';
                           sr_new += '                                                <label class="item-label" style="width:100px;"><b>CREATED BY</b></label>';
                           sr_new += '                                            </div>';
                           sr_new += '                                            <div class="col-md-2 col-lg-2 col-sm-2 SC-SO-item no-margin">';
                           sr_new += '                                                <label class="item-label" style="width:100px;"><b>NOTE TYPE</b></label>';
                           sr_new += '                                          	</div>';
                           sr_new += '                                            	<div class="col-md-2 col-lg-2 col-sm-2 SC-SO-item no-margin">';
                           sr_new += '                                                <label class="item-label" style="width:200px;"><b>NOTE</b></label>';
                           sr_new += '                                          	</div>';						
                           sr_new += '                                        </div>';
                           notesrecords = SiebelApp.S_App.GetActiveView().GetAppletMap()["SN FIN Service Request - Notes List Applet"].GetPModel().GetRenderer().GetPM().Get("GetRecordSet");
                           var noteslength = notesrecords.length;
                           for (var st = 0; st < noteslength; st++) {
                               sr_new += '										<div class="row SC-SO-row clearfix">';
                               sr_new += '                                        <div class="col-md-4 col-lg-4 col-sm-4 SC-SO-item no-margin">';
                               sr_new += '                                        </div>';									
                               sr_new += '                                            	<div class="col-md-2 col-lg-2 col-sm-2 SC-SO-item no-margin">';
                               if (notesrecords[st]["Created"] != "")
                                   sr_new += '                                         	<label class="item-label" style="color:#ffffff; width:100px;">' + notesrecords[st]["Created"] + '</label>';
                               else
                                   sr_new += '                                             <label class="item-label" style="width:100px;"></label>';
                               sr_new += '                                            </div>';
                               sr_new += '                                            <div class="col-md-2 col-lg-2 col-sm-2 SC-SO-item no-margin">';
                               if (notesrecords[st]["Created By Name"] != "")
                                   sr_new += '                                        		<label class="item-label" style="color:#ffffff; width:100px;">' + notesrecords[st]["Created By Name"] + '</label>';
                               else
                                   sr_new += '                                          	<label class="item-label" style="width:100px;"></label>';
                               sr_new += '                                            </div>';
                               sr_new += '                                            <div class="col-md-2 col-lg-2 col-sm-2 SC-SO-item no-margin">';
                               if (notesrecords[st]["Note Type"] != "")
                                   sr_new += '                                     		<label class="item-label" style="color:#ffffff; width:100px;">' + notesrecords[st]["Note Type"] + '</label>';
                               else
                                   sr_new += '                                       		<label class="item-label" style="width:100px;"></label>';
                               sr_new += '                                          	</div>';
                               sr_new += '                                            	<div class="col-md-2 col-lg-2 col-sm-2 SC-SO-item no-margin" >';
                               if (notesrecords[st]["Note"] != "")
                                   sr_new += '                                        		<label class="item-label" style="color:#ffffff; width:200px; overflow:auto;">' + notesrecords[st]["Note"] + '</label>';
                               else
                                   sr_new += '                                         	<label class="item-label" style="width:200px;"></label>';
                               sr_new += '                                         	</div>';						
                               sr_new += '                                     </div>';
                           }
                           sr_new += '                                    </div>';
                           sr_new += '                                </td>';
                           sr_new += '                            </tr>';
                           hdsr_markup_Records += sr_new;
                       }
                       $("#HDSR-Body").html('');
                       $("#HDSR-Body").html(hdsr_markup_Records);
                   }
                   //End: for HDSR
                   
                   //Start: for Service Requests
                   function SR_GetRecords() {
   
                       var SR_RS = '',
                       serv_req_markup_Records = '';
                       SR_RS = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact 360 Service Request List Applet OUI"].GetPModel().GetRenderer().GetPM().Get("GetRecordSet");
                       var conrcdLen="";
                       conrcdLen=SR_RS.length;
                       for (var sr = 0; sr < conrcdLen; sr++) {
                           var sr_new = '';
                           sr_new += '<tr id="' + sr + '">';
                           sr_new += '<td>' + SR_RS[sr]["Created"] + '</td>';
                           sr_new += '<td> <a href="javascript:void(0)" class="SR-SRNum">' + SR_RS[sr]["SR Number"] + '</a></td>';
                           sr_new += '<td>' + SR_RS[sr]["INS Product"] + '</td>';
                           sr_new += '<td>' + SR_RS[sr]["INS Area"] + '</td>';
                           sr_new += '<td>' + SR_RS[sr]["INS Sub-Area"] + '</td>';
                           sr_new += '<td  title="' + SR_RS[sr]["Description"] + '" class="comments-col"><textarea name="detdes" class="SC-input no-padding" id="srcomment'+sr+'">' + SR_RS[sr]["Description"] + '</textarea></td>';
                           sr_new += '<td>' + SR_RS[sr]["Status"] + '</td>';
                           sr_new += '<td>' + SR_RS[sr]["Priority"] + '</td>';
                           sr_new += '<td>' + SR_RS[sr]["SC HD Order Number"] + '</td>';
                           sr_new += '<td>' + SR_RS[sr]["Owner"] + '</td>';
                           sr_new += '</tr>';
                           serv_req_markup_Records += sr_new;
                       }
                       $("#SR-Body").html('');
                       $("#SR-Body").html(serv_req_markup_Records);
                   }
                   //End: for Service Requests
   
                   //Start: for Activities
                   function activities_GetRecords() {
                       var Activities_RS = '',
                       newActivities_Records = '';
                       Activities_RS = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact 360 Activity List Applet OUI"].GetPModel().GetRenderer().GetPM().Get("GetRecordSet");
                       var conrcdLen="";
                       conrcdLen=Activities_RS.length;
                       for (var act = 0; act < conrcdLen; act++) {
                           var activity_new = '';
                           activity_new += '<tr id="' + act + '">';
                           var customerType = SC_OUI_Methods.SCGetProfileAttrValue('SC Primary Division Type');
                           //NTHARRE:02JUL2021:To hide the functionality for store users based on lov - SFSTRY0001090
                           var StoreUser =  SC_OUI_Methods.SCGetProfileAttrValue('SC Store User');
                           var searchExpr = "[Type] = 'SC_IS_STORE_LEAD' AND [Active] = 'Y'";
                           var sortSpec = "Order By";
                           var StoreLead = SC_OUI_Methods.SCGetOrderLoVs(searchExpr);
                           if(StoreUser == "Y" && StoreLead =="No"){
                               //no need to display edit icon
                           }
                           else{
                               if (customerType == 'STORE' || customerType == 'SHOW'){
                                   if(Activities_RS[act]["Status"]=="Done")
                                       activity_new += '<td class="no-padding" style="min-width: 0px !important;"><img class="SC-disabled so-add-cart" id="' + act + '_con360editActimage" src="images/custom/revise-orange.png"/></td>';
                                   else
                                       activity_new += '<td class="no-padding" style="min-width: 0px !important;"><img class="SC-edit-Act-360 so-add-cart" id="' + act + '_con360editActimage" src="images/custom/revise-orange.png"/></td>';
                               }
                           }
                           activity_new += '<td>' + Activities_RS[act]["Planned"] + '</td>';
                           activity_new += '<td>' + Activities_RS[act]["Status"] + '</td>';
                           activity_new += '<td> <a href="javascript:void(0)" class="Activity-AType">' + Activities_RS[act]["Type"] + '</a></td>';
                           if(Activities_RS[act]["Description"] == "SMS History"){
                               activity_new += '<td title="' + Activities_RS[act]["Description"] + '" class="activities-dd comments-col"><a href="javascript:void(0)" name="detdes" id="zipwhipactivity" class="SC-input no-padding" readonly>' + Activities_RS[act]["Description"] + '</a></td>';
                           }else{
                               activity_new += '<td title="' + Activities_RS[act]["Description"] + '" class="activities-dd comments-col"><textarea name="detdes" class="SC-input no-padding" readonly>' + Activities_RS[act]["Description"] + '</textarea></td>';
                           }
                           activity_new += '<td title="' + Activities_RS[act]["Comment"] + '" class="comments-col"><textarea name="detdes" class="SC-input no-padding" readonly>' + Activities_RS[act]["Comment"] + '</textarea></td>'
                           activity_new += '<td>' + Activities_RS[act]["Primary Owned By"] + '</td>';
                           activity_new += '<td>' + Activities_RS[act]["Created"] + '</td>';
                           activity_new += '<td>' + Activities_RS[act]["EmailNow Category One"] + '</td>';
                           activity_new += '<td>' + Activities_RS[act]["SC Sub-Channel"] + '</td>';
                           activity_new += '<td>' + Activities_RS[act]["SR Number"] + '</td>';
                           activity_new += '<td>' + Activities_RS[act]["Activity UID"] + '</td>';
                           activity_new += '<td title="'+Activities_RS[act]["SC Activity Reason 1"]+'">' + Activities_RS[act]["SC Activity Reason 1"] + '</td>';//SPATIBAN:Added code for #CHG0034381
                           activity_new += '<td title="'+Activities_RS[act]["SC Activity Reason 2"]+'">' + Activities_RS[act]["SC Activity Reason 2"] + '</td>';
                           //activity_new += '<td>' + Activities_RS[act]["SC Order Number"] + '</td>';
                           activity_new += '<td> <a href="javascript:void(0)" class="Activity-ordnum">' + Activities_RS[act]["SC Order Number"] + '</td>';
                           //activity_new += '<td>' + Activities_RS[act]["EmailNow Category One"] + '</td>';
                           activity_new += '</tr>';
                           newActivities_Records += activity_new;
                       }
                       $("#Activities-Body").html("");
                       $("#Activities-Body").html(newActivities_Records);
                   }
   
                   //End: for Activities
                   //for Compaigns :Marketing History Applet
                   //SWAGH:10192023:SFSTRY0003043
                   /*
                   function campaigns_GetRecords() {
                       var Campaigns_RS = '',
                       activecampaigns_markup_Records = '',
                       inactivecampaigns_markup_Records = '';
                       Campaigns_RS = SiebelApp.S_App.GetActiveView().GetAppletMap()["Marketing History List Applet"].GetPModel().GetRenderer().GetPM().Get("GetRecordSet");
                       var conrcdLen="";
                       conrcdLen=Campaigns_RS.length;
                       for (var camp = 0; camp < conrcdLen; camp++) {
                               var activecampaigns_new = '';
                               var inactivecampaigns_new = '';
                               var Campaigns_RSStartDate = Campaigns_RS[camp]["Start Date"];
                               var Campaigns_RSEndDate = Campaigns_RS[camp]["End Date"];
                           if(Campaigns_RS[camp]["SC Active End Date"] =="Y"){
                           var Campaigns_RSStartDate = Campaigns_RS[camp]["Start Date"];
                           Campaigns_RSStartDate = Campaigns_RSStartDate.split(" ");
                           var Campaigns_RSEndDate = Campaigns_RS[camp]["End Date"];
                           Campaigns_RSEndDate = Campaigns_RSEndDate.split(" ");
                           actcamflag = "Y";
                           activecampaigns_new += '<tr id="' + camp + '">';
                           activecampaigns_new += '<td>' + Campaigns_RS[camp]["Description"] + '</td>';
                           activecampaigns_new += '<td><a href="https://' + Campaigns_RS[camp]["Promotion Information"] + '" target="_blank">'+Campaigns_RS[camp]["Promotion Information"]+'</a></td>';
                           activecampaigns_new += '<td>' +Campaigns_RSStartDate[0] + '</td>';
                           activecampaigns_new += '<td>' +  Campaigns_RSEndDate[0] + '</td>';
                           activecampaigns_new += '<td>' + Campaigns_RS[camp]["SC Product Name"] + '</td>';
                           activecampaigns_new += '</tr>';
                           activecampaigns_markup_Records += activecampaigns_new;
                           }else{
                           var Campaigns_RSStartDate = Campaigns_RS[camp]["Start Date"];
                            Campaigns_RSStartDate = Campaigns_RSStartDate.split(" ");
                           var Campaigns_RSEndDate = Campaigns_RS[camp]["End Date"];
                           Campaigns_RSEndDate = Campaigns_RSEndDate.split(" ");						
                               inactcamflag = "Y";
                           inactivecampaigns_new += '<tr id="' + camp + '">';
                           inactivecampaigns_new += '<td>' + Campaigns_RS[camp]["Description"] + '</td>';
                           inactivecampaigns_new += '<td><a href="https://' + Campaigns_RS[camp]["Promotion Information"] + '" target="_blank">'+Campaigns_RS[camp]["Promotion Information"]+'</a></td>';
                           inactivecampaigns_new += '<td>' + Campaigns_RSStartDate[0] + '</td>';
                           inactivecampaigns_new += '<td>' +  Campaigns_RSEndDate[0]+ '</td>';
                           inactivecampaigns_new += '<td>' + Campaigns_RS[camp]["SC Product Name"] + '</td>';
                           inactivecampaigns_new += '</tr>';
                           inactivecampaigns_markup_Records += inactivecampaigns_new;
                               
                           }
                           
                       }
                       $("#Active-Campaigns-Body").html('');
                       $("#Active-Campaigns-Body").html(activecampaigns_markup_Records);
                       
                       $("#Inactive-Campaigns-Body").html('');
                       $("#Inactive-Campaigns-Body").html(inactivecampaigns_markup_Records);
                   }
                   */
                   //Start: for Inner Circle Reqwards
                   /*function innerCircle_GetRecords() {
                       var Inn_Circle_Voucher_RS= '',vcAppId='',vcAppletSeq='';
                       var Inn_Circle_RS = '',
                       InnerCircle_markup_Records = '';
                       vcAppId=SiebelApp.S_App.GetActiveView().GetAppletMap()["SHM Contact LOY Member List Applet"].GetPModel().Get("GetFullId");
                       //vcAppletSeq = vcAppId.substr(vcAppId.length - 2);
                       vcAppletSeq = vcAppId.split("_A");
                       vcAppletSeq=vcAppletSeq[1];
                       Inn_Circle_Voucher_RS = SiebelApp.S_App.GetActiveView().GetAppletMap()["SHM Contact LOY Member List Applet"].GetPModel().GetRenderer().GetPM().Get("GetRecordSet");
                       //START NVARMA made changes for story STRY0019417
                       var sResp_Input = SiebelApp.S_App.NewPropertySet();
                       var nResp_OutPut = SiebelApp.S_App.NewPropertySet();
                       sResp_Input.SetProperty("sRespCheck","SC Admin Order Management - SE,SC ADMIN Loyalty,SC Admin Order Management");
                       var BService = SiebelApp.S_App.GetService("SC HasResponsibility");
                       nResp_OutPut = BService.InvokeMethod("sRespCheck",sResp_Input);
                       var nRespCheck = nResp_OutPut.GetChild(0).GetProperty("Result");
                       for(var vc=0;vc<Inn_Circle_Voucher_RS.length;vc++){
                           $("#s_"+vcAppletSeq+"_l tr#"+(vc+1)+"").trigger("click");
                           Inn_Circle_RS = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC LOY Member Vouchers List Applet"].GetPModel().GetRenderer().GetPM().Get("GetRecordSet");
                           var conrcdLen="";
                           conrcdLen=Inn_Circle_RS.length;
                           for (var ic = 0; ic < conrcdLen; ic++) {
                               var icNew = '';
                               icNew += '<tr>';
                               if(nRespCheck == 1){
                                   icNew += '<td>' + Inn_Circle_RS[ic]["Voucher Number"] + '</td>';
                               }else{
                                   icNew += '<td>XXXXXXXXXX</td>';
                               }
                               //END NVARMA made changes for story STRY0019417
                               icNew += '<td>' + Inn_Circle_RS[ic]["Product Name"] + '</td>';
                               icNew += '<td>' + Inn_Circle_RS[ic]["SC Status"] + '</td>';
                               icNew += '<td>' + Inn_Circle_RS[ic]["Voucher Issued Date"] + '</td>';
                               icNew += '<td>' + Inn_Circle_RS[ic]["Expiration Date"] + '</td>';
                               icNew += '</tr>';
                               InnerCircle_markup_Records += icNew;
                           }
                           $("#IC-Body").html(InnerCircle_markup_Records);
                       }
                       if(InnerCircle_markup_Records != '')
                       {
                           $("#SC-360-avatar").attr("src", "images/custom/contact360-loyality.png");
                       }
                   }*/
                   
                   function innerCircle_GetRecords() {
                       var InnerCircle_markup_Records = '';
                       var sContactId = ConFormApp_RS[0]["Id"];
                       var Custom_Service="",Input_BS="",Out_BS="";
                       Custom_Service = SiebelApp.S_App.GetService("SC Custom Query");
                       Input_BS = SiebelApp.S_App.NewPropertySet();
                       Out_BS = SiebelApp.S_App.NewPropertySet();
                       searchfields = "Id,Product Name,SC Status,Voucher Number,Voucher Issued Date,Expiration Date";
                       Input_BS.SetProperty("BO", "Contact");
                       Input_BS.SetProperty("BC", "LOY Voucher");
                       Input_BS.SetProperty("SearchSpecification", "[SC LOY Member Contact Id] ='"+sContactId+"' AND [SC Status] = 'Active'");
                       Input_BS.SetProperty("SortSpecification", "");
                       Input_BS.SetProperty("ReqNoOfRecords", "");
                       Input_BS.SetProperty("FieldsArray", searchfields);
                       Out_BS = Custom_Service.InvokeMethod("Query", Input_BS);
                       var Child_BS = Out_BS.GetChild(0);
                       var BS_Data = Child_BS.GetProperty("OutputRecordSet");
                       if(BS_Data!="}"){
                           var sResp_Input = SiebelApp.S_App.NewPropertySet();
                           var nResp_OutPut = SiebelApp.S_App.NewPropertySet();
                           sResp_Input.SetProperty("sRespCheck","SC Admin Order Management - SE,SC ADMIN Loyalty,SC Admin Order Management");
                           var BService = SiebelApp.S_App.GetService("SC HasResponsibility");
                           nResp_OutPut = BService.InvokeMethod("sRespCheck",sResp_Input);
                           var nRespCheck = nResp_OutPut.GetChild(0).GetProperty("Result");
                       
                           var ResArray = new Array;
                           ResArray = BS_Data.split(";");
                           for(var ic = 0; ic < ResArray.length; ic++){
                               var jsonRes = JSON.parse(ResArray[ic]);
                               var lmId = jsonRes['Id'];
                               SiebelJS.Log('LoyMember Id...:'+lmId);
                               
                               var icNew = '';
                               icNew += '<tr>';
                               if(nRespCheck == 1){
                                   icNew += '<td>' + jsonRes["Voucher Number"] + '</td>';
                               }else{
                                   icNew += '<td>XXXXXXXXXX</td>';
                               }
                               //END NVARMA made changes for story STRY0019417
                               icNew += '<td>' + jsonRes["Product Name"] + '</td>';
                               icNew += '<td>' + jsonRes["SC Status"] + '</td>';
                               icNew += '<td>' + jsonRes["Voucher Issued Date"] + '</td>';
                               icNew += '<td>' + jsonRes["Expiration Date"] + '</td>';
                               icNew += '</tr>';
                               InnerCircle_markup_Records += icNew;
                           }
                           $("#IC-Body").html(InnerCircle_markup_Records);
                       }
                       if(InnerCircle_markup_Records != '')
                       {
                           $("#SC-360-avatar").attr("src", "images/custom/contact360-loyality.png");
                       }
                   }
   
                   //End: for Inner Circle Reqwards
           //End: -- Functions to get latest information from applets
       
           //Start: This function indicates the customer has complete profile or not
                   function profileIncompleteIndicator() {
                       var appletInstance = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact Form Applet"];
                        var ContactFormApp_BC = appletInstance.GetBusComp();
                       if ((ContactFormApp_BC.GetFieldValue("SC Series") != '') && (ContactFormApp_BC.GetFieldValue("SC Base") != '') && (ContactFormApp_BC.GetFieldValue("SC Size") != '') && (ContactFormApp_BC.GetFieldValue("SC Sleep Number") != '')) {
                           $("#SC-360-avatar").removeClass("incomplete");
                       } else {
                           $("#SC-360-avatar").addClass("incomplete");
                       }
                   }
           //End: This function indicates the customer has complete profile or not
       
           //Start : funtion to search on consolidate notes records
                   function search(consdata, queryObj) {
                       var key,
                       matchedrcd = true,
                       matchedrcdset = [];
                       for (var i = 0; i < consdata.length; i++) {
                           matchedrcd = true;
                           for (key in queryObj) {
                               if (!queryObj.hasOwnProperty(key))
                                   continue;
                               if (key != "Updated Date") {
   
                                   if (!consdata[i].hasOwnProperty(key) || consdata[i][key] != queryObj[key]) {
                                       matchedrcd = false;
                                       break;
                                   }
                               } else {
                                   var date = new Date(queryObj[key]);
                                   date.setDate(date.getDate() + 1);
                                   date.setSeconds(date.getSeconds() - 1);
                                   if (!consdata[i].hasOwnProperty(key) || ((new Date(consdata[i][key]) < new Date(queryObj[key])) || (new Date(consdata[i][key]) > date))) {
                                       matchedrcd = false;
                                       break;
                                   }
                               }
                           }
                           if (matchedrcd) {
                               matchedrcdset.push(consdata[i]);
                           }
                       }
                       return matchedrcdset;
                   }
           //end : funtion to search on consolidate notes records
           
           //start:to get consolidate records
               function getConsolidateNoteRecords(contactid) {
                   var Bservice = '',
                   inPS = '',
                   outPS = '';
                   var Child,
                   output = "";
                   var childinPS = SiebelApp.S_App.NewPropertySet();
                   childinPS.SetProperty("sQueryProperty", contactid)
                   inPS = SiebelApp.S_App.NewPropertySet();
                   outPS = SiebelApp.S_App.NewPropertySet();
                   inPS.AddChild(childinPS);
                   //SiebelJS.Log("Invoking Business Service4");
                   Bservice = SiebelApp.S_App.GetService("SC Consolidated Notes BS"); //get service
                   outPS = Bservice.InvokeMethod("Query", inPS); //invoke the method
                   //SiebelJS.Log("childcount" + outPS.GetChild(0).GetChild(0));
                   for (var ps = 0; ps < outPS.GetChild(0).GetChildCount(); ps++) {
                       var childobj = {};
                       var childjson = [];
                       var rcdset = outPS.GetChild(0).GetChild(ps);
                       var property = rcdset.GetFirstProperty();
                       while (property != null) {
                           var value = rcdset.GetProperty(property);
                           childobj[property] = value
                               property = rcdset.GetNextProperty();
                       }
                       childjson.push(childobj);
                       parentobj = parentobj.concat(childjson);
                   }
                   //SiebelJS.Log("parent" + JSON.stringify(parentobj))
                   endpage = parentobj.length;
                   //SiebelJS.Log("end page" + endpage);
                   uniquevalues();
   
               }
               //end:To get consolidate records
               
               //start:to get the dropdown values for notetype and owner 
               function uniquevalues()
               {
                   var notetypearray=[];
                   var ownerarray=[];
                   //SiebelJS.Log("entered");
                   for(var i=0;i<parentobj.length;i++)
                   {
                       notetypearray[i]=parentobj[i]["Note Type"];
                       ownerarray[i]=parentobj[i]["Owner"];
                       
                   }
                   //SiebelJS.Log(notetypearray);
                   var notetypevaluesarray = notetypearray.filter(function(values, index, notetypearray) {
                       return notetypearray.indexOf(values)==index;
                      });
                      //SiebelJS.Log(notetypevaluesarray);
                      var ownervaluesarray = ownerarray.filter(function(values, index, ownerarray) {
                       return ownerarray.indexOf(values)==index;
                      });
                      //SiebelJS.Log(ownervaluesarray);
                      
                     
                   notetypevalues='<option></option>';
                   for(var note=0;note<notetypevaluesarray.length;note++)
                   {
                       notetypevalues +=' <option>'+notetypevaluesarray[note]+'</option>';
                   }
               $("#FilterInput_NoteType").html(notetypevalues);
               ownervalues='<option></option>';
                   for(var own=0;own<ownervaluesarray.length;own++)
                   {
                       ownervalues +=' <option>'+ownervaluesarray[own]+'</option>';
                   }
               $("#FilterInput_Owner").html(ownervalues);
   
               }
               //end:to get the dropdown values for notetype and owner 
       
           //start:sorting on consolidate notes
                   function sortrecords(asc, prop) {
                       if (Filter_search == "Y") {
                           filterobj = filterobj.sort(function (a, b) {
                                   if (asc) {
                                       return (a[prop] > b[prop]) ? 1 : ((a[prop] < b[prop]) ? -1 : 0);
                                   } else {
                                       return (b[prop] > a[prop]) ? 1 : ((b[prop] < a[prop]) ? -1 : 0);
                                   }
                               });
                           consolidatedNotes_GetRecords(filterobj);
                       } else {
                           parentobj = parentobj.sort(function (a, b) {
                                   if (asc) {
                                       return (a[prop] > b[prop]) ? 1 : ((a[prop] < b[prop]) ? -1 : 0);
                                   } else {
                                       return (b[prop] > a[prop]) ? 1 : ((b[prop] < a[prop]) ? -1 : 0);
                                   }
                               });
                           consolidatedNotes_GetRecords(parentobj);
                       }
                   }
           //end:sorting on consolidate notes
                 //Start-->BOM Tree Markup
            /* function producttree(i,assetrecords) {
                       var bommarkup = "";
                       bommarkup += '                <div class="SC-SO-main-block">';
                       RootOrderItemId=assetrecords[i]["Root Order Item Id"];
                       bommarkup += '                    <div class="SC-SO-panel container no-padding product-tree">';
                        bommarkup += '                        <div class="SC-SO-panel-head head-title bom-title"  id=PARENT'+assetrecords[i]["Asset Number"]+'>';
                        bommarkup += '                           <div class="SC-SO-panel-title">';
                       bommarkup += '                             <div class="SC-title-button">';
                       bommarkup += '                            <span class="no-margin font-size title-name">'+assetrecords[i]["SC Calc Long Description"]+' -'+assetrecords[i]["Asset Number"]+'</span>';
                       bommarkup += '                          </div>';
                       bommarkup += '                       </div>';
                       bommarkup += '                  </div>';
                       bommarkup += '          </div>';
                       bommarkup += '           </div>';
                       return bommarkup;
                         /*$("#SC-Produc-Tree-Body").html(bomarkup);
                       $("#SC-bom-tree").modal({
                           backdrop: 'static'
                       });
                       $(".modal-backdrop").css('background', '#ffffff');
                       
                   }*/
               //End--BOM Tree Markup
               //START--SNARRA Added Components code for Asset
           function ComponentsPopup(AssetId){
           var Componentsmarkup="";
           Componentsmarkup+='     <div class="modal-dialog" style="width:1300px !important">';
           Componentsmarkup+='          <div class="modal-content" style="height:700px !important">';
           Componentsmarkup+='          <div class="modal-header" style="height:100px !important">';
           Componentsmarkup+='           <button type="button" class="close SC-close-popup blue-bg" data-dismiss="modal">&times;</button>';
           Componentsmarkup+='                   <div class="header-content">';
           Componentsmarkup+='                      <div><img src="images/custom/sc-logo.png" class="sc-logo"></div>';
           Componentsmarkup+='                       <div class="sc-header-text">';
           Componentsmarkup+='                           <p class="no-margin">Add-ons Details</p>';
           Componentsmarkup+='                         </div>';
           Componentsmarkup+='                    </div>';
           Componentsmarkup+='            </div>';
           Componentsmarkup+='          <div class="modal-body" style="height:600px !important">';
           Componentsmarkup+='             <div class="SC-table-with-scroll-main" style="max-height:550px !important; overflow-y:auto">';
           Componentsmarkup+='                 <table class="SC-table" id="Components-table" >';
           Componentsmarkup+='                 <thead>';
           Componentsmarkup+='                      <tr>';
           Componentsmarkup+='                      <th></th>';
           Componentsmarkup+='                      <th>S.NO</th>';
           Componentsmarkup+='                      <th>Product Name</th>';
           Componentsmarkup+='                      <th>SKU #</th>';
           Componentsmarkup+='                      <th>Product Line</th>';
           Componentsmarkup+='                      <th>Purchased</th>';
           Componentsmarkup+='                       <th>Installed Date</th>';
           Componentsmarkup+='                        <th>Status</th>';
           Componentsmarkup+='                        <th>Order #</th>';
           Componentsmarkup+='                        <th>Start Price</th>';
           Componentsmarkup+='                        <th>Current Asset Value</th>';
           Componentsmarkup+='                        <th>Locked Flg</th>';
           Componentsmarkup+='                        <th>Warranty</th>';
           Componentsmarkup+='                        <th>Warranty End Date</th>';
           Componentsmarkup+='                        <th>Display</th>';
           Componentsmarkup+='                        <th>Asset #</th>';
           Componentsmarkup+='                        <th>Sale Location</th>';
           Componentsmarkup+='                    </tr>';
           Componentsmarkup+='             </thead>';
           Componentsmarkup+='             <tbody>';
           if(AssetId!=null && AssetId!=""){
               
                 Asset_Records = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact 360 Asset List Applet OUI"].GetPModel().GetRenderer().GetPM().Get("GetRecordSet");
                 var assetRecordsLength =  Asset_Records.length;
                 for (var asset = 0; asset < assetRecordsLength; asset++) {
                        if(Asset_Records[asset]["Asset Number"]==AssetId){
                           Componentsmarkup += '<tr id="' + asset + '">';
                           Componentsmarkup+='  <td class="child1"><span class="glyphicon glyphicon-plus-sign icon-img add-item child'+asset+'" id="BOM'+ Asset_Records[asset]["Asset Number"]+'"></span></td>';
                           Componentsmarkup+='  <td>1</td>';
                           Componentsmarkup += ' <td title="' + Asset_Records[asset]["SC Calc Long Description"] + '">' + Asset_Records[asset]["SC Calc Long Description"] + '</td>';
                           Componentsmarkup += ' <td>'+ Asset_Records[asset]["Product Part Number"]+'</td>';
                           Componentsmarkup += ' <td>'+ Asset_Records[asset]["Product Primary Product Line"] + '</td>';
                           Componentsmarkup += ' <td>'+ Asset_Records[asset]["Purchase Date"] + '</td>';
                           Componentsmarkup += ' <td>'+ Asset_Records[asset]["Install Date"] + '</td>';
                           Componentsmarkup += ' <td>'+ Asset_Records[asset]["Status"] + '</td>';
                           Componentsmarkup += ' <td>'+ Asset_Records[asset]["SC Order Number"] + '</td>';
                           Componentsmarkup += ' <td>'+ Asset_Records[asset]["Base Price"] + '</td>';
                           Componentsmarkup += ' <td>'+ Asset_Records[asset]["Adjusted Value"] + '</td>';
                           Componentsmarkup += ' <td title="'+Asset_Records[asset]["SC SRO Duplicate Flag"]+ '">' + Asset_Records[asset]["SC SRO Duplicate Flag"] + '</td>';
                           Componentsmarkup += ' <td>'+ Asset_Records[asset]["SC Prod Warranty Name"] + '</td>';
                           Componentsmarkup += ' <td>'+ Asset_Records[asset]["SC Prod Wnty Duration Calc"]+'</td>';
                           Componentsmarkup += ' <td>'+ Asset_Records[asset]["SC Display Sale Flag"]+'</td>';
                           Componentsmarkup += ' <td>'+ Asset_Records[asset]["Asset Number"] + '</a></td>';
                           Componentsmarkup += ' <td>'+ Asset_Records[asset]["SC Division"]+'</td>';
                           Componentsmarkup += '</tr>';
                        }
                       }
           
               /* var inPS="";
               var OutPS="";
               inPS = SiebelApp.S_App.NewPropertySet();
               OutPS = SiebelApp.S_App.NewPropertySet();
               var fieldnames="Asset Number,Parent Asset Number,Product Part Number,SC Calc Long Description,Product Primary Product Line,Purchase Date,Install Date,Status,SC Order Number,Base Price,Adjusted Value,SC SRO Duplicate Flag,SC Prod Warranty Name,SC Prod Wnty Duration Calc,SC Display Sale Flag,Asset Number,SC Division";
               var fieldvalues="";
               inPS.SetProperty("BO","Contact");
               inPS.SetProperty("BC","Asset Mgmt - Asset - Header");
               inPS.SetProperty("FieldsArray",fieldnames );
               inPS.SetProperty("SearchSpecification","[Parent Asset Number]='"+AssetId+"'");
               Bservice = SiebelApp.S_App.GetService("SC Custom Query"); //get service
               OutPS = Bservice.InvokeMethod("Query", inPS);
               var outputRecordSet="";
               outputRecordSet = OutPS.GetChild(0).GetProperty("OutputRecordSet");
               if(outputRecordSet!="}"){
               var childsdataArray = new Array;
               childsdataArray = outputRecordSet.split(";");
               for(var childpr=0;childpr<childsdataArray.length;childpr++){
                   var childData = '';
                           var str = childsdataArray[childpr];
                           var found = false;
                        var SCCalLongDes="",SCCalcdescname="";
                        var split_cars = str.split('","');
                        for (var i = 0; i < split_cars.length; i++) {
                             SiebelJS.Log("values:"+split_cars[i]);
                            if(i==3){
                          SiebelJS.Log("prod name:"+split_cars[i]);
                          var desc_name = split_cars[i].split('":"');
                          var prod_name="";
                              for(var j = 0;j<desc_name.length;j++){
                                  if(j == 1){
                                      if( /"/.test( desc_name[j] )){
                                       desc_name[j]=desc_name[j].replace(/"/g, '\\"');
                                       prod_name = desc_name[j];
                                           if(prod_name!=""){
                                                SCCalcdescname+= prod_name;
                                           }
                                      }
                                 } else{
                                    SCCalcdescname+=desc_name[j]+'":"';  
                                 }
                                 
                               }
                               SiebelJS.Log("SCCalcdescname:"+SCCalcdescname);
                               SCCalLongDes+=SCCalcdescname+'","';
                            }
                            else{
                                if(i !=3){
                                    if(i== (split_cars.length-1)){
                                       SCCalLongDes+=split_cars[i];
                                    }else{
                                      SCCalLongDes+=split_cars[i]+'","'; 
                                    }
                                }
                            }
                        }
                       if(prod_name!=""){
                               str = SCCalLongDes;
                           }
                       str = str.replace(/(".,*?")(?!\})/g, function(match) {
                       if(found && match.endsWith('"')) return match.substring(0, match.length - 1) + '\\"';
                       found = found || match === '"SC Calc Long Description"';
   
                       return match;
                       });
                          str = str.replace(/"/g, '\\"');
                       var obj = JSON.parse(str);
                       str=str.replace(/\n/g,"");
                       childData = JSON.parse(str);
                       if(childsdataArray.length>=1){
                             baseprice = childData["Base Price"]!=""?parseFloat(childData["Base Price"]):0.00;
                                adjustvalue = childData["Adjusted Value"]!=""?parseFloat(childData["Adjusted Value"]):0.00;
                               Componentsmarkup+='             <tr id="BOM'+childData["Parent Asset Number"]+'">';
                               Componentsmarkup+='            <td class="child'+(childpr+1)+'"><span class="glyphicon glyphicon-plus-sign icon-img add-item child'+childpr+'" id="'+childData["Asset Number"]+'"></span></td>';
                               Componentsmarkup+='            <td>'+(childpr+1)+'</td>';
                               Componentsmarkup+='            <td>'+childData["SC Calc Long Description"]+'</td>';
                               Componentsmarkup+='            <td>'+childData["Product Part Number"]+'</td>';
                               Componentsmarkup+='            <td>'+childData["Product Primary Product Line"]+'</td>';
                               Componentsmarkup+='            <td>'+childData["Purchase Date"]+'</td>';
                               Componentsmarkup+='              <td>'+childData["Install Date"]+'</td>';
                               Componentsmarkup+='              <td>'+childData["Status"]+'</td>';
                               Componentsmarkup+='              <td>'+childData["SC Order Number"]+'</td>';
                               Componentsmarkup+='              <td>$'+baseprice.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,')+'</td>';
                               Componentsmarkup+='              <td>$'+adjustvalue.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,')+'</td>';
                               Componentsmarkup+='              <td>'+childData["SC SRO Duplicate Flag"]+'</td>';
                               Componentsmarkup+='              <td>'+childData["SC Prod Warranty Name"]+'</td>';
                               Componentsmarkup+='              <td>'+childData["SC Prod Wnty Duration Calc"]+'</td>';
                               Componentsmarkup+='              <td>'+childData["SC Display Sale Flag"]+'</td>';
                               Componentsmarkup+='              <td>'+childData["Asset Number"]+'</td>';
                               Componentsmarkup+='              <td>'+childData["SC Division"]+'</td>';
                               Componentsmarkup+='             </tr>';
                               
                           }
                       }
               }
             }*/
             
             
             
           }
           
           Componentsmarkup+='           </tbody>';
           Componentsmarkup+='          </table>';
           Componentsmarkup+='    </div>';
           Componentsmarkup+='  </div>';
           Componentsmarkup+='  </div>';
           Componentsmarkup+='  </div>';
           return Componentsmarkup;
       }
               //END--SNARRA Added Components  code for Asset 
           //VALLA:07-Aug-2020: Added Code for Synchrony Financing Change
           function UpdateAvailableAmount(){
               $("body").trigger('Custom.Start');
               setTimeout(function(){
                   var Con_RS = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact Form Applet"].GetPModel().GetRenderer().GetPM().Get("GetRecordSet");
                   var AccountNumber = Con_RS[0]["SC Account Number"];
                   var MerchandId = Con_RS[0]["SC MerchantId"];
                   var ApplictnStatus = Con_RS[0]["SC Application Status"];
                   var AccountType = Con_RS[0]["SC Account Type"];
                   var SynchrnyStatus = Con_RS[0]["SC Synchrony Status"];
                   if(AccountType == "Synchrony" && (ApplictnStatus == 'Approved' || ApplictnStatus == 'Approve' || ApplictnStatus == 'APPROVED' || ApplictnStatus == 'APPROVE' )){
                       if(AccountNumber != 0 && AccountNumber != undefined && AccountNumber != "" && AccountNumber != null){
                           var searchExpr = "[Type] = 'SC_SYNCHRONY_REFRESH_DAYS' AND [Name] = 'Number Of Days' AND [Active] = 'Y'";
                           var LstSyncrnyRefrshDT = Con_RS[0]["SC Synchrony Last Refresh"];
                           var NumberofDays = SC_OUI_Methods.SCGetOrderLoVs(searchExpr);
                           if(LstSyncrnyRefrshDT != undefined && LstSyncrnyRefrshDT != "" && LstSyncrnyRefrshDT != null){
                               var newDT = new Date();
                               var SynchronyDT = new Date(LstSyncrnyRefrshDT).getTime();
                               var CurrentDT = newDT.getTime();
                               var LstSyncrnyRefrshDys =(CurrentDT - SynchronyDT)/(1000*60*60*24);
                               if(parseInt(NumberofDays[0]) < LstSyncrnyRefrshDys){
                                   var Synchrny_inPS = '',Synchrny_Service = '',Synchrny_outPS = '';
                                   Synchrny_inPS = SiebelApp.S_App.NewPropertySet();
                                   Synchrny_inPS = SiebelApp.S_App.NewPropertySet();
                                   Synchrny_inPS.SetProperty("Object Id", Con_RS[0]["Id"]);
                                   Synchrny_inPS.SetProperty("AccountNumber", AccountNumber);
                                   Synchrny_inPS.SetProperty("MerchantNumber", MerchandId);
                                   Synchrny_inPS.SetProperty("ProcessName", "SC Get Synchrony Available Credit");
                                   
                                   Synchrny_Service = SiebelApp.S_App.GetService("Workflow Process Manager"); //get service
                                   Synchrny_outPS = Synchrny_Service.InvokeMethod("RunProcess", Synchrny_inPS); //invoke the method
                               }
                           }
                           else if(LstSyncrnyRefrshDT == undefined || LstSyncrnyRefrshDT == "" || LstSyncrnyRefrshDT == null){
                               var Synchrny_inPS = '',Synchrny_Service = '',Synchrny_outPS = '';;
                               Synchrny_inPS = SiebelApp.S_App.NewPropertySet();
                               Synchrny_inPS = SiebelApp.S_App.NewPropertySet();
                               Synchrny_inPS.SetProperty("Object Id", Con_RS[0]["Id"]);
                               Synchrny_inPS.SetProperty("AccountNumber", AccountNumber);
                               Synchrny_inPS.SetProperty("MerchantNumber", MerchandId);
                               Synchrny_inPS.SetProperty("ProcessName", "SC Get Synchrony Available Credit");
                               Synchrny_Service = SiebelApp.S_App.GetService("Workflow Process Manager"); //get service
                               Synchrny_outPS = Synchrny_Service.InvokeMethod("RunProcess", Synchrny_inPS); //invoke the method
                           }else{
                               // do nothing for now.
                           }
                       }
                       SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact Form Applet"].InvokeMethod("RefreshBusComp");
                       var Con_RS = SiebelApp.S_App.GetActiveView().GetAppletMap()["SC Contact Form Applet"].GetPModel().GetRenderer().GetPM().Get("GetRecordSet");
                       var AccountNumber = Con_RS[0]["SC Account Number"];
                       var SynchrnyDT = Con_RS[0]["SC Synchrony Last Refresh"];
                       var SynchrnyStatus = Con_RS[0]["SC Synchrony Status"];
                       var AvailableAmt = Con_RS[0]["SC Available Amount"];
                       if(AccountNumber != 0 && AccountNumber != undefined && AccountNumber != "" && AccountNumber != null){
                           if(SynchrnyDT != '' && SynchrnyDT != null && SynchrnyDT != undefined){
                               SynchrnyDT = SynchrnyDT.split(' ')[0];
                           }
                           if(SynchrnyStatus == "Account Found"){
                               if(AvailableAmt < 0){
                                   $("#SC-Synchrony-label").attr("style","color: #FF0000 !important; pointer-events: all!important; font-weight: 700!important;");
                                   $("#SC-Synchrony-label").text("Available Credit Limit from Synchrony is $0 as of "+SynchrnyDT);
                               }
                               else if(AvailableAmt != "" && AvailableAmt != null && AvailableAmt != undefined){
                                   var FormattedAmt = new Intl.NumberFormat('en-US', { 
                                       style: 'currency', 
                                       currency: 'USD' 
                                   }).format(AvailableAmt);
                                   AvailableAmt = FormattedAmt.substring(0, FormattedAmt.length-3);
                                   $("#SC-Synchrony-label").text("Available Credit Limit from Synchrony is "+AvailableAmt+" as of "+SynchrnyDT);
                                   $("#SC-Synchrony-label").attr("style","color: #337ab7 !important; pointer-events: all!important; font-weight: 700!important;");
                               }
                           }
                           else if(SynchrnyStatus == "Account Not Found" || SynchrnyStatus == "Account Lookup Error"){
                               $("#SC-Synchrony-label").text("Synchrony Financing Account on file is no longer valid as of now");
                               $("#SC-Synchrony-label").attr("style","color: #FF0000 !important; pointer-events: all!important; font-weight: 700!important;");
                               $("#SC-Synchrony-refresh").hide();
                           }
                           
                       }
                       else{
                           var sContactId = ConFormApp_RS[0]["Id"];
                           var inPS="",OutPS="";
                           inPS = SiebelApp.S_App.NewPropertySet();
                           OutPS = SiebelApp.S_App.NewPropertySet();
                           var fieldnames="SC Application Status,SC Available Amount,SC Account Number,SC Account Type,SC Synchrony Status,SC Synchrony Last Refresh";
                           var fieldvalues="";
                           inPS.SetProperty("BO","Contact");
                           inPS.SetProperty("BC","SC Contact Finance OUI");
                           inPS.SetProperty("FieldsArray",fieldnames );
                           inPS.SetProperty("SearchSpecification","[SC Account Type]='Synchrony' AND [Contact Id] = '"+sContactId+"'");
                           var Bservice = SiebelApp.S_App.GetService("SC Custom Query"); //get service
                           OutPS = Bservice.InvokeMethod("Query", inPS);
                           var outputRecordSet="";
                           outputRecordSet = OutPS.GetChild(0).GetProperty("OutputRecordSet");
                           if(outputRecordSet!="}"){
                               var childsdataArray = new Array;
                               childsdataArray = outputRecordSet.split(";");
                               var finData = JSON.parse(childsdataArray[0]);
                               var SynchrnyDT = finData['SC Synchrony Last Refresh']
                               if(SynchrnyDT != '' && SynchrnyDT != null && SynchrnyDT != undefined){
                                   SynchrnyDT = SynchrnyDT.split(' ')[0];
                               }
                               $("#SC-Synchrony-label").text("Synchrony Financing Account on file is no longer valid as of "+SynchrnyDT);
                               $("#SC-Synchrony-label").attr("style","color: #FF0000 !important; pointer-events: all!important; font-weight: 700!important;");
                               $("#SC-Synchrony-refresh").hide();
                           }else{
                               $("#SC-Synchrony-label").text("NoFinancingAccountonfile");
                               $("#SC-Synchrony-label").attr("style","color: #FF0000 !important; pointer-events: all!important; font-weight: 700!important;");
                               $("#SC-Synchrony-refresh").hide();
                           }
                       }
                   }
                   else if(AccountType == "Synchrony" && (ApplictnStatus == "CALL LATER" || ApplictnStatus == "CALL NOW" || ApplictnStatus == "Pending")){
                       $("#SC-Synchrony-label").text("Synchrony Financing Account status unknown, please contact Synchrony");
                       $("#SC-Synchrony-label").attr("style","color: #FF0000 !important; pointer-events: all!important; font-weight: 700!important;");	
                       $("#SC-Synchrony-refresh").hide();
                   }
                   else if(AccountType == "Helpcard"){
                       $("#SC-Synchrony-label").text("Vive Financing Account on file");
                       $("#SC-Synchrony-label").attr("style","color: #337ab7 !important; pointer-events: all!important; font-weight: 700!important;");
                       $("#SC-Synchrony-refresh").hide();
                   }
                   else{
                       var sContactId = ConFormApp_RS[0]["Id"];
                       var inPS="",OutPS="";
                       inPS = SiebelApp.S_App.NewPropertySet();
                       OutPS = SiebelApp.S_App.NewPropertySet();
                       var fieldnames="SC Application Status,SC Available Amount,SC Account Number,SC Account Type,SC Synchrony Status,SC Synchrony Last Refresh";
                       var fieldvalues="";
                       inPS.SetProperty("BO","Contact");
                       inPS.SetProperty("BC","SC Contact Finance OUI");
                       inPS.SetProperty("FieldsArray",fieldnames );
                       inPS.SetProperty("SearchSpecification","[SC Account Type]='Synchrony' AND [Contact Id] = '"+sContactId+"'");
                       var Bservice = SiebelApp.S_App.GetService("SC Custom Query"); //get service
                       OutPS = Bservice.InvokeMethod("Query", inPS);
                       var outputRecordSet="";
                       outputRecordSet = OutPS.GetChild(0).GetProperty("OutputRecordSet");
                       if(outputRecordSet!="}"){
                           var childsdataArray = new Array;
                           childsdataArray = outputRecordSet.split(";");
                           var finData = JSON.parse(childsdataArray[0]);
                           var SynchrnyDT = finData['SC Synchrony Last Refresh']
                           if(SynchrnyDT != '' && SynchrnyDT != null && SynchrnyDT != undefined){
                               SynchrnyDT = SynchrnyDT.split(' ')[0];
                           }
                           $("#SC-Synchrony-label").text("Synchrony Financing Account on file is no longer valid as of "+SynchrnyDT);
                           $("#SC-Synchrony-label").attr("style","color: #FF0000 !important; pointer-events: all!important; font-weight: 700!important;");
                           $("#SC-Synchrony-refresh").hide();
                       }else{
                           $("#SC-Synchrony-label").text("NoFinancingAccountonfile");
                           $("#SC-Synchrony-label").attr("style","color: #FF0000 !important; pointer-events: all!important; font-weight: 700!important;");
                           $("#SC-Synchrony-refresh").hide();
                       }
                   }
               $("body").trigger('Custom.End');
               },500);
           }
           //VALLA:07-Aug-2020: Added Code for Synchrony Financing Change
           
           
           SCContact360ViewPR.prototype.EndLife = function () {
                SiebelAppFacade.SCContact360ViewPR.superclass.EndLife.apply(this, arguments);
                //SiebelJS.Log("Local--Contact 360 View PR --EndLife");
                if(localStorage.getItem('CTIToolbar')== "N"){
                    $(".SC-data-container").css("position","absolute"); 
                }
                $(document).unbind("click");
                $(document).unbind("focus");
                $(document).unbind("focusout");
               if(localStorage.getItem('whitescreen')==0){
                   localStorage.setItem('whitescreen', 2);
                   $("#_swescrnbar").hide();
                   $("#_swethreadbar").hide();
                   $("#_sweappmenu").hide();
                   $("#s_vctrl_div").hide();
                   $(".siebui-button-toolbar").hide();
                   $("#_sweview").hide();
                   $('#_swecontent').prepend(scOUIMarkups.CustomWhiteScreenTimer());
                   $("#custommaskoverlay").show();
               }
               else if(localStorage.getItem('whitescreen')==1){
                   $("#_swescrnbar").show();
                   $("#_swethreadbar").show();
                   $("#_sweappmenu").show();
                   $("#s_vctrl_div").show();
                   $(".siebui-button-toolbar").show();
                   $("#_sweview").show();
                   $('#CommunicationPanelContainer').css("padding-top","0px");
               }
               pinids=[];
               //unbind Events
               $("body").unbind('Custom.Start');
               $("body").unbind('Custom.End');
               //SPATIBAN:Commented below code for Calculator remains stuck issue
               //$("body").unbind();
           }
         
             // to store the html in local storage
       function storesearchfields(){
           $("input[type=text]").each(function(){
               $(this).attr("value",$(this).val());
           });
           
           $("select option").each(function(){
           if ($(this).attr("selected")=="selected")
               $(this).attr("selected","true");
           else
               $(this).removeAttr("selected");
           });
       }
         
         function referredsearchfields(){
           $("#sc-referred-search-box").each(function(){
               $(this).attr("value",$(this).val());
           });
           
           $("#sc-select-box").each(function(){
           if ($(this).attr("selected")=="selected")
               $(this).attr("selected","true");
           else
               $(this).removeAttr("selected");
           });
       }
       //Get the Contacts results for referref By 
       function RefByContactSearch(conrecordset){
           var refbymarkup = '';
           var ContactDetails="";
           refbymarkup+='                                <table class="SC-table" id="SC-table-ref-Con">';
           refbymarkup+='                                    <thead>';
           refbymarkup+='                                        <tr>';
           refbymarkup+='                                            <th class="sort-by" id="sp-lastname">last name</th>';
           refbymarkup+='                                            <th class="sort-by" id="sp-firstname">first name</th>';
           refbymarkup+='                                            <th class="sort-by" id="sp-address">address</th>';
           refbymarkup+='                                            <th class="sort-by" id="sp-city">city</th>';
           refbymarkup+='                                            <th class="sort-by" id="sp-state">state</th>';
           refbymarkup+='                                            <th class="sort-by" id="sp-zipcode">zipcode</th>';
           refbymarkup+='                                        </tr>';
           refbymarkup+='                                    </thead>';
           refbymarkup+='                                    <tbody>';
           for (i=0;i<conrecordset.length;i++)
           {
               ContactDetails="";
               ContactDetails=conrecordset[i]["Id"]+'_'+conrecordset[i]["First Name"]+'_'+conrecordset[i]["Last Name"];
               refbymarkup += '		<tr id="ref_row'+i+'">';
               refbymarkup += '      <td><span style="display:none" id="'+i+'refcondet">'+ContactDetails+'</span>'+conrecordset[i]["Last Name"]+'</td>';
               refbymarkup += '      <td>'+conrecordset[i]["First Name"]+'</td>';
               refbymarkup += '      <td>'+conrecordset[i]["Personal Street Address"]+'</td>';
               refbymarkup += '      <td>'+conrecordset[i]["Personal City"]+'</td>';
               refbymarkup += '      <td>'+conrecordset[i]["Personal State"]+'</td>';
               refbymarkup += '      <td>'+conrecordset[i]["Personal Postal Code"]+'</td>';
               refbymarkup += '  </tr>';
           }
           refbymarkup+='                                    </tbody>';
           refbymarkup+='                                </table>';
           return refbymarkup;
       }
       //code to search contacts based on the input
       function searchContact(){
           referredsearchfields();
           
           $("body").trigger('Custom.Start');
           var searchObj = [];
           var finalObj = {};
           $("select[id*='field']").each(function() {
               var fname = $(this).val();
               var fvalue = $(this).next().val();
               var phonespec="";
               if (fname !== "" && fvalue !== "" && fvalue !== undefined && fname !== undefined) {
                   if(fname=="Phone Number"){
                    //var phone=["Cellular Phone #","Work Phone #","Home Phone #"];
                        var phone=["Primary Contact Cellular Phone #","Primary Contact Home Phone #","Primary Contact Work Phone #"];
                       for (i=0;i<phone.length;i++){
                       if(i<phone.length-1){
                           phonespec = phonespec+"["+phone[i]+"] Like '"+fvalue+"' OR "
                       }
                       else{
                           phonespec = phonespec+"["+phone[i]+"] Like '"+fvalue+"'";
                       }
                    }
                    searchObj.push({"field_name": "Cellular Phone #","value": phonespec});
                   }
                   else if(fname=="Customer Number" || fname=="Employee Number"){
                       fvalue = fvalue+"*";
                       searchObj.push({
                       "field_name": fname,
                       "value": fvalue
                       });
                   }
                   //SCHERKU: for date of first activity field
                   else if(fname=="Date Of First Activity"){
                       fvalue = fvalue;
                       searchObj.push({
                       "field_name": fname,
                       "value": fvalue
                       });
                   }
                   else if(fname=="Email Address"){
                     fvalue = fvalue;
                       searchObj.push({
                       "field_name": fname,
                       "value": fvalue
                       });
                   }
                   else{
                       fvalue = fvalue.toUpperCase()+"*";
                       //SJAKKIDI: Start Added for appostrophe text field values
                       fvalue = '"'+fvalue+'"';
                       //SJAKKIDI: End Added for appostrophe text field values
                       searchObj.push({
                       "field_name": fname,
                       "value": fvalue
                       });
                       
                   }
               }
           });
   
           if (searchObj.length > 0) {
               for (var i = 0; i < searchObj.length; i++) {
                   finalObj[searchObj[i].field_name] = searchObj[i].value;
               }
           }
           
          FieldQueryPair = finalObj;
          SC_OUI_Methods.ExecuteListAppletFrame(SiebelConstants,FieldQueryPair,"SC LOY Member List Applet");
                       
       }
       
       return SCContact360ViewPR;
      }()
     );
     return "SiebelAppFacade.SCContact360ViewPR";
    })
   }